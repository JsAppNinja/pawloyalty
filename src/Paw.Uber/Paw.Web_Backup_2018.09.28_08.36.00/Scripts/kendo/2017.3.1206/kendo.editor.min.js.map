{"version":3,"sources":["kendo.editor.js"],"names":["f","define","kendo","UndoRedoStack","Observable","extend","init","options","fn","call","this","clear","events","push","command","stack","slice","currentCommandIndex","undo","canUndo","trigger","redo","canRedo","length","deepExtend","util","amd","a1","a2","a3","$","undefined","Tool","FormatTool","bomFill","emptyElementContent","emptyTableCellContent","window","Class","Widget","ui","os","support","mobileOS","browser","proxy","keys","SELECT","SELECT_OVERLAY_SELECTOR","ToolTemplate","getHtml","template","useWithBlock","EditorUtils","editorWrapperTemplate","buttonTemplate","colorPickerTemplate","comboBoxTemplate","dropDownListTemplate","separatorTemplate","overflowAnchorTemplate","formatByName","name","format","i","inArray","tags","getToolCssClass","toolCssClassNames","superscript","subscript","justifyLeft","justifyCenter","justifyRight","justifyFull","insertUnorderedList","insertOrderedList","import","indent","outdent","createLink","unlink","insertImage","insertFile","viewHtml","foreColor","backColor","createTable","addColumnLeft","addColumnRight","addRowAbove","addRowBelow","deleteRow","deleteColumn","tableWizard","tableWizardInsert","cleanFormatting","cssClass","registerTool","toolName","tool","toolOptions","toLowerCase","Editor","defaultTools","registerFormat","formatName","formats","messages","bold","italic","underline","strikethrough","insertHtml","fontName","fontNameInherit","fontSize","fontSizeInherit","formatBlock","formatting","style","emptyFolder","editAreaTitle","uploadFile","overflowAnchor","orderBy","orderBySize","orderByName","invalidFileType","deleteFile","overwriteFile","directoryNotFound","imageWebAddress","imageAltText","imageWidth","imageHeight","fileWebAddress","fileTitle","fileText","linkWebAddress","linkText","linkToolTip","linkOpenInNewWindow","dialogUpdate","dialogInsert","dialogOk","dialogCancel","createTableHint","tableTab","cellTab","accessibilityTab","caption","summary","width","height","units","cellSpacing","cellPadding","cellMargin","alignment","background","id","border","borderStyle","collapseBorders","wrapText","associateCellsWithHeaders","alignLeft","alignCenter","alignRight","alignLeftTop","alignCenterTop","alignRightTop","alignLeftMiddle","alignCenterMiddle","alignRightMiddle","alignLeftBottom","alignCenterBottom","alignRightBottom","alignRemove","columns","rows","selectAllCells","exportAs","supportedBrowser","ios","flatVersion","document","documentElement","contentEditable","toolGroups","basic","lists","indenting","links","tables","element","value","toolbarContainer","toolbarOptions","type","domElement","that","editorNS","editor","dom","Dom","tools","_registerHandler","closest","update","_wrapTextarea","wrapper","find","attr","addClass","popup","insertBefore","toolbar","Toolbar","bindTo","setTimeout","heightStyle","expectedHeight","parseInt","actualHeight","indexOf","isNaN","_resizable","_initializeContentElement","keyboard","Keyboard","BackspaceHandler","TypingHandler","SystemHandler","SelectAllHandler","clipboard","Clipboard","undoRedoStack","textarea","encoded","trim","defaultValue","replace","innerHTML","mousedown","_endTyping","mouseup","e","_mouseup","_initializeImmutables","resize","notify","setOptions","isTypingInProgress","endTyping","saveSelection","_selectionChange","_selectionStarted","resizableWidget","resizable","isResizable","isPlainObject","content","insertAfter","kendoResizable","start","currentTarget","initialSize","append","delta","y","initialDelta","newSize","min","max","Infinity","Math","resizeend","remove","getKendoResizable","draggable","ignore","_initializeTableResizing","TableResizing","create","_showTableResizeHandlesProxy","_showTableResizeHandles","bind","_destroyTableResizing","tableResizing","destroy","unbind","showResizeHandles","_initializeColumnResizing","ColumnResizing","_destroyColumnResizing","columnResizing","_initializeRowResizing","RowResizing","_destroyRowResizing","rowResizing","w","h","editorWrap","editArea","appendTo","css","_createContentElement","stylesheets","iframe","wnd","doc","specifiedDomain","domain","domainScript","src","location","hostname","hide","title","frameBorder","tabIndex","contentWindow","contentDocument","one","decorateFrom","body","open","write","isRtl","msie","edge","map","href","join","close","_blur","old","val","_oldValue","encodedValue","get","ownerDocument","_spellCorrect","beforeCorrection","falseTrigger","contextmenu","_spellCorrectTimeout","RestorePoint","getRange","input","mozilla","_finishUpdate","handler","eventNames","t","NS","_handlers","hasOwnProperty","applyEventMap","split","on","_deregisterHandlers","handlers","off","blurTrigger","mousedownTrigger","interval","createElement","setAttribute","getElementsByTagName","appendChild","setInterval","clearInterval","_mousedown","execCommand","touch","keydown","_activeElement","focus","range","left","container","offset","direction","next","nextChar","keyCode","BACKSPACE","DELETE","getAttribute","F10","preventDefault","LEFT","RIGHT","nodeType","nodeValue","setStart","collapse","selectRange","toolFromShortcut","keyPressCommand","test","exec","_runPostContentKeyCommands","clearTimeout","keypress","keyup","selectionCodes","TAB","PAGEUP","PAGEDOWN","END","HOME","UP","DOWN","INSERT","ctrlKey","altKey","shiftKey","click","target","createRange","selectNode","cut copy paste drop dragover","focusin","hasAttribute","show","focusout","toolbarContainerElement","active","contains","preventPopupHide","is","focused","removeClass","immutables","Immutables","parents","stopPropagation","gecko","which","o","cmd","toolsFromShortcut","changesContent","refresh","_destroyResizings","deserialization","custom","serialization","entities","semantic","scripts","pasteCleanup","all","keepNewLines","msAllFormatting","msConvertLists","msTags","none","span","dialogOptions","modal","animation","imageBrowser","fileBrowser","text","concat","_focusOutside","_destroyUploadWidget","dispose","tempInput","blur","_uploadWidget","state","textNodes","finder","RangeUtils","collapsed","startContainer","getFormat","isFormatted","html","currentHtml","Serializer","domToXhtml","htmlToDom","selectionRestorePoint","refreshTools","commonAncestorContainer","_focusBody","scrollTop","activeElement","restoreSelection","toRange","encode","getSelection","SelectionUtils","selectionFromDocument","selection","removeAllRanges","addRange","rangeCount","getRangeAt","endContainer","startOffset","endOffset","_containsRange","isAncestorOrSelf","_deleteSavedRange","_range","selectedHtml","cloneContents","paste","InsertHtmlCommand","params","prevented","Error","toolById","async","change","managesUndoRedo","key","ctrl","plugin","initialize","unselectable","children","commandArguments","noop","FormatCommand","formatter","nodes","toggleClass","version","_bomFill","PDFMixin","prototype","_drawPDF","drawing","drawDOM","pdf","saveAsPDF","progress","Deferred","promise","args","then","root","exportPDF","done","dataURI","saveAs","fileName","proxyURL","proxyTarget","forceProxy","resolve","fail","err","reject","jQuery","makeMap","items","len","obj","whitespace","emptyspace","rgb","bom","whitespaceOrBom","persistedScrollTop","cssAttributes","htmlRe","entityRe","entityTable","STYLE","FLOAT","CSSFLOAT","STYLEFLOAT","CLASS","KMARKER","empty","nonListBlockElements","blockElements","block","inlineElements","inline","fillAttrs","normalize","node","parent","firstChild","prev","nextSibling","34","38","39","60","62","160","161","162","163","164","165","166","167","168","169","170","171","172","173","174","175","176","177","178","179","180","181","182","183","184","185","186","187","188","189","190","191","192","193","194","195","196","197","198","199","200","201","202","203","204","205","206","207","208","209","210","211","212","213","214","215","216","217","218","219","220","221","222","223","224","225","226","227","228","229","230","231","232","233","234","235","236","237","238","239","240","241","242","243","244","245","246","247","248","249","250","251","252","253","254","255","402","913","914","915","916","917","918","919","920","921","922","923","924","925","926","927","928","929","931","932","933","934","935","936","937","945","946","947","948","949","950","951","952","953","954","955","956","957","958","959","960","961","962","963","964","965","966","967","968","969","977","978","982","8226","8230","8242","8243","8254","8260","8472","8465","8476","8482","8501","8592","8593","8594","8595","8596","8629","8656","8657","8658","8659","8660","8704","8706","8707","8709","8711","8712","8713","8715","8719","8721","8722","8727","8730","8733","8734","8736","8743","8744","8745","8746","8747","8756","8764","8773","8776","8800","8801","8804","8805","8834","8835","8836","8838","8839","8853","8855","8869","8901","8968","8969","8970","8971","9001","9002","9674","9824","9827","9829","9830","338","339","352","353","376","710","732","8194","8195","8201","8204","8205","8206","8207","8211","8212","8216","8217","8218","8220","8221","8222","8224","8225","8240","8249","8250","8364","findNodeIndex","skipText","previousSibling","isDataNode","data","isAncestorOf","parentNode","findClosestAncestor","getNodeLength","childNodes","splitDataNode","temp","newNode","cloneNode","denormalizedText","iterator","deleteData","attrEquals","attributes","cssFloat","blockParentOrBody","parentOfType","blockParents","blocks","windowFromDocument","defaultView","parentWindow","nodeTypes","ELEMENT_NODE","ATTRIBUTE_NODE","TEXT_NODE","CDATA_SECTION_NODE","ENTITY_REFERENCE_NODE","ENTITY_NODE","PROCESSING_INSTRUCTION_NODE","COMMENT_NODE","DOCUMENT_NODE","DOCUMENT_TYPE_NODE","DOCUMENT_FRAGMENT_NODE","NOTATION_NODE","toHex","color","matches","x","toString","encodableChars","c","charCode","charCodeAt","entity","isBom","stripBom","stripBomNode","removeChild","insignificant","className","_moz_dirty","_moz_editor_bogus_node","tableCell","significantNodes","grep","child","emptyTextNode","emptyNode","nodeName","significantChildNodes","isWhitespace","lastTextNode","result","lastChild","isMarker","allWhitespaceContent","isEmptyspace","htmlIndentSpace","sibling","isPrevBlock","isNextBlock","el","isBlock","isEmpty","isInline","list","scrollContainer","webkit","compatMode","scrollTo","toStart","elementTop","elementHeight","marker","windowHeight","innerHeight","top","offsetHeight","ceil","persistScrollTop","offsetParent","offsetTop","offsetLeft","restoreScrollTop","insertAt","newElement","position","referenceElement","removeChildren","removeTextSiblings","tag","closestBy","condition","rootCondition","ofType","changeTag","tagName","skipAttributes","attribute","specified","cssText","editableParent","wrap","unwrap","createEmptyNode","removeAttribute","unstyle","inlineStyle","getEffectiveBackground","backgroundStyle","innerText","classNames","classes","commonAncestor","ancestors","first","j","count","arguments","paths","minPathLength","output","reverse","closestSplittableParent","editableParents","editableAncestor","apply","closestEditable","types","editable","closestEditableOfType","filter","invert","filterFn","filterBy","match","ensureTrailingBreaks","elements","ensureTrailingBreak","removeTrailingBreak","br","supportsLeadingWhitespace","isFunction","TD","fontSizeMappings","quoteRe","brRe","pixelRe","emptyPRe","cssDeclaration","sizzleAttr","scriptAttr","onerrorRe","div","toEditableHtml","_toEditableImmutables","immutable","last","prependTo","_fillEmptyElements","each","p","_removeSystemElements","_resetOrderedLists","ol","originalStart","ols","_preventScriptExecution","l","legacyIE","originalSrc","originalHref","deserialize","semanticFilter","mapStart","cssProperties","property","properties","lastIndex","styleAttr","specifiedAttributes","$node","htmlEncode","skip","skipEncoding","childNode","isEmptyBomNode","mapper","previous","jqNode","serialize","hasClass","tagMap","end","textOnly","childrenCount","textChild","runCustom","k:script","font","size","semanticAttributes","textDecoration","fontFamily","strong","em","b","u","styleObj","item","splice","face","script","compareBoundaries","startAncestor","endAncestor","fixIvalidRange","isInvalidRange","ex","updateRangeProperties","textRangeContainer","textRange","duplicate","right","parentElement","adoptContainer","cursorNode","textOffset","isData","anchorNode","anchorParent","cursor","createTextRange","moveToElementText","setEndPoint","adoptEndPoint","index","comparison","appended","compareEndPoints","RangeIterator","W3CSelection","RangeEnumerator","ImmutablesRangeIterator","ImmutablesRangeEnumerator","Marker","boundary","selectionFromWindow","selectionFromRange","rangeDocument","documentFromRange","W3CRange","setEnd","setStartBefore","setStartAfter","setEndBefore","setEndAfter","selectNodeContents","deleteContents","cloneRange","deleteSubtree","hasPartialSubtree","getSubtreeIterator","cloneSubtree","frag","createDocumentFragment","extractContents","extractSubtree","originalRange","insertNode","startNodeName","endNodeName","fromNode","_current","_next","_end","hasNext","current","traverse","callback","nodeIndex","inStartContainer","inEndContainer","getSubRange","subRange","select","movedStart","movedEnd","enumerate","visit","rootNode","getEditable","nodeToPath","serializedImmutables","removeImmutables","restoreImmutables","lastType","restoreHtml","path","toRangePoint","denormalizedOffset","caret","addCaret","removeCaret","containerIndex","textNode","add","expand","rangeBoundary","isExpandable","_removeDeadMarkers","createTextNode","_normalizedIndex","pointer","shouldNormalizeStart","shouldNormalizeEnd","shouldNormalize","isBomSelected","collapsedToStart","startParent","endParent","startIndex","endIndex","charAt","editableTextNodes","immutableParent","image","stringify","partition","contents","partitionRange","mapAll","mapped","getAll","predicate","selector","getMarkers","isStartOf","isEndOf","wrapSelectedElements","isEnd","startEditable","endEditable","beforeCaret","afterCaret","search","substring","finishUpdate","startRestorePoint","endRestorePoint","GenericCommand","selected","getSibling","PREVIOUS_SIBLING","Command","restorePoint","lockRange","releaseRange","point","createDialog","kendoWindow","toggle","expandImmutablesIn","genericCommand","postProcess","InsertHtmlTool","initOptions","dataSource","_selectBox","SelectBox","dataTextField","dataValueField","highlightFirst","selectbox","tableCells","tableCellsWrappers","tableElements","inTable","RemoveTableContent","cellsTypes","startCell","endCell","_removeContent","cell","forwards","getNext","removeTableContent","backspaceHandler","isTypingKey","evt","Event","isDefaultPrevented","immutablesContext","deleteSelection","startTyping","_addCaret","_restoreCaret","_handleDelete","_merge","_cleanBomBefore","_handleBackspace","startAtLi","liIndex","startAtNonFirstLi","rangeStartNode","linkRange","anchor","previousNode","isEndOfLink","li","ListFormatter","UnlinkCommand","_handleSelection","ancestor","table","emptyParagraphContent","_handleImmutables","_surroundFullySelectedAnchor","_join","startImmutable","endImmutable","_root","dest","_mergeWithTextNode","appendedNode","_isCaret","method","backspace","del","systemCommandIsInProgress","createUndoCommand","changed","isModifierKey","isSystem","_toSelectableImmutables","_selectEditorBody","typingInProgress","isCharacter","String","fromCharCode","modifier","_getShortcutModifier","navigator","platform","alt","shift","mac","toUpperCase","metaKey","matchesKey","found","matchKey","toolKey","isArray","onEndTyping","stopTyping","force","timeout","what","cleaners","ScriptCleaner","TabCleaner","MSWordFormatCleaner","WebkitFormatCleaner","HtmlTagsCleaner","HtmlAttrCleaner","HtmlContentCleaner","CustomCleaner","htmlToFragment","fragment","_startModification","_inProgress","_endModification","modificationInfo","_contentModification","before","after","_removeBomNodes","_onBeforeCopy","oncopy","oncut","_fileToDataURL","blob","deferred","reader","FileReader","File","getAsFile","onload","readAsDataURL","_triggerPaste","_handleImagePaste","clipboardData","originalEvent","files","_insertImages","images","when","results","Array","onpaste","r","clipboardRange","clipboardNode","_decoreateClipboardNode","_moveToCaretPosition","containers","clean","ondragover","ondrop","dataTransfer","borderWidth","overflow","margin","padding","fontVariant","fontWeight","lineSpacing","lineHeight","nodeOffset","caretOffset","_caretOffset","translateX","translateY","translate","-webkit-transform","transform","rangeChanged","isStartTextNode","prevLength","bomNode","splittableParent","splittable","fragmentsHtml","rangeEnd","focusedTable","siblingNodes","lastSiblingIndex","lastSibling","skipCleaners","applicable","elm","display","Cleaner","replacements","customReplacements","replacement","junkReplacements","convertFontMatch","$0","$1","closing","faceRe","family","stripEmptyAnchors","a","listType","listData","startingSymbol","matchSymbol","symbol","isNumber","trimStartText","_guessUnorderedListStyle","_guessOrderedListStyle","_convertToLi","extractListLevels","msoListRegExp","level","_createList","styleType","listStyleType","placeholder","rootMargin","rootIndex","lastRootLi","isLastRootLi","rootList","listIndex","levelType","blockChildren","lastMargin","levels","acceptedNameTags","parseFloat","marginLeft","removeAttributes","removeAttributeNode","createColGroup","row","cells","colgroup","convertHeaders","boldedCells","removeParagraphs","paragraphs","removeDefaultColors","spans","firstRow","longestRow","eq","headers","titles","removeFormatting","filters","DomCleaner","cleanDom","collectTags","collectAttr","removeAttr","TextContainer","HtmlTextLines","separators","line","lines","inlineBlockText","resetLine","appendText","textContainer","appendInlineBlockText","flashInlineBlockText","endLine","il","il1","jl","jl1","DomEnumerator","preventDown","hasText","enumerator","buildText","getDefaultSeparators","htmlLines","action","actions","ul","thead","tbody","td","cleaner","tdCleaner","cellText","PrintCommand","print","ExportPdfCommand","initialValue","ev","MOUSEDOWN_NS","KEYDOWN_NS","InlineFormatFinder","numberOfSiblings","referenceNode","textNodesCount","elementNodesCount","markerCount","findSuitable","sourceNode","findFormat","InlineFormatter","values","activate","formatNode","formatNodes","consolidate","pop","GreedyInlineFormatFinder","greedyProperty","getInlineCssValue","attributeValue","pair","cssIndex","propertyAndValue","getFormatInner","parentsUntil","addBack","toArray","GreedyInlineFormatter","toCamelCase","InlineFormatTool","DelayedExecutionTool","FontTool","cssAttr","domAttr","widget","newRange","ENTER","ColorTool","palette","_widget","ColorPicker","toolIcon","picker","sender","_popup","fontStyle","listElements","BlockFormatFinder","candidate","suitable","_resolveListsItems","ImmutablesNS","BlockFormatter","imageFormat","imageAttributes","nonImages","applyFormatting","immutableFormat","namedFormat","GreedyBlockFormatter","immutalbeParent","blockFormatter","formatTag","_initOptions","BlockFormatTool","textAlign","float","marginRight","listStylePosition","ParagraphCommand","_insertMarker","_moveFocus","focusNode","startNode","shouldTrim","startInBlock","endInBlock","_blankAfter","paragraph","heading","tableNode","rng","parentChildrenLength","_insertParagraphAfter","siblings","NewLineCommand","filler","oldIE","ListFormatFinder","unwrapTag","isList","isImmutable","containsAny","_parentLists","merge","breakable","applyOnSection","section","pushAncestor","addLastSection","lastSection","sections","lastNodes","ListCommand","ListTool","lastIndexOfRegExp","str","indexOfRegExp","HTTP_PROTOCOL","protocolRegExp","endLinkCharsRegExp","LinkFormatFinder","LinkFormatter","markers","ref","LinkCommand","url","_dialogTemplate","img","dialog","_initialText","_close","visible","_apply","_keydown","linkUrl","_dialog","center","ESC","textInput","AutoLinkCommand","linkMarker","detectedLink","detectLink","_ensureWebProtocol","traverser","detection","LeftDomTextTraverser","cancelAtNode","DomTextLinkDetection","hasProtocol","_hasProtocolPrefix","_prefixWithWebProtocol","UnlinkTool","DomPos","puntuationOptions","puntuationTraverser","_detectEnd","blank","clone","_detectStart","_isLinkDetected","extendOptions","RightDomTextTraverser","_skipStartPuntuation","ii","DomTextTraverser","cancel","_traverse","edgeNode","subText","splitIndex","SPACEBAR","KEDITORFILEURL","KEDITORFILETEXT","KEDITORFILETITLE","FileCommand","file","showBrowser","applied","keyDown","dialogHeight","isIE","FileBrowser","transport","read","_fileBrowser","KEDITORIMAGEURL","KEDITORIMAGETITLE","KEDITORIMAGEWIDTH","KEDITORIMAGEHEIGHT","ImageCommand","removeIEAttributes","onerror","ImageBrowser","_imageBrowser","DropDownList","_initSelectOverlay","autoSize","listWidth","whiteSpace","_listWidth","scrollbar","selectBox","view","decorate","indentDirection","IndentFormatter","targets","parentList","siblingList","nestedList","targetIndex","mapImmutables","targetNode","listParent","nextAll","IndentCommand","indentFormatter","OutdentCommand","OutdentTool","isOutdentable","listParentsCount","suitableNodes","ViewHtmlCommand","unwrapListItem","listFormatter","FormattingTool","toFormattingItem","dot","context","kendoSelectBox","dataItem","toJSON","dataBound","getFormattingValue","n","_ancestor","field","operator","CleanFormatCommand","tagsToClean","outerWidth","_outerWidth","outerHeight","_outerHeight","OVERFLOWANCHOR","focusable","toolNamesByCssClass","k-i-sup-script","k-i-sub-script","k-i-align-left","k-i-align-center","k-i-align-right","k-i-align-justify","k-i-list-unordered","k-i-list-ordered","k-i-login","k-i-indent-increase","k-i-indent-decrease","k-i-link-horizontal","k-i-unlink-horizontal","k-i-image","k-i-file-add","k-i-html","k-i-foreground-color","k-i-paint","k-i-table-insert","k-i-table-column-insert-left","k-i-table-column-insert-right","k-i-table-row-insert-above","k-i-table-row-insert-below","k-i-table-row-delete","k-i-table-column-delete","k-i-table-properties","k-i-table-wizard","k-i-clear-css","OverflowAnchorTool","overflowPopup","_initPopup","_resizeHandler","onResize","groups","advanced","fonts","colors","overflowFlaseTools","prepend","dragHandle","effects","minHeight","autoFocus","dragend","_moved","_toggleOverflowStyles","_initOverflowPopup","popupTemplate","kendoPopup","origin","copyAnchorStyles","focusOverflowPopup","toolGroupFor","isCustomTool","_editor","expandTools","render","combobox","dropDown","isOpened","stopImmediatePropagation","_attachEvents","inheritText","_toolName","description","tooltip","_appendShortcutSequence","editorElement","editorOffset","editorOptions","_overlaps","box","toolbarWrapper","toolbarWrapperOffset","toolbarWrapperLeft","toolbarWrapperTop","boxOffset","boxOffsetLeft","boxOffsetTop","TABINDEX","localizedText","res","_nativeTools","currentTool","nativeTools","endGroup","group","groupPosition","startGroup","toolElement","groupName","newGroupName","toolConfig","updateGroups","angular","unbindResize","popupElement","attachToolsEvents","buttons","enabledButtons","disabledButtons","dropdown","colorpicker","editorTools","move","constrain","focusableItems","focusElement","currentContainer","_executeToolCommand","button","toolname","lastIndexOf","_immutablesContext","_updateImmutablesState","uiData","groupUi","uiElement","trackImmutables","toolsToBeUpdated","_resize","containerWidth","_refreshWidths","_shrink","_stretch","idx","visibleGroups","_groupsWidth","_visibleGroups","_hideGroup","hiddenGroups","_hiddenGroups","_showGroup","sort","detach","ACTIVESTATE","SELECTEDSTATE","getTouches","columnTemplate","tableFormatFinder","TableCommand","_tableHtml","columnHtml","rowHeight","insertedTable","PopupTool","twTool","_open","_activate","_toggle","TableWizardTool","TableWizardCommand","insertNewTable","InsertTableTool","cols","tableFromLocation","floor","clientY","cellHeight","col","clientX","scrollLeft","cellWidth","firstCell","lastCell","getOffset","offsetWidth","autoApplyNS","_setTableSize","_exec","_valid","status","selectedRows","selectedColumns","tableSize","InsertRowCommand","cellCount","newRow","InsertColumnCommand","columnIndex","newCell","DeleteRowCommand","DeleteColumnCommand","columnCount","TableModificationTool","defaultExportAsItems","ExportAsCommand","exportType","postToProxy","generateForm","submit","exportAsOptions","form","valueInput","exportTypeInput","fileNameInput","ExportAsTool","changeHandler","unshift","loadingOverlay","ImportCommand","_initializeUploadWidget","importOptions","upload","kendoUpload","success","_onUploadSuccess","_onUploadProgress","_onUploadSelect","error","_onUploadError","complete","_onUploadComplete","showFileList","multiple","saveUrl","proxyUrl","autoUpload","saveField","validation","allowedExtensions","maxFileSize","getKendoUpload","_trigger","clearAllFiles","_removeLoadingOverlay","response","validationErrors","_initLoadingOverlay","eventType","uploadEvent","_iframeWrapper","_container","lowerBound","upperBound","getScrollBarWidth","scrollHeight","clientHeight","calculatePercentageRatio","total","inPercentages","STRING","REGEX_NUMBER_IN_PERCENTAGES","inPixels","REGEX_NUMBER_IN_PIXELS","toPercentages","PERCENTAGE","toPixels","PIXEL","global","math","ResizingUtils","KEY_DOWN","MOUSE_DOWN","MOUSE_ENTER","MOUSE_LEAVE","MOUSE_MOVE","MOUSE_UP","COMMA","DOT","LAST_CHILD","TABLE","TableElementResizing","_attachEventHandlers","eventNamespace","rootElement","_destroyResizeHandle","rtl","handle","dataAttribute","detectElementBorderHovering","resizingInProgress","resizing","handleOptions","tableElement","resizeHandle","elementBorderHovered","showResizeHandle","_initResizeHandle","setResizeHandlePosition","setResizeHandleDimensions","setResizeHandleDataAttributes","_attachResizeHandleEventHandlers","_initResizable","_hideResizeMarker","markerClass","_destroyResizable","Resizable","draggableElement","onResizeStart","onResizeEnd","_disableKeyboard","setResizeHandleDragPosition","_enableKeyboard","_forceResizing","userEvents","ResizingFactory","resizingName","_destroyResizing","_initResizing","parentTable","resizingType","abs","RESIZE_HANDLE_CLASS","RESIZE_MARKER_CLASS","BODY","TBODY","TH","TR","WIDTH","column","handleWidth","borderOffset","mousePosition","tableBody","scrollTopOffset","scrollLeftOffset","columnWidthOffset","scrollBarWidth","columnWidth","columnLeftOffset","adjacentColumnWidth","handleOffset","newWidth","initialAdjacentColumnWidth","initialColumnWidth","rtlModifier","initialDeltaX","_setTableComputedWidth","_setColumnsComputedWidth","_resizeColumn","_resizeTopAndBottomColumns","_resizeAdjacentColumns","tableBodyWidth","currentColumnsWidths","topAndBottomColumns","deltaWidth","adjacentColumns","_resizeAdjacentColumn","adjacentColumn","RESIZE_HANDLE_MARKER_WRAPPER_CLASS","HEIGHT","handleHeight","rowPosition","tableBodyTopOffset","currentRowHeight","initialTableHeight","tableBodyHeight","initialStyleHeight","newRowHeight","_setRowsHeightInPixels","_setTableHeight","_setRowsHeightInPercentages","currentRowsHeights","newHeight","HandlePositioningStrategy","EastPositioningStrategy","NorthPositioningStrategy","NortheastPositioningStrategy","NorthwestPositioningStrategy","SouthPositioningStrategy","SoutheastPositioningStrategy","SouthwestPositioningStrategy","WestPositioningStrategy","DraggingStrategyFactory","HandleDraggingStrategy","HorizontalDraggingStrategy","EastDraggingStrategy","WestDraggingStrategy","VerticalDraggingStrategy","NorthDraggingStrategy","SouthDraggingStrategy","HorizontalAndVerticalDraggingStrategy","NorthEastDraggingStrategy","NorthWestDraggingStrategy","SouthEastDraggingStrategy","SouthWestDraggingStrategy","Draggable","DRAG_START","DRAG","DRAG_END","HALF_INSIDE","MOUSE_OVER","MOUSE_OUT","EAST","NORTH","NORTHEAST","NORTHWEST","SOUTH","SOUTHEAST","SOUTHWEST","WEST","TableResizeHandle","_addStyles","_initDraggable","_initPositioningStrategy","_initDraggingStrategy","resizableElement","_destroyDraggable","_setPosition","_positioningStrategy","getPosition","_onMouseOver","_onMouseOut","_draggable","dragstart","_onDragStart","drag","_onDrag","_onDragEnd","_draggingStrategy","adjustDragDelta","deltaX","deltaY","initialDeltaY","StrategyFactory","_items","register","itemsLength","PositioningStrategyFactory","calculatePosition","handleOffsetPosition","applyHandleOffset","scrollOffsetPosition","applyScrollOffset","adjustment","deltas","xAxisAdjustment","yAxisAdjustment","isUndefined","RESIZE_HANDLE_WRAPPER_CLASS","TABLE_CLASS","TABLE_RESIZING_CLASS","COLUMN","ROW","handles","_destroyResizeHandles","appendHandlesTo","minWidth","_resizeWidth","_resizeHeight","ratioValue","ratioTotalValue","constrainedWidth","styleWidth","currentWidth","parentWidth","maxWidth","_getMaxDimensionValue","_initialElementWidth","_setColumnsWidth","constrainedHeight","styleHeight","currentHeight","parentHeight","maxHeight","hasRowsInPixels","_hasRowsInPixels","_initialElementHeight","dimension","dimensionLowercase","parentDimension","parentScrollOffset","isWidthInPercentages","parentColumn","columnsLength","_initResizeHandles","_showResizeHandles","_bindToResizeHandlesEvents","_onResizeHandleDragStart","_onResizeHandleDrag","_onResizeHandleDragEnd","_onResizeHandleMouseOver","_onResizeHandleMouseOut","TableResizingFactory","factory","eventTarget","eventCurrentTarget","isResizeHandleOrChild","complexBlocks","IMMUTABALE","IMMUTABALE_MARKER_SELECTOR","IMMUTABLE_SELECTOR","startImmutableParent","endImmutableParent","editableNodes","randomId","chars","round","random","serialized","replaceWith","deletingKey","updateToolOptions","_toHtml","serializationType","isDeleting","shouldCancelEvent","_cancelDeleting","_cancelTyping","cancelDeleting","closestSelectionLi","closestImmutableLi","nextImmutable","_removeImmutable","commonContainer","_nextNode","cellsFormatFinder","reUnit","selectedTable","_sourceTable","_selectedTable","selectedCells","_selectedTableCells","_selectedCells","closeCallback","onDialogClose","parseTable","TableWizardDialog","insertTable","createNewTable","updateTable","_ensureFocusableAfterTable","lastSelectedRow","rowIndex","cellsLength","newRowsCount","cellIndex","cellProp","tableRows","tableProp","tableProperties","collection","_deleteTableRows","insertRow","_insertCells","deleteCell","_updateTableProperties","cellProperties","_updateCellProperties","_updateCaption","cellsWithHeaders","cellsWithHeadersAssociated","associateCellsWithHeader","_isHeadingRow","associate","nextRow","isDataRow","timestamp","Date","getTime","ids","generateIds","modifySellsIds","modifyCellsHeadings","isHeadingRow","associatedCells","headingIds","headersAttr","insertCell","rowParent","cellPropToAll","createTBody","_getStylesData","captionContent","deleteCaption","createCaption","_getAlignmentData","captionAlignment","verticalAlign","widthUnit","heightUnit","backgroundColor","bgColor","borderColor","borderCollapse","align","tStyle","captionClone","tableAlignment","tableJson","_getAlignment","_getUnit","parseTableRows","rowData","cellData","parseCell","cStyle","horizontalOnly","vAlign","hAlign","unit","TableWizardEditTool","numericTextBoxSettings","borderStyles","tableAlignmentDropDownSettings","valueTemplate","cellAlignmentDropDownSettings","accessibilityAlignmentDropDownSettings","dialogTemplate","okHandler","collectDialogValues","tableData","closeHandler","_initTabStripComponent","_initTableViewComponents","_initCellViewComponents","_initAccessibilityViewComponents","components","tabStrip","kendoTabStrip","_collectTableViewValues","_collectCellViewValues","_collectAccessibilityViewValues","tableView","checked","cellView","accessibilityView","_addUnit","_initNumericTextbox","_initDropDownList","_initTableAlignmentDropDown","_initColorPicker","_initInput","_initCheckbox","_initCellAlignmentDropDown","_initAccessibilityAlignmentDropDown","storage","settings","component","kendoNumericTextBox","kendoDropDownList","_setComponentValue","_initAlignmentDropDown","kendoColorPicker","clearButton","_destroyComponents"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;CAwBC,SAAUA,EAAGC,QACVA,OAAO,sBAAuB,cAAeD,IAC/C,YACG,SAAUE,GACP,GAAIC,GAAgBD,EAAME,WAAWC,QACjCC,KAAM,SAAUC,GACZL,EAAME,WAAWI,GAAGF,KAAKG,KAAKC,KAAMH,GACpCG,KAAKC,SAETC,QACI,OACA,QAEJC,KAAM,SAAUC,GACZJ,KAAKK,MAAQL,KAAKK,MAAMC,MAAM,EAAGN,KAAKO,oBAAsB,GAC5DP,KAAKO,oBAAsBP,KAAKK,MAAMF,KAAKC,GAAW,GAE1DI,KAAM,WACF,GAAIR,KAAKS,UAAW,CAChB,GAAIL,GAAUJ,KAAKK,MAAML,KAAKO,sBAC9BH,GAAQI,OACRR,KAAKU,QAAQ,QAAUN,QAASA,MAGxCO,KAAM,WACF,GAAIX,KAAKY,UAAW,CAChB,GAAIR,GAAUJ,KAAKK,QAAQL,KAAKO,oBAChCH,GAAQO,OACRX,KAAKU,QAAQ,QAAUN,QAASA,MAGxCH,MAAO,WACHD,KAAKK,SACLL,KAAKO,wBAETE,QAAS,WACL,MAAOT,MAAKO,qBAAuB,GAEvCK,QAAS,WACL,MAAOZ,MAAKO,qBAAuBP,KAAKK,MAAMQ,OAAS,IAG/DrB,GAAMsB,WAAWtB,GAASuB,MAAQtB,cAAeA,MACnDD,QACc,kBAAVD,SAAwBA,OAAOyB,IAAMzB,OAAS,SAAU0B,EAAIC,EAAIC,IACrEA,GAAMD,OAEV,SAAU5B,EAAGC,QACVA,OAAO,eACH,qBACA,iBACA,qBACA,eACA,qBACDD,IACL,YACG,SAAU8B,EAAGC,GAAb,GA+jCOC,GAmBAC,EAeAC,EACAC,EACAC,EAlmCAlC,EAAQmC,OAAOnC,MAAOoC,EAAQpC,EAAMoC,MAAOC,EAASrC,EAAMsC,GAAGD,OAAQE,EAAKvC,EAAMwC,QAAQC,SAAUC,EAAU1C,EAAMwC,QAAQE,QAASvC,EAASyB,EAAEzB,OAAQwC,EAAQf,EAAEe,MAAOrB,EAAatB,EAAMsB,WAAYsB,EAAO5C,EAAM4C,KACnNC,EAAS,SACTC,EAA0B,0BAC1BC,EAAeX,EAAMjC,QACrBC,KAAM,SAAUC,GACZG,KAAKH,QAAUA,GAEnB2C,QAAS,WACL,GAAI3C,GAAUG,KAAKH,OACnB,OAAOL,GAAMiD,SAAS5C,EAAQ4C,UAAYC,cAAc,IAAS7C,MAGrE8C,GACAC,sBAAuB,qSACvBC,eAAgB,6UAChBC,oBAAqB,gFACrBC,iBAAkB,gEAClBC,qBAAsB,uGACtBC,kBAAmB,+BACnBC,uBAAwB,sRACxBC,aAAc,SAAUC,EAAMC,GAC1B,IAAK,GAAIC,GAAI,EAAGA,EAAID,EAAOxC,OAAQyC,IAC/B,GAAIlC,EAAEmC,QAAQH,EAAMC,EAAOC,GAAGE,OAAS,EACnC,MAAOH,GAAOC,IAI1BG,gBAAiB,SAAUL,GAAV,GACTM,IACAC,YAAa,aACbC,UAAW,aACXC,YAAa,aACbC,cAAe,eACfC,aAAc,cACdC,YAAa,gBACbC,oBAAqB,iBACrBC,kBAAmB,eACnBC,SAAU,QACVC,OAAQ,kBACRC,QAAS,kBACTC,WAAY,kBACZC,OAAQ,oBACRC,YAAa,QACbC,WAAY,WACZC,SAAU,OACVC,UAAW,mBACXC,UAAW,QACXC,YAAa,eACbC,cAAe,2BACfC,eAAgB,4BAChBC,YAAa,yBACbC,YAAa,yBACbC,UAAW,mBACXC,aAAc,sBACdC,YAAa,mBACbC,kBAAmB,eACnBC,gBAAiB,aAEjBC,EAAW7B,EAAkBN,EACjC,OAAImC,GACOA,EAEJnC,GAEXoC,aAAc,SAAUC,EAAUC,GAC9B,GAAIC,GAAcD,EAAK7F,OACnB8F,IAAeA,EAAYlD,WAC3BkD,EAAYlD,SAAS5C,QAAQ0F,SAAW,KAAO5C,EAAYc,gBAAgBgC,IAE1EC,EAAKtC,OACNsC,EAAK7F,QAAQuD,KAAOqC,EACpBC,EAAKtC,KAAOqC,EAASG,eAEzBC,EAAOC,aAAaL,GAAYC,GAEpCK,eAAgB,SAAUC,EAAY3C,GAClCwC,EAAO/F,GAAGD,QAAQoG,QAAQD,GAAc3C,IAG5C6C,GACAC,KAAM,OACNC,OAAQ,SACRC,UAAW,YACXC,cAAe,gBACf3C,YAAa,cACbC,UAAW,YACXE,cAAe,cACfD,YAAa,kBACbE,aAAc,mBACdC,YAAa,UACbC,oBAAqB,wBACrBC,kBAAmB,sBACnBE,OAAQ,SACRC,QAAS,UACTC,WAAY,mBACZC,OAAQ,mBACRC,YAAa,eACbC,WAAY,cACZ8B,WAAY,cACZ7B,SAAU,YACV8B,SAAU,qBACVC,gBAAiB,mBACjBC,SAAU,mBACVC,gBAAiB,mBACjBC,YAAa,SACbC,WAAY,SACZlC,UAAW,QACXC,UAAW,mBACXkC,MAAO,SACPC,YAAa,eACbC,cAAe,wCACfC,WAAY,SACZC,eAAgB,aAChBC,QAAS,cACTC,YAAa,OACbC,YAAa,OACbC,gBAAiB,sEACjBC,WAAY,yCACZC,cAAe,+FACfC,kBAAmB,4CACnBC,gBAAiB,cACjBC,aAAc,iBACdC,WAAY,aACZC,YAAa,cACbC,eAAgB,cAChBC,UAAW,QACXC,SAAU,OACVC,eAAgB,cAChBC,SAAU,OACVC,YAAa,UACbC,oBAAqB,0BACrBC,aAAc,SACdC,aAAc,SACdC,SAAU,KACVC,aAAc,SACdlD,gBAAiB,mBACjBT,YAAa,iBACb4D,gBAAiB,2BACjB3D,cAAe,yBACfC,eAAgB,0BAChBC,YAAa,gBACbC,YAAa,gBACbC,UAAW,aACXC,aAAc,gBACdC,YAAa,eACbsD,SAAU,QACVC,QAAS,OACTC,iBAAkB,gBAClBC,QAAS,UACTC,QAAS,UACTC,MAAO,QACPC,OAAQ,SACRC,MAAO,QACPC,YAAa,eACbC,YAAa,eACbC,WAAY,cACZC,UAAW,YACXC,WAAY,aACZ/D,SAAU,YACVgE,GAAI,KACJC,OAAQ,SACRC,YAAa,eACbC,gBAAiB,mBACjBC,SAAU,YACVC,0BAA2B,+BAC3BC,UAAW,aACXC,YAAa,eACbC,WAAY,cACZC,aAAc,iBACdC,eAAgB,mBAChBC,cAAe,kBACfC,gBAAiB,oBACjBC,kBAAmB,sBACnBC,iBAAkB,qBAClBC,gBAAiB,oBACjBC,kBAAmB,sBACnBC,iBAAkB,qBAClBC,YAAa,mBACbC,QAAS,UACTC,KAAM,OACNC,eAAgB,mBAChBC,SAAU,YACV1G,SAAU,UAEV2G,GAAoB/I,GAAMA,EAAGgJ,KAAOhJ,EAAGiJ,aAAe,MAAQjJ,EAAGgJ,KAA0D,IAA5CE,SAASC,gBAAgBC,gBACxGC,GACAC,OACI,OACA,SACA,aAEJhC,WACI,cACA,gBACA,gBAEJiC,OACI,sBACA,qBAEJC,WACI,SACA,WAEJC,OACI,aACA,UAEJC,QACI,cACA,cACA,gBACA,iBACA,cACA,cACA,YACA,iBAGJ5F,EAAShE,EAAOlC,QAChBC,KAAM,SAAU8L,EAAS7L,GAAnB,GACe8L,GAAmCC,EAAkBC,EAAgBC,EAClFC,EADAC,EAAOhM,KAAaiM,EAAWzM,EAAMsC,GAAGoK,OAExCC,EAAMF,EAASG,GACdtB,KAGLjJ,EAAO/B,GAAGF,KAAKG,KAAKiM,EAAMN,EAAS7L,GACnCmM,EAAKnM,QAAUiB,KAAekL,EAAKnM,QAASA,GAC5CmM,EAAKnM,QAAQwM,MAAQL,EAAKnM,QAAQwM,MAAM/L,QACxCoL,EAAUM,EAAKN,QACfK,EAAaL,EAAQ,GACrBI,EAAOK,EAAI/I,KAAK2I,GAChB/L,KAAKsM,iBAAiBZ,EAAQa,QAAQ,QAAS,SAAUpK,EAAM6J,EAAKQ,OAAQR,EAAM3K,IAClFwK,EAAiBlM,KAAWqM,EAAKnM,SACjCgM,EAAeK,OAASF,EACZ,YAARF,GACAE,EAAKS,gBACLb,EAAmBI,EAAKU,QAAQC,KAAK,qBACjCZ,EAAWxC,IACXqC,EAAiBgB,KAAK,gBAAiBb,EAAWxC,MAGtDyC,EAAKN,QAAQkB,KAAK,mBAAmB,GAAMC,SAAS,qCACpDhB,EAAeiB,OAAQ,EACvBlB,EAAmBxK,EAAE,kDAAkD2L,aAAarB,IAExFM,EAAKgB,QAAU,GAAIf,GAASgB,QAAQrB,EAAiB,GAAIC,GACzDG,EAAKgB,QAAQE,OAAOlB,GACR,YAARF,GACAqB,WAAW,WAAA,GACHC,GAAcpB,EAAKU,QAAQ,GAAG5F,MAAMkC,OACpCqE,EAAiBC,SAASF,EAAa,IACvCG,EAAevB,EAAKU,QAAQ1D,QAC5BoE,GAAYI,QAAQ,MAAQ,IAAMC,MAAMJ,IAAmBE,EAAeF,GAC1ErB,EAAKU,QAAQ1D,OAAOqE,GAAkBE,EAAeF,MAIjErB,EAAK0B,aACL1B,EAAK2B,0BAA0B3B,GAC/BA,EAAK4B,SAAW,GAAI3B,GAAS4B,UACzB,GAAI5B,GAAS6B,iBAAiB9B,GAC9B,GAAIC,GAAS8B,cAAc/B,GAC3B,GAAIC,GAAS+B,cAAchC,GAC3B,GAAIC,GAASgC,iBAAiBjC,KAElCA,EAAKkC,UAAY,GAAIjC,GAASkC,UAAUnO,MACxCgM,EAAKoC,cAAgB,GAAI5O,GAAMuB,KAAKtB,cAChCI,GAAWA,EAAQ8L,MACnBA,EAAQ9L,EAAQ8L,MACTK,EAAKqC,UACZ1C,EAAQI,EAAWJ,MACfK,EAAKnM,QAAQyO,SAAWlN,EAAEmN,KAAKxC,EAAWyC,cAAc3N,SACxD8K,EAAQI,EAAWyC,cAEvB7C,EAAQA,EAAM8C,QAAQ,mBAAoB,MAE1C9C,EAAQI,EAAW2C,UAEvB1C,EAAKL,MAAMA,GAASnM,EAAMsC,GAAGoK,OAAOzK,qBACpCzB,KAAKsM,iBAAiBrB,UAClB0D,UAAa,WACT3C,EAAK4C,cAETC,QAAW,SAAUC,GACjB9C,EAAK+C,SAASD,MAGtB9C,EAAKgD,wBACLhD,EAAKgB,QAAQiC,SACbzP,EAAM0P,OAAOlD,KAEjBmD,WAAY,SAAUtP,GAClB,GAAIqM,GAASlM,IACb6B,GAAO/B,GAAGqP,WAAWpP,KAAKmM,EAAQrM,GAC9BA,EAAQwM,OACRH,EAAOc,QAAQE,OAAOhB,IAG9B0C,WAAY,WACR,GAAIhB,GAAW5N,KAAK4N,QACpB,KACQA,EAASwB,uBACTxB,EAASyB,WAAU,GACnBrP,KAAKsP,iBAEX,MAAOR,MAGbS,iBAAkB,WACdvP,KAAKwP,mBAAoB,EACzBxP,KAAKsP,gBACLtP,KAAKU,QAAQ,cAEjBgN,WAAY,WAAA,GA0BI+B,GAzBRC,EAAY1P,KAAKH,QAAQ6P,UACzBC,EAAcvO,EAAEwO,cAAcF,GAAaA,EAAUG,UAAYxO,GAAaqO,EAAUG,WAAY,EAAOH,CAC3GC,IAAe3P,KAAKqO,WACpBjN,EAAE,sFAA0F0O,YAAY9P,KAAKqO,UAC7GrO,KAAK0M,QAAQG,SAAS,eACtB7M,KAAK0M,QAAQqD,eAAepQ,KAAWK,KAAKH,QAAQ6P,WAChDM,MAAO,SAAUlB,GACb,GAAI5C,GAASlM,KAAKkM,OAAS9K,EAAE0N,EAAEmB,eAAe1D,QAAQ,YACtDvM,MAAKkQ,YAAchE,EAAOlD,SAC1BkD,EAAOS,KAAK,WAAWwD,OAAO,8BAElClB,OAAQ,SAAUH,GAAV,GACAsB,GAAQtB,EAAEuB,EAAEC,aACZC,EAAUvQ,KAAKkQ,YAAcE,EAC7BI,EAAMxQ,KAAKH,QAAQ2Q,KAAO,EAC1BC,EAAMzQ,KAAKH,QAAQ4Q,KAAOC,EAAAA,CAC9BH,GAAUI,KAAKH,IAAIC,EAAKE,KAAKF,IAAID,EAAKD,IACtCvQ,KAAKkM,OAAOlD,OAAOuH,IAEvBK,UAAW,WACP5Q,KAAKkM,OAAOS,KAAK,cAAckE,SAC/B7Q,KAAKkM,OAAS,SAGlB1M,EAAMwC,QAAQC,SAAS8I,MACnB0E,EAAkBzP,KAAK0M,QAAQoE,oBACnCrB,EAAgBsB,UAAUlR,QAAQmR,OAAS1O,KAIvD2O,yBAA0B,WACtB,GAAI/E,GAASlM,IACbR,GAAMsC,GAAGoK,OAAOgF,cAAcC,OAAOjF,GACrCA,EAAOkF,6BAA+BjP,EAAM+J,EAAOmF,wBAAyBnF,GAC5EA,EAAOoF,KAAKjP,EAAQ6J,EAAOkF,+BAE/BG,sBAAuB,WAAA,GACfrF,GAASlM,KACTwR,EAAgBtF,EAAOsF,aACvBA,KACAA,EAAcC,UACdvF,EAAOsF,cAAgB,MAEvBtF,EAAOkF,8BACPlF,EAAOwF,OAAOrP,EAAQ6J,EAAOkF,+BAGrCC,wBAAyB,WAAA,GACjBnF,GAASlM,KACTwR,EAAgBtF,EAAOsF,aACvBA,IACAA,EAAcG,qBAGtBC,0BAA2B,WACvBpS,EAAMsC,GAAGoK,OAAO2F,eAAeV,OAAOnR,OAE1C8R,uBAAwB,WACpB,GAAI5F,GAASlM,IACTkM,GAAO6F,iBACP7F,EAAO6F,eAAeN,UACtBvF,EAAO6F,eAAiB,OAGhCC,uBAAwB,WACpBxS,EAAMsC,GAAGoK,OAAO+F,YAAYd,OAAOnR,OAEvCkS,oBAAqB,WACjB,GAAIhG,GAASlM,IACTkM,GAAOiG,cACPjG,EAAOiG,YAAYV,UACnBvF,EAAOiG,YAAc,OAG7B1F,cAAe,WACX,GAAIT,GAAOhM,KAAMqO,EAAWrC,EAAKN,QAAS0G,EAAI/D,EAAS,GAAGvH,MAAMiC,MAAOsJ,EAAIhE,EAAS,GAAGvH,MAAMkC,OAAQvG,EAAWE,EAAYC,sBAAuB0P,EAAalR,EAAEqB,GAAUsK,aAAasB,GAAUtF,MAAMqJ,GAAGpJ,OAAOqJ,GAAIE,EAAWD,EAAW3F,KAAK,mBAClP0B,GAASzB,KAAK,eAAgB,OAAO4F,SAASD,GAAU1F,SAAS,2BAA2B4F,IAAI,UAAW,QAC3GzG,EAAKqC,SAAWA,EAChBrC,EAAKU,QAAU4F,GAEnBI,sBAAuB,SAAUC,GAAV,GAEfC,GAAQC,EAAKC,EADb5G,EAASlM,KAETqO,EAAWnC,EAAOmC,SAClB0E,EAAkB7G,EAAOrM,QAAQmT,OACjCA,EAASD,GAAmB9H,SAAS+H,OACrCC,EAAe,GACfC,EAAM,eAsBV,QArBIH,GAAmBC,GAAUG,SAASC,YACtCH,EAAe,4BAA8BD,EAAS,aACtDE,EAAM,8BAAiCD,EAAe,MAE1D5E,EAASgF,OACTT,EAASxR,EAAE,cACPkS,MAAOpH,EAAOrM,QAAQqG,SAASc,cAC/BuM,YAAa,MACd,GACHnS,EAAEwR,GAAQH,IAAI,UAAW,IAAI5F,SAAS,aAAaD,KAAK,WAAYyB,EAAS,GAAGmF,UAAUzG,aAAasB,GACvGuE,EAAOM,IAAMA,EACbL,EAAMD,EAAOa,eAAiBb,EAC9BE,EAAMD,EAAI5H,UAAY2H,EAAOc,gBAC7BtS,EAAEwR,GAAQe,IAAI,OAAQ,WAClBzH,EAAOc,QAAQ4G,aAAad,EAAIe,QAEpCf,EAAIgB,OACJhB,EAAIiB,MAAM,gUAA6VvU,EAAMwC,QAAQgS,MAAM3F,GAAY,iBAAmB,KAAOnM,EAAQ+R,MAAQ/R,EAAQgS,KAAO,eAAiB,KAAOnS,EAAGgJ,IAAM,wBAA0B,IAAM,g/DAA6oEkI,EAAe,2IAAyJ7R,EAAE+S,IAAIxB,EAAa,SAAUyB,GAC/0F,MAAO,gCAAqCA,EAAO,OACpDC,KAAK,IAAM,wEACdvB,EAAIwB,QACGzB,GAEX0B,MAAO,WAAA,GACClG,GAAWrO,KAAKqO,SAChBmG,EAAMnG,EAAWA,EAASoG,MAAQzU,KAAK0U,UACvC/I,EAAQ3L,KAAKH,QAAQyO,QAAUtO,KAAK2U,eAAiB3U,KAAK2L,OAC9D3L,MAAKwM,SACD6B,GACAA,EAAS3N,QAAQ,QAEjBiL,GAAS6I,IACTxU,KAAKU,QAAQ,UACT2N,GACAjN,EAAEiN,EAASuG,IAAI,GAAGC,eAAenU,QAAQ,YAIrDoU,cAAe,SAAU5I,GAAV,GACP6I,GACAC,GAAe,CACnBhV,MAAKsM,iBAAiBJ,EAAO2H,MACzBoB,YAAe,WACX/I,EAAOyH,IAAI,SAAU,WACjBoB,EAAmB,OAEvB7I,EAAOgJ,qBAAuB/H,WAAW,WACrC4H,EAAmB,GAAIvV,GAAMsC,GAAGoK,OAAOiJ,aAAajJ,EAAOkJ,WAAYlJ,EAAO2H,MAC9EmB,GAAe,GAChB,KAEPK,MAAS,WACL,GAAKN,EAGL,MAAIvV,GAAMwC,QAAQE,QAAQoT,UAAYN,GAClCA,GAAe,EACf,IAEJxV,EAAMsC,GAAGoK,OAAOqJ,cAAcrJ,EAAQ6I,GAAtCvV,OAIZ8M,iBAAkB,SAAUZ,EAASI,EAAM0J,GAAzB,GAGVC,GACAnS,EAOaoS,EAVbxJ,EAASlM,KACT2V,EAAK,cAOT,IAJAjK,EAAUtK,EAAEsK,GACP1L,KAAK4V,YACN5V,KAAK4V,cAELlK,EAAQ7K,OACR,GAAIO,EAAEwO,cAAc9D,GAChB,IAAS4J,IAAK5J,GACNA,EAAK+J,eAAeH,IACpB1V,KAAKsM,iBAAiBZ,EAASgK,EAAG5J,EAAK4J,QAK/C,KADAD,EAAajW,EAAMsW,cAAchK,GAAMiK,MAAM,KACxCzS,EAAI,EAAGA,EAAImS,EAAW5U,OAAQyC,IAC/B4I,EAAO0J,UAAUzV,MACbuL,QAASA,EACTI,KAAM2J,EAAWnS,GAAKqS,EACtBH,QAASA,IAEb9J,EAAQsK,GAAGP,EAAWnS,GAAKqS,EAAIH,IAK/CS,oBAAqB,WAAA,GAER3S,GACD+O,EAFJ6D,EAAWlW,KAAK4V,SACpB,KAAStS,EAAI,EAAGA,EAAI4S,EAASrV,OAAQyC,IAC7B+O,EAAI6D,EAAS5S,GACjB+O,EAAE3G,QAAQyK,IAAI9D,EAAEvG,KAAMuG,EAAEmD,QAE5BxV,MAAK4V,cAETjI,0BAA2B,WAAA,GAEnBmF,GACAsD,EACAC,EAKQxC,EAIAyC,EAZRpK,EAASlM,IAITkM,GAAOmC,UACPnC,EAAOvK,OAASuK,EAAOwG,sBAAsBxG,EAAOrM,QAAQ8S,aAC5DG,EAAM5G,EAAOjB,SAAWiB,EAAOvK,OAAO+R,iBAAmBxH,EAAOvK,OAAOsJ,SAClE6H,EAAIe,OACDA,EAAOf,EAAIyD,cAAc,QAC7B1C,EAAK2C,aAAa,kBAAmB,QACrC3C,EAAK2C,aAAa,cAAe,OACjC1D,EAAI2D,qBAAqB,QAAQ,GAAGC,YAAY7C,GAC5CyC,EAAWK,YAAY,WACnBvV,EAAE8K,EAAOjB,UAAU0B,KAAK,QAAQ9L,OAAS,IACzCO,EAAE8K,EAAOjB,UAAU0B,KAAK,aAAakE,SACrClP,OAAOiV,cAAcN,KAE1B,KAEPpK,EAAO2H,KAAOf,EAAIe,KAClBuC,EAAclK,EAAOvK,OACrB0U,EAAmBvD,EACnB9S,KAAKsM,iBAAiBwG,EAAK,UAAW3Q,EAAMnC,KAAK+O,SAAU/O,SAE3DkM,EAAOvK,OAASA,OAChBmR,EAAM5G,EAAOjB,SAAWA,SACxBiB,EAAO2H,KAAO3H,EAAOR,QAAQ,GAC7B0K,EAAclK,EAAO2H,KACrBwC,EAAmBnK,EAAO2H,KAC1B3H,EAAOc,QAAQ4G,aAAa1H,EAAO2H,OAEvC7T,KAAKsM,iBAAiB8J,EAAa,OAAQjU,EAAMnC,KAAKuU,MAAOvU,OAC7DkM,EAAOI,iBAAiB+J,EAAkB,OAAQlU,EAAM+J,EAAO2K,WAAY3K,GAC3E,KACI4G,EAAIgE,YAAY,2BAA4B,MAAM,GACpD,MAAOhI,IAELtP,EAAMwC,QAAQ+U,OACd/W,KAAKsM,iBAAiBwG,GAClBkE,QAAW,WACHxX,EAAMyX,kBAAoBnE,EAAIe,MAC9B3H,EAAOvK,OAAOuV,WAK9BlX,KAAK8U,cAAc5I,GACnBlM,KAAKsM,iBAAiBJ,EAAO2H,MACzBmD,QAAW,SAAUlI,GAAV,GACHqI,GAUIC,EACAC,EACAC,EACAC,EACAC,EACAC,EAOJpL,EACA5G,EACAE,CAvBJ,QAAKmJ,EAAE4I,UAAYtV,EAAKuV,WAAa7I,EAAE4I,UAAYtV,EAAKwV,QAA2D,SAAhD1L,EAAO2H,KAAKgE,aAAa,sBAGxF/I,EAAE4I,UAAYtV,EAAK0V,KACnB3K,WAAWhL,EAAM+J,EAAOc,QAAQkK,MAAOhL,EAAOc,SAAU,KACxD8B,EAAEiJ,iBACF,IACOjJ,EAAE4I,SAAWtV,EAAK4V,MAAQlJ,EAAE4I,SAAWtV,EAAK6V,QACnDd,EAAQjL,EAAOkJ,WACXgC,EAAOtI,EAAE4I,SAAWtV,EAAK4V,KACzBX,EAAYF,EAAMC,EAAO,iBAAmB,gBAC5CE,EAASH,EAAMC,EAAO,cAAgB,aACtCG,EAAYH,KAAY,EACxBI,EAAOF,EAASC,EAChBE,EAAWL,EAAOI,EAAOF,EACH,GAAtBD,EAAUa,UAAkD,UAAjCb,EAAUc,UAAUV,KAC/CN,EAAMiB,SAASf,EAAWG,GAC1BL,EAAMkB,UAAS,GACfnM,EAAOoM,YAAYnB,KAGvB9K,EAAQH,EAAOc,QAAQX,MACvB5G,EAAWyG,EAAO0B,SAAS2K,iBAAiBlM,EAAOyC,GACnDnJ,EAAcF,EAAW4G,EAAM5G,GAAU5F,WACzC4F,IAAaE,EAAY6S,iBACzB1J,EAAEiJ,iBACG,gBAAgBU,KAAKhT,IACtByG,EAAO0B,SAASyB,WAAU,GAE9BnD,EAAOxL,QAAQ,UAAWoO,GAC1B5C,EAAOwM,KAAKjT,GACZyG,EAAOyM,2BAA2B7J,IAC3B,IAEX5C,EAAO0B,SAASgL,eAChB1M,EAAO0B,SAASoJ,QAAQlI,GADxB5C,MAGJ2M,SAAY,SAAU/J,GAClB3B,WAAW,WACPjB,EAAOyM,2BAA2B7J,GAClC5C,EAAOmF,2BACR,IAEPyH,MAAS,SAAUhK,GACf,GAAIiK,IACA3W,EAAKuV,UACLvV,EAAK4W,IACL5W,EAAK6W,OACL7W,EAAK8W,SACL9W,EAAK+W,IACL/W,EAAKgX,KACLhX,EAAK4V,KACL5V,EAAKiX,GACLjX,EAAK6V,MACL7V,EAAKkX,KACLlX,EAAKmX,OACLnX,EAAKwV,SAELxW,EAAEmC,QAAQuL,EAAE4I,QAASqB,OAAqC,IAAbjK,EAAE4I,SAAiB5I,EAAE0K,UAAY1K,EAAE2K,SAAW3K,EAAE4K,WAC7FxN,EAAOqD,mBAEXrD,EAAO0B,SAASkL,MAAMhK,IAE1B6K,MAAS,SAAU7K,GACf,GAA+BqI,GAA3BhL,EAAM3M,EAAMsC,GAAGoK,OAAOE,GACC,SAAvBD,EAAI/I,KAAK0L,EAAE8K,UACXzC,EAAQjL,EAAO2N,cACf1C,EAAM2C,WAAWhL,EAAE8K,QACnB1N,EAAOoM,YAAYnB,KAG3B4C,+BAAgC,SAAUjL,GACtC5C,EAAOgC,UAAU,KAAOY,EAAEhD,MAAMgD,IAEpCkL,QAAW,WACH9N,EAAO2H,KAAKoG,aAAa,qBACzB7Y,EAAEpB,MAAM6M,SAAS,kBACjBX,EAAOc,QAAQkN,SAGvBC,SAAY,WACRhN,WAAW,WAAA,GAKCiN,GAJJC,EAAS7a,EAAMyX,iBACfpD,EAAO3H,EAAO2H,KACd7G,EAAUd,EAAOc,OACjBA,GAAQnN,QAAQiN,QACZsN,EAA0BpN,EAAQrL,OAAO+J,QAAQkJ,IAAI,GACrDwF,IAA6BhZ,EAAEkZ,SAASF,EAAyBC,IAAWD,GAA2BC,IACvGrN,EAAQuN,kBAAmB,IAG/BF,GAAUxG,GAASzS,EAAEkZ,SAASzG,EAAMwG,IAAYjZ,EAAEiZ,GAAQG,GAAG,gCAAmCxN,EAAQyN,YACxGrZ,EAAEyS,GAAM6G,YAAY,kBACpB1N,EAAQqG,SAEb,OAGXnH,EAAO0F,4BACP1F,EAAO8F,yBACP9F,EAAO+E,4BAEXjC,sBAAuB,WACnB,GAAIhD,GAAOhM,KAAMiM,EAAWzM,EAAMsC,GAAGoK,MACjCF,GAAKnM,QAAQ8a,aACb3O,EAAK2O,WAAa,GAAI1O,GAAS2O,WAAW5O,KAGlD6K,WAAY,SAAU/H,GAAV,GASJ8K,GARA1N,EAASlM,IACbkM,GAAOsD,mBAAoB,EACvBpO,EAAE8K,EAAO2H,MAAMgH,QAAQ,aAAaha,QACpCiO,EAAEgM,kBAEF5Y,EAAQ6Y,QAGRnB,EAASxY,EAAE0N,EAAE8K,SACD,GAAX9K,EAAEkM,OAAyB,GAAXlM,EAAEkM,OAAclM,EAAE0K,UAAYI,EAAOY,GAAG,YACzD7Y,OAAOmS,KAAK8F,EAAOhN,KAAK,QAAS,UAGzCmC,SAAU,SAAUD,GAChB,GAAI9C,GAAOhM,IACPR,GAAMwC,QAAQC,SAAS8I,KAAO+D,GAAK1N,EAAE0N,EAAE8K,QAAQY,GAAGlY,IAGlD0J,EAAKwD,mBACLrC,WAAW,WACPnB,EAAKuD,oBACN,IAGXoJ,2BAA4B,SAAU7J,GAAV,GAGfxL,GACDoC,EACAuV,EAIAC,EARJ/D,EAAQnX,KAAKoV,WACb/I,EAAQrM,KAAK4N,SAASuN,kBAAkBnb,KAAKgN,QAAQX,MAAOyC,EAChE,KAASxL,EAAI,EAAGA,EAAI+I,EAAMxL,OAAQyC,IAC1BoC,EAAO2G,EAAM/I,GACb2X,EAAIvV,EAAK7F,QACRob,EAAEzC,kBAGH0C,EAAM,GAAID,GAAE7a,SAAU+W,MAAOA,IAC7B+D,EAAIE,mBACJpb,KAAK4N,SAASyB,WAAU,GACxBrP,KAAK0Y,KAAKhT,EAAKtC,SAI3BiY,QAAS,WAAA,GAIG1P,GAHJK,EAAOhM,IACPgM,GAAKqC,WACLrC,EAAKsP,oBACD3P,EAAQK,EAAKL,QACjBK,EAAKqC,SAASoG,IAAI9I,GAClBK,EAAKU,QAAQC,KAAK,UAAUkE,SAC5B7E,EAAK2B,0BAA0B3B,GAC/BA,EAAKL,MAAMA,KAGnBzL,QACI,SACA,SACA,UACA,QACA,QACA,UACA,SAEJL,SACIuD,KAAM,SACN8C,SAAUA,EACVD,WACAqI,SAAS,EACT0E,OAAQ,KACRtD,WAAW,EACX6L,iBAAmBC,OAAQ,MAC3BC,eACIC,UAAU,EACVC,UAAU,EACVC,SAAS,GAEbC,cACIC,KAAK,EACLrJ,KAAK,EACL+I,OAAQ,KACRO,cAAc,EACdC,iBAAiB,EACjBC,gBAAgB,EAChBC,QAAQ,EACRC,MAAM,EACNC,MAAM,GAEVzJ,eACA0J,eACIC,OAAO,EACP5M,WAAW,EACXqB,WAAW,EACXwL,WAAW,GAEfC,aAAc,KACdC,YAAa,KACbjW,WAEQkW,KAAM,QACN/Q,MAAO,+BAGP+Q,KAAM,cACN/Q,MAAO,oCAGP+Q,KAAM,UACN/Q,MAAO,kBAGP+Q,KAAM,SACN/Q,MAAO,+BAGP+Q,KAAM,iBACN/Q,MAAO,sCAGP+Q,KAAM,SACN/Q,MAAO,6BAGP+Q,KAAM,kBACN/Q,MAAO,kCAGP+Q,KAAM,eACN/Q,MAAO,wCAGP+Q,KAAM,UACN/Q,MAAO,8BAGfjF,WAEQgW,KAAM,UACN/Q,MAAO,aAGP+Q,KAAM,WACN/Q,MAAO,YAGP+Q,KAAM,WACN/Q,MAAO,UAGP+Q,KAAM,WACN/Q,MAAO,WAGP+Q,KAAM,WACN/Q,MAAO,UAGP+Q,KAAM,WACN/Q,MAAO,YAGP+Q,KAAM,WACN/Q,MAAO,aAGf/E,cAEQ8V,KAAM,YACN/Q,MAAO,MAGP+Q,KAAM,YACN/Q,MAAO,eAGP+Q,KAAM,YACN/Q,MAAO,OAGP+Q,KAAM,YACN/Q,MAAO,OAGP+Q,KAAM,YACN/Q,MAAO,OAGP+Q,KAAM,YACN/Q,MAAO,OAGP+Q,KAAM,YACN/Q,MAAO,OAGP+Q,KAAM,YACN/Q,MAAO,OAGfU,SAAUsQ,OAAO5c,MAAM,cAAeqL,EAAWC,MAAOD,EAAW/B,UAAW+B,EAAWE,MAAOF,EAAWG,UAAWH,EAAWI,OAAQ,eAAgBJ,EAAWK,SAExKgG,QAAS,WACL,GAAIvF,GAASlM,IACb6B,GAAO/B,GAAG2R,QAAQ1R,KAAKC,MACvBA,KAAK4O,YAAW,GAChB5O,KAAKiW,sBACL2C,aAAa5Y,KAAKkV,sBAClBlV,KAAK4c,gBACL5c,KAAKgN,QAAQyE,UACbvF,EAAO2Q,uBACP3Q,EAAOoP,oBACP9b,EAAMiS,QAAQzR,KAAK0M,UAEvB4O,kBAAmB,WACf,GAAIpP,GAASlM,IACbkM,GAAOqF,wBACP/R,EAAMsC,GAAGoK,OAAOgF,cAAc4L,QAAQ5Q,GACtCA,EAAOgG,sBACP1S,EAAMsC,GAAGoK,OAAO+F,YAAY6K,QAAQ5Q,GACpCA,EAAO4F,yBACPtS,EAAMsC,GAAGoK,OAAO2F,eAAeiL,QAAQ5Q,IAE3C0Q,cAAe,WACX,GAAIpd,EAAMwC,QAAQE,QAAQ+R,MAAQjU,KAAKqO,SAAU,CAC7C,GAAI0O,GAAY3b,EAAE,yGAA2GoR,SAASvH,SAAS4I,MAAMqD,OACrJ6F,GAAUC,OAAOnM,WAGzBgM,qBAAsB,WAClB,GAAI3Q,GAASlM,IACTkM,GAAO+Q,gBACP/Q,EAAO+Q,cAAcxL,UACrBvF,EAAO+Q,cAAgB,OAG/BC,MAAO,SAAUzX,GAAV,GAIC0R,GAAOgG,EAHPzX,EAAOG,EAAOC,aAAaL,GAC3B2X,EAAS1X,IAASA,EAAK7F,QAAQud,QAAU1X,EAAK0X,QAC9CC,EAAa7d,EAAMsC,GAAGoK,OAAOmR,UAEjC,SAAID,IACAjG,EAAQnX,KAAKoV,WACb+H,EAAYE,EAAWF,UAAUhG,IAC5BgG,EAAUtc,QAAUsW,EAAMmG,YAC3BH,GAAahG,EAAMoG,iBAEhBH,EAAOI,UAAYJ,EAAOI,UAAUL,GAAaC,EAAOK,YAAYN,KAInFxR,MAAO,SAAU+R,GACb,GAAI7J,GAAO7T,KAAK6T,KAAM5H,EAAWzM,EAAMsC,GAAGoK,OAAQrM,EAAUG,KAAKH,QAAS8d,EAAc1R,EAAS2R,WAAWC,WAAWhK,EAAMhU,EAAQ4b,cACrI,OAAIiC,KAASrc,EACFsc,GAEPD,GAAQC,IAGZ1R,EAAS2R,WAAWE,UAAUJ,EAAM7J,EAAMhU,EAAQ0b,iBAClDvb,KAAK+d,sBAAwB,KAC7B/d,KAAKwM,SACLxM,KAAKgN,QAAQgR,gBANb,IAQJ1O,cAAe,SAAU6H,GACrBA,EAAQA,GAASnX,KAAKoV,UACtB,IAAIiC,GAAYF,EAAM8G,wBAAyBpK,EAAO7T,KAAK6T,MACvDwD,GAAaxD,GAAQzS,EAAEkZ,SAASzG,EAAMwD,MACtCrX,KAAK+d,sBAAwB,GAAIve,GAAMsC,GAAGoK,OAAOiJ,aAAagC,EAAOtD,KAG7EqK,WAAY,WAAA,GAKJC,GAJAtK,EAAO7T,KAAK6T,KACZjB,EAAS5S,KAAK0M,SAAW1M,KAAK0M,QAAQC,KAAK,UAAU,GACrDzB,EAAkBlL,KAAKiL,SAASC,gBAChCkT,EAAgB5e,EAAMyX,gBAEtBrE,GACIwL,GAAiBvK,GAAQuK,GAAiBxL,IAC1CuL,EAAYjT,EAAgBiT,UAC5BtK,EAAKqD,QACLhM,EAAgBiT,UAAYA,IAGhCA,EAAYtK,EAAKsK,UACjBtK,EAAKqD,QACLrD,EAAKsK,UAAYA,IAGzBE,iBAAkB,WACdre,KAAKke,aACDle,KAAK+d,uBACL/d,KAAKsY,YAAYtY,KAAK+d,sBAAsBO,YAGpDpH,MAAO,WACHlX,KAAKqe,oBAET7R,OAAQ,SAAUb,GACdA,EAAQA,GAAS3L,KAAKH,QAAQyO,QAAUtO,KAAK2U,eAAiB3U,KAAK2L,QAC/D3L,KAAKqO,SACLrO,KAAKqO,SAASoG,IAAI9I,GAElB3L,KAAK0U,UAAY/I,GAGzBgJ,aAAc,WACV,MAAOnV,GAAMsC,GAAGoK,OAAOE,IAAImS,OAAOve,KAAK2L,UAE3CkO,YAAa,SAAU5O,GACnB,MAAOzL,GAAMsC,GAAGoK,OAAOmR,WAAWxD,YAAY5O,GAAYjL,KAAKiL,WAEnEuT,aAAc,WACV,MAAOhf,GAAMsC,GAAGoK,OAAOuS,eAAeC,sBAAsB1e,KAAKiL,WAErEqN,YAAa,SAAUnB,GACnBnX,KAAKke,YACL,IAAIS,GAAY3e,KAAKwe,cACrBG,GAAUC,kBACVD,EAAUE,SAAS1H,GACnBnX,KAAKsP,cAAc6H,IAEvB/B,SAAU,WACN,GAAIuJ,GAAY3e,KAAKwe,eAAgBrH,EAAQwH,GAAaA,EAAUG,WAAa,EAAIH,EAAUI,WAAW,GAAK/e,KAAK6Z,cAAe/G,EAAM9S,KAAKiL,QAK9I,OAJIkM,GAAMoG,gBAAkBzK,GAAOqE,EAAM6H,cAAgBlM,GAAQqE,EAAM8H,aAAgB9H,EAAM+H,YACzF/H,EAAMiB,SAASpY,KAAK6T,KAAM,GAC1BsD,EAAMkB,UAAS,IAEZlB,GAEXgI,eAAgB,SAAUhI,GAAV,GACRhL,GAAM3M,EAAMsC,GAAGoK,OAAOE,IACtByH,EAAO7T,KAAK6T,IAChB,OAAOsD,IAAShL,EAAIiT,iBAAiBvL,EAAMsD,EAAMoG,iBAAmBpR,EAAIiT,iBAAiBvL,EAAMsD,EAAM6H,eAEzGK,kBAAmB,WACX,UAAYrf,aACLA,MAAKsf,QAGpBC,aAAc,WACV,MAAO/f,GAAMsC,GAAGoK,OAAO0R,WAAWC,WAAW7d,KAAKoV,WAAWoK,kBAEjEC,MAAO,SAAU/B,EAAM7d,GACnBG,KAAKkX,OACL,IAAI9W,GAAU,GAAIZ,GAAMsC,GAAGoK,OAAOwT,kBAAkBte,EAAEzB,QAClDwX,MAAOnX,KAAKoV,WACZsI,KAAMA,GACP7d,GACHO,GAAQ8L,OAASlM,KACjBI,EAAQsY,QAEZA,KAAM,SAAUtV,EAAMuc,GAAhB,GAGExI,GAAOzR,EAAMka,EAcJrW,EAhBTyC,EAAOhM,KACPI,EAAU,IAEd,KAAKgD,EACD,KAAUyc,OAAM,uDAEpB,IAAkD,SAA9C7T,EAAK6H,KAAKgE,aAAa,oBAA0C,UAATzU,GAA6B,QAATA,EAC5E,OAAO,CAQX,IANAA,EAAOA,EAAKwC,cACPoG,EAAK4B,SAASwB,uBACfpD,EAAKkS,aACLlS,EAAKsM,YAAYtM,EAAKsT,QAAUtT,EAAKoJ,aAEzC1P,EAAOsG,EAAKgB,QAAQ8S,SAAS1c,IACxBsC,EACD,IAAS6D,IAAM1D,GAAOC,aAClB,GAAIyD,EAAG3D,eAAiBxC,EAAM,CAC1BsC,EAAOG,EAAOC,aAAayD,EAC3B,OAIZ,GAAI7D,EAAM,CAaN,GAZAyR,EAAQnL,EAAKoJ,WACT1P,EAAKtF,UACLA,EAAUsF,EAAKtF,QAAQT,GACnBwX,MAAOA,EACPtD,KAAM7H,EAAK6H,KACX8G,aAAc3O,EAAK2O,YACpBgF,KAEPC,EAAY5T,EAAKtL,QAAQ,WACrB0C,KAAMA,EACNhD,QAASA,IAGT,MAEJ,IAAI,iBAAiBqY,KAAKrV,GACtB4I,EAAKoC,cAAchL,SAChB,IAAIhD,IACP4L,EAAK8K,YAAY1W,GACbA,EAAQ2f,OAER,MADA3f,GAAQ4f,OAAS7d,EAAM6J,EAAKuD,iBAAkBvD,GAC9C,CAGRA,GAAKuD,qBAGbuH,YAAa,SAAU1W,GACdA,EAAQ6f,iBACTjgB,KAAKoO,cAAcjO,KAAKC,GAE5BA,EAAQ8L,OAASlM,KACjBI,EAAQsY,SAGhB7S,GAAOC,cACHtF,MACIX,SACIqgB,IAAK,IACLC,MAAM,IAGdxf,MACId,SACIqgB,IAAK,IACLC,MAAM,KAIlB3gB,EAAMsC,GAAGse,OAAOva,GACZvE,EAAOM,EAAMjC,QACbC,KAAM,SAAUC,GACZG,KAAKH,QAAUA,GAEnBwgB,WAAY,SAAUve,EAAIjC,GACtBiC,EAAG8K,MACC0T,aAAc,KACdhN,MAAOzT,EAAQyT,QAEnBxR,EAAGye,SAAS,gBAAgB7C,KAAK7d,EAAQyT,QAE7ClT,QAAS,SAAUogB,GACf,MAAO,IAAIxgB,MAAKH,QAAQO,QAAQogB,IAEpChU,OAAQpL,EAAEqf,OAEdnf,EAAKoX,KAAO,SAAUxM,EAAQ9I,EAAMuI,GAChCO,EAAOwM,KAAKtV,GAAQuI,MAAOA,KAE3BpK,EAAaD,EAAK3B,QAClBC,KAAM,SAAUC,GACZyB,EAAKxB,GAAGF,KAAKG,KAAKC,KAAMH,IAE5BO,QAAS,SAAUogB,GACf,GAAIxU,GAAOhM,IACX,OAAO,IAAIR,GAAMsC,GAAGoK,OAAOwU,cAAc/gB,EAAO6gB,GAAoBG,UAAW3U,EAAKnM,QAAQ8gB,cAEhGnU,OAAQ,SAAU1K,EAAI8e,GAClB,GAAInD,GAAczd,KAAKH,QAAQud,OAAOK,YAAYmD,EAClD9e,GAAG+e,YAAY,mBAAoBpD,GACnC3b,EAAG8K,KAAK,eAAgB6Q,MAGhC9a,EAAY6C,aAAa,YAAa,GAAIlE,IAAOmB,SAAU,GAAIF,IAAeE,SAAUE,EAAYM,uBAChGzB,EAAUU,EAAQ+R,MAAQ/R,EAAQ4e,QAAU,EAAI,SAAW,GAC3Drf,EAAsB,SACtBC,EAAwBD,GACxBS,EAAQ+R,MAAQ/R,EAAQgS,QACxBxS,EAAwBD,EAAsB,UAElD9B,EAAOH,EAAMsC,IACToK,QACI3J,aAAcA,EACdI,YAAaA,EACbrB,KAAMA,EACNC,WAAYA,EACZwf,SAAUvf,EACVC,oBAAqBA,EACrBC,sBAAuBA,KAG3BlC,EAAMwhB,WACNxhB,EAAMwhB,SAASrhB,OAAOkG,EAAOob,WAC7Bpb,EAAOob,UAAUC,SAAW,WACxB,MAAO1hB,GAAM2hB,QAAQC,QAAQphB,KAAK6T,KAAM7T,KAAKH,QAAQwhB,MAEzDxb,EAAOob,UAAUK,UAAY,WAAA,GAOrBzhB,GANA0hB,EAAW,GAAIngB,GAAEogB,SACjBC,EAAUF,EAASE,UACnBC,GAASD,QAASA,EACtB,KAAIzhB,KAAKU,QAAQ,YAAaghB,GAkB9B,MAfI7hB,GAAUG,KAAKH,QAAQwhB,IAC3BrhB,KAAKkhB,SAASK,GAAUI,KAAK,SAAUC,GACnC,MAAOpiB,GAAM2hB,QAAQU,UAAUD,EAAM/hB,KACtCiiB,KAAK,SAAUC,GACdviB,EAAMwiB,QACFD,QAASA,EACTE,SAAUpiB,EAAQoiB,SAClBC,SAAUriB,EAAQqiB,SAClBC,YAAatiB,EAAQsiB,YACrBC,WAAYviB,EAAQuiB,aAExBb,EAASc,YACVC,KAAK,SAAUC,GACdhB,EAASiB,OAAOD,KAEbd,KAGjB9f,OAAOnC,MAAMijB,SACC,kBAAVljB,SAAwBA,OAAOyB,IAAMzB,OAAS,SAAU0B,EAAIC,EAAIC,IACrEA,GAAMD,OAEV,SAAU5B,EAAGC,QACVA,OAAO,cAAe,eAAgBD,IACxC,YACG,SAAU8B,GAEP,QAASshB,GAAQC,GACb,GAAcrf,GAAGsf,EAAbC,IACJ,KAAKvf,EAAI,EAAGsf,EAAMD,EAAM9hB,OAAQyC,EAAIsf,EAAKtf,IACrCuf,EAAIF,EAAMrf,KAAM,CAEpB,OAAOuf,GAPd,GAqCOC,GAAsBC,EAA4BC,EAAwDC,EAAiBC,EAAoCC,EAAoBC,EAA4fC,EAAoBC,EAAmCC,EA+PtuBnX,EAnSA5M,EAAQmC,OAAOnC,MAAO2U,EAAM/S,EAAE+S,IAAKxU,EAASyB,EAAEzB,OAAQuC,EAAU1C,EAAMwC,QAAQE,QAASshB,EAAQ,QAASC,EAAQ,QAASC,EAAW,WAAYC,EAAa,aAAcC,EAAQ,QAASC,EAAU,WAQtMC,EAAQpB,EAAQ,6EAA6E3M,MAAM,MAAOgO,EAAuB,qQAAqQhO,MAAM,KAAMiO,EAAgBD,EAAqBpH,QACnb,KACA,KACA,OACAsH,EAAQvB,EAAQsB,GAAgBE,EAAiB,yNAAyNnO,MAAM,KAAMoO,EAASzB,EAAQwB,GAAiBE,EAAY1B,EAAQ,yGAAyG3M,MAAM,MAC/bsO,EAAY,SAAUC,GACD,GAAjBA,EAAKpM,UACLoM,EAAKD,YAGTniB,GAAQ+R,MAAQ/R,EAAQ4e,SAAW,IACnCuD,EAAY,SAAUE,GAClB,GAAuB,GAAnBA,EAAOrM,UAAiBqM,EAAOC,WAE/B,IADA,GAAIC,GAAOF,EAAOC,WAAYF,EAAOG,IACxB,CAET,GADAH,EAAOA,EAAKI,aACPJ,EACD,KAEiB,IAAjBA,EAAKpM,UAAkC,GAAjBuM,EAAKvM,WAC3BoM,EAAKnM,UAAYsM,EAAKtM,UAAYmM,EAAKnM,UACvC/L,EAAIyE,OAAO4T,IAEfA,EAAOH,KAKnBxB,EAAa,QAASC,EAAa,cAAeC,EAAM,iDAAkDC,EAAM,UAAWC,EAAkB,iBAAsCE,EAAgB,gcAAgerN,MAAM,KAAMsN,EAAS,UAAWC,EAAW,uBAAwBC,GACluBoB,GAAI,OACJC,GAAI,MACJC,GAAI,OACJC,GAAI,KACJC,GAAI,KACJC,IAAK,OACLC,IAAK,QACLC,IAAK,OACLC,IAAK,QACLC,IAAK,SACLC,IAAK,MACLC,IAAK,SACLC,IAAK,OACLC,IAAK,MACLC,IAAK,OACLC,IAAK,OACLC,IAAK,QACLC,IAAK,MACLC,IAAK,MACLC,IAAK,MACLC,IAAK,OACLC,IAAK,MACLC,IAAK,SACLC,IAAK,OACLC,IAAK,OACLC,IAAK,QACLC,IAAK,QACLC,IAAK,OACLC,IAAK,SACLC,IAAK,QACLC,IAAK,OACLC,IAAK,OACLC,IAAK,QACLC,IAAK,SACLC,IAAK,SACLC,IAAK,SACLC,IAAK,SACLC,IAAK,SACLC,IAAK,SACLC,IAAK,QACLC,IAAK,SACLC,IAAK,OACLC,IAAK,QACLC,IAAK,QACLC,IAAK,SACLC,IAAK,SACLC,IAAK,SACLC,IAAK,QACLC,IAAK,OACLC,IAAK,SACLC,IAAK,SACLC,IAAK,QACLC,IAAK,OACLC,IAAK,MACLC,IAAK,SACLC,IAAK,SACLC,IAAK,SACLC,IAAK,QACLC,IAAK,SACLC,IAAK,OACLC,IAAK,QACLC,IAAK,SACLC,IAAK,SACLC,IAAK,SACLC,IAAK,QACLC,IAAK,OACLC,IAAK,SACLC,IAAK,QACLC,IAAK,QACLC,IAAK,SACLC,IAAK,SACLC,IAAK,QACLC,IAAK,SACLC,IAAK,OACLC,IAAK,QACLC,IAAK,QACLC,IAAK,SACLC,IAAK,SACLC,IAAK,SACLC,IAAK,QACLC,IAAK,OACLC,IAAK,SACLC,IAAK,SACLC,IAAK,QACLC,IAAK,OACLC,IAAK,MACLC,IAAK,SACLC,IAAK,SACLC,IAAK,SACLC,IAAK,QACLC,IAAK,SACLC,IAAK,OACLC,IAAK,SACLC,IAAK,SACLC,IAAK,SACLC,IAAK,SACLC,IAAK,QACLC,IAAK,OACLC,IAAK,SACLC,IAAK,QACLC,IAAK,OACLC,IAAK,OACLC,IAAK,QACLC,IAAK,OACLC,IAAK,QACLC,IAAK,QACLC,IAAK,UACLC,IAAK,OACLC,IAAK,MACLC,IAAK,QACLC,IAAK,OACLC,IAAK,QACLC,IAAK,SACLC,IAAK,KACLC,IAAK,KACLC,IAAK,KACLC,IAAK,UACLC,IAAK,KACLC,IAAK,MACLC,IAAK,QACLC,IAAK,MACLC,IAAK,UACLC,IAAK,MACLC,IAAK,MACLC,IAAK,MACLC,IAAK,QACLC,IAAK,QACLC,IAAK,OACLC,IAAK,QACLC,IAAK,QACLC,IAAK,UACLC,IAAK,OACLC,IAAK,MACLC,IAAK,QACLC,IAAK,OACLC,IAAK,QACLC,IAAK,SACLC,IAAK,KACLC,IAAK,KACLC,IAAK,KACLC,IAAK,UACLC,IAAK,KACLC,IAAK,MACLC,IAAK,SACLC,IAAK,QACLC,IAAK,MACLC,IAAK,UACLC,IAAK,MACLC,IAAK,MACLC,IAAK,MACLC,IAAK,QACLC,IAAK,WACLC,IAAK,QACLC,IAAK,MACLC,KAAM,OACNC,KAAM,SACNC,KAAM,QACNC,KAAM,QACNC,KAAM,QACNC,KAAM,QACNC,KAAM,SACNC,KAAM,QACNC,KAAM,OACNC,KAAM,QACNC,KAAM,UACNC,KAAM,OACNC,KAAM,OACNC,KAAM,OACNC,KAAM,OACNC,KAAM,OACNC,KAAM,QACNC,KAAM,OACNC,KAAM,OACNC,KAAM,OACNC,KAAM,OACNC,KAAM,OACNC,KAAM,SACNC,KAAM,OACNC,KAAM,QACNC,KAAM,QACNC,KAAM,QACNC,KAAM,OACNC,KAAM,QACNC,KAAM,KACNC,KAAM,OACNC,KAAM,MACNC,KAAM,QACNC,KAAM,SACNC,KAAM,QACNC,KAAM,OACNC,KAAM,QACNC,KAAM,MACNC,KAAM,MACNC,KAAM,KACNC,KAAM,MACNC,KAAM,MACNC,KAAM,MACNC,KAAM,SACNC,KAAM,MACNC,KAAM,OACNC,KAAM,QACNC,KAAM,KACNC,KAAM,QACNC,KAAM,KACNC,KAAM,KACNC,KAAM,MACNC,KAAM,MACNC,KAAM,OACNC,KAAM,OACNC,KAAM,OACNC,KAAM,QACNC,KAAM,SACNC,KAAM,OACNC,KAAM,OACNC,KAAM,QACNC,KAAM,QACNC,KAAM,SACNC,KAAM,SACNC,KAAM,OACNC,KAAM,OACNC,KAAM,MACNC,KAAM,SACNC,KAAM,QACNC,KAAM,SACNC,KAAM,QACNC,IAAK,QACLC,IAAK,QACLC,IAAK,SACLC,IAAK,SACLC,IAAK,OACLC,IAAK,OACLC,IAAK,QACLC,KAAM,OACNC,KAAM,OACNC,KAAM,SACNC,KAAM,OACNC,KAAM,MACNC,KAAM,MACNC,KAAM,MACNC,KAAM,QACNC,KAAM,QACNC,KAAM,QACNC,KAAM,QACNC,KAAM,QACNC,KAAM,QACNC,KAAM,QACNC,KAAM,QACNC,KAAM,SACNC,KAAM,SACNC,KAAM,SACNC,KAAM,SACNC,KAAM,SACNC,KAAM,QAEVnoB,GACA6X,MAAOA,EACPE,OAAQA,EACRqQ,cAAe,SAAUlQ,EAAMmQ,GAC3B,GAAInxB,GAAI,CACR,KAAKghB,EACD,QAEJ,QAAa,CAET,GADAA,EAAOA,EAAKoQ,iBACPpQ,EACD,KAEEmQ,IAA6B,GAAjBnQ,EAAKpM,UACnB5U,IAGR,MAAOA,IAEXqxB,WAAY,SAAUrQ,GAClB,MAAOA,IAA2B,OAAnBA,EAAKnM,WAAoC,OAAdmM,EAAKsQ,MAEnDC,aAAc,SAAUtQ,EAAQD,GAC5B,IACI,OAAQlY,EAAIuoB,WAAWpQ,KAAYnjB,EAAEkZ,SAASiK,EAAQnY,EAAIuoB,WAAWrQ,GAAQA,EAAKwQ,WAAaxQ,IAASA,EAAKwQ,YAAcvQ,GAC7H,MAAOzV,GACL,OAAO,IAGfsQ,iBAAkB,SAAUwC,EAAM0C,GAC9B,MAAOlY,GAAIyoB,aAAajT,EAAM0C,IAAS1C,GAAQ0C,GAEnDyQ,oBAAqB,SAAUnT,EAAM0C,GACjC,GAAIlY,EAAIyoB,aAAajT,EAAM0C,GACvB,KAAOA,GAAQA,EAAKwQ,YAAclT,GAC9B0C,EAAOA,EAAKwQ,UAGpB,OAAOxQ,IAEX0Q,cAAe,SAAU1Q,GACrB,MAAOlY,GAAIuoB,WAAWrQ,GAAQA,EAAKzjB,OAASyjB,EAAK2Q,WAAWp0B,QAEhEq0B,cAAe,SAAU5Q,EAAMhN,GAK3B,IALW,GAIP6d,GAHAC,EAAU9Q,EAAK+Q,WAAU,GACzBC,EAAmB,GACnBC,EAAWjR,EAAKI,YAEb6Q,GAAiC,GAArBA,EAASrd,UAAiBqd,EAASpd,WAClDmd,GAAoBC,EAASpd,UAC7Bgd,EAAOI,EACPA,EAAWA,EAAS7Q,YACpBtY,EAAIyE,OAAOskB,EAEf7Q,GAAKkR,WAAWle,EAAQgN,EAAKzjB,QAC7Bu0B,EAAQI,WAAW,EAAGle,GACtB8d,EAAQjd,WAAamd,EACrBlpB,EAAI0D,YAAYslB,EAAS9Q,IAE7BmR,WAAY,SAAUnR,EAAMoR,GAAhB,GACCxV,GACDvU,CADR,KAASuU,IAAOwV,GAKZ,GAJI/pB,EAAQ2Y,EAAKpE;AACbA,GAAOuD,IACP9X,EAAQ2Y,EAAK9kB,EAAMwC,QAAQ2zB,SAAWjS,EAAWC,IAEjC,gBAAThY,IACP,IAAKS,EAAIqpB,WAAW9pB,EAAO+pB,EAAWxV,IAClC,OAAO,MAER,IAAIvU,GAAS+pB,EAAWxV,GAC3B,OAAO,CAGf,QAAO,GAEX0V,kBAAmB,SAAUtR,GACzB,MAAOlY,GAAIypB,aAAavR,EAAMN,IAAkBM,EAAKzP,cAAchB,MAEvEiiB,aAAc,SAAUlV,GAAV,GACOtd,GAAGsf,EAEZqB,EAFJ8R,IACJ,KAAKzyB,EAAI,EAAGsf,EAAMhC,EAAM/f,OAAQyC,EAAIsf,EAAKtf,IACjC2gB,EAAQ7X,EAAIypB,aAAajV,EAAMtd,GAAI8I,EAAI4X,eACvCC,GAAS7iB,EAAEmC,QAAQ0gB,EAAO8R,GAAU,GACpCA,EAAO51B,KAAK8jB,EAGpB,OAAO8R,IAEXC,mBAAoB,SAAU/qB,GAC1B,MAAOA,GAASgrB,aAAehrB,EAASirB,cAE5C7R,UAAWA,EACXL,cAAeA,EACfD,qBAAsBA,EACtBG,eAAgBA,EAChBJ,MAAOA,EACPM,UAAWA,EACX+R,WACIC,aAAc,EACdC,eAAgB,EAChBC,UAAW,EACXC,mBAAoB,EACpBC,sBAAuB,EACvBC,YAAa,EACbC,4BAA6B,EAC7BC,aAAc,EACdC,cAAe,EACfC,mBAAoB,GACpBC,uBAAwB,GACxBC,cAAe,IAEnBC,MAAO,SAAUC,GACb,GAAIC,GAAUlU,EAAItK,KAAKue,EACvB,OAAKC,GAGE,IAAM/iB,EAAI+iB,EAAQ52B,MAAM,GAAI,SAAU62B,GAEzC,MADAA,GAAI7pB,SAAS6pB,EAAG,IAAIC,SAAS,IACtBD,EAAEt2B,OAAS,EAAIs2B,EAAI,IAAMA,IACjC9iB,KAAK,IALG4iB,GAOf1Y,OAAQ,SAAU5S,EAAO9L,GACrB,GAAIw3B,IAAkBx3B,GAAWA,EAAQ6b,SAAW4H,EAAWD,CAC/D,OAAO1X,GAAM8C,QAAQ4oB,EAAgB,SAAUC,GAAV,GAC7BC,GAAWD,EAAEE,WAAW,GACxBC,EAASlU,EAAYgU,EACzB,OAAOE,GAAS,IAAMA,EAAS,IAAMH,KAG7CI,MAAO,SAAUpT,GACb,MAAOA,IAA0B,IAAlBA,EAAKpM,UAAkB,cAAcO,KAAK6L,EAAKnM,YAElEwf,SAAU,SAAUjb,GAChB,OAAQA,GAAQ,IAAIjO,QAAQwU,EAAK,KAErC2U,aAAc,SAAUtT,GAChBlY,EAAIsrB,MAAMpT,IACVA,EAAKwQ,WAAW+C,YAAYvT,IAGpCwT,cAAe,SAAUxT,GACrB,GAAI1X,GAAO0X,EAAKoR,UAChB,OAAyB,YAAlBpR,EAAKyT,WAA2B3rB,EAAIoO,GAAG8J,EAAM,QAA4B,QAAlBA,EAAKyT,WAAuBnrB,EAAKorB,YAAcprB,EAAKqrB,yBAEtHC,UAAW,SAAU5T,GACjB,MAAOlY,GAAIoO,GAAG8J,EAAM,OAASlY,EAAIoO,GAAG8J,EAAM,OAE9C6T,iBAAkB,SAAUvX,GACxB,MAAOxf,GAAEg3B,KAAKxX,EAAO,SAAUyX,GAC3B,GAAIj1B,GAAOgJ,EAAIhJ,KAAKi1B,EACpB,OAAY,MAARj1B,KAEOgJ,EAAI0rB,cAAcO,MAElBjsB,EAAIksB,cAAcD,MAEA,GAAlBA,EAAMngB,WAAkB4L,EAAM1gB,IAASgJ,EAAImsB,UAAUF,SAMxEC,cAAe,SAAUhU,GACrB,MAAOA,IAAyB,GAAjBA,EAAKpM,UAAiBgL,EAAgBzK,KAAK6L,EAAKnM,YAEnEogB,UAAW,SAAUjU,GACjB,MAAwB,IAAjBA,EAAKpM,WAAkB9L,EAAI+rB,iBAAiB7T,EAAK2Q,YAAYp0B,QAExEuC,KAAM,SAAUkhB,GACZ,MAAOA,GAAKkU,SAAS5yB,eAEzB6yB,sBAAuB,SAAUnU,GAC7B,MAAOljB,GAAEg3B,KAAK9T,EAAK2Q,WAAY,SAAUoD,GACrC,MAAyB,IAAlBA,EAAMngB,WAAkB9L,EAAIssB,aAAaL,MAGxDM,aAAc,SAAUrU,GAAV,GAKD+T,GAJLO,EAAS,IACb,IAAqB,GAAjBtU,EAAKpM,SACL,MAAOoM,EAEX,KAAS+T,EAAQ/T,EAAKuU,UAAWR,EAAOA,EAAQA,EAAM3D,gBAElD,GADAkE,EAASxsB,EAAIusB,aAAaN,GAEtB,MAAOO,EAGf,OAAOA,IAEXpe,GAAI,SAAU8J,EAAMkU,GAChB,MAAOlU,IAAQlY,EAAIhJ,KAAKkhB,IAASkU,GAErCM,SAAU,SAAUxU,GAChB,MAAOA,GAAKyT,WAAalU,GAE7B6U,aAAc,SAAUpU,GACpB,MAAOxB,GAAWrK,KAAK6L,EAAKnM,YAEhC4gB,qBAAsB,SAAUzU,GAE5B,IADA,GAAI+T,GAAQ/T,EAAKE,WACV6T,GAASjsB,EAAIssB,aAAaL,IAC7BA,EAAQA,EAAM3T,WAElB,QAAQ2T,GAEZW,aAAc,SAAU1U,GACpB,MAAOvB,GAAWtK,KAAK6L,EAAKnM,YAEhC8gB,gBAAiB,SAAU3U,GAAV,GAOT4U,GAQA3U,EACAE,EACAjN,EAQI2hB,EACAC,CAzBR,UAAMhtB,EAAIuoB,WAAWrQ,KAASlY,EAAIssB,aAAapU,QAG3CvB,EAAWtK,KAAK6L,EAAKnM,aAGrB+gB,EAAU,SAAUG,EAAI9hB,GACxB,KAAO8hB,EAAG9hB,IAEN,GADA8hB,EAAKA,EAAG9hB,GACJnL,EAAI+rB,kBAAkBkB,IAAKx4B,OAAS,EACpC,MAAOw4B,IAIf9U,EAASD,EAAKwQ,WACdrQ,EAAOyU,EAAQ5U,EAAM,mBACrB9M,EAAO0hB,EAAQ5U,EAAM,eACrBrB,EAAIxK,KAAK6L,EAAKnM,cACJsM,IAAQjN,KAElBpW,EAAEmjB,GAAQ/J,GAAG,yCAGbpO,EAAIktB,QAAQ/U,IAAWnY,EAAIoO,GAAG+J,EAAQ,WAClC4U,EAAc1U,GAAQrY,EAAIktB,QAAQ7U,GAClC2U,EAAc5hB,GAAQpL,EAAIktB,QAAQ9hB,IACjCA,GAAQ2hB,IAAgB1U,GAAQ2U,GAAeD,GAAeC,OAM3EE,QAAS,SAAUhV,GACf,MAAOL,GAAM7X,EAAIhJ,KAAKkhB,KAE1BiV,QAAS,SAAUjV,GACf,MAAOR,GAAM1X,EAAIhJ,KAAKkhB,KAE1BkV,SAAU,SAAUlV,GAChB,MAAOH,GAAO/X,EAAIhJ,KAAKkhB,KAE3BmV,KAAM,SAAUnV,GACZ,GAAIlhB,GAAOkhB,EAAOlY,EAAIhJ,KAAKkhB,GAAQ,EACnC,OAAe,MAARlhB,GAAwB,MAARA,GAAwB,MAARA,GAE3Cs2B,gBAAiB,SAAU5mB,GACvB,GAAID,GAAMzG,EAAI4pB,mBAAmBljB,GAAM4mB,GAAmB7mB,EAAIY,eAAiBZ,GAAK5H,UAAY4H,EAAIgC,eAAiBhC,CAMrH,OAJI6mB,GADAl6B,EAAMwC,QAAQE,QAAQy3B,QAAwC,cAA9BD,EAAgBE,WAC9BF,EAAgB7lB,KAEhB6lB,EAAgBxuB,iBAI1C2uB,SAAU,SAAUvV,EAAMwV,GAAhB,GAKFpuB,GAASquB,EAAYC,EAAeC,EAJpCnnB,EAAMwR,EAAKzP,cACXhC,EAAMzG,EAAI4pB,mBAAmBljB,GAC7BonB,EAAernB,EAAIsnB,YACnBT,EAAkBttB,EAAIstB,gBAAgB5mB,EAEtC1G,GAAIuoB,WAAWrQ,GACXwV,GACAG,EAAS7tB,EAAI+E,OAAO2B,EAAK,QAAUpE,UAAa,aAChDtC,EAAIW,aAAaktB,EAAQ3V,GACzB5Y,EAAUtK,EAAE64B,IAEZvuB,EAAUtK,EAAEkjB,EAAKwQ,YAGrBppB,EAAUtK,EAAEkjB,GAEhByV,EAAaruB,EAAQ4L,SAAS8iB,IAC9BJ,EAAgBtuB,EAAQ,GAAG2uB,cACvBP,GAAYE,IACZA,EAAgB1sB,SAAS5B,EAAQ+G,IAAI,eAAgB,KAAO9B,KAAK2pB,KAAK,IAAMhtB,SAAS5B,EAAQ+G,IAAI,aAAc,MAAQ,IAEvHwnB,GACA7tB,EAAIyE,OAAOopB,GAEXD,EAAgBD,EAAaL,EAAgBvb,UAAY+b,IACzDR,EAAgBvb,UAAY6b,EAAgBD,EAAaG,IAGjEK,iBAAkB,SAAUznB,GACxBqQ,EAAqB/W,EAAIstB,gBAAgB5mB,GAAKqL,WAElD7G,OAAQ,SAAUsC,EAAQ4gB,GAMtB,IANI,GACA5B,IACAwB,IAAKxgB,EAAO6gB,UACZrjB,KAAMwC,EAAO8gB,YAEbnW,EAAS3K,EAAO4gB,aACbjW,KAAYiW,GAAgBpuB,EAAIyoB,aAAa2F,EAAcjW,KAC9DqU,EAAOwB,KAAO7V,EAAOkW,UACrB7B,EAAOxhB,MAAQmN,EAAOmW,WACtBnW,EAASA,EAAOiW,YAEpB,OAAO5B,IAEX+B,iBAAkB,SAAU7nB,GACS,gBAAtBqQ,KACP/W,EAAIstB,gBAAgB5mB,GAAKqL,UAAYgF,IAG7CyX,SAAU,SAAUrW,EAAQsW,EAAYC,GACpCvW,EAAOxX,aAAa8tB,EAAYtW,EAAO0Q,WAAW6F,IAAa,OAEnE/tB,aAAc,SAAU8tB,EAAYE,GAChC,MAAIA,GAAiBjG,WACViG,EAAiBjG,WAAW/nB,aAAa8tB,EAAYE,GAErDA,GAGfjrB,YAAa,SAAU+qB,EAAYE,GAC/B,MAAOA,GAAiBjG,WAAW/nB,aAAa8tB,EAAYE,EAAiBrW,cAEjF7T,OAAQ,SAAUyT,GACVA,EAAKwQ,YACLxQ,EAAKwQ,WAAW+C,YAAYvT,IAGpC0W,eAAgB,SAAU1W,GACtB,KAAOA,EAAKE,YACRF,EAAKuT,YAAYvT,EAAKE,aAG9ByW,mBAAoB,SAAU3W,GAE1B,IADA,GAAIwQ,GAAaxQ,EAAKwQ,WACfxQ,EAAKI,aAA4C,GAA7BJ,EAAKI,YAAYxM,UACxC4c,EAAW+C,YAAYvT,EAAKI,YAEhC,MAAOJ,EAAKoQ,iBAAoD,GAAjCpQ,EAAKoQ,gBAAgBxc,UAChD4c,EAAW+C,YAAYvT,EAAKoQ,kBAGpCnmB,KAAM,SAAUgW,GAAV,GACOjhB,GACDghB,CADR,KAAShhB,EAAIihB,EAAO0Q,WAAWp0B,OAAS,EAAGyC,GAAK,EAAGA,IAC3CghB,EAAOC,EAAO0Q,WAAW3xB,GACzB8I,EAAIuoB,WAAWrQ,GACVlY,EAAIurB,SAASrT,EAAKnM,WAAWtX,QAC9BuL,EAAIyE,OAAOyT,GAERA,EAAKyT,WAAalU,IACzBzX,EAAImC,KAAK+V,IACsB,IAA3BA,EAAK2Q,WAAWp0B,QAAgBuL,EAAI2sB,qBAAqBzU,IAASlY,EAAIktB,QAAQhV,KAAUlY,EAAImtB,QAAQjV,KACpGlY,EAAIyE,OAAOyT,GAIvB,OAAOC,IAEXhY,QAAS,SAAU+X,EAAM4W,GACrB,KAAO5W,GAAQlY,EAAIhJ,KAAKkhB,IAAS4W,GAC7B5W,EAAOA,EAAKwQ,UAEhB,OAAOxQ,IAEX6W,UAAW,SAAU7W,EAAM8W,EAAWC,GAClC,KAAO/W,IAAS8W,EAAU9W,IAAO,CAC7B,GAAI+W,GAAiBA,EAAc/W,GAC/B,MAAO,KAEXA,GAAOA,EAAKwQ,WAEhB,MAAOxQ,IAEX4U,QAAS,SAAU5U,EAAM/M,GACrB,EACI+M,GAAOA,EAAK/M,SACP+M,GAAyB,GAAjBA,EAAKpM,SACtB,OAAOoM,IAEX9M,KAAM,SAAU8M,GACZ,MAAOlY,GAAI8sB,QAAQ5U,EAAM,gBAE7BG,KAAM,SAAUH,GACZ,MAAOlY,GAAI8sB,QAAQ5U,EAAM,oBAE7BuR,aAAc,SAAUvR,EAAM9gB,GAC1B,EACI8gB,GAAOA,EAAKwQ,iBACPxQ,IAASlY,EAAIkvB,OAAOhX,EAAM9gB,GACnC,OAAO8gB,IAEXgX,OAAQ,SAAUhX,EAAM9gB,GACpB,MAAOpC,GAAEmC,QAAQ6I,EAAIhJ,KAAKkhB,GAAO9gB,IAAS,GAE9C+3B,UAAW,SAAUR,EAAkBS,EAASC,GAC5C,GAAgHn4B,GAAGsf,EAAKxf,EAAMuI,EAAO+vB,EAAjIb,EAAazuB,EAAI+E,OAAO4pB,EAAiBlmB,cAAe2mB,GAAU9F,EAAaqF,EAAiBrF,UACpG,KAAK+F,EACD,IAAKn4B,EAAI,EAAGsf,EAAM8S,EAAW70B,OAAQyC,EAAIsf,EAAKtf,IAC1Co4B,EAAYhG,EAAWpyB,GACnBo4B,EAAUC,YACVv4B,EAAOs4B,EAAUlD,SACjB7sB,EAAQ+vB,EAAUvjB,UACd/U,GAAQwgB,EACRiX,EAAW9C,UAAYpsB,EAChBvI,GAAQogB,EACfqX,EAAW/zB,MAAM80B,QAAUb,EAAiBj0B,MAAM80B,QAElDf,EAAWrkB,aAAapT,EAAMuI,GAK9C,MAAOovB,EAAiBvW,YACpBqW,EAAWnkB,YAAYqkB,EAAiBvW,WAI5C,OAFApY,GAAIW,aAAa8tB,EAAYE,GAC7B3uB,EAAIyE,OAAOkqB,GACJF,GAEXgB,eAAgB,SAAUvX,GACtB,KAAOA,IAA0B,GAAjBA,EAAKpM,UAA0C,SAAzBoM,EAAKnZ,kBACvCmZ,EAAOA,EAAKwQ,UAEhB,OAAOxQ,IAEXwX,KAAM,SAAUxX,EAAM5X,GAGlB,MAFAN,GAAIW,aAAaL,EAAS4X,GAC1B5X,EAAQgK,YAAY4N,GACb5X,GAEXqvB,OAAQ,SAAUzX,GAEd,IADA,GAAIC,GAASD,EAAKwQ,WACXxQ,EAAKE,YACRD,EAAOxX,aAAauX,EAAKE,WAAYF,EAEzCC,GAAOsT,YAAYvT,IAEvB5X,QAAS,SAAU4X,GACf,GAAI5X,GAAUN,EAAI+uB,UAAU7W,EAAM,SAAU+U,GACxC,MAAOA,GAAGvE,YAAc1oB,EAAI+rB,iBAAiBkB,EAAGvE,WAAWG,YAAYp0B,OAAS,GAEpF,OAAOO,GAAEsL,GAAS8N,GAAG,kBAAoBnZ,OAAYqL,GAEzDyE,OAAQ,SAAUlG,EAAUuwB,EAAS9F,GACjC,MAAOtpB,GAAIQ,KAAK3B,EAASsL,cAAcilB,GAAU9F,IAErDsG,gBAAiB,SAAU/wB,EAAUuwB,EAAS9F,GAC1C,GAAIpR,GAAOlY,EAAIQ,KAAK3B,EAASsL,cAAcilB,GAAU9F,EAErD,OADApR,GAAK5V,UAAY,SACV4V,GAEX1X,KAAM,SAAUlB,EAASgqB,GACrBA,EAAa/1B,KAAW+1B,GACpBA,GAAclS,IAASkS,KACvBtpB,EAAItF,MAAM4E,EAASgqB,EAAW5uB,aACvB4uB,GAAW5uB,MAEtB,KAAK,GAAI8F,KAAQ8oB,GACY,OAArBA,EAAW9oB,IACXlB,EAAQuwB,gBAAgBrvB,SACjB8oB,GAAW9oB,IACH,aAARA,IACPlB,EAAQkB,GAAQ8oB,EAAW9oB,GAGnC,OAAOjN,GAAO+L,EAASgqB,IAE3B5uB,MAAO,SAAUwd,EAAM3Y,GACnBvK,EAAEkjB,GAAM7R,IAAI9G,QAEhBuwB,QAAS,SAAU5X,EAAM3Y,GACrB,IAAK,GAAIuU,KAAOvU,GACRuU,GAAOuD,IACPvD,EAAM1gB,EAAMwC,QAAQ2zB,SAAWjS,EAAWC,GAE9CW,EAAKxd,MAAMoZ,GAAO,EAEK,MAAvBoE,EAAKxd,MAAM80B,SACXtX,EAAK2X,gBAAgBzY,IAG7B2Y,YAAa,SAAUtoB,EAAMzQ,EAAMsyB,GAC/B,GAAgE5uB,GAA5DsV,EAAOhb,EAAEgL,EAAI+E,OAAO0C,EAAKgB,cAAezR,EAAMsyB,GAUlD,OATA7hB,GAAK6C,YAAY0F,EAAK,IACtBtV,EAAQqN,EAAIiP,EAAe,SAAUzX,GACjC,MAAIzJ,GAAQ+R,MAAiB,eAATtI,GAA6C,OAAnByQ,EAAK3J,IAAI9G,GAC5C,kBAEAA,EAAQ,IAAMyQ,EAAK3J,IAAI9G,KAEnC0I,KAAK,KACR+H,EAAKvL,SACE/J,GAEXs1B,uBAAwB,SAAU1wB,GAC9B,GAAI2wB,GAAkB3wB,EAAQ+G,IAAI,qBAAuB,EACzD,OAAI4pB,GAAgB7uB,QAAQ,mBAAqB,GAAyB,gBAApB6uB,EAC3CA,EACqC,SAArC3wB,EAAQ,GAAG8vB,QAAQ51B,cACnB,SAEAwG,EAAIgwB,uBAAuB1wB,EAAQ6Y,WAGlD+X,UAAW,SAAUhY,GACjB,GAAI5H,GAAO4H,EAAK5V,SAGhB,OAFAgO,GAAOA,EAAKjO,QAAQ,oBAAqB,IACzCiO,EAAOA,EAAKjO,QAAQ,mBAAoB,KAG5CiM,YAAa,SAAU4J,EAAMiY,GACzB,GAA6Ej5B,GAAGsf,EAA5EmV,EAAY,IAAMzT,EAAKyT,UAAY,IAAKyE,EAAUD,EAAWxmB,MAAM,IACvE,KAAKzS,EAAI,EAAGsf,EAAM4Z,EAAQ37B,OAAQyC,EAAIsf,EAAKtf,IACvCy0B,EAAYA,EAAUtpB,QAAQ,IAAM+tB,EAAQl5B,GAAK,IAAK,IAE1Dy0B,GAAY32B,EAAEmN,KAAKwpB,GACfA,EAAUl3B,OACVyjB,EAAKyT,UAAYA,EAEjBzT,EAAK2X,gBAAgBrY,IAG7B6Y,eAAgB,WACZ,GAAmFn5B,GAAGo5B,EAAWpY,EAAMqY,EAAOC,EAA1GC,EAAQC,UAAUj8B,OAAQk8B,KAAYC,EAAgBtsB,EAAAA,EAAUusB,EAAS,IAC7E,KAAKJ,EACD,MAAO,KAEX,IAAa,GAATA,EACA,MAAOC,WAAU,EAErB,KAAKx5B,EAAI,EAAGA,EAAIu5B,EAAOv5B,IAAK,CAGxB,IAFAo5B,KACApY,EAAOwY,UAAUx5B,GACVghB,GACHoY,EAAUv8B,KAAKmkB,GACfA,EAAOA,EAAKwQ,UAEhBiI,GAAM58B,KAAKu8B,EAAUQ,WACrBF,EAAgBrsB,KAAKH,IAAIwsB,EAAeN,EAAU77B,QAEtD,GAAa,GAATg8B,EACA,MAAOE,GAAM,GAAG,EAEpB,KAAKz5B,EAAI,EAAGA,EAAI05B,EAAe15B,IAAK,CAEhC,IADAq5B,EAAQI,EAAM,GAAGz5B,GACZs5B,EAAI,EAAGA,EAAIC,EAAOD,IACnB,GAAID,GAASI,EAAMH,GAAGt5B,GAClB,MAAO25B,EAGfA,GAASN,EAEb,MAAOM,IAEXE,wBAAyB,SAAUvc,GAAV,GACjBgY,GAkBAwE,EACAC,CAIJ,OArBIzE,GADgB,GAAhBhY,EAAM/f,OACGuL,EAAIypB,aAAajV,EAAM,IAC5B,KACA,OAGKxU,EAAIqwB,eAAea,MAAM,KAAM1c,GAEvCgY,IACDA,EAASxsB,EAAIypB,aAAajV,EAAM,IAC5B,IACA,QACEA,EAAM,GAAG/L,cAAchB,MAE7BzH,EAAIotB,SAASZ,KACbA,EAASxsB,EAAIwpB,kBAAkBgD,IAE/BwE,EAAkBjpB,EAAIyM,EAAOxU,EAAIyvB,gBACjCwB,EAAmBjxB,EAAIqwB,eAAeW,GAAiB,GACvDh8B,EAAEkZ,SAASse,EAAQyE,KACnBzE,EAASyE,GAENzE,GAEX2E,gBAAiB,SAAUjZ,EAAMkZ,GAAhB,GACTjxB,GACAkxB,EAAWrxB,EAAIyvB,eAAevX,EAWlC,OATI/X,GADAH,EAAIkvB,OAAOhX,EAAMkZ,GACPlZ,EAEAlY,EAAIypB,aAAavR,EAAMkZ,GAEjCjxB,GAAWkxB,GAAYr8B,EAAEkZ,SAAS/N,EAASkxB,GAC3ClxB,EAAUkxB,GACFlxB,GAAWkxB,IACnBlxB,EAAUkxB,GAEPlxB,GAEXmxB,sBAAuB,SAAUpZ,EAAMkZ,GACnC,GAAIC,GAAWrxB,EAAImxB,gBAAgBjZ,EAAMkZ,EACzC,IAAIC,GAAYrxB,EAAIkvB,OAAOmC,EAAUD,GACjC,MAAOC,IAGfE,OAAQ,SAAUnC,EAAS5a,EAAOgd,GAC9B,GAAIC,GAAW,SAAUvZ,GACrB,MAAOlY,GAAIhJ,KAAKkhB,IAASkX,EAE7B,OAAOpvB,GAAI0xB,SAASld,EAAOid,EAAUD,IAEzCE,SAAU,SAAUld,EAAOwa,EAAWwC,GAKlC,IALM,GAIFG,GAHAz6B,EAAI,EACJsf,EAAMhC,EAAM/f,OACZ+3B,KAEGt1B,EAAIsf,EAAKtf,IACZy6B,EAAQ3C,EAAUxa,EAAMtd,KACpBy6B,IAAUH,IAAWG,GAASH,IAC9BhF,EAAOz4B,KAAKygB,EAAMtd,GAG1B,OAAOs1B,IAEXoF,qBAAsB,SAAU1Z,GAAV,GACd2Z,GAAW78B,EAAEkjB,GAAM3X,KAAK,WACxB9L,EAASo9B,EAASp9B,OAClByC,EAAI,CACR,IAAIzC,EACA,KAAOyC,EAAIzC,EAAQyC,IACf8I,EAAI8xB,oBAAoBD,EAAS36B,QAGrC8I,GAAI8xB,oBAAoB5Z,IAGhC6Z,oBAAqB,SAAU7Z,GAC3BljB,EAAEkjB,GAAM3X,KAAK,uBAAuBkE,UAExCqtB,oBAAqB,SAAU5Z,GAAV,GAEbuU,GACAz1B,EACAg7B,CAHJhyB,GAAI+xB,oBAAoB7Z,GACpBuU,EAAYvU,EAAKuU,UACjBz1B,EAAOy1B,GAAazsB,EAAIhJ,KAAKy1B,KAE5Bz1B,GAAgB,MAARA,GAAwB,OAARA,GAAyB,MAARA,GAAuC,QAAvBy1B,EAAUd,aACpEqG,EAAK9Z,EAAKzP,cAAc0B,cAAc,MACtC6nB,EAAGrG,UAAY,OACfzT,EAAK5N,YAAY0nB,MAI7B5+B,EAAMsC,GAAGoK,OAAOE,IAAMA,GACxBzK,OAAOnC,MAAMijB,SACC,kBAAVljB,SAAwBA,OAAOyB,IAAMzB,OAAS,SAAU0B,EAAIC,EAAIC,IACrEA,GAAMD,OAEV,SAAU5B,EAAGC,QACVA,OAAO,qBAAsB,cAAeD,IAC9C,YACG,SAAU8B,EAAGC,GAAb,GAiBOg9B,GAEAC,EACAC,EACA3gB,EApBApe,EAAQmC,OAAOnC,MACfqG,EAASrG,EAAMsC,GAAGoK,OAClBC,EAAMtG,EAAOuG,IACbzM,EAASyB,EAAEzB,OACX6+B,EAAmB,uDAAuDzoB,MAAM,KAChF0oB,EAAU,KACVC,EAAO,aACPC,EAAU,sBACVC,EAAW,uBACXC,EAAiB,qGACjBC,EAAa,eACbC,EAAa,cACbC,EAAY,gDACZZ,EAAK,oBACLa,EAAMh0B,SAASsL,cAAc,MACjC0oB,GAAIvwB,UAAY,QACZ2vB,EAAwD,IAA5BY,EAAIza,WAAWtM,SAC/C+mB,EAAM,KACFX,EAAal9B,EAAEk9B,WACfC,EAAK,KACL3gB,GACAshB,eAAgB,SAAUxhB,GACtB,OAAQA,GAAQ,IAAIjP,QAAQ,yBAA0B,sBAAsBA,QAAQ,yBAA0B,kBAAkBA,QAAQ,iBAAkB,SAAUsvB,GAChK,MAAOA,GAAMtvB,QAAQuwB,EAAW,MACjCvwB,QAAQ,kCAAmC,MAAMA,QAAQ,wBAAyB2vB,EAAK,OAAO3vB,QAAQ,yBAA0B,MAAMA,QAAQ,2BAA4B,QAAU2vB,IAE3Le,sBAAuB,SAAUtrB,GAE7B,IADA,GAAIurB,GAAYv5B,EAAO+U,WAAWwkB,UAAW9G,EAAgBnsB,EAAImsB,cAAeqE,EAAQ9oB,EAAK2Q,WAAY6a,EAAOxrB,EAAKglB,UAC9GP,EAAcqE,IACjBA,EAAQA,EAAMjY,WAElB,MAAO4T,EAAc+G,IACjBA,EAAOA,EAAK3K,eAEZiI,IAASyC,EAAUzC,IACnBv7B,EAAEg9B,GAAIkB,UAAUzrB,GAEhBwrB,GAAQD,EAAUC,IAClBj+B,EAAEg9B,GAAI5rB,SAASqB,IAGvB0rB,mBAAoB,SAAU1rB,GAC1BzS,EAAEyS,GAAMlH,KAAK,QAAQ6yB,KAAK,WAAA,GAGdlb,GAFJmb,EAAIr+B,EAAEpB,KACV,IAAI,SAASyY,KAAKgnB,EAAE/iB,UAAY+iB,EAAE9yB,KAAK,aAAa9L,OAAQ,CAExD,IADIyjB,EAAOtkB,KACJskB,EAAKE,YAA0C,GAA5BF,EAAKE,WAAWtM,UACtCoM,EAAOA,EAAKE,UAEK,IAAjBF,EAAKpM,UAAkB/L,EAAI2X,MAAM3X,EAAI/I,KAAKkhB,MAEtCA,EAAK5V,UADLvC,EAAIqO,GAAG8J,EAAM,MACI9kB,EAAMsC,GAAGoK,OAAOxK,sBAEhBlC,EAAMsC,GAAGoK,OAAOzK,yBAMrDi+B,sBAAuB,SAAU7rB,GAC7BzS,EAAE,qBAAsByS,GAAMhD,UAElC8uB,mBAAoB,SAAU/d,GAC1B,GAA2Cte,GAAGs8B,EAAIC,EAA9CC,EAAMle,EAAKnL,qBAAqB,KACpC,KAAKnT,EAAI,EAAGA,EAAIw8B,EAAIj/B,OAAQyC,IACxBs8B,EAAKE,EAAIx8B,GACTu8B,EAAgBD,EAAG/nB,aAAa,SAChC+nB,EAAGppB,aAAa,QAAS,GACrBqpB,EACAD,EAAGppB,aAAa,QAASqpB,GAEzBD,EAAG3D,gBAAgB4D,IAI/BE,wBAAyB,SAAUne,GAC/BxgB,EAAEwgB,GAAMjV,KAAK,KAAK6yB,KAAK,WAAA,GAEf9D,GAAWp4B,EAAG08B,EAAG58B,EADjBsyB,EAAa11B,KAAK01B,UAEtB,KAAKpyB,EAAI,EAAG08B,EAAItK,EAAW70B,OAAQyC,EAAI08B,EAAG18B,IACtCo4B,EAAYhG,EAAWpyB,GACvBF,EAAOs4B,EAAUlD,SACbkD,EAAUC,WAAa,OAAOljB,KAAKrV,KACnCpD,KAAKwW,aAAa,YAAcpT,EAAMs4B,EAAU/vB,OAChD3L,KAAKi8B,gBAAgB74B,OAKrC0a,UAAW,SAAUJ,EAAMkE,EAAM/hB,GAAtB,GACHqC,GAAU1C,EAAMwC,QAAQE,QACxB+R,EAAO/R,EAAQ+R,KACfgsB,EAAWhsB,GAAQ/R,EAAQ4e,QAAU,EACrCof,EAAc,cACdC,EAAe,eACfllB,EAAIpb,MACJ8a,EAAaM,EAAEN,UAoCnB,OAnCA+C,GAAOE,EAAWshB,eAAexhB,GAC7BuiB,IACAviB,EAAO,QAAUA,EACjBA,EAAOA,EAAKjP,QAAQ,yCAA0C0xB,EAAe,SAC7EziB,EAAOA,EAAKjP,QAAQ,wCAAyCyxB,EAAc,UAE3E5B,EAAWrjB,EAAEO,UACbkC,EAAOzC,EAAEO,OAAOkC,IAASA,GAE7BkE,EAAKlT,UAAYgP,EACb/C,GACAA,EAAWylB,YAAYxe,GAEvBqe,GACA9zB,EAAI0E,OAAO+Q,EAAK4C,YAChBpjB,EAAEwgB,GAAMjV,KAAK,gCAAgC6yB,KAAK,WAC9C,GAAIlb,GAAOtkB,IACPskB,GAAK6b,KACL7b,EAAK9N,aAAa,OAAQ8N,EAAK6b,IAC/B7b,EAAK2X,gBAAgBkE,IAErB7b,EAAK4b,KACL5b,EAAK9N,aAAa,MAAO8N,EAAK4b,IAC9B5b,EAAK2X,gBAAgBiE,OAGtBjsB,IACP9H,EAAIkY,UAAUzC,GACdhE,EAAW+hB,mBAAmB/d,IAElChE,EAAWmiB,wBAAwBne,GACnChE,EAAW2hB,mBAAmB3d,GAC9BhE,EAAW8hB,sBAAsB9d,GACjChE,EAAWuhB,sBAAsBvd,GACjCxgB,EAAE,QAASwgB,GAAM/U,SAAS,WACnB+U,GAEX/D,WAAY,SAAU+D,EAAM/hB,GAGxB,QAASwgC,GAAe3K,GACpB,MAAOt0B,GAAEg3B,KAAK1C,EAAY,SAAU9oB,GAChC,MAAoB,SAAbA,EAAKxJ,OAGpB,QAASk9B,GAAShc,EAAM4W,GACpBtC,EAAOz4B,KAAK,IAAM+6B,GAClBtuB,EAAK0X,GACLsU,EAAOz4B,KAAK,KA+JhB,QAASogC,GAAc3E,GAAvB,GAGQmC,GACAyC,EAAU70B,EAHV4C,EAAOnN,EAAEmN,KACTkE,EAAMlE,EAAKqtB,GAGX6E,IAEJ,KADA5B,EAAe6B,UAAY,IACd,CAET,GADA3C,EAAQc,EAAenmB,KAAKjG,IACvBsrB,EACD,KAEJyC,GAAWjyB,EAAKwvB,EAAM,GAAGn4B,eACzB+F,EAAQ4C,EAAKwvB,EAAM,IACH,oBAAZyC,GAA8C,gBAAZA,IAGlCA,EAAShzB,QAAQ,UAAY,EAC7B7B,EAAQQ,EAAI6qB,MAAMrrB,GACX60B,EAAShzB,QAAQ,SAAW,EACnC7B,EAAQA,EAAM8C,QAAQgwB,EAAS,KACxB,WAAWhmB,KAAK9M,KACvBA,EAAQA,EAAM8C,QAAQgwB,EAAS,KAEnCgC,EAAWtgC,MACPqgC,SAAUA,EACV70B,MAAOA,KAGf,MAAO80B,GAEX,QAASE,GAAU/E,GAAnB,GAEQt4B,GADAm9B,EAAaF,EAAc3E,EAE/B,KAAKt4B,EAAI,EAAGA,EAAIm9B,EAAW5/B,OAAQyC,IAC/Bs1B,EAAOz4B,KAAKsgC,EAAWn9B,GAAGk9B,UAC1B5H,EAAOz4B,KAAK,KACZy4B,EAAOz4B,KAAKsgC,EAAWn9B,GAAGqI,OAC1BitB,EAAOz4B,KAAK,KAGpB,QAASygC,GAAoBtc,GAA7B,GAGQoX,GAAWp4B,EAAG08B,EACd58B,EAAMuI,EAAOgwB,EAHb/C,KACAlD,EAAapR,EAAKoR,UAGtB,KAAKpyB,EAAI,EAAG08B,EAAItK,EAAW70B,OAAQyC,EAAI08B,EAAG18B,IACtCo4B,EAAYhG,EAAWpyB,GACvBF,EAAOs4B,EAAUlD,SACjB7sB,EAAQ+vB,EAAU/vB,MAClBgwB,EAAYD,EAAUC,UACV,SAARv4B,GAAmB,SAAWkhB,IAAQA,EAAK3Y,MAC3CgwB,GAAY,EACG,QAARv4B,GAA2B,QAATuI,EACzBgwB,GAAY,EACG,SAARv4B,GAAoBuI,EAEpBmzB,EAAWrmB,KAAKrV,GACvBu4B,GAAY,EACG,YAARv4B,EACPu4B,GAAY,EACG,WAARv4B,EACPu4B,GAAY,EACG,SAARv4B,GAAmB+I,EAAIqO,GAAG8J,EAAM,MACvCqX,GAAY,EACG,SAARv4B,GAAmB+I,EAAIqO,GAAG8J,EAAM,OAAkB,KAAT3Y,EAChDgwB,GAAY,EACLv4B,EAAKoK,QAAQ,SAAW,EAC/BmuB,GAAY,EACLoD,EAAWtmB,KAAKrV,GACvBu4B,IAAc97B,EAAQ+b,QACP,aAARxY,GAAgC,aAATuI,IAAyBQ,EAAIqO,GAAG8J,EAAM,OAASnY,EAAIqO,GAAG8J,EAAM,SAC1FqX,GAAY,GAhBZA,GAAY,EAkBZA,GACA/C,EAAOz4B,KAAKu7B,EAGpB,OAAO9C,GAEX,QAAShsB,GAAK0X,EAAMoR,GAApB,GACQpyB,GAAG08B,EAAGtE,EAAWt4B,EAAMuI,EAGnB5C,EAA0BC,EAA4B63B,CAU9D,IAZAnL,EAAaA,GAAckL,EAAoBtc,GAC3CnY,EAAIqO,GAAG8J,EAAM,SACTvb,EAAQub,EAAKxd,MAAMiC,MAAOC,EAASsb,EAAKxd,MAAMkC,OAAQ63B,EAAQz/B,EAAEkjB,GAChEvb,GAAS41B,EAAQlmB,KAAK1P,KACtB83B,EAAMj0B,KAAK,QAASU,SAASvE,EAAO,KACpCoD,EAAI+vB,QAAQ5X,GAAQvb,MAAO1H,KAE3B2H,GAAU21B,EAAQlmB,KAAKzP,KACvB63B,EAAMj0B,KAAK,SAAUU,SAAStE,EAAQ,KACtCmD,EAAI+vB,QAAQ5X,GAAQtb,OAAQ3H,MAG/Bq0B,EAAW70B,OAGhB,IAAKyC,EAAI,EAAG08B,EAAItK,EAAW70B,OAAQyC,EAAI08B,EAAG18B,IACtCo4B,EAAYhG,EAAWpyB,GACvBF,EAAOs4B,EAAUlD,SACjB7sB,EAAQ+vB,EAAU/vB,MACN,SAARvI,GAA4B,WAATuI,IAGvBvI,EAAOA,EAAKqL,QAAQswB,EAAY,IAChCnG,EAAOz4B,KAAK,KACZy4B,EAAOz4B,KAAKiD,GACZw1B,EAAOz4B,KAAK,MACA,SAARiD,EACAu9B,EAAUh1B,GAAS2Y,EAAKxd,MAAM80B,SAE9BhD,EAAOz4B,KADQ,OAARiD,GAAyB,QAARA,EACZ5D,EAAMshC,WAAWxc,EAAKzM,aAAazU,EAAM,IAEzC+I,EAAIiY,UAAUhhB,GAAQA,EAAOuI,GAE7CitB,EAAOz4B,KAAK,MAGpB,QAASogB,GAAS+D,EAAMyc,EAAMC,GAC1B,IAAK,GAAIC,GAAY3c,EAAKE,WAAYyc,EAAWA,EAAYA,EAAUvc,YACnE2T,EAAM4I,EAAWF,EAAMC,GAG/B,QAAStkB,GAAK4H,GACV,MAAOA,GAAKnM,UAAU1J,QAAQ,UAAW,IAE7C,QAASyyB,GAAe5c,GACpB,GAAInY,EAAIurB,MAAMpT,GAAO,CACjB,EAAG,CAEC,GADAA,EAAOA,EAAKwQ,WACR3oB,EAAIqO,GAAG8J,EAAMia,IAAkC,IAA3Bja,EAAK2Q,WAAWp0B,OACpC,OAAO,CAEX,IAA+B,IAA3ByjB,EAAK2Q,WAAWp0B,OAChB,OAAO,SAELsL,EAAImtB,QAAQhV,GACtB,QAAO,EAEX,OAAO,EAEX,QAAS+T,GAAM/T,EAAMyc,EAAMC,GACvB,GAA8BxF,GAAS2F,EAAQ5c,EAAQ5Y,EAAOy1B,EAAUC,EAApEnpB,EAAWoM,EAAKpM,QACpB,IAAIyC,GAAc9U,EAAO+U,WAAWwkB,UAAU9a,GAC1CsU,EAAOz4B,KAAKwa,EAAW2mB,UAAUhd,QAC9B,IAAgB,GAAZpM,EAAe,CAGtB,GAFAsjB,EAAUrvB,EAAI/I,KAAKkhB,GACnB+c,EAASjgC,EAAEkjB,GACP+c,EAAOE,SAAS,kCAAoCF,EAAOE,SAAS,mCAAqCF,EAAOE,SAAS,+BACzH,MAEJ,KAAK/F,GAAWrvB,EAAI2rB,cAAcxT,GAC9B,MAEJ,KAAKzkB,EAAQ+b,UAAuB,UAAX4f,GAAkC,YAAXA,GAC5C,MAGJ,IADA2F,EAASK,EAAOhG,GACZ2F,IAC8B,IAAnBA,EAAOxlB,UAA2B9b,EAAQ8b,SAAWwlB,EAAOxlB,UAInE,MAHAwlB,GAAOnxB,MAAMsU,GACb/D,EAAS+D,GAAM,EAAO6c,EAAOH,cAC7BG,EAAOM,IAAInd,GACX,CAGRsU,GAAOz4B,KAAK,KACZy4B,EAAOz4B,KAAKq7B,GACZ5uB,EAAK0X,GACDnY,EAAI2X,MAAM0X,GACV5C,EAAOz4B,KAAK,QAEZy4B,EAAOz4B,KAAK,KACZogB,EAAS+D,EAAMyc,GAAQ50B,EAAIqO,GAAG8J,EAAM,QACpCsU,EAAOz4B,KAAK,MACZy4B,EAAOz4B,KAAKq7B,GACZ5C,EAAOz4B,KAAK,UAEb,IAAgB,GAAZ+X,EAAe,CACtB,GAAIgpB,EAAe5c,GAEf,MADAsU,GAAOz4B,KAAK,UACZ,CAEJwL,GAAQ+Q,EAAK4H,IACRyc,GAAQ1C,IACT9Z,EAASD,EAAKwQ,WACdsM,EAAW9c,EAAKoQ,gBACX0M,IACDA,GAAYj1B,EAAIqtB,SAASjV,GAAUA,EAASD,GAAMoQ,iBAEjD0M,GAAmC,KAAvBA,EAAS1yB,YAAoBvC,EAAImtB,QAAQ8H,KACtDz1B,EAAQA,EAAM8C,QAAQ,kBAAmB,KAE7C9C,EAAQA,EAAM8C,QAAQ,KAAM,MAEhCmqB,EAAOz4B,KAAK6gC,EAAer1B,EAAQQ,EAAIoS,OAAO5S,EAAO9L,QAClC,IAAZqY,GACP0gB,EAAOz4B,KAAK,aACZy4B,EAAOz4B,KAAKmkB,EAAKsQ,MACjBgE,EAAOz4B,KAAK,QACO,GAAZ+X,IACHoM,EAAKsQ,KAAKpnB,QAAQ,WAAa,GAC/BorB,EAAOz4B,KAAK,QACZy4B,EAAOz4B,KAAKmkB,EAAKsQ,MACjBgE,EAAOz4B,KAAK,SAEZy4B,EAAOz4B,KAAK,MACZy4B,EAAOz4B,KAAKmkB,EAAKsQ,MACjBgE,EAAOz4B,KAAK,OAIxB,QAASuhC,GAAS9f,GAAlB,GACQ+f,GAAgB/f,EAAKqT,WAAWp0B,OAChC+gC,EAAYD,GAA6C,GAA5B/f,EAAK4C,WAAWtM,QACjD,OAAO0pB,KAA+B,GAAjBD,GAAuC,GAAjBA,GAAsBx1B,EAAI2rB,cAAclW,EAAKiX,YAE5F,QAASgJ,KACDzgC,EAAEk9B,WAAWz+B,EAAQ2b,UACrBod,EAAS/4B,EAAQ2b,OAAOod,IAAWA,GArYnC,GACJA,MACAje,EAAa9a,GAAWA,EAAQ8a,WAWhC6mB,GACA5uB,QACI5C,MAAO,SAAUsU,GACbgc,EAAShc,EAAM,WAEnBmd,IAAK,WACD7I,EAAOz4B,KAAK,eAGpB2hC,YACI9xB,MAAO,SAAUsU,GACbgc,EAAShc,EAAM,WAEnBmd,IAAK,WACD7I,EAAOz4B,KAAK,cAEhB6gC,cAAc,GAElB5kB,MACIT,UAAU,EACV3L,MAAO,SAAUsU,GAAV,GAYCyd,GAQIC,EAnBJl7B,EAAQwd,EAAKxd,MACb4uB,EAAakL,EAAoBtc,GACjC2d,EAAqB5B,EAAe3K,EACpCuM,GAAmBphC,SACnB+3B,EAAOz4B,KAAK,SACZyM,EAAK0X,EAAM2d,GACXrJ,EAAOz4B,KAAK,MAEY,aAAxB2G,EAAMo7B,gBACNtJ,EAAOz4B,KAAK,OAEZ4hC,KACAj7B,EAAMmwB,OACN8K,EAAK5hC,KAAK,UAAYgM,EAAI6qB,MAAMlwB,EAAMmwB,OAAS,KAE/CnwB,EAAMq7B,YACNJ,EAAK5hC,KAAK,SAAW2G,EAAMq7B,WAAa,KAExCr7B,EAAMJ,WACFs7B,EAAO5gC,EAAEmC,QAAQuD,EAAMJ,SAAU83B,GACrCuD,EAAK5hC,KAAK,SAAW6hC,EAAO,MAE5BD,EAAKlhC,QACL+3B,EAAOz4B,KAAK,SAAW4hC,EAAK1tB,KAAK,KAAO,MAGhDotB,IAAK,SAAUnd,GACX,GAAIxd,GAAQwd,EAAKxd,OACbA,EAAMmwB,OAASnwB,EAAMq7B,YAAcr7B,EAAMJ,WACzCkyB,EAAOz4B,KAAK,WAEY,aAAxB2G,EAAMo7B,gBACNtJ,EAAOz4B,KAAK,QAEZkgC,EAAeO,EAAoBtc,IAAOzjB,QAC1C+3B,EAAOz4B,KAAK,aAIxBiiC,QACIzmB,UAAU,EACV3L,MAAO,SAAUsU,GACbgc,EAAShc,EAAM,MAEnBmd,IAAK,WACD7I,EAAOz4B,KAAK,UAGpBkiC,IACI1mB,UAAU,EACV3L,MAAO,SAAUsU,GACbgc,EAAShc,EAAM,MAEnBmd,IAAK,WACD7I,EAAOz4B,KAAK,UAGpBmiC,GACI3mB,UAAU,EACV3L,MAAO,SAAUsU,GACbgc,EAAShc,EAAM,WAEnBmd,IAAK,WACD7I,EAAOz4B,KAAK,eAGpBmD,GACIqY,UAAU,EACV3L,MAAO,SAAUsU,GACbgc,EAAShc,EAAM,OAEnBmd,IAAK,WACD7I,EAAOz4B,KAAK,WAGpBoiC,GACI5mB,UAAU,EACV3L,MAAO,SAAUsU,GAAV,GAECoR,GACA5uB,EAGA07B,CALJ5J,GAAOz4B,KAAK,SACRu1B,EAAakL,EAAoBtc,GACjCxd,EAAQ1F,EAAEs0B,GAAYiI,OAAO,SAAUr6B,EAAGm/B,GAC1C,MAAoB,SAAbA,EAAKr/B,OACb,GACCo/B,GACAhK,SAAU,QACV7sB,MAAO,8BAEP7E,IACA07B,EAAS72B,MAAQ7E,EAAM6E,MAClB,mBAAmB8M,KAAK+pB,EAAS72B,SAClC62B,EAAS72B,MAAQ,6BAA+B62B,EAAS72B,OAE7D+pB,EAAWgN,OAAOthC,EAAEmC,QAAQuD,EAAO4uB,GAAa,IAEpDA,EAAWv1B,KAAKqiC,GAChB51B,EAAK0X,EAAMoR,GACXkD,EAAOz4B,KAAK,MAEhBshC,IAAK,WACD7I,EAAOz4B,KAAK,aAGpB4hC,MACIpmB,UAAU,EACV3L,MAAO,SAAUsU,GAAV,GAEC2S,GACA+K,EACAW,CAHJ/J,GAAOz4B,KAAK,iBACR82B,EAAQ3S,EAAKzM,aAAa,SAC1BmqB,EAAOxD,EAAiBla,EAAKzM,aAAa,SAC1C8qB,EAAOre,EAAKzM,aAAa,QACzBof,IACA2B,EAAOz4B,KAAK,UACZy4B,EAAOz4B,KAAKgM,EAAI6qB,MAAMC,IACtB2B,EAAOz4B,KAAK,MAEZwiC,IACA/J,EAAOz4B,KAAK,gBACZy4B,EAAOz4B,KAAKwiC,GACZ/J,EAAOz4B,KAAK,MAEZ6hC,IACApJ,EAAOz4B,KAAK,cACZy4B,EAAOz4B,KAAK6hC,GACZpJ,EAAOz4B,KAAK,MAEhBy4B,EAAOz4B,KAAK,OAEhBshC,IAAK,WACD7I,EAAOz4B,KAAK,aAuOxB,OAnOAqhC,GAAOoB,OAASpB,EAAO,YACvB3hC,EAAUA,MACqB,IAApBA,EAAQ8b,WACf9b,EAAQ8b,UAAW,GAgOnB+lB,EAAS9f,IACTgX,EAASzsB,EAAIoS,OAAO7B,EAAKkF,EAAK4C,YAAY/V,QAAQ,iBAAkB,KAAM5O,GAC1EgiC,IACOjJ,IAEXrY,EAASqB,GACTgX,EAASA,EAAOvkB,KAAK,IACrBwtB,IACuD,KAAnDjJ,EAAOnqB,QAAQiwB,EAAM,IAAIjwB,QAAQmwB,EAAU,IACpC,GAEJhG,KAGfj5B,EAAOkG,GAAU+X,WAAYA,KAC/Bjc,OAAOnC,MAAMijB,SACC,kBAAVljB,SAAwBA,OAAOyB,IAAMzB,OAAS,SAAU0B,EAAIC,EAAIC,IACrEA,GAAMD,OAEV,SAAU5B,EAAGC,QACVA,OAAO,gBAAiB,qBAAsBD,IAChD,YACG,SAAU8B,GAgKP,QAASyhC,GAAkB7yB,EAAOyxB,EAAKxiB,EAAaC,GAApD,GAIQ7H,GAcAuK,EACAkhB,EAOAC,CAzBJ,IAAI/yB,GAASyxB,EACT,MAAOviB,GAAYD,CAGvB,KADI5H,EAAYoqB,EACTpqB,GAAaA,EAAUyd,YAAc9kB,GACxCqH,EAAYA,EAAUyd,UAE1B,IAAIzd,EACA,MAAOmd,GAAcnd,GAAa4H,CAGtC,KADA5H,EAAYrH,EACLqH,GAAaA,EAAUyd,YAAc2M,GACxCpqB,EAAYA,EAAUyd,UAE1B,IAAIzd,EACA,MAAO6H,GAAYsV,EAAcnd,GAAa,CAIlD,KAFIuK,EAAOzV,EAAIswB,eAAezsB,EAAOyxB,GACjCqB,EAAgB9yB,EACb8yB,GAAiBA,EAAchO,YAAclT,GAChDkhB,EAAgBA,EAAchO,UAMlC,KAJKgO,IACDA,EAAgBlhB,GAEhBmhB,EAActB,EACXsB,GAAeA,EAAYjO,YAAclT,GAC5CmhB,EAAcA,EAAYjO,UAK9B,OAHKiO,KACDA,EAAcnhB,GAEdkhB,GAAiBC,EACV,EAEJvO,EAAcuO,GAAevO,EAAcsO,GAEtD,QAASE,GAAe7rB,EAAO2iB,GAC3B,QAASmJ,GAAe9rB,GACpB,IACI,MAAO0rB,GAAkB1rB,EAAMoG,eAAgBpG,EAAM6H,aAAc7H,EAAM8H,YAAa9H,EAAM+H,WAAa,EAC3G,MAAOgkB,GACL,OAAO,GAGXD,EAAe9rB,KACX2iB,GACA3iB,EAAM8G,wBAA0B9G,EAAM6H,aAAe7H,EAAMoG,eAC3DpG,EAAM+H,UAAY/H,EAAM8H,cAExB9H,EAAM8G,wBAA0B9G,EAAMoG,eAAiBpG,EAAM6H,aAC7D7H,EAAM8H,YAAc9H,EAAM+H,WAE9B/H,EAAMmG,WAAY,GAG1B,QAAS6lB,GAAsBhsB,GAC3BA,EAAMmG,UAAYnG,EAAMoG,gBAAkBpG,EAAM6H,cAAgB7H,EAAM8H,aAAe9H,EAAM+H,SAE3F,KADA,GAAIoF,GAAOnN,EAAMoG,eACV+G,GAAQA,GAAQnN,EAAM6H,eAAiB7S,EAAI0oB,aAAavQ,EAAMnN,EAAM6H,eACvEsF,EAAOA,EAAKwQ,UAEhB3d,GAAM8G,wBAA0BqG,EAiKpC,QAAS8e,GAAmBC,GACxB,GAAIjsB,GAAOisB,EAAUC,YAAaC,EAAQF,EAAUC,WAGpD,OAFAlsB,GAAKiB,UAAS,GACdkrB,EAAMlrB,UAAS,GACRlM,EAAIswB,eAAe4G,EAAUG,gBAAiBpsB,EAAKosB,gBAAiBD,EAAMC,iBAErF,QAASC,GAAeJ,EAAWlsB,EAAOnH,GACtC,GAAyW0zB,GAArWrsB,EAAYF,EAAMnH,EAAQ,iBAAmB,gBAAiBsH,EAASH,EAAMnH,EAAQ,cAAgB,aAAc2zB,EAAa,EAAGC,EAASjP,EAAWtd,GAAYwsB,EAAaD,EAASvsB,EAAYA,EAAU4d,WAAW3d,IAAW,KAAMwsB,EAAeF,EAASvsB,EAAUyd,WAAazd,EAAWvE,EAAMqE,EAAMtC,cAAekvB,EAASjxB,EAAIe,KAAKmwB,iBAC5T,IAAtB3sB,EAAUa,UAAuC,GAAtBb,EAAUa,WACrCyrB,EAAarsB,GAEZwsB,IACDA,EAAehxB,EAAIe,MAEoB,OAAvCiwB,EAAatL,SAAS5yB,eACtBm+B,EAAOE,kBAAkBH,GACzBC,EAAO1rB,UAAS,GAChBgrB,EAAUa,YAAYl0B,EAAQ,eAAiB,aAAc+zB,KAE7DL,EAAaI,EAAa/2B,aAAaZ,EAAIgF,OAAO2B,EAAK,KAAM+wB,GAC7DE,EAAOE,kBAAkBP,GACzBv3B,EAAI0E,OAAO6yB,GACXK,EAAO/zB,EAAQ,YAAc,WAAW,YAAa2zB,GACrDI,EAAO1rB,UAAS,GAChBgrB,EAAUa,YAAYl0B,EAAQ,eAAiB,aAAc+zB,IAGrE,QAASI,GAAcd,EAAWlsB,EAAOslB,EAAgBzsB,GACrD,GAA2I4oB,GAAQrU,EAAQ3K,EAAQwnB,EAAU5pB,EAAMkK,EAAM0iB,EAArLV,EAAav3B,EAAIgF,OAAOgG,EAAMtC,cAAe,KAAMkvB,EAASV,EAAUC,YAAae,EAAar0B,EAAQ,eAAiB,aAAmEs0B,GAAW,CAC3MZ,GAAWh1B,UAAY,SACvBq1B,EAAO1rB,SAASrI,GAChBuU,EAASwf,EAAOP,gBACXr3B,EAAIiT,iBAAiBqd,EAAgBlY,KACtCA,EAASkY,EAEb,GACQ6H,GACA/f,EAAOxX,aAAa22B,EAAYA,EAAWhP,kBAE3CnQ,EAAO7N,YAAYgtB,GACnBY,GAAW,GAEfP,EAAOE,kBAAkBP,UACnB9K,EAASmL,EAAOQ,iBAAiBF,EAAYhB,IAAc,GAAKK,EAAWhP,gBACrF9a,GAAS8pB,EAAWhf,YAChBkU,OAAgBjE,EAAW/a,IAC3BmqB,EAAOG,YAAYl0B,EAAQ,aAAe,WAAYqzB,GACtDl3B,EAAI0E,OAAO6yB,GACXhiB,GACI9H,EACAmqB,EAAOrnB,KAAK7b,UAGhBugC,GAAYpxB,GAAS0zB,EAAWhP,gBAChCld,EAAOxH,GAAS0zB,EAAWhf,YACvBiQ,EAAWnd,GACXkK,GACIlK,EACA,GAEGmd,EAAWyM,GAClB1f,GACI0f,EACAA,EAASvgC,SAGbujC,EAAQ5P,EAAckP,GAElBhiB,EADA6C,EAAOG,aAAe0f,GAAS7f,EAAO0Q,WAAWp0B,OAAS,GAEtD0jB,EAAOG,YACP,IAIAH,EACA6f,IAIZj4B,EAAI0E,OAAO6yB,IAEfvsB,EAAMnH,EAAQ,WAAa,UAAUstB,MAAMnmB,EAAOuK,GAjdzD,GAiOO8iB,GAgGAC,EAkJAC,EAoBAC,EASAC,EAuBAzvB,EAoFA0vB,EAwKAC,EACAznB,EAnwBA7d,EAAQmC,OAAOnC,MAAOoC,EAAQpC,EAAMoC,MAAOjC,EAASyB,EAAEzB,OAAQkG,EAASrG,EAAMsC,GAAGoK,OAAQhK,EAAU1C,EAAMwC,QAAQE,QAASiK,EAAMtG,EAAOuG,IAAKooB,EAAgBroB,EAAIqoB,cAAeG,EAAaxoB,EAAIwoB,WAAYI,EAAsB5oB,EAAI4oB,oBAAqBC,EAAgB7oB,EAAI6oB,cAAe3Q,EAAYlY,EAAIkY,UAC7S5F,GACAsmB,oBAAqB,SAAUpjC,GAC3B,MAAM,gBAAkBA,GAGjBA,EAAO6c,eAFH,GAAIimB,GAAa9iC,EAAOsJ,WAIvC+5B,mBAAoB,SAAU7tB,GAC1B,GAAI8tB,GAAgB5nB,EAAW6nB,kBAAkB/tB,EACjD,OAAOsH,GAAeC,sBAAsBumB,IAEhDvmB,sBAAuB,SAAUzT,GAC7B,MAAOwT,GAAesmB,oBAAoB54B,EAAI6pB,mBAAmB/qB,MAGrEk6B,EAAWvjC,EAAMjC,QACjBC,KAAM,SAAUkT,GACZ1R,EAAEzB,OAAOK,MACL6U,cAAe/B,EACfyK,eAAgBzK,EAChBkM,aAAclM,EACdmL,wBAAyBnL,EACzBmM,YAAa,EACbC,UAAW,EACX5B,WAAW,KAGnBlF,SAAU,SAAUkM,EAAMhN,GACtBtX,KAAKud,eAAiB+G,EACtBtkB,KAAKif,YAAc3H,EACnB6rB,EAAsBnjC,MACtBgjC,EAAehjC,MAAM,IAEzBolC,OAAQ,SAAU9gB,EAAMhN,GACpBtX,KAAKgf,aAAesF,EACpBtkB,KAAKkf,UAAY5H,EACjB6rB,EAAsBnjC,MACtBgjC,EAAehjC,MAAM,IAEzBqlC,eAAgB,SAAU/gB,GACtBtkB,KAAKoY,SAASkM,EAAKwQ,WAAYN,EAAclQ,KAEjDghB,cAAe,SAAUhhB,GACrBtkB,KAAKoY,SAASkM,EAAKwQ,WAAYN,EAAclQ,GAAQ,IAEzDihB,aAAc,SAAUjhB,GACpBtkB,KAAKolC,OAAO9gB,EAAKwQ,WAAYN,EAAclQ,KAE/CkhB,YAAa,SAAUlhB,GACnBtkB,KAAKolC,OAAO9gB,EAAKwQ,WAAYN,EAAclQ,GAAQ,IAEvDxK,WAAY,SAAUwK,GAClBtkB,KAAKqlC,eAAe/gB,GACpBtkB,KAAKwlC,YAAYlhB,IAErBmhB,mBAAoB,SAAUnhB,GAC1BtkB,KAAKoY,SAASkM,EAAM,GACpBtkB,KAAKolC,OAAO9gB,EAAMA,EAAuB,IAAlBA,EAAKpM,SAAiB,aAAe,aAAarX,SAE7EwX,SAAU,SAAUyhB,GAChB,GAAI9tB,GAAOhM,IACP85B,GACA9tB,EAAKo5B,OAAOp5B,EAAKuR,eAAgBvR,EAAKiT,aAEtCjT,EAAKoM,SAASpM,EAAKgT,aAAchT,EAAKkT,YAG9CwmB,eAAgB,WACZ,GAAI15B,GAAOhM,KAAMmX,EAAQnL,EAAK25B,YAC1B35B,GAAKuR,gBAAkBvR,EAAKiS,yBAC5BjS,EAAKs5B,cAAcvQ,EAAoB/oB,EAAKiS,wBAAyBjS,EAAKuR,iBAE9EvR,EAAKqM,UAAS,GACb,QAASutB,GAAcrQ,GACpB,KAAOA,EAAS/d,QACR+d,EAASsQ,oBACTD,EAAcrQ,EAASuQ,sBAEvBvQ,EAAS1kB,UAGnB,GAAI2zB,GAAcrtB,KAExBqI,cAAe,WACX,GAAIvU,GAAWoS,EAAW6nB,kBAAkBllC,KAC5C,OAAO,SAAS+lC,GAAaxQ,GAEzB,IADA,GAAIjR,GAAM0hB,EAAO/6B,EAASg7B,yBACnB3hB,EAAOiR,EAAS/d,QACnB8M,EAAOA,EAAK+Q,WAAWE,EAASsQ,qBAC5BtQ,EAASsQ,qBACTvhB,EAAK5N,YAAYqvB,EAAaxQ,EAASuQ,uBAE3CE,EAAKtvB,YAAY4N,EAErB,OAAO0hB,IACT,GAAIxB,GAAcxkC,QAExBkmC,gBAAiB,WAAA,GAMTj7B,GALAe,EAAOhM,KAAMmX,EAAQnL,EAAK25B,YAM9B,OALI35B,GAAKuR,gBAAkBvR,EAAKiS,yBAC5BjS,EAAKs5B,cAAcvQ,EAAoB/oB,EAAKiS,wBAAyBjS,EAAKuR,iBAE9EvR,EAAKqM,UAAS,GACVpN,EAAWoS,EAAW6nB,kBAAkBl5B,GACrC,QAASm6B,GAAe5Q,GAE3B,IADA,GAAIjR,GAAM0hB,EAAO/6B,EAASg7B,yBACnB3hB,EAAOiR,EAAS/d,QACf+d,EAASsQ,qBACTvhB,EAAOA,EAAK+Q,WAAU,GACtB/Q,EAAK5N,YAAYyvB,EAAe5Q,EAASuQ,wBAEzCvQ,EAAS1kB,OAAO7E,EAAKo6B,eAEzBJ,EAAKtvB,YAAY4N,EAErB,OAAO0hB,IACT,GAAIxB,GAAcrtB,KAExBkvB,WAAY,SAAU/hB,GAClB,GAAItY,GAAOhM,IACP20B,GAAW3oB,EAAKuR,iBACZvR,EAAKiT,aAAejT,EAAKuR,eAAepF,UAAUtX,QAClDsL,EAAI+oB,cAAclpB,EAAKuR,eAAgBvR,EAAKiT,aAEhD9S,EAAI2D,YAAYwU,EAAMtY,EAAKuR,iBAE3BpR,EAAIyuB,SAAS5uB,EAAKuR,eAAgB+G,EAAMtY,EAAKiT,aAEjDjT,EAAKoM,SAASpM,EAAKuR,eAAgBvR,EAAKiT,cAE5C0mB,WAAY,WACR,MAAOvkC,GAAEzB,OAAO,GAAIwlC,GAASnlC,KAAK6U,gBAC9B0I,eAAgBvd,KAAKud,eACrByB,aAAchf,KAAKgf,aACnBf,wBAAyBje,KAAKie,wBAC9BgB,YAAajf,KAAKif,YAClBC,UAAWlf,KAAKkf,UAChB5B,UAAWtd,KAAKsd,UAChB8oB,cAAepmC,QAGvBo3B,SAAU,WACN,GAAIkP,GAAgBtmC,KAAKud,eAAeib,SAAU+N,EAAcvmC,KAAKgf,aAAawZ,QAClF,QACqB,SAAjB8N,EAA2BtmC,KAAKud,eAAepF,UAAYmuB,GAC3D,IACAtmC,KAAKif,YACL,QACe,SAAfsnB,EAAyBvmC,KAAKgf,aAAa7G,UAAYouB,GACvD,IACAvmC,KAAKkf,UACL,MAIZimB,GAASqB,SAAW,SAAUliB,GAC1B,MAAO,IAAI6gB,GAAS7gB,EAAKzP,gBAmEzB2vB,EAAgB5iC,EAAMjC,QACtBC,KAAM,SAAUuX,GAOZ,GANA/V,EAAEzB,OAAOK,MACLmX,MAAOA,EACPsvB,SAAU,KACVC,MAAO,KACPC,KAAM,QAENxvB,EAAMmG,UAAV,CAGA,GAAIsE,GAAOzK,EAAM8G,uBACjBje,MAAK0mC,MAAQvvB,EAAMoG,gBAAkBqE,GAAS+S,EAAWxd,EAAMoG,gBAAuEwX,EAAoBnT,EAAMzK,EAAMoG,gBAArFpG,EAAMoG,eAAe0X,WAAW9d,EAAM8H,aACvHjf,KAAK2mC,KAAOxvB,EAAM6H,cAAgB4C,GAAS+S,EAAWxd,EAAM6H,cAAiE+V,EAAoBnT,EAAMzK,EAAM6H,cAAc0F,YAA/FvN,EAAM6H,aAAaiW,WAAW9d,EAAM+H,aAEpH0nB,QAAS,WACL,QAAS5mC,KAAK0mC,OAElBlvB,KAAM,WACF,GAAIxL,GAAOhM,KAAM6mC,EAAU76B,EAAKy6B,SAAWz6B,EAAK06B,KAYhD,OAXA16B,GAAK06B,MAAQ16B,EAAKy6B,UAAYz6B,EAAKy6B,SAAS/hB,aAAe1Y,EAAK26B,KAAO36B,EAAKy6B,SAAS/hB,YAAc,KAC/FiQ,EAAW3oB,EAAKy6B,YACZz6B,EAAKmL,MAAM6H,cAAgBhT,EAAKy6B,WAChCI,EAAUA,EAAQxR,WAAU,GAC5BwR,EAAQrR,WAAWxpB,EAAKmL,MAAM+H,UAAW2nB,EAAQhmC,OAASmL,EAAKmL,MAAM+H,YAErElT,EAAKmL,MAAMoG,gBAAkBvR,EAAKy6B,WAClCI,EAAUA,EAAQxR,WAAU,GAC5BwR,EAAQrR,WAAW,EAAGxpB,EAAKmL,MAAM8H,eAGlC4nB,GAEXC,SAAU,SAAUC,GAEhB,QAASvvB,KAGL,MAFAxL,GAAKy6B,SAAWz6B,EAAK06B,MACrB16B,EAAK06B,MAAQ16B,EAAKy6B,UAAYz6B,EAAKy6B,SAAS/hB,aAAe1Y,EAAK26B,KAAO36B,EAAKy6B,SAAS/hB,YAAc,KAC5F1Y,EAAKy6B,SAEhB,IANA,GAAiBI,GAAb76B,EAAOhM,KAMJ6mC,EAAUrvB,KACTxL,EAAK65B,oBACL75B,EAAK85B,qBAAqBgB,SAASC,GAEnCA,EAASF,EAGjB,OAAOA,IAEXh2B,OAAQ,SAAUu1B,GAAV,GACuIp2B,GAAOyxB,EAAKrxB,EAe/ImU,EAEIyiB,EAjBRh7B,EAAOhM,KAAMinC,EAAmBj7B,EAAKmL,MAAMoG,gBAAkBvR,EAAKy6B,SAAUS,EAAiBl7B,EAAKmL,MAAM6H,cAAgBhT,EAAKy6B,QAC7H9R,GAAW3oB,EAAKy6B,YAAcQ,GAAoBC,IAClDl3B,EAAQi3B,EAAmBj7B,EAAKmL,MAAM8H,YAAc,EACpDwiB,EAAMyF,EAAiBl7B,EAAKmL,MAAM+H,UAAYlT,EAAKy6B,SAAS5lC,OAC5DuP,EAAQqxB,EAAMzxB,EACVo2B,IAAkBa,GAAoBC,KAClCl7B,EAAKy6B,UAAYL,EAAc7oB,gBAAkBvN,GAASo2B,EAAcnnB,cACxEmnB,EAAcnnB,aAAe7O,GAE7BpE,EAAKy6B,UAAYL,EAAcpnB,cAAgByiB,GAAO2E,EAAclnB,YACpEknB,EAAclnB,WAAa9O,IAGnCpE,EAAKy6B,SAASjR,WAAWxlB,EAAOI,KAE5BmU,EAASvY,EAAKy6B,SAAS3R,YACvBsR,GAAkBp6B,EAAKmL,MAAMoG,gBAAkBgH,GAAUvY,EAAKmL,MAAM6H,cAAgBuF,IAChFyiB,EAAYxS,EAAcxoB,EAAKy6B,UAC/BliB,GAAU6hB,EAAc7oB,gBAAkBypB,GAAaZ,EAAcnnB,cACrEmnB,EAAcnnB,aAAe,GAE7BsF,GAAU6hB,EAAcpnB,cAAgBgoB,EAAYZ,EAAclnB,YAClEknB,EAAclnB,WAAa,IAGnC/S,EAAI0E,OAAO7E,EAAKy6B,YAGxBZ,kBAAmB,WACf,OAAQlR,EAAW30B,KAAKymC,YAAct6B,EAAIiT,iBAAiBpf,KAAKymC,SAAUzmC,KAAKmX,MAAMoG,iBAAmBpR,EAAIiT,iBAAiBpf,KAAKymC,SAAUzmC,KAAKmX,MAAM6H,gBAE3J8mB,mBAAoB,WAChB,MAAO,IAAItB,GAAcxkC,KAAKmnC,gBAElCA,YAAa,WACT,GAAIn7B,GAAOhM,KAAMonC,EAAWp7B,EAAKmL,MAAMwuB,YAQvC,OAPAyB,GAAS3B,mBAAmBz5B,EAAKy6B,UAC7Bt6B,EAAIiT,iBAAiBpT,EAAKy6B,SAAUz6B,EAAKmL,MAAMoG,iBAC/C6pB,EAAShvB,SAASpM,EAAKmL,MAAMoG,eAAgBvR,EAAKmL,MAAM8H,aAExD9S,EAAIiT,iBAAiBpT,EAAKy6B,SAAUz6B,EAAKmL,MAAM6H,eAC/CooB,EAAShC,OAAOp5B,EAAKmL,MAAM6H,aAAchT,EAAKmL,MAAM+H,WAEjDkoB,KAGX3C,EAAe7iC,EAAMjC,QACrBC,KAAM,SAAUkT,GACZ9S,KAAK6U,cAAgB/B,EACrB9S,KAAK8e,WAAa,GAEtBD,SAAU,SAAU1H,GAChB,GAAIksB,GAAYrjC,KAAK6U,cAAchB,KAAKmwB,iBACxCP,GAAeJ,EAAWlsB,GAAO,GACjCssB,EAAeJ,EAAWlsB,GAAO,GACjCksB,EAAUgE,UAEdzoB,gBAAiB,WACb,GAAID,GAAY3e,KAAK6U,cAAc8J,SACb,SAAlBA,EAAU7S,MACV6S,EAAUmF,SAGlB/E,WAAY,WAAA,GACJskB,GAA+F33B,EAAS+wB,EAyBpGlf,EAAuCyB,EAAmCnL,EAEtEyzB,EAAoBC,EA3BjBpwB,EAAQ,GAAIguB,GAASnlC,KAAK6U,eAAgB8J,EAAY3e,KAAK6U,cAAc8J,SACxF,KAGI,GAFA0kB,EAAY1kB,EAAU9E,cACtBnO,EAAU23B,EAAUZ,KAAOY,EAAUZ,KAAK,GAAKY,EAAUG,gBACrD93B,EAAQmJ,eAAiB7U,KAAK6U,cAC9B,MAAOsC,GAEb,MAAO+rB,GACL,MAAO/rB,GAEX,GAAsB,WAAlBwH,EAAU7S,KACVqL,EAAM2C,WAAWupB,EAAUZ,KAAK,QAehC,IAbAhG,EAAiB2G,EAAmBC,GACpCc,EAAcd,EAAWlsB,EAAOslB,GAAgB,GAChD0H,EAAcd,EAAWlsB,EAAOslB,GAAgB,GACX,GAAjCtlB,EAAMoG,eAAerF,UACrBf,EAAMiB,SAASjB,EAAM6H,aAAc7H,EAAM8H,aAEV,GAA/B9H,EAAM6H,aAAa9G,UACnBf,EAAMiuB,OAAOjuB,EAAMoG,eAAgBpG,EAAM+H,WAEe,IAAxDmkB,EAAUkB,iBAAiB,aAAclB,IACzClsB,EAAMkB,UAAS,GAEfkF,EAAiBpG,EAAMoG,eAAgByB,EAAe7H,EAAM6H,aAAcnL,EAAO7T,KAAK6U,cAAchB,OACnGsD,EAAMmG,WAAmC,IAAtBnG,EAAM8H,aAAqB9H,EAAM+H,WAAa8V,EAAc7d,EAAM6H,eAAmBzB,GAAkByB,GAAgB2V,EAAWpX,IAAmBA,EAAeuX,YAAcjhB,GAAO,CAE7M,IADIyzB,GAAa,EAAOC,GAAW,EACM,IAAlC/S,EAAcjX,IAAyBA,GAAkBA,EAAeuX,WAAWtQ,YAAcjH,GAAkB1J,GACtH0J,EAAiBA,EAAeuX,WAChCwS,GAAa,CAEjB,MAAO9S,EAAcxV,IAAiBgW,EAAchW,EAAa8V,YAAc,GAAK9V,GAAgBA,EAAa8V,WAAW+D,WAAa7Z,GAAgBnL,GACrJmL,EAAeA,EAAa8V,WAC5ByS,GAAW,CAEXhqB,IAAkB1J,GAAQmL,GAAgBnL,GAAQyzB,GAAcC,IAChEpwB,EAAMiB,SAASmF,EAAgB,GAC/BpG,EAAMiuB,OAAOpmB,EAAcgW,EAAcnhB,KAIrD,MAAOsD,MAsFXutB,EAAkB9iC,EAAMjC,QACxBC,KAAM,SAAUuX,GACZnX,KAAKwnC,UAAY,WAEb,QAASC,GAAMnjB,GACX,GAAInY,EAAIqO,GAAG8J,EAAM,QAA2B,GAAjBA,EAAKpM,YAAmB/L,EAAI6sB,aAAa1U,IAA2B,UAAlBA,EAAKnM,WAC9EyI,EAAMzgB,KAAKmkB,OAGX,KADAA,EAAOA,EAAKE,WACLF,GACHmjB,EAAMnjB,GACNA,EAAOA,EAAKI,YARxB,GAAI9D,KAaJ,OADA,IAAI4jB,GAAcrtB,GAAO2vB,SAASW,GAC3B7mB,MAIf+jB,EAA0BH,EAAc7kC,QACxCkmC,kBAAmB,WACf,GAAIzG,GAAYv5B,EAAO+U,YAAc/U,EAAO+U,WAAWwkB,SACvD,OAAOA,KAAcA,EAAUp/B,KAAKymC,WAAajC,EAAc1kC,GAAG+lC,kBAAkB9lC,KAAKC,OAE7F8lC,mBAAoB,WAChB,MAAO,IAAInB,GAAwB3kC,KAAKmnC,kBAG5CvC,EAA4BhjC,EAAMjC,QAClCC,KAAM,SAAUuX,GACZnX,KAAKwnC,UAAY,WAGb,QAASC,GAAMnjB,GACX,GAAI8a,IAAcA,EAAU9a,GACxB,GAAInY,EAAIqO,GAAG8J,EAAM,QAA2B,GAAjBA,EAAKpM,YAAmB/L,EAAI6sB,aAAa1U,IAA2B,UAAlBA,EAAKnM,WAC9EyI,EAAMzgB,KAAKmkB,OAGX,KADAA,EAAOA,EAAKE,WACLF,GACHmjB,EAAMnjB,GACNA,EAAOA,EAAKI,YAXf,GACT9D,MACAwe,EAAYv5B,EAAO+U,YAAc/U,EAAO+U,WAAWwkB,SAevD,OADA,IAAIuF,GAAwBxtB,GAAO2vB,SAASW,GACrC7mB,MAIfzL,EAAevT,EAAMjC,QACrBC,KAAM,SAAUuX,EAAOtD,EAAMhU,GACzB,GAAImM,GAAOhM,IACXgM,GAAKmL,MAAQA,EACbnL,EAAK07B,SAAWrqB,EAAW6nB,kBAAkB/tB,GAC7CnL,EAAK6H,KAAOA,GAAQ7H,EAAK27B,YAAYxwB,GACV,QAAvBhL,EAAI/I,KAAK4I,EAAK6H,QACd7H,EAAK07B,SAAW17B,EAAK6H,MAEzB7H,EAAKuR,eAAiBvR,EAAK47B,WAAWzwB,EAAMoG,gBAC5CvR,EAAKgT,aAAehT,EAAK47B,WAAWzwB,EAAM6H,cAC1ChT,EAAKiT,YAAcjT,EAAKsL,OAAOH,EAAMoG,eAAgBpG,EAAM8H,aAC3DjT,EAAKkT,UAAYlT,EAAKsL,OAAOH,EAAM6H,aAAc7H,EAAM+H,WACvDlT,EAAK2O,WAAa9a,GAAWA,EAAQ8a,WACjC3O,EAAK2O,aACL3O,EAAK67B,qBAAuBhiC,EAAO+U,WAAWktB,iBAAiB97B,EAAK6H,OAExE7H,EAAK0R,KAAO1R,EAAK6H,KAAKnF,UAClB1C,EAAK2O,aAAe3O,EAAK67B,qBAAqB/jB,OAC9Cje,EAAO+U,WAAWmtB,kBAAkB/7B,EAAK6H,KAAM7H,EAAK67B,uBAG5DzD,MAAO,SAAU9f,GAEb,IAFG,GAGKpM,GAFJ0gB,EAAS,EAAGoP,EAAW1jB,EAAKpM,SACzBoM,EAAOA,EAAKoQ,iBACXxc,EAAWoM,EAAKpM,SACJ,GAAZA,GAAiB8vB,GAAY9vB,GAC7B0gB,IAEJoP,EAAW9vB,CAEf,OAAO0gB,IAEX+O,YAAa,SAAUxwB,GAEnB,IADA,GAAIyK,GAAOzK,EAAM8G,wBACV2D,IAA0B,GAAjBA,EAAK1J,UAAiB0J,EAAK8T,cAAgB9T,EAAK8T,WAAWvqB,iBAA8E,SAA3DyW,EAAK8T,WAAWvqB,gBAAgBgN,UAAUvS,iBACpIgc,EAAOA,EAAKkT,UAEhB,OAAOlT,IAEXqmB,YAAa,WACT,GAAIj8B,GAAOhM,IACXmM,GAAI6uB,eAAehvB,EAAK6H,MACxB7H,EAAK6H,KAAKnF,UAAY1C,EAAK0R,KACvB1R,EAAK2O,aAAe3O,EAAK67B,qBAAqB/jB,OAC9Cje,EAAO+U,WAAWmtB,kBAAkB/7B,EAAK6H,KAAM7H,EAAK67B,uBAG5DvwB,OAAQ,SAAUgN,EAAM3Y,GACpB,GAAqB,GAAjB2Y,EAAKpM,SACL,MAAQoM,EAAOA,EAAKoQ,kBAAqC,GAAjBpQ,EAAKpM,UACzCvM,GAAS2Y,EAAKnM,UAAUtX,MAGhC,OAAO8K,IAEXi8B,WAAY,SAAUtjB,GAElB,IADA,GAAI4jB,MACG5jB,GAAQtkB,KAAK0nC,UAChBQ,EAAK/nC,KAAKH,KAAKokC,MAAM9f,IACrBA,EAAOA,EAAKwQ,UAEhB,OAAOoT,IAEXC,aAAc,SAAUhxB,EAAOnH,EAAOk4B,EAAME,GAExC,IADA,GAAI9jB,GAAOtkB,KAAK0nC,SAAU7mC,EAASqnC,EAAKrnC,OAAQyW,EAAS8wB,EAClDvnC,KACHyjB,EAAOA,EAAK2Q,WAAWiT,EAAKrnC,GAEhC,MAAOyjB,GAAyB,GAAjBA,EAAKpM,UAAiBoM,EAAKnM,UAAUtX,OAASyW,GACzDA,GAAUgN,EAAKnM,UAAUtX,OACzByjB,EAAOA,EAAKI,WAEZJ,IAAQhN,GAAU,GAClBH,EAAMnH,EAAQ,WAAa,UAAUsU,EAAMhN,IAGnDgH,QAAS,WACL,GAAItS,GAAOhM,KAAM44B,EAAS5sB,EAAKmL,MAAMwuB,YAGrC,OAFA35B,GAAKm8B,aAAavP,GAAQ,EAAM5sB,EAAKuR,eAAgBvR,EAAKiT,aAC1DjT,EAAKm8B,aAAavP,GAAQ,EAAO5sB,EAAKgT,aAAchT,EAAKkT,WAClD0Z,KAGXiM,EAASjjC,EAAMjC,QACfC,KAAM,WACFI,KAAKqoC,MAAQ,MAEjBC,SAAU,SAAUnxB,GAAV,GACFnL,GAAOhM,KACPqoC,EAAQr8B,EAAKq8B,MAAQl8B,EAAIgF,OAAOkM,EAAW6nB,kBAAkB/tB,GAAQ,QAAU4gB,UAAW,YAK9F,OAJA5gB,GAAMkvB,WAAWgC,GACjBl8B,EAAIyrB,aAAayQ,EAAM3T,iBACvBvoB,EAAIyrB,aAAayQ,EAAM3jB,aACvBvN,EAAM2C,WAAWuuB,GACVA,GAEXE,YAAa,SAAUpxB,GAAV,GAKLE,GACAmxB,EAGAlkB,EAIImkB,EAZJz8B,EAAOhM,KAAMohC,EAAWp1B,EAAKq8B,MAAM3T,gBAAiBzV,EAAc,CAClEmiB,KACAniB,EAAc0V,EAAWyM,GAAYA,EAASjpB,UAAUtX,OAAS2zB,EAAc4M,IAE/E/pB,EAAYrL,EAAKq8B,MAAMvT,WACvB0T,EAAiBpH,EAAW5M,EAAc4M,GAAY,EAC1Dj1B,EAAI0E,OAAO7E,EAAKq8B,OAChBhkB,EAAUhN,GACNiN,EAAOjN,EAAU4d,WAAWuT,GAC5B7T,EAAWrQ,GACXnN,EAAMiB,SAASkM,EAAMrF,GACdqF,GACHmkB,EAAWt8B,EAAIwsB,aAAarU,GAC5BmkB,EACAtxB,EAAMiB,SAASqwB,EAAUA,EAAStwB,UAAUtX,QAE5CsW,EAAMiqB,EAAW,gBAAkB,kBAAkB9c,KAGpDpiB,EAAQ+R,MAASoD,EAAU3I,YAC5B2I,EAAU3I,UAAY,wBAE1ByI,EAAMsuB,mBAAmBpuB,IAE7BF,EAAMkB,UAAS,IAEnBqwB,IAAK,SAAUvxB,EAAOwxB,GAAjB,GAQGC,GAUI3lB,EAjBJjX,EAAOhM,KACPsd,EAAYnG,EAAMmG,YAAcD,EAAWwrB,aAAa1xB,GACxDrE,EAAMuK,EAAW6nB,kBAAkB/tB,EAsBvC,OArBIwxB,IAAUxxB,EAAMmG,YAChBtR,EAAKs8B,SAASnxB,GACdA,EAAQkG,EAAWsrB,OAAOxxB,IAE1ByxB,EAAgBzxB,EAAMwuB,aAC1BiD,EAAcvwB,UAAS,GACvBrM,EAAKy1B,IAAMt1B,EAAIgF,OAAO2B,EAAK,QAAUilB,UAAW,aAChD6Q,EAAcvC,WAAWr6B,EAAKy1B,KAC9BmH,EAAgBzxB,EAAMwuB,aACtBiD,EAAcvwB,UAAS,GACvBrM,EAAKgE,MAAQhE,EAAKy1B,IAAIpM,WAAU,GAChCuT,EAAcvC,WAAWr6B,EAAKgE,OAC9BhE,EAAK88B,mBAAmB98B,EAAKgE,MAAOhE,EAAKy1B,KACrCnkB,IACI2F,EAAMnQ,EAAIi2B,eAAe,UAC7B58B,EAAI2D,YAAYmT,EAAIoS,YAAarpB,EAAKgE,OACtC7D,EAAIY,aAAakW,EAAKjX,EAAKy1B,MAE/Bpd,EAAUlN,EAAM8G,yBAChB9G,EAAMkuB,eAAer5B,EAAKgE,OAC1BmH,EAAMquB,YAAYx5B,EAAKy1B,KAChBtqB,GAEX2xB,mBAAoB,SAAU94B,EAAOyxB,GAC7BzxB,EAAM0kB,iBAAsD,UAAnC1kB,EAAM0kB,gBAAgBvc,WAC/ChM,EAAI0E,OAAOb,EAAM0kB,iBAEjB+M,EAAI/c,aAA4C,UAA7B+c,EAAI/c,YAAYvM,WACnChM,EAAI0E,OAAO4wB,EAAI/c,cAGvBskB,iBAAkB,SAAU1kB,GAGxB,IAHc,GACV8f,GAAQ5P,EAAclQ,GACtB2kB,EAAU3kB,EACP2kB,EAAQvU,iBACa,GAApBuU,EAAQ/wB,UAAqD,GAApC+wB,EAAQvU,gBAAgBxc,UACjDksB,IAEJ6E,EAAUA,EAAQvU,eAEtB,OAAO0P,IAEXvzB,OAAQ,SAAUsG,GAAV,GACiD+xB,GAAsBC,EAAoBC,EAa3FC,EAIA/rB,EACAgsB,EAaArqB,EACAC,EAaAqqB,EACAC,EACAC,EACAC,EAhDA19B,EAAOhM,KAAMgQ,EAAQhE,EAAKgE,MAAOyxB,EAAMz1B,EAAKy1B,GAEhD,KADApd,EAAUlN,EAAM8G,0BACRjO,EAAM0U,aAAe1U,EAAM8kB,YAC/B9kB,EAAQA,EAAM8kB,UAElB,OAAQ2M,EAAI/M,iBAAmB+M,EAAI3M,YAC/B2M,EAAMA,EAAI3M,UAoBd,IAlBAoU,EAAuBl5B,EAAM0kB,iBAAqD,GAAlC1kB,EAAM0kB,gBAAgBxc,UAAkBlI,EAAM0U,aAA6C,GAA9B1U,EAAM0U,YAAYxM,SAC/HixB,EAAqB1H,EAAI/M,iBAAmD,GAAhC+M,EAAI/M,gBAAgBxc,UAAkBupB,EAAI/c,aAA2C,GAA5B+c,EAAI/c,YAAYxM,SACrHkxB,EAAkBF,GAAwBC,EAC1Cn5B,EAAQA,EAAM0U,YACd+c,EAAMA,EAAI/M,gBACN2U,EAAgBr5B,IAAUyxB,GAAOt1B,EAAIurB,MAAM1nB,GAC3Cq5B,GAAiBr5B,EAAMnP,OAAS,IAChCmP,EAAMmI,UAAYnI,EAAMmI,UAAUwxB,OAAO,IAEzCrsB,EAAY+rB,EACZC,GAAmB,EACnBt5B,GAAShE,EAAKy1B,MACd6H,IAAqBt9B,EAAKgE,MAAM0kB,gBAChC1kB,EAAQyxB,EAAMz1B,EAAKgE,MAAM0kB,iBAAmB1oB,EAAKy1B,IAAI/c,YACrDpH,GAAY,GAEhBnR,EAAI0E,OAAO7E,EAAKgE,OAChB7D,EAAI0E,OAAO7E,EAAKy1B,MACXzxB,IAAUyxB,EAGX,MAFAtqB,GAAMsuB,mBAAmBtuB,EAAM8G,6BAC/B9G,GAAMkB,UAAS,EAKnB,IAFI4G,EAAc3B,EAAYqX,EAAW3kB,GAASA,EAAMmI,UAAUtX,OAASmP,EAAMilB,WAAWp0B,OAAS,EACjGqe,EAAYyV,EAAW8M,GAAOA,EAAItpB,UAAUtX,OAAS4gC,EAAIxM,WAAWp0B,OAClD,GAAlBmP,EAAMkI,SACN,KAAOlI,EAAM0kB,iBAAqD,GAAlC1kB,EAAM0kB,gBAAgBxc,UAClDlI,EAAQA,EAAM0kB,gBACdzV,GAAejP,EAAMmI,UAAUtX,MAGvC,IAAoB,GAAhB4gC,EAAIvpB,SACJ,KAAOupB,EAAI/M,iBAAmD,GAAhC+M,EAAI/M,gBAAgBxc,UAC9CupB,EAAMA,EAAI/M,gBACVxV,GAAauiB,EAAItpB,UAAUtX,MAG/B0oC,GAAcv5B,EAAM8kB,WACpB0U,EAAY/H,EAAI3M,WAChB2U,EAAazpC,KAAKgpC,iBAAiBh5B,GACnC05B,EAAW1pC,KAAKgpC,iBAAiBvH,GACrCpd,EAAUklB,GACY,GAAlBv5B,EAAMkI,WACNlI,EAAQu5B,EAAYtU,WAAWwU,IAEnCplB,EAAUmlB,GACU,GAAhB/H,EAAIvpB,WACJupB,EAAM+H,EAAUvU,WAAWyU,IAE3BpsB,GACsB,GAAlBtN,EAAMkI,SACNf,EAAMiB,SAASpI,EAAOiP,GAEtB9H,EAAMmyB,EAAmB,gBAAkB,kBAAkBt5B,GAEjEmH,EAAMkB,UAAS,KAEO,GAAlBrI,EAAMkI,SACNf,EAAMiB,SAASpI,EAAOiP,GAEtB9H,EAAMkuB,eAAer1B,GAEL,GAAhByxB,EAAIvpB,SACJf,EAAMiuB,OAAO3D,EAAKviB,GAElB/H,EAAMquB,YAAY/D,IAGtBz1B,EAAKq8B,OACLr8B,EAAKu8B,YAAYpxB,MAIzB2tB,EAAW,2DACXznB,GACAuD,MAAO,SAAUzJ,GACb,GAAIyJ,GAAQvD,EAAWF,UAAUhG,EAQjC,OAPKyJ,GAAM/f,SACPsW,EAAMsuB,mBAAmBtuB,EAAM8G,yBAC/B2C,EAAQvD,EAAWF,UAAUhG,GACxByJ,EAAM/f,SACP+f,EAAQzU,EAAIssB,sBAAsBthB,EAAM8G,2BAGzC2C,GAEXzD,UAAW,SAAUhG,GACjB,MAAO,IAAIutB,GAAgBvtB,GAAOqwB,aAEtCoC,kBAAmB,SAAUzyB,GACzB,GAAIyJ,MAAYipB,EAAkBhkC,EAAO+U,YAAc/U,EAAO+U,WAAWivB,eAIzE,OAHIA,KAAoBA,EAAgB1yB,EAAM8G,2BAC1C2C,EAAQ,GAAIgkB,GAA0BztB,GAAOqwB,aAE1C5mB,GAEXskB,kBAAmB,SAAU/tB,GACzB,GAAIoG,GAAiBpG,EAAMoG,cAC3B,OAAkC,IAA3BA,EAAerF,SAAgBqF,EAAiBA,EAAe1I,eAE1EgF,YAAa,SAAU5O,GACnB,MAAI/I,GAAQ+R,MAAQ/R,EAAQ4e,QAAU,EAC3B,GAAIqkB,GAASl6B,GAEjBA,EAAS4O,eAEpBvB,YAAa,SAAUnB,GAAV,GAMLwH,GALAmrB,EAAQzsB,EAAWysB,MAAM3yB,EACzB2yB,KACA3yB,EAAMmuB,cAAcwE,GACpB3yB,EAAMquB,YAAYsE,IAElBnrB,EAAYF,EAAeumB,mBAAmB7tB,GAClDwH,EAAUC,kBACVD,EAAUE,SAAS1H,IAEvB4yB,UAAW,SAAU5yB,GACjB,MAAO3X,GAAM6D,OAAO,oBAAqB8I,EAAI/I,KAAK+T,EAAMoG,gBAAiBpG,EAAM8H,YAAa9S,EAAI/I,KAAK+T,EAAM6H,cAAe7H,EAAM+H;EAEpInJ,MAAO,SAAUoB,EAAOmN,EAAM/V,GAC1B,QAASy7B,GAAUh6B,GAAnB,GAIQi6B,GAHAC,EAAiB/yB,EAAMwuB,YAC3BuE,GAAe7xB,SAASrI,GACxBk6B,EAAel6B,EAAQ,iBAAmB,eAAesU,GACrD2lB,EAAWC,EAAehE,kBAC1B33B,IACA07B,EAAW99B,EAAIoC,KAAK07B,IAExB99B,EAAI6D,EAAQ,eAAiB,eAAei6B,EAAU3lB,GAE1D0lB,GAAU,GACVA,GAAU,IAEdG,OAAQ,SAAUhzB,EAAOhD,GACrB,GAAIyM,KAOJ,OANA,IAAI4jB,GAAcrtB,GAAO2vB,SAAS,SAAUxiB,GACxC,GAAI8lB,GAASj2B,EAAImQ,EACb8lB,IAAUhpC,EAAEmC,QAAQ6mC,EAAQxpB,GAAS,GACrCA,EAAMzgB,KAAKiqC,KAGZxpB,GAEXypB,OAAQ,SAAUlzB,EAAOmzB,GACrB,GAAIC,GAAWD,CAMf,OALwB,gBAAbA,KACPA,EAAY,SAAUhmB,GAClB,MAAOnY,GAAIqO,GAAG8J,EAAMimB,KAGrBltB,EAAW8sB,OAAOhzB,EAAO,SAAUmN,GACtC,GAAIgmB,EAAUhmB,GACV,MAAOA,MAInBkmB,WAAY,SAAUrzB,GAClB,MAAOkG,GAAWgtB,OAAOlzB,EAAO,SAAUmN,GACtC,MAAyB,YAAlBA,EAAKyT,aAGpB+R,MAAO,SAAU3yB,GACb,GAAIyJ,GAAQvD,EAAWgtB,OAAOlzB,EAAO,MACrC,IAAoB,GAAhByJ,EAAM/f,OACN,MAAO+f,GAAM,IAGrB6pB,UAAW,SAAUrE,EAAe9hB,GAAzB,GAIHnN,GAEIitB,EACA7f,CANR,IAAkC,IAA9B6hB,EAAcnnB,YACd,OAAO,CAGX,KADI9H,EAAQivB,EAAcT,aACG,IAAtBxuB,EAAM8H,aAAqB9H,EAAMoG,gBAAkB+G,GAAM,CAG5D,IAFI8f,EAAQj4B,EAAIqoB,cAAcrd,EAAMoG,gBAChCgH,EAASpN,EAAMoG,eAAeuX,WAC3BsP,EAAQ,GAAK7f,EAAO6f,EAAQ,IAAMj4B,EAAI2rB,cAAcvT,EAAO6f,EAAQ,KACtEA,GAEJjtB,GAAMiB,SAASmM,EAAQ6f,GAE3B,MAA6B,KAAtBjtB,EAAM8H,aAAqB9H,EAAMoG,gBAAkB+G,GAE9DomB,QAAS,SAAUtE,EAAe9hB,GAU9B,QAASmjB,GAAMnjB,GACNnY,EAAI2rB,cAAcxT,IAAWnY,EAAIwoB,WAAWrQ,IAAS,cAAc7L,KAAK6L,EAAKnM,YAC9EyI,EAAMzgB,KAAKmkB,GAZd,GAGDtU,GAMA4Q,EARAzJ,EAAQivB,EAAcT,YAe1B,OAdAxuB,GAAMkB,UAAS,GACXrI,EAAQmH,EAAMoG,eACdpR,EAAIwoB,WAAW3kB,IAAUmH,EAAM8H,aAAe9S,EAAI6oB,cAAchlB,KAChEmH,EAAMiB,SAASpI,EAAM8kB,WAAY3oB,EAAIqoB,cAAcxkB,GAAS,GAC5DmH,EAAMkB,UAAS,IAEnBlB,EAAMiuB,OAAO9gB,EAAMnY,EAAI6oB,cAAc1Q,IACjC1D,KAMJ,GAAI4jB,GAAcrtB,GAAO2vB,SAASW,IAC1B7mB,EAAM/f,QAElB8pC,qBAAsB,SAAUxzB,GAM5B,QAASyzB,GAAMtzB,EAAQD,GAAvB,GAKa/T,GAJLzC,EAASsL,EAAI6oB,cAAc3d,EAC/B,IAAIC,GAAUzW,EACV,OAAO,CAEX,KAASyC,EAAIgU,EAAQhU,EAAIzC,EAAQyC,IAC7B,IAAK6I,EAAI2rB,cAAczgB,EAAU4d,WAAW3xB,IACxC,OAAO,CAGf,QAAO,EAbX,IAHkB,GACdunC,GAAgB1+B,EAAI0vB,eAAe1kB,EAAMoG,gBACzCutB,EAAc3+B,EAAI0vB,eAAe1kB,EAAM6H,cACd,IAAtB7H,EAAM8H,aAAqB9H,EAAMoG,gBAAkBstB,GACtD1zB,EAAMiB,SAASjB,EAAMoG,eAAeuX,WAAY3oB,EAAIqoB,cAAcrd,EAAMoG,gBAc5E,MAAOqtB,EAAMzzB,EAAM+H,UAAW/H,EAAM6H,eAAiB7H,EAAM6H,cAAgB8rB,GACvE3zB,EAAMiuB,OAAOjuB,EAAM6H,aAAa8V,WAAY3oB,EAAIqoB,cAAcrd,EAAM6H,cAAgB,EAExF,OAAO7H,IAEXwxB,OAAQ,SAAUxxB,GAAV,GAOA4zB,GACAC,EAIA/rB,EACAC,EAZA0Z,EAASzhB,EAAMwuB,aACfpoB,EAAiBqb,EAAOrb,eAAe0X,WAAkC,IAAvB2D,EAAO3Z,YAAoB,EAAI2Z,EAAO3Z,YAAc,GACtGD,EAAe4Z,EAAO5Z,aAAaiW,WAAW2D,EAAO1Z,UACzD,OAAKyV,GAAWpX,IAAoBoX,EAAW3V,IAG3C+rB,EAAcxtB,EAAepF,UAC7B6yB,EAAahsB,EAAa7G,UACzB4yB,GAAgBC,GAGjB/rB,EAAc8rB,EAAYh1B,MAAM,IAAImnB,UAAU7oB,KAAK,IAAI42B,OAAOnG,GAC9D5lB,EAAY8rB,EAAWC,OAAOnG,GAC7B7lB,GAAgBC,GAGrBA,EAAYA,MAAkB8rB,EAAWnqC,OAASqe,EAClDD,EAAcA,MAAoB,EAAI8rB,EAAYlqC,OAASoe,EAC3D2Z,EAAOxgB,SAASmF,EAAgB0B,GAChC2Z,EAAOwM,OAAOpmB,EAAcE,GACrB0Z,GANIA,GALAA,GALAA,GAkBfiQ,aAAc,SAAU1xB,GAAV,GAMNyhB,GACAjtB,EAIAo/B,EACAC,EACA/rB,EAAiBC,EAZjBoF,EAAOnN,EAAMoG,eACb0nB,EAAgB5nB,EAAW6nB,kBAAkB/tB,EACjD,OAAImN,IAAQ2gB,GAAiB3gB,GAAQ2gB,EAAcpxB,OAG/C+kB,EAASzhB,EAAMwuB,gBACfh6B,EAAQ2Y,EAAKnM,aAIb4yB,EAAcp/B,EAAMu/B,UAAU,EAAGtS,EAAO3Z,aACxC+rB,EAAar/B,EAAMu/B,UAAUtS,EAAO3Z,aACpCA,EAAc,EAAGC,EAAY,EAC7B6rB,IACA9rB,EAAc8rB,EAAYh1B,MAAM,IAAImnB,UAAU7oB,KAAK,IAAI42B,OAAOnG,IAE9DkG,IACA9rB,EAAY8rB,EAAWC,OAAOnG,IAE3B7lB,GAAeC,MAG9Bvf,EAAOkG,GACH4Y,eAAgBA,EAChB0mB,SAAUA,EACVX,cAAeA,EACfC,aAAcA,EACdC,gBAAiBA,EACjBvvB,aAAcA,EACd0vB,OAAQA,EACRxnB,WAAYA,KAElB1b,OAAOnC,MAAMijB,SACC,kBAAVljB,SAAwBA,OAAOyB,IAAMzB,OAAS,SAAU0B,EAAIC,EAAIC,IACrEA,GAAMD,OAEV,SAAU5B,EAAGC,QACVA,OAAO,iBAAkB,gBAAiBD,IAC5C,YACG,SAAU8B,GAIP,QAAS+pC,GAAaj/B,EAAQk/B,GAA9B,GACQC,GAAkBn/B,EAAO6R,sBAAwB,GAAI5I,GAAajJ,EAAOkJ,WAAYlJ,EAAO2H,MAC5FzT,EAAU,GAAIkrC,GAAeF,EAAmBC,EAGpD,OAFAjrC,GAAQ8L,OAASA,EACjBA,EAAOkC,cAAcjO,KAAKC,GACnBirC,EAEX,QAASE,GAASjnB,EAAMnN,GACpB,MAAOA,GAAMoG,iBAAmB+G,GAAQnN,EAAM6H,eAAiBsF,GAA8B,IAAtBnN,EAAM8H,aAAqB9H,EAAM+H,WAAaoF,EAAK2Q,WAAWp0B,OAEzI,QAAS2qC,GAAWlnB,EAAM/M,EAAW6jB,GAEjC,IADA,GAAIlC,GAAU5U,EAAOA,EAAK/M,GAAa,KAChC2hB,IAAYkC,EAAUlC,IACzBA,EAAUA,EAAQ3hB,EAEtB,OAAO2hB,GAnBd,GACO15B,GAAQmC,OAAOnC,MAAOoC,EAAQpC,EAAMoC,MAAOqK,EAAWzM,EAAMsC,GAAGoK,OAAQvJ,EAAcsJ,EAAStJ,YAAa0a,EAAapR,EAASoR,WAAY7X,EAAe7C,EAAY6C,aAAc2G,EAAMF,EAASG,IAAK9K,EAAO2K,EAAS3K,KAAMiB,EAAe0J,EAAS1J,aAAc4S,EAAelJ,EAASkJ,aAAc0vB,EAAS54B,EAAS44B,OAAQ3iC,EAAU1C,EAAMwC,QAAQE,QAASk8B,EAAK,oBAAqBz+B,EAASyB,EAAEzB,OAC5Yw2B,EAAYhqB,EAAIgqB,UAChBsV,EAAmB,kBAkBnBC,EAAU9pC,EAAMjC,QAChBC,KAAM,SAAUC,GACZG,KAAKH,QAAUA,EACfG,KAAK2rC,aAAe,GAAIx2B,GAAatV,EAAQsX,MAAOtX,EAAQgU,MAAQ8G,WAAY9a,EAAQ8a,aACxF3a,KAAKi6B,OAAS,GAAI4K,GAClB7kC,KAAK2gB,UAAY9gB,EAAQ8gB,WAE7BvL,SAAU,WACN,MAAOpV,MAAK2rC,aAAartB,WAE7BstB,UAAW,SAAUjD,GACjB,MAAO3oC,MAAKi6B,OAAOyO,IAAI1oC,KAAKoV,WAAYuzB,IAE5CkD,aAAc,SAAU10B,GACpBnX,KAAKi6B,OAAOppB,OAAOsG,GACnBnX,KAAKkM,OAAOoM,YAAYnB,IAE5B3W,KAAM,WACF,GAAIsrC,GAAQ9rC,KAAK2rC,YACjBG,GAAM7D,cACNjoC,KAAKkM,OAAOoM,YAAYwzB,EAAMxtB,YAElC3d,KAAM,WACFX,KAAK0Y,QAETqzB,aAAc,SAAUl8B,EAAShQ,GAC7B,GAAIqM,GAASlM,KAAKkM,MAClB,OAAO9K,GAAEyO,GAAS2C,SAASvH,SAAS4I,MAAMm4B,YAAYrsC,KAAWuM,EAAOrM,QAAQwc,cAAexc,IAAU0M,QAAQ,aAAasU,YAAY,QAASrhB,EAAMwC,QAAQgS,MAAM9H,EAAOQ,UAAU+0B,OAE5L/oB,KAAM,WACF,GAAIvB,GAAQnX,KAAK4rC,WAAU,EAC3B5rC,MAAK2gB,UAAUzU,OAASlM,KAAKkM,OAC7BlM,KAAK2gB,UAAUsrB,OAAO90B,GACtBnX,KAAK6rC,aAAa10B,IAEtBwD,WAAY,WACR,MAAO3a,MAAKkM,QAAUlM,KAAKkM,OAAOrM,QAAQ8a,YAE9CuxB,mBAAoB,SAAU/0B,GACtBnX,KAAK2a,eACLnb,EAAMsC,GAAGoK,OAAO0O,WAAWsxB,mBAAmB/0B,GAC9CnX,KAAK2rC,aAAe,GAAIx2B,GAAagC,EAAOnX,KAAKkM,OAAO2H,UAIhEy3B,EAAiB1pC,EAAMjC,QACvBC,KAAM,SAAUwrC,EAAmBC,GAC/BrrC,KAAK6T,KAAOu3B,EAAkBv3B,KAC9B7T,KAAKorC,kBAAoBA,EACzBprC,KAAKqrC,gBAAkBA,GAE3B1qC,KAAM,WACFwL,EAAI6uB,eAAeh7B,KAAK6T,MACxB7T,KAAK6T,KAAKnF,UAAY1O,KAAKqrC,gBAAgB3tB,KAC3C1d,KAAKkM,OAAOoM,YAAYtY,KAAKqrC,gBAAgB/sB,YAEjD9d,KAAM,WACF2L,EAAI6uB,eAAeh7B,KAAK6T,MACxB7T,KAAK6T,KAAKnF,UAAY1O,KAAKorC,kBAAkB1tB,KAC7C1d,KAAKkM,OAAOoM,YAAYtY,KAAKorC,kBAAkB9sB,cAGnDoB,EAAoBgsB,EAAQ/rC,QAC5BC,KAAM,SAAUC,GACZ6rC,EAAQ5rC,GAAGF,KAAKG,KAAKC,KAAMH,GAC3BG,KAAKigB,iBAAkB,GAE3BvH,KAAM,WAAA,GAYEyzB,GAXAjgC,EAASlM,KAAKkM,OACdrM,EAAUG,KAAKH,QACfsX,EAAQtX,EAAQsX,MAChBtD,EAAO3H,EAAO2H,KACdu3B,EAAoB,GAAIj2B,GAAagC,EAAOtD,GAC5C6J,EAAO7d,EAAQ6d,MAAQ7d,EAAQ8L,OAAS,EAC5CO,GAAOoM,YAAYnB,GACnBjL,EAAOgC,UAAUuR,MAAM/B,EAAM7d,GACzBA,EAAQusC,aACRvsC,EAAQusC,YAAYlgC,EAAQA,EAAOkJ,YAEnC+2B,EAAiB,GAAIb,GAAeF,EAAmB,GAAIj2B,GAAajJ,EAAOkJ,WAAYvB,IAC/Fs4B,EAAejgC,OAASA,EACxBA,EAAOkC,cAAcjO,KAAKgsC,GAC1BjgC,EAAOgL,WAGXm1B,EAAiB/qC,EAAK3B,QACtB0gB,WAAY,SAAUve,EAAIwqC,GACtB,GAAIpgC,GAASogC,EAAYpgC,OAAQrM,EAAUG,KAAKH,QAAS0sC,EAAa1sC,EAAQ8iB,MAAQ9iB,EAAQ8iB,MAAQzW,EAAOrM,QAAQ0G,UACrHvG,MAAKwsC,WAAa,GAAIvgC,GAASwgC,UAAU3qC,GACrCyqC,WAAYA,EACZG,cAAe,OACfC,eAAgB,QAChB3sB,OAAQ,WACJ1e,EAAKoX,KAAKxM,EAAQ,aAAclM,KAAK2L,UAEzC2H,MAAOpH,EAAOrM,QAAQqG,SAASK,WAC/BqmC,gBAAgB,KAGxBxsC,QAAS,SAAUogB,GACf,MAAO,IAAId,GAAkBc,IAEjChU,OAAQ,SAAU1K,GACd,GAAI+qC,GAAY/qC,EAAG8yB,KAAK,mBAAqB9yB,EAAG6K,KAAK,UAAUioB,KAAK,iBACpEiY,GAAUv4B,QACVu4B,EAAUlhC,MAAMkhC,EAAUhtC,QAAQyT,UAGtCw5B,EAAa,gBACbC,EAAqB,6BACrBC,EAAgBD,EAAqB,IAAMD,EAC3CG,EAAU,SAAU91B,GACpB,OAAQA,EAAMmG,WAAalc,EAAE+V,EAAM8G,yBAAyBzD,GAAGuyB,IAE/DG,EAAqBtrC,EAAMjC,QAC3BkR,OAAQ,SAAUsG,GAAV,GAIAyJ,GAGA9N,EACA9C,EACAyxB,EACA0L,EACAC,EACAC,EAXArhC,EAAOhM,KACPi6B,EAAS,GAAI4K,EACjB5K,GAAOyO,IAAIvxB,GAAO,GACdyJ,EAAQvD,EAAWgtB,OAAOlzB,EAAO,SAAUmN,GAC3C,MAAOljB,GAAEkjB,GAAM9J,GAAGwyB,KAElBl6B,EAAMuK,EAAW6nB,kBAAkB/tB,GACnCnH,EAAQiqB,EAAOjqB,MACfyxB,EAAMxH,EAAOwH,IACb0L,EAAaL,EAAW/2B,MAAM,KAC9Bq3B,EAAYjhC,EAAI0pB,aAAa7lB,EAAOm9B,GACpCE,EAAUlhC,EAAI0pB,aAAa4L,EAAK0L,GACpCnhC,EAAKshC,eAAet9B,EAAOo9B,GAAW,GACtCphC,EAAKshC,eAAe7L,EAAK4L,GAAS,GAClCjsC,EAAEwf,GAAO4e,KAAK,SAAUl8B,EAAGghB,GACvBA,EAAOljB,EAAEkjB,IACRA,EAAK9J,GAAGsyB,GAAcxoB,EAAOA,EAAK3X,KAAKmgC,IAAatN,KAAK,SAAU5C,EAAG2Q,GACnEA,EAAK7+B,UAAY,eAGrB0+B,IAAcp9B,EAAM0kB,iBACpBvoB,EAAIY,aAAa+F,EAAIi2B,eAAe,UAAW/4B,GAE/Cq9B,IAAY5L,EAAI/c,aAChBvY,EAAI2D,YAAYgD,EAAIi2B,eAAe,UAAWtH,GAE9C2L,EACAj2B,EAAMkuB,eAAer1B,GACd4Q,EAAM,KACbwsB,EAAYhsC,EAAEwf,EAAM,IACpBwsB,EAAYA,EAAU5yB,GAAGsyB,GAAcM,EAAYA,EAAUzgC,KAAKmgC,GAAYnQ,QAC1EyQ,EAAUvsC,QACVsW,EAAMiB,SAASg1B,EAAUx4B,IAAI,GAAI,IAGzCuC,EAAMkB,UAAS,GACflM,EAAI0E,OAAOb,GACX7D,EAAI0E,OAAO4wB,IAEf6L,eAAgB,SAAUt9B,EAAOoqB,EAAKoT,GAClC,GAAIpT,EAAK,CACL,GAA4D5iB,GAAxD0hB,EAAUsU,EAAW,cAAgB,kBAAyBC,EAAU,SAAUnpB,GAC9E,KAAOA,IAASA,EAAK4U,IACjB5U,EAAOA,EAAKwQ,UAEhB,OAAOxQ,IAAQljB,EAAEkZ,SAAS8f,EAAK9V,GAAQA,EAAK4U,GAAW,KAG/D,KADAlpB,EAAQy9B,EAAQz9B,GACTA,GACHwH,EAAOi2B,EAAQz9B,GACf7D,EAAI0E,OAAOb,GACXA,EAAQwH,MAKpBzJ,EAAgBnM,EAAMjC,QACtBC,KAAM,SAAUsM,GACZlM,KAAKkM,OAASA,GAElB8K,QAAS,SAAUlI,GAAV,GAQGqI,GACAtD,EAGI65B,EAQAC,EAnBR3hC,EAAOhM,KAAMkM,EAASF,EAAKE,OAAQ0B,EAAW1B,EAAO0B,SAAUggC,EAAchgC,EAASggC,YAAY9+B,GAAI++B,EAAMluC,EAAOyB,EAAE0sC,QAASh/B,EAElI,OADA9C,GAAKE,OAAOxL,QAAQ,UAAWmtC,GAC3BA,EAAIE,sBACJj/B,EAAEiJ,kBACK,KAEN81B,EAAIE,uBAAwBH,GAAgBhgC,EAASwB,wBAClD+H,EAAQjL,EAAOkJ,WACfvB,EAAO3H,EAAO2H,KAClB7H,EAAKo/B,kBAAoB,GAAIj2B,GAAagC,EAAOtD,GAC7Co5B,EAAQ91B,KACJu2B,EAAqB,GAAIR,GAAmBhhC,GAChDwhC,EAAmB78B,OAAOsG,GAC1BjL,EAAOoM,YAAYnB,IAEnBjV,EAAQy3B,SAAWxiB,EAAMmG,WAAaiuB,EAAS13B,EAAMsD,KACrDtD,EAAKnF,UAAY,IAEjBxC,EAAOyO,YAAc1O,EAAS2O,WAAWozB,kBAAkB72B,KACvDw2B,EAAmB,GAAI1hC,GAAS6B,iBAAiB5B,GACrDyhC,EAAiBM,gBAAgB92B,IAErCvJ,EAASsgC,YAAY,WACjBliC,EAAKq/B,gBAAkBF,EAAaj/B,EAAQF,EAAKo/B,sBAE9C,IAIftyB,MAAO,SAAUhK,GACb,GAAIlB,GAAW5N,KAAKkM,OAAO0B,QAE3B,OADA5N,MAAKkM,OAAOxL,QAAQ,QAASoO,KACzBlB,EAASwB,uBACTxB,EAASyB,aACF,MAKfvB,EAAmBlM,EAAMjC,QACzBC,KAAM,SAAUsM,GACZlM,KAAKkM,OAASA,GAElBiiC,UAAW,SAAU92B,GACjB,GAAIgxB,GAAQl8B,EAAIgF,OAAOnR,KAAKkM,OAAOjB,SAAU,IAI7C,OAHAkB,GAAIyuB,SAASvjB,EAAWgxB,EAAO,GAC/Bl8B,EAAIyrB,aAAayQ,EAAM3T,iBACvBvoB,EAAIyrB,aAAayQ,EAAM3jB,aAChB2jB,GAEX+F,cAAe,SAAU/F,GACrB,GAAIlxB,GAAQnX,KAAKkM,OAAO2N,eACnBwuB,EAAM3jB,aAAevY,EAAIwoB,WAAW0T,EAAM3T,iBAC3Cvd,EAAMiB,SAASiwB,EAAM3T,gBAAiB2T,EAAM3T,gBAAgB7zB,QAE5DsW,EAAMmuB,cAAc+C,GAExBlxB,EAAMkB,UAAS,GACfrY,KAAKkM,OAAOoM,YAAYnB,GACxBhL,EAAI0E,OAAOw3B,IAEfgG,cAAe,SAAUl3B,GAAV,GAIHK,GAIA6wB,EAPJ/jB,EAAOnN,EAAM6H,aACbiF,EAAQ9X,EAAIuxB,sBAAsBpZ,EAAMnY,EAAI6X,cAChD,UAAIC,IAAShY,EAASoR,WAAWqtB,QAAQvzB,EAAO8M,MACxCzM,EAAOrL,EAAIqL,KAAKyM,MACfzM,GAA0B,KAAlBrL,EAAI/I,KAAKoU,MAGlB6wB,EAAQroC,KAAKmuC,UAAU32B,GAC3BxX,KAAKsuC,OAAOrqB,EAAOzM,GACnBxX,KAAKouC,cAAc/F,IACZ,KAIfkG,gBAAiB,SAAUp3B,GAKvB,IALa,GACTG,GAASH,EAAM8H,YACfqF,EAAOnN,EAAMoG,eACbb,EAAO4H,EAAKnM,UACZ0kB,EAAQ,EACLvlB,EAASulB,GAAS,GAAiC,UAA5BngB,EAAKpF,EAASulB,EAAQ,IAChDA,GAEAA,GAAQ,IACRvY,EAAKkR,WAAWle,EAASulB,EAAOA,GAChC1lB,EAAMiB,SAASkM,EAAM3T,KAAKF,IAAI,EAAG6G,EAASulB,IAC1C1lB,EAAMkB,UAAS,GACfrY,KAAKkM,OAAOoM,YAAYnB,KAGhCq3B,iBAAkB,SAAUr3B,GAAV,GAKVud,GAkBA+Z,EACAC,EACAC,EAYItG,EAMAhQ,EAKA1X,EAWJiuB,EACAC,EACAC,EACAC,EAUAC,EAEI5uC,EAzEJkkB,EAAOnN,EAAMoG,eACb0xB,EAAK9iC,EAAIuxB,sBAAsBpZ,GAAO,OACtCL,EAAQ9X,EAAIuxB,sBAAsBpZ,EAAM,sBAAsBvO,MAAM,MACpE7J,EAASlM,KAAKkM,MAElB,IAAIC,EAAIwoB,WAAWrQ,GAAO,CACtB,GAAInN,EAAMmG,WAAa,gBAAgB7E,KAAK6L,EAAKnM,WAI7C,MAHAhB,GAAMiB,SAASkM,EAAM,GACrBnN,EAAMiuB,OAAO9gB,EAAMA,EAAKzjB,QACxBqL,EAAOoM,YAAYnB,IACZ,CAEXnX,MAAKuuC,gBAAgBp3B,GAiBzB,MAfAud,GAAkB8W,EAAWvnB,EAAOwnB,EAAkB,SAAUvS,GAC5D,OAAQ/sB,EAAI8sB,gBAAgBC,KAE5B/hB,EAAMmG,WAAanG,EAAM8H,cAAgB9H,EAAM+H,WAAa/H,EAAM8H,YAAc,IAChF9H,EAAM8H,YAAc,EACpB9H,EAAM+H,UAAY,EAClBhT,EAAOoM,YAAYnB,IAEnBs3B,EAAYQ,GAAMhjC,EAASoR,WAAWotB,UAAUtzB,EAAO83B,GACvDP,EAAUO,GAAM7tC,EAAE6tC,GAAI7K,QACtBuK,EAAoBF,GAAaC,EAAU,EAC3CC,IACA1qB,EAAQgrB,EACRva,EAAkBvoB,EAAIsY,KAAKwqB,IAE3BhrB,GAASyQ,GAAmBvoB,EAAIqO,GAAGka,EAAiB,UAAYzoB,EAASoR,WAAWotB,UAAUtzB,EAAO8M,IAC7E,KAApBA,EAAMqY,YACNrY,EAAMvV,UAAY,WAEf,GAEPuV,GAASyQ,GAAmBzoB,EAASoR,WAAWotB,UAAUtzB,EAAO8M,IAAU0qB,GACvEtG,EAAQroC,KAAKmuC,UAAUlqB,GAC3BjkB,KAAKsuC,OAAO5Z,EAAiBzQ,GAC7BjkB,KAAKouC,cAAc/F,IACZ,GAEPoG,GAAyB,IAAZC,GACTrW,EAAQ4W,EAAGzqB,WACV6T,IACD4W,EAAGvgC,UAAYzC,EAASxK,oBACxB42B,EAAQ4W,EAAGzqB,YAEX7D,EAAY,GAAI1U,GAASijC,cAAc/iC,EAAI/I,KAAK6rC,EAAGna,YAAa,KACpE3d,EAAMsuB,mBAAmBwJ,GACzBtuB,EAAUsrB,OAAO90B,GACbhL,EAAI2rB,cAAcO,GAClBlhB,EAAMkuB,eAAehN,GAErBlhB,EAAMiB,SAASigB,EAAO,GAE1BnsB,EAAOoM,YAAYnB,IACZ,IAEPy3B,EAAiBtqB,EAAK2Q,WAAW9d,EAAM8H,YAAc,GACrD4vB,EAAY13B,EACZ23B,EAASF,GAAkBziC,EAAIuxB,sBAAsBkR,GAAiB,MACtEG,EAAevD,EAAWoD,GAAkBtqB,EAAMmnB,EAAkB,SAAUvS,GAC9E,OAAQ/sB,EAAIwoB,WAAWuE,KAAa/sB,EAAIurB,MAAMwB,IAAYA,EAAQr4B,OAAS,KAE3EiuC,IAAiC,IAAtB33B,EAAM8H,aAAqB2vB,IAAmBziC,EAAIqO,GAAGu0B,EAAc,QAC9ED,EAASA,GAAUC,EACnBF,EAAY3iC,EAAO2N,cACnBg1B,EAAUz2B,SAAS02B,EAAQA,EAAO7Z,WAAWp0B,QAC7CguC,EAAUx2B,UAAS,IAEvBy2B,EAASA,GAAU3iC,EAAIuxB,sBAAsBkR,GAAkBC,EAAUtxB,gBAAiB,MACtFyxB,EAAcF,GAAU7iC,EAASoR,WAAWqtB,QAAQmE,EAAWC,GAC/DE,IACI5uC,EAAU,GAAI6L,GAASkjC,eACvBh4B,MAAO03B,EACPh7B,KAAM3H,EAAO2H,KACb8G,aAAczO,EAAOyO,aAEzBzO,EAAO4K,YAAY1W,GACnB8L,EAAOqD,qBAEJ,IAEX6/B,iBAAkB,SAAUj4B,GAAV,GAMNu2B,GAKJzT,EAQAjqB,EACAyxB,EAnBA4N,EAAWl4B,EAAM8G,wBACjBqxB,EAAQnjC,EAAII,QAAQ8iC,EAAU,SAC9BE,EAAwBtjC,EAASxK,oBACjCyK,EAASlM,KAAKkM,MAClB,OAAI+gC,GAAQ91B,IACJu2B,EAAqB,GAAIR,GAAmBhhC,GAChDwhC,EAAmB78B,OAAOsG,GAC1BjL,EAAOoM,YAAYnB,IACZ,IAEP8iB,EAAS,GAAI4K,GACjB5K,EAAOyO,IAAIvxB,GAAO,GACdjL,EAAOyO,YACP3a,KAAKwvC,kBAAkBvV,GAE3Bj6B,KAAKyvC,6BAA6BxV,EAAQ9iB,GAC1CA,EAAMmuB,cAAcrL,EAAOjqB,OAC3BmH,EAAMouB,aAAatL,EAAOwH,KACtBzxB,EAAQmH,EAAMoG,eACdkkB,EAAMtqB,EAAM6H,aAChB7H,EAAMuuB,iBACF4J,GAA6B,KAApBluC,EAAEkuC,GAAO5yB,SAClBvF,EAAM2C,WAAWw1B,GACjBn4B,EAAMuuB,kBAEV2J,EAAWl4B,EAAM8G,wBACU,MAAvB9R,EAAI/I,KAAKisC,IAA4C,KAAvBA,EAAS3gC,YACvC2gC,EAAS3gC,UAAY6gC,EACrBp4B,EAAMiB,SAASi3B,EAAU,IAE7BrvC,KAAK0vC,MAAM1/B,EAAOyxB,GAClBt1B,EAAI2D,YAAY5D,EAAOjB,SAAS89B,eAAe,UAAW9O,EAAOjqB,OACjEiqB,EAAOppB,OAAOsG,GACdnH,EAAQmH,EAAMoG,eACS,MAAnBpR,EAAI/I,KAAK4M,KACTA,EAAQA,EAAMilB,WAAWtkB,KAAKF,IAAI,EAAG0G,EAAM8H,YAAc,IACzD9H,EAAMiB,SAASpI,EAAO7D,EAAI6oB,cAAchlB,KAE5CmH,EAAMkB,UAAS,GACfnM,EAAOoM,YAAYnB,IACZ,IAEXq4B,kBAAmB,SAAUvV,GAAV,GACX4P,GAAkB59B,EAAS2O,WAAWivB,gBACtC8F,EAAiB9F,EAAgB5P,EAAOjqB,OACxC4/B,EAAe/F,EAAgB5P,EAAOjqB,MACtC2/B,IACAxjC,EAAIY,aAAaktB,EAAOjqB,MAAO2/B,GAE/BC,GACAzjC,EAAI2D,YAAYmqB,EAAOwH,IAAKmO,GAE5BD,GACAxjC,EAAI0E,OAAO8+B,GAEXC,GAAgBA,EAAa9a,YAC7B3oB,EAAI0E,OAAO++B,IAGnBH,6BAA8B,SAAUxV,EAAQ9iB,GAC5C,GAAInH,GAAQiqB,EAAOjqB,MAAOu5B,EAAcnoC,EAAE4O,GAAOzD,QAAQ,KAAKqI,IAAI,GAAI6sB,EAAMxH,EAAOwH,IAAK+H,EAAYpoC,EAAEqgC,GAAKl1B,QAAQ,KAAKqI,IAAI,EACxH20B,IAAelsB,EAAWotB,UAAUtzB,EAAOoyB,IAC3Cp9B,EAAIY,aAAaiD,EAAOu5B,GAExBC,GAAansB,EAAWqtB,QAAQvzB,EAAOqyB,IACvCr9B,EAAI2D,YAAY2xB,EAAK+H,IAG7BqG,MAAO,SAAUvrB,GACb,KAAOA,GAA0B,QAAlBnY,EAAI/I,KAAKkhB,IAAmBA,EAAKwQ,YAA2C,QAA7B3oB,EAAI/I,KAAKkhB,EAAKwQ,aACxExQ,EAAOA,EAAKwQ,UAEhB,OAAOxQ,IAEXorB,MAAO,SAAU1/B,EAAOyxB,GACpBzxB,EAAQhQ,KAAK6vC,MAAM7/B,GACnByxB,EAAMzhC,KAAK6vC,MAAMpO,GACbzxB,GAASyxB,GAAOt1B,EAAIqO,GAAGinB,EAAK,MAC5BzhC,KAAKsuC,OAAOt+B,EAAOyxB,IAG3B6M,OAAQ,SAAUwB,EAAM58B,GAEpB,IADA/G,EAAIgyB,oBAAoB2R,GACjBA,GAAQ58B,EAAIsR,YACM,GAAjBsrB,EAAK53B,UACL43B,EAAO3jC,EAAIstB,KAAKqW,GAAQA,EAAKvvB,SAASuvB,EAAKvvB,SAAS1f,OAAS,GAAKivC,EAC9DA,GACAA,EAAKp5B,YAAYxD,EAAIsR,aAElBsrB,EAAK53B,WAAaie,EAAUG,UACnCt2B,KAAK+vC,mBAAmBD,EAAM58B,EAAIsR,YAElCsrB,EAAKhb,WAAWpe,YAAYxD,EAAIsR,WAGxCrY,GAAI0E,OAAOqC,IAEf68B,mBAAoB,SAAUtH,EAAUuH,GAChCvH,GAAYA,EAASvwB,WAAaie,EAAUG,YACxCmS,EAAS/jB,aAAe1kB,KAAKiwC,SAASxH,EAAS/jB,aAC/CvY,EAAI2D,YAAYkgC,EAAcvH,EAAS/jB,aAEvCvY,EAAI2D,YAAYkgC,EAAcvH,KAI1CwH,SAAU,SAAUvkC,GAChB,MAAOtK,GAAEsK,GAAS8O,GAAG,MAEzBxD,QAAS,SAAUlI,GAAV,GACDohC,GAAQ9E,EACRl/B,EAASlM,KAAKkM,OACdiL,EAAQjL,EAAOkJ,WACfsC,EAAU5I,EAAE4I,QACZtV,EAAO5C,EAAM4C,KACb+tC,EAAYz4B,IAAYtV,EAAKuV,UAC7By4B,EAAM14B,GAAWtV,EAAKwV,MACtB1L,GAAOyO,YAAczO,EAAOyO,WAAW3D,QAAQlI,EAAGqI,MAGjDg5B,IAAaC,GAASj5B,EAAMmG,UAEtB6yB,EACPD,EAAS,mBACFE,IACPF,EAAS,iBAJTA,EAAS,mBAMRA,IAGL9E,EAAoB,GAAIj2B,GAAagC,EAAOjL,EAAO2H,MAC/C7T,KAAKkwC,GAAQ/4B,KACbrI,EAAEiJ,iBACFozB,EAAaj/B,EAAQk/B,OAG7B6C,gBAAiB,SAAU92B,GACvBnX,KAAKovC,iBAAiBj4B,IAE1B2B,MAAO1X,EAAEqf,OAETzS,EAAgBpM,EAAMjC,QACtBC,KAAM,SAAUsM,GACZlM,KAAKkM,OAASA,EACdlM,KAAKqwC,2BAA4B,GAErCC,kBAAmB,WACftwC,KAAKorC,kBAAoBprC,KAAKqrC,gBAAkBF,EAAanrC,KAAKkM,OAAQlM,KAAKorC,oBAEnFmF,QAAS,WACL,QAAIvwC,KAAKorC,mBACEprC,KAAKorC,kBAAkB1tB,MAAQ1d,KAAKkM,OAAO2H,KAAKnF,WAI/DsI,QAAS,SAAUlI,GACf,GAAI9C,GAAOhM,KAAMkM,EAASF,EAAKE,OAAQ0B,EAAW1B,EAAO0B,QACzD,OAAIA,GAAS4iC,cAAc1hC,IACnBlB,EAASwB,sBACTxB,EAASyB,WAAU,GAEvBrD,EAAKo/B,kBAAoB,GAAIj2B,GAAajJ,EAAOkJ,WAAYlJ,EAAO2H,OAC7D,KAEPjG,EAAS6iC,SAAS3hC,KAClB9C,EAAKqkC,2BAA4B,EAC7BrkC,EAAKukC,YACLvkC,EAAKqkC,2BAA4B,EACjCrkC,EAAKskC,sBAEF,IAIfx3B,MAAO,WACH,GAAI9M,GAAOhM,IACX,UAAIgM,EAAKqkC,4BAA6BrkC,EAAKukC,aACvCvkC,EAAKqkC,2BAA4B,EACjCrkC,EAAKskC,qBACE,MAKfriC,EAAmBrM,EAAMjC,QACzBC,KAAM,SAAUsM,GACZlM,KAAKkM,OAASA,GAElB8K,QAAS,SAAUlI,IACV5M,EAAQy3B,QAAU7qB,EAAEi/B,uBAA0Bj/B,EAAE0K,SAAwB,IAAb1K,EAAE4I,SAAkB5I,EAAE2K,QAAW3K,EAAE4K,WAG/F1Z,KAAKkM,OAAOrM,QAAQ8a,YACpB3a,KAAK0wC,0BAET1wC,KAAK2wC,sBAETA,kBAAmB,WAAA,GACXzkC,GAASlM,KAAKkM,OACdiL,EAAQjL,EAAOkJ,UACnB+B,GAAMsuB,mBAAmBv5B,EAAO2H,MAChC3H,EAAOoM,YAAYnB,IAEvBu5B,wBAAyB,WAErB,IADA,GAAIxkC,GAASlM,KAAKkM,OAAQ2H,EAAO3H,EAAO2H,KAAMurB,EAAYnzB,EAAS2O,WAAWwkB,UAAW9G,EAAgBnsB,EAAImsB,cAAeqE,EAAQ9oB,EAAK2Q,WAAY6a,EAAOxrB,EAAKglB,UAC1JP,EAAcqE,IACjBA,EAAQA,EAAMjY,WAElB,MAAO4T,EAAc+G,IACjBA,EAAOA,EAAK3K,eAEZiI,IAASyC,EAAUzC,IACnBv7B,EAAEg9B,GAAIkB,UAAUzrB,GAEhBwrB,GAAQD,EAAUC,IAClBj+B,EAAEg9B,GAAI5rB,SAASqB,IAGvBiF,MAAO1X,EAAEqf,OAET5S,EAAWjM,EAAMjC,QACjBC,KAAM,SAAUsW,GACZlW,KAAKkW,SAAWA,EAChBlW,KAAK4wC,kBAAmB,GAE5BC,YAAa,SAAUn5B,GACnB,MAAOA,IAAW,IAAMA,GAAW,IAAMA,GAAW,IAAMA,GAAW,KAAOA,GAAW,KAAOA,GAAW,KAAOA,GAAW,KAAOA,GAAW,KAAkB,KAAXA,GAExJa,iBAAkB,SAAUlM,EAAOyC,GAC/B,GAA0CrJ,GAAUE,EAAhDua,EAAM4wB,OAAOC,aAAajiC,EAAE4I,SAAiCs5B,EAAWhxC,KAAKixC,qBAAqBniC,EAAGoiC,UAAUC,SACnH,KAAK1rC,IAAY4G,GAMb,GALA1G,EAAcvE,EAAEzB,QACZwgB,MAAM,EACNixB,KAAK,EACLC,OAAO,GACRhlC,EAAM5G,GAAU5F,UACd8F,EAAYua,KAAOA,GAAOva,EAAYua,KAAOpR,EAAE4I,UAAY/R,EAAYwa,MAAQ6wB,GAAYrrC,EAAYyrC,KAAOtiC,EAAE2K,QAAU9T,EAAY0rC,OAASviC,EAAE4K,SAClJ,MAAOjU,IAInBwrC,qBAAsB,SAAUniC,EAAGqiC,GAC/B,GAAIG,GAAMH,EAASI,cAAc/jC,QAAQ,QAAU,CACnD,OAAO8jC,GAAMxiC,EAAE0iC,QAAU1iC,EAAE0K,SAE/B2B,kBAAmB,SAAU9O,EAAOyC,GAAjB,GAC2BrJ,GAAUwV,EAAGw2B,EAAnDvxB,EAAM4wB,OAAOC,aAAajiC,EAAE4I,SAAmCg6B,KAC/DC,EAAW,SAAUC,GACrB,MAAOA,IAAW1xB,GAAO0xB,GAAW9iC,EAAE4I,SAAWk6B,GAAW9iC,EAAEyoB,SAElE,KAAK9xB,IAAY4G,GACb4O,EAAI7Z,EAAEzB,QACFwgB,MAAM,EACNixB,KAAK,EACLC,OAAO,GACRhlC,EAAM5G,GAAU5F,SACnB4xC,EAAarwC,EAAEywC,QAAQ52B,EAAEiF,KAAO9e,EAAEg3B,KAAKnd,EAAEiF,IAAKyxB,GAAU9wC,OAAS,EAAI8wC,EAAS12B,EAAEiF,KAC5EuxB,GAAcx2B,EAAEkF,MAAQrR,EAAE0K,SAAWyB,EAAEm2B,KAAOtiC,EAAE2K,QAAUwB,EAAEo2B,OAASviC,EAAE4K,UACvEg4B,EAAMvxC,KAAKkM,EAAM5G,GAGzB,OAAOisC,IAEX9D,YAAa,SAAU9+B,GACnB,GAAI4I,GAAU5I,EAAE4I,OAChB,OAAO1X,MAAK6wC,YAAYn5B,KAAa5I,EAAE0K,UAAY1K,EAAE2K,QAAqB,IAAX/B,GAA4B,IAAXA,GAA4B,GAAXA,GAA2B,IAAXA,IAAkB5I,EAAE4K,WAAa5K,EAAE0K,UAAY1K,EAAE2K,QAEtK+2B,cAAe,SAAU1hC,GACrB,GAAI4I,GAAU5I,EAAE4I,OAChB,OAAkB,KAAXA,IAAkB5I,EAAE4K,WAAa5K,EAAE2K,QAAqB,IAAX/B,IAAkB5I,EAAE0K,UAAY1K,EAAE2K,QAAqB,IAAX/B,IAAkB5I,EAAE0K,UAAY1K,EAAE4K,UAEtI+2B,SAAU,SAAU3hC,GAChB,MAAoB,KAAbA,EAAE4I,SAAiB5I,EAAE0K,UAAY1K,EAAE2K,SAAW3K,EAAE4K,UAE3Dw0B,YAAa,SAAUnH,GACnB/mC,KAAK8xC,YAAc/K,EACnB/mC,KAAK4wC,kBAAmB,GAE5BmB,WAAY,WACJ/xC,KAAK4wC,kBAAoB5wC,KAAK8xC,aAC9B9xC,KAAK8xC,cAET9xC,KAAK4wC,kBAAmB,GAE5BvhC,UAAW,SAAU2iC,GACjB,GAAIhmC,GAAOhM,IACXgM,GAAK4M,eACDo5B,EACAhmC,EAAK+lC,aAEL/lC,EAAKimC,QAAUtwC,OAAOwL,WAAW/L,EAAEe,MAAM6J,EAAK+lC,WAAY/lC,GAAO,MAGzEoD,mBAAoB,WAChB,MAAOpP,MAAK4wC,kBAEhBh4B,aAAc,WACVjX,OAAOiX,aAAa5Y,KAAKiyC,UAE7B/iC,OAAQ,SAAUJ,EAAGojC,GACjB,GAAI5uC,GAAG4S,EAAWlW,KAAKkW,QACvB,KAAK5S,EAAI,EAAGA,EAAI4S,EAASrV,SACjBqV,EAAS5S,GAAG4uC,GAAMpjC,GADOxL,OAMrC0T,QAAS,SAAUlI,GACf9O,KAAKkP,OAAOJ,EAAG,YAEnBgK,MAAO,SAAUhK,GACb9O,KAAKkP,OAAOJ,EAAG,YAGnBX,EAAYvM,EAAMjC,QAClBC,KAAM,SAAUsM,GACZlM,KAAKkM,OAASA,CACd,IAAI2P,GAAe3P,EAAOrM,QAAQgc,YAClC7b,MAAKmyC,UACD,GAAIC,GAAcv2B,GAClB,GAAIw2B,GAAWx2B,GACf,GAAIy2B,GAAoBz2B,GACxB,GAAI02B,GAAoB12B,GACxB,GAAI22B,GAAgB32B,GACpB,GAAI42B,GAAgB52B,GACpB,GAAI62B,GAAmB72B,GACvB,GAAI82B,GAAc92B,KAG1B+2B,eAAgB,SAAUl1B,GACtB,GAAIxR,GAASlM,KAAKkM,OAAQ4G,EAAM5G,EAAOjB,SAAUoM,EAAYlL,EAAIgF,OAAO2B,EAAK,OAAQ+/B,EAAW//B,EAAImzB,wBAEpG,KADA5uB,EAAU3I,UAAYgP,EACfrG,EAAUmN,YACbquB,EAASn8B,YAAYW,EAAUmN,WAEnC,OAAOquB,IAEXvZ,QAAS,SAAU5b,GACf,MAAO,+BAA+BjF,KAAKiF,IAE/Co1B,mBAAoB,WAAA,GACZ37B,GACAw0B,EACAz/B,EAASlM,KAAKkM,MAClB,KAAIlM,KAAK+yC,YAOT,MAJA/yC,MAAK+yC,aAAc,EACnB57B,EAAQjL,EAAOkJ,WACfu2B,EAAe,GAAIx2B,GAAagC,EAAOjL,EAAO2H,MAC9C1H,EAAIouB,iBAAiBruB,EAAOjB,WAExBkM,MAAOA,EACPw0B,aAAcA,IAGtBqH,iBAAkB,SAAUC,GACxB9H,EAAanrC,KAAKkM,OAAQ+mC,EAAiBtH,cAC3C3rC,KAAKkM,OAAOqD,mBACZvP,KAAK+yC,aAAc,GAEvBG,qBAAsB,SAAUC,EAAQC,GAAlB,GACdpnC,GAAOhM,KACPkM,EAASF,EAAKE,OACd+mC,EAAmBjnC,EAAK8mC,oBACvBG,KAGLE,EAAOpzC,KAAKiM,EAAME,EAAQ+mC,EAAiB97B,OAC3ChK,WAAW,WACPimC,EAAMrzC,KAAKiM,EAAME,EAAQ+mC,EAAiB97B,OAC1CnL,EAAKgnC,iBAAiBC,OAG9BI,gBAAiB,SAAUl8B,GAAV,GAEJ7T,GADLsd,EAAQ3U,EAASoR,WAAWF,UAAUhG,EAC1C,KAAS7T,EAAI,EAAGA,EAAIsd,EAAM/f,OAAQyC,IAC9Bsd,EAAMtd,GAAG6U,UAAYhM,EAAIwrB,SAAS/W,EAAMtd,GAAG6U,YAAcyI,EAAMtd,GAAG6U,WAG1Em7B,cAAe,SAAUn8B,GACrB,GAAI8iB,GAAS,GAAI4K,EACjB5K,GAAOyO,IAAIvxB,GACXnX,KAAKqzC,gBAAgBl8B,GACrB8iB,EAAOppB,OAAOsG,GACdnX,KAAKkM,OAAOoM,YAAYnB,IAE5Bo8B,OAAQ,WACJvzC,KAAKszC,cAActzC,KAAKkM,OAAOkJ,aAEnCo+B,MAAO,WACHxzC,KAAKszC,cAActzC,KAAKkM,OAAOkJ,YAC/BpV,KAAKkzC,qBAAqB9xC,EAAEqf,KAAMrf,EAAEqf,OAExCgzB,eAAgB,SAAUC,GAAV,GACRC,GAAWvyC,EAAEogB,WACboyB,EAAS,GAAIC,WAMjB,OALMH,aAAgB/xC,QAAOmyC,OAASJ,EAAKK,YACvCL,EAAOA,EAAKK,aAEhBH,EAAOI,OAAS5yC,EAAEe,MAAMwxC,EAAStxB,QAASsxB,GAC1CC,EAAOK,cAAcP,GACdC,EAASlyB,WAEpByyB,cAAe,SAAUx2B,EAAM7d,GAC3B,GAAI6hB,IAAShE,KAAMA,GAAQ,GAC3BgE,GAAKhE,KAAOgE,EAAKhE,KAAKjP,QAAQ,UAAW,IACzCzO,KAAKkM,OAAOxL,QAAQ,QAASghB,GAC7B1hB,KAAKyf,MAAMiC,EAAKhE,KAAM7d,QAE1Bs0C,kBAAmB,SAAUrlC,GAAV,GAIXslC,GACAzxB,CAJJ,IAAM,cAAgBhhB,WAAWO,EAAQ+R,MAAQ/R,EAAQ4e,QAAU,IAKnE,MAFIszB,GAAgBtlC,EAAEslC,eAAiBtlC,EAAEulC,cAAcD,eAAiBzyC,OAAOyyC,kBAC3EzxB,EAAQyxB,EAAczxB,OAASyxB,EAAcE,MAC1Ct0C,KAAKu0C,cAAc5xB,IAE9B4xB,cAAe,SAAU5xB,GAAV,GAIP6xB,GAGA92B,EAMAu1B,CAZJ,IAAKtwB,IAGD6xB,EAASpzC,EAAEg3B,KAAKzV,EAAO,SAAU8f,GACjC,MAAO,YAAYhqB,KAAKgqB,EAAK32B,QAE7B4R,EAAOtc,EAAEg3B,KAAKzV,EAAO,SAAU8f,GAC/B,MAAO,eAAehqB,KAAKgqB,EAAK32B,SAEhC4R,EAAK7c,QAAW2zC,EAAO3zC,SAGvBoyC,EAAmBjzC,KAAK8yC,uBAY5B,MARA1xC,GAAEqzC,KAAKnX,MAAMl8B,EAAGA,EAAE+S,IAAIqgC,EAAQx0C,KAAKyzC,iBAAiB3xB,KAAK1gB,EAAEe,MAAM,WAAA,GACzDuyC,GAAUC,MAAM1zB,UAAU3gB,MAAMP,KAAK+8B,WACrCpf,EAAOtc,EAAE+S,IAAIugC,EAAS,SAAU5lC,GAChC,MAAO,aAAeA,EAAE8K,OAAOgf,OAAS,SACzCvkB,KAAK,GACRrU,MAAKk0C,cAAcx2B,GACnB1d,KAAKgzC,iBAAiBC,IACvBjzC,QACI,GAEX40C,QAAS,SAAU9lC,GACf,MAAI9O,MAAKm0C,kBAAkBrlC,OACvBA,GAAEiJ,kBAGN/X,KAAKksC,yBACLlsC,MAAKkzC,qBAAqB,SAAqBhnC,EAAQiL,GAA7B,GAcd09B,GAGAxR,EAMAyR,EAtBJC,EAAgB5oC,EAAIgF,OAAOjF,EAAOjB,SAAU,OAC5C8sB,UAAW,oBACXrpB,UAAW,WAEXxM,EAAU1C,EAAMwC,QAAQE,QACxB2R,EAAO3H,EAAO2H,IAClB7T,MAAKg1C,wBAAwBD,EAAelhC,GAC5CA,EAAK6C,YAAYq+B,GACb7yC,EAAQy3B,QACR35B,KAAKi1C,qBAAqBF,EAAe59B,GAEzCjV,EAAQ+R,MAAQ/R,EAAQ4e,QAAU,IAClChS,EAAEiJ,iBACE88B,EAAI3oC,EAAO2N,cACfg7B,EAAEpP,mBAAmBsP,GACrB7oC,EAAOoM,YAAYu8B,GACfxR,EAAYn3B,EAAOjB,SAAS4I,KAAKmwB,kBACrCX,EAAUY,kBAAkB8Q,GAC5B3zC,EAAEyS,GAAMnC,OAAO,SACf2xB,EAAUvsB,YAAY,SACtB1V,EAAEyS,GAAMvC,KAAK,QAASlQ,EAAEe,MAAMnC,KAAK40C,QAAS50C,SAExC80C,EAAiB5oC,EAAO2N,cAC5Bi7B,EAAerP,mBAAmBsP,GAClC7oC,EAAOoM,YAAYw8B,IAEvB39B,EAAMuuB,kBACP,SAAoBx5B,EAAQiL,GAC3B,GAAe+9B,GAAXx3B,EAAO,EACXxR,GAAOoM,YAAYnB,GACnB+9B,EAAa9zC,EAAE8K,EAAO2H,MAAM0M,SAAS,sBACrC20B,EAAW1V,KAAK,WACZ,GAAI3G,GAAY74B,KAAK64B,SACjBA,IAAa1sB,EAAIqO,GAAGqe,EAAW,OAC/B1sB,EAAI0E,OAAOgoB,GAEfnb,GAAQ1d,KAAK0O,YAEjBwmC,EAAWrkC,SACX7Q,KAAKk0C,cAAcx2B,GAAQy3B,OAAO,QAG1CC,WAAY,SAAUtmC,IACd5M,EAAQ+R,MAAQ/R,EAAQgS,QACxBpF,EAAEgM,kBACFhM,EAAEiJ,mBAGVs9B,OAAQ,SAAUvmC,GAAV,GAIAwmC,GACA3yB,CAJE,eAAgBhhB,UAGlB2zC,GAAgBxmC,EAAEulC,eAAiBvlC,GAAGwmC,iBACtC3yB,EAAQ2yB,EAAa3yB,OAAS2yB,EAAahB,MAC3Ct0C,KAAKu0C,cAAc5xB,IACnB7T,EAAEiJ,mBAGVi9B,wBAAyB,SAAU1wB,EAAMzQ,GAAhB,GAcb3I,GAQA+rB,EAIAkL,EAIAz7B,GA7BHxE,EAAQ+R,MAAS/R,EAAQy3B,UAG9BrV,EAAOljB,EAAEkjB,GACTA,EAAK7R,KACD8iC,YAAa,MACbxsC,MAAO,MACPC,OAAQ,MACRwsC,SAAU,SACVC,OAAQ,IACRC,QAAS,MAETxzC,EAAQ+R,OACJ/I,EAAkB9J,EAAEyS,EAAKgB,cAAc3J,iBAC3CoZ,EAAK7R,KACDkjC,YAAa,SACbC,WAAY,SACZC,YAAa,SACbC,WAAY,SACZ5T,eAAgB,SAEhBjL,EAAQ/rB,EAAgBuH,IAAI,SAC5BwkB,GACA3S,EAAK7R,IAAI,QAASwkB,GAElBkL,EAAaj3B,EAAgBuH,IAAI,cACjC0vB,GACA7d,EAAK7R,IAAI,aAAc0vB,GAEvBz7B,EAAWwE,EAAgBuH,IAAI,YAC/B/L,GACA4d,EAAK7R,IAAI,WAAY/L,MAIjCuuC,qBAAsB,SAAU3wB,EAAMnN,GAAhB,GACdnL,GAAOhM,KACP6T,EAAO7H,EAAKE,OAAO2H,KACnBkiC,EAAa5pC,EAAImL,OAAOgN,EAAMzQ,GAC9BmiC,EAAchqC,EAAKiqC,aAAa9+B,EAAOtD,GACvCqiC,EAAaF,EAAY5+B,KAAO2+B,EAAW3+B,KAC3C++B,EAAaH,EAAY5b,IAAM2b,EAAW3b,IAC1Cgc,EAAY,aAAeF,EAAa,MAAQC,EAAa,KACjE/0C,GAAEkjB,GAAM7R,KACJ4jC,oBAAqBD,EACrBE,UAAaF,KAGrBH,aAAc,SAAU9+B,EAAOtD,GAAjB,GAIN0iC,GAEIC,EAaJl/B,EACAmN,EACAjN,EAGIi/B,EAvBJvqC,EAASlM,KAAKkM,OACdm8B,EAAQl8B,EAAIgF,OAAOjF,EAAOjB,SAAU,QAAUyD,UAAW,WACzD6O,EAAiBpG,EAAMoG,cA4B3B,OA1BIpG,GAAMmG,WACFk5B,EAAkBrqC,EAAIwoB,WAAWpX,GACjCi5B,IAAoBrqC,EAAIurB,MAAMna,IAAyC,IAAtBpG,EAAM8H,aACvD9S,EAAIY,aAAas7B,EAAO9qB,GACjBi5B,GAAmBr/B,EAAM8H,cAAgB1B,EAAe1c,OAC/DsL,EAAI2D,YAAYu4B,EAAO9qB,IAEvBpG,EAAMkvB,WAAWgC,GACjBkO,GAAe,KAGnBh5B,EAAiBA,IAAmB1J,EAAO0J,EAAe0X,WAAW9d,EAAM8H,aAAe1B,EAC1FpR,EAAIY,aAAas7B,EAAO9qB,IAExBjG,EAASnL,EAAImL,OAAO+wB,EAAOx0B,GAC3B4Q,EAAO4jB,EAAM3T,gBACbld,EAAO6wB,EAAM3jB,YACjBvY,EAAI0E,OAAOw3B,GACPkO,GAAgBpqC,EAAIwoB,WAAWlQ,IAAStY,EAAIwoB,WAAWnd,KAAUrL,EAAIurB,MAAMjT,KAAUtY,EAAIurB,MAAMlgB,KAC3Fi/B,EAAahyB,EAAK5jB,OACtB2W,EAAKod,KAAOnQ,EAAKmQ,KAAOpd,EAAKod,KAC7Bzd,EAAMiB,SAASZ,EAAMi/B,GACrBtqC,EAAI0E,OAAO4T,GACXtN,EAAMkB,UAAS,GACfnM,EAAOoM,YAAYnB,IAEhBG,GAEX40B,mBAAoB,SAAU/0B,GAAV,GAGRtD,GAIIf,EACA4jC,EAPRxqC,EAASlM,KAAKkM,MACdA,IAAUA,EAAOrM,QAAQ8a,aACrB9G,EAAO3H,EAAO2H,KAClBsD,EAAQA,GAASjL,EAAOkJ,WACxB5V,EAAMsC,GAAGoK,OAAO0O,WAAWsxB,mBAAmB/0B,GAC1CA,EAAMoG,iBAAmB1J,GAA8B,IAAtBsD,EAAM8H,cACnCnM,EAAMe,EAAKgB,cACX6hC,EAAU5jC,EAAIi2B,eAAe,UACjCl1B,EAAK9G,aAAa2pC,EAAS7iC,EAAKohB,WAAW,IAC3C9d,EAAMkuB,eAAeqR,IAEzBxqC,EAAOoM,YAAYnB,KAG3Bw/B,iBAAkB,SAAU1yB,EAAOK,GAC/B,GAAIwQ,GAAYjhB,CAChB,IAAIoQ,EACA,MAAO9X,GAAIuxB,sBAAsBpZ,GAC7B,IACA,KACA,QACEA,EAAKwQ,UAIf,IAFAA,EAAaxQ,EAAKwQ,WAClBjhB,EAAOyQ,EAAKzP,cAAchB,KACtB1H,EAAIqtB,SAAS1E,GACb,KAAOA,EAAWA,YAAcjhB,IAAS1H,EAAImtB,QAAQxE,EAAWA,aAC5DA,EAAaA,EAAWA,UAGhC,OAAOA,IAEXrV,MAAO,SAAU/B,EAAM7d,GAAhB,GACuByD,GAAG08B,EAAG/K,EAkB5BhR,EAEA9M,EAKA8iB,EACAoO,EACA9jB,EACAwX,EACA6a,EAMA/D,EAEIgE,EA0BJC,EAKAC,EAEIC,EACAC,EACAC,EAxEJhrC,EAASlM,KAAKkM,MAMlB,IALAlM,KAAKksC,qBACLrsC,EAAUF,GACNw1C,OAAO,EACPp/B,OAAO,GACRlW,IACEA,EAAQs3C,aACT,IAAK7zC,EAAI,EAAG08B,EAAIhgC,KAAKmyC,SAAStxC,OAAQyC,EAAI08B,EAAG18B,IACrCtD,KAAKmyC,SAAS7uC,GAAG8zC,WAAW15B,KAC5BA,EAAO1d,KAAKmyC,SAAS7uC,GAAG6xC,MAAMz3B,GA2B1C,IAvBI7d,EAAQs1C,QACRz3B,EAAOA,EAAKjP,QAAQ,8CAA+C,MACnEiP,EAAOA,EAAKjP,QAAQ,0BAA2B,KAEnDiP,EAAOA,EAAKjP,QAAQ,QAAS,WAAWA,QAAQ,QAAS,YACrDwV,EAAQjkB,KAAKs5B,QAAQ5b,GACzBxR,EAAOgL,QACHC,EAAQjL,EAAOkJ,WACnB+B,EAAMuuB,iBACFvuB,EAAMoG,gBAAkBrR,EAAOjB,UAC/BkM,EAAMsuB,mBAAmBv5B,EAAO2H,MAEhComB,EAAS,GAAI4K,GACbwD,EAAQpO,EAAOqO,SAASnxB,GACxBoN,EAASvkB,KAAK22C,iBAAiB1yB,EAAOokB,GACtCtM,GAAS,EACT6a,EAAaryB,GAAUrY,EAAO2H,OAAS1H,EAAIqO,GAAG+J,EAAQ,MACtD1kB,EAAQkW,OAAS6gC,IAAe3yB,GAAS9X,EAAIqtB,SAASjV,MACtDpN,EAAM2C,WAAWuuB,GACjBp8B,EAASoR,WAAWtH,MAAMoB,EAAOoN,GAAQ,GACzCwX,GAAS,GAET8W,EAAW7yC,KAAK4yC,eAAel1B,GAC/Bm1B,EAASruB,YAAgD,sBAAlCquB,EAASruB,WAAWuT,UAAmC,CAE9E,IADI8e,KACCvzC,EAAI,EAAG08B,EAAI6S,EAAS5d,WAAWp0B,OAAQyC,EAAI08B,EAAG18B,IAC/CuzC,EAAc12C,KAAK0yC,EAAS5d,WAAW3xB,GAAGoL,UAE9CmkC,GAAW7yC,KAAK4yC,eAAeiE,EAAcxiC,KAAK,WAWtD,GATA4gB,EAAa4d,EAAS5d,WACtB7zB,EAAE6zB,GAAY0I,OAAO,SAAS9wB,SAAS,WAAW40B,MAAM90B,KAAK,SAASE,SAAS,WAC/EzL,EAAE6zB,GAAYuK,KAAK,SAAU4E,EAAOiT,GAC5BlrC,EAAImtB,QAAQ+d,IAA0B,KAAlBA,EAAI3oC,WACxB2oC,EAAI3gC,YAAYxK,EAAOjB,SAAS89B,eAAe,aAGvD5xB,EAAMkvB,WAAWwM,GACjBtuB,EAASvkB,KAAK22C,iBAAiB1yB,EAAOokB,GAClCtM,EAAQ,CACR,KAAOsM,EAAMvT,YAAcvQ,GACvBpY,EAAI4vB,OAAOsM,EAAMvT,WAErB3oB,GAAI4vB,OAAOsM,EAAMvT,YAarB,GAXA3oB,EAAIkY,UAAUlN,EAAM8G,yBACpBoqB,EAAMvhC,MAAMwwC,QAAU,SACtBnrC,EAAIwuB,iBAAiBzuB,EAAOjB,UAC5BkB,EAAI0tB,SAASwO,GACbpO,EAAOsO,YAAYpxB,GACf2/B,EAAW3/B,EAAM8G,wBAAwB6W,WACzC3d,EAAMmG,WAAmC,SAAtBnR,EAAI/I,KAAK0zC,KAC5B3/B,EAAMmuB,cAAclkC,EAAE01C,GAAUvqC,QAAQ,SAAS,IACjD4K,EAAMkB,UAAS,IAEf0+B,EAAe31C,EAAE+V,EAAM8G,wBAAwB6W,YAAYvoB,QAAQ,SACnEwqC,EAAaniC,IAAI,GAAI,CAIrB,IAHIoiC,EAAeD,EAAaxyB,SAAS0lB,WACrCgN,EAAmBD,EAAan2C,OAAS,EACzCq2C,EAAcF,EAAapiC,IAAIqiC,GACF,OAA1BC,EAAY/+B,YAAiD,MAA1B++B,EAAY/+B,WAA+C,KAA1B++B,EAAY/+B,YACnF8+B,GAAoB,EACpBC,EAAcF,EAAapiC,IAAIqiC,EAE/BC,KAAgBH,EAAaniC,IAAI,IACjCzI,EAAI2D,YAAY3D,EAAI6vB,gBAAgB9vB,EAAOjB,SAAU,KAAM8rC,EAAa,IAGhF7qC,EAAOoM,YAAYnB,MAGvBogC,EAAU31C,EAAMjC,QAChBC,KAAM,SAAUC,GACZG,KAAKH,QAAUA,MACfG,KAAKw3C,iBAETrC,MAAO,SAAUz3B,EAAM+5B,GACnB,GAAyEn0C,GAAG08B,EAAxEh0B,EAAOhM,KAAMw3C,EAAeC,GAAsBzrC,EAAKwrC,YAC3D,KAAKl0C,EAAI,EAAG08B,EAAIwX,EAAa32C,OAAQyC,EAAI08B,EAAG18B,GAAK,EAC7Coa,EAAOA,EAAKjP,QAAQ+oC,EAAal0C,GAAIk0C,EAAal0C,EAAI,GAE1D,OAAOoa,MAGX00B,EAAgBmF,EAAQ53C,QACxBC,KAAM,SAAUC,GACZ03C,EAAQz3C,GAAGF,KAAKG,KAAKC,KAAMH,GAC3BG,KAAKw3C,cACD,wBACA,yBAGRJ,WAAY,SAAU15B,GAClB,OAAQ1d,KAAKH,QAAQsc,MAAQ,iBAAiB1D,KAAKiF,MAGvD20B,EAAakF,EAAQ53C,QACrBC,KAAM,SAAUC,GACZ03C,EAAQz3C,GAAGF,KAAKG,KAAKC,KAAMH,EAC3B,IAAI63C,GAAc,GAClB13C,MAAKw3C,cACD,oDACAE,EACA,OACAA,EACA,wBACAA,IAGRN,WAAY,SAAU15B,GAClB,MAAO,8CAA8CjF,KAAKiF,MAG9D40B,EAAsBiF,EAAQ53C,QAC9BC,KAAM,SAAUC,GACZ03C,EAAQz3C,GAAGF,KAAKG,KAAKC,KAAMH,GAC3BG,KAAK23C,kBACD,iBACA,GACA,mBACA,GACA,UACA,IACA,uBACA,SACA,yFACA,GACA,SACA,IAEJ33C,KAAKw3C,aAAex3C,KAAK23C,iBAAiBh7B,QACtC,+LACA,KACA,YACA,WACA,cACA,IACA,iCACA,cACA,gCACA,GACA,sCACA,GACA,sCACA,GACA,YACA,OACA,kBACA,GACA,4BACA,GACA,iBACA,GACA,uBACA,eACA,0BACA3c,KAAK43C,iBACL,uBACA,WACA,sBACA,GACA,kBACA,SAAUC,EAAIC,GACV,MAAOA,GAAKD,EAAK,QAI7BD,iBAAkB,SAAU7Z,EAAOga,EAASr2B,GAA1B,GACVs2B,GAAS,yBACTrV,EAAOqV,EAAOt/B,KAAKgJ,GACnBu2B,EAASv2B,GAAQihB,GAAQA,EAAK,EAClC,OAAIoV,GACO,UACAE,EACA,4BAA8BA,EAAS,KAEvC,UAGfb,WAAY,SAAU15B,GAClB,MAAO,eAAejF,KAAKiF,IAAS,oBAAoBjF,KAAKiF,IAAS,mCAAmCjF,KAAKiF,IAElHw6B,kBAAmB,SAAUx6B,GACzB,MAAOA,GAAKjP,QAAQ,uBAAwB,SAAU0pC,EAAGziB,GACrD,OAAKA,GAAcA,EAAWloB,QAAQ,QAAU,EACrC,GAEJ2qC,KAGfC,SAAU,SAAU3Y,EAAG4Y,GAAb,GAGFC,GAFA56B,EAAO+hB,EAAE/wB,UACTgO,EAAOvQ,EAAImwB,UAAUmD,GAErB8Y,EAAc76B,EAAKqgB,MAAM,+EACzBya,EAASD,GAAeA,EAAY,GACpCE,EAAW,YAAYhgC,KAAK+/B,GAC5BE,EAAgB,SAAUh8B,GAC1B,MAAOA,GAAKjO,QAAQ,8BAA+B,IAMvD,OAJI8pC,KACAD,GAAiB,GAErB56B,EAAOA,EAAKjP,QAAQ,iBAAkB,IAAIA,QAAQ,UAAW,MACxD6pC,GAAkB,sCAAsC7/B,KAAKiF,IAAS46B,GAAkB,YAAY7/B,KAAKiF,IAAS86B,IAAWC,GAAYJ,GAEtInd,IAAK,KACLp0B,MAAO9G,KAAK24C,yBAAyBD,EAAch8B,KAGvD,6BAA6BjE,KAAKiF,IAE9Bwd,IAAK,KACLp0B,MAAO9G,KAAK44C,uBAAuBF,EAAch8B,KAHzD,QAOJm8B,aAAc,SAAUpZ,GACpB,GAAI5vB,GAASzM,EAAO+I,EAAI/I,KAAKq8B,EAoB7B,OAnB2B,IAAvBA,EAAExK,WAAWp0B,OACbgP,EAAU4vB,EAAEjb,WAAW9V,UAAUD,QAAQ,uBAAwB,KAEjEtC,EAAI0E,OAAO4uB,EAAEjb,YACgB,GAAzBib,EAAEjb,WAAWtM,UACT,kBAAkBO,KAAKgnB,EAAEjb,WAAWrM,YACpChM,EAAI0E,OAAO4uB,EAAEjb,YAGjB,kBAAkB/L,KAAKgnB,EAAEjb,WAAW9V,YACpCvC,EAAI0E,OAAO4uB,EAAEjb,YAGb3U,EADQ,KAARzM,EACU,IAAMA,EAAO,IAAMq8B,EAAE/wB,UAAY,KAAOtL,EAAO,IAE/Cq8B,EAAE/wB,WAGpBvC,EAAI0E,OAAO4uB,GACJtzB,EAAIgF,OAAOlG,SAAU,MAAQyD,UAAWmB,KAEnD8oC,yBAA0B,SAAUH,GAChC,MAAI,sCAAsC//B,KAAK+/B,GACpC,KACA,KAAK//B,KAAK+/B,GACV,SAEA,UAGfI,uBAAwB,SAAUJ,GAC9B,GAAIJ,GAAW,IAIf,OAHK,MAAM3/B,KAAK+/B,KACZJ,GAAY,SAAS3/B,KAAK+/B,GAAU,SAAW,WAAa,cAAc//B,KAAK+/B,GAAU,QAAU,UAEhGJ,GAEXU,kBAAmB,SAAUp7B,GACzB,GAAIq7B,GAAgB,uEAIpB,OAHAr7B,GAAOA,EAAKjP,QAAQsqC,EAAe,SAAUhb,EAAOtE,EAAMuf,GACtD,MAAOx5C,GAAM6D,OAAO,uCAAwCo2B,EAAMuf,EAAOjb,MAIjFkb,YAAa,SAAUntC,EAAMotC,GACzB,MAAO/sC,GAAIgF,OAAOlG,SAAUa,GAAQhF,OAASqyC,cAAeD,MAEhE5tC,MAAO,SAAU8tC,GAAV,GACoFh2C,GAAmB6rC,EAAIoK,EAAYC,EAAWC,EAAYC,EAAcC,EAAUn2C,EAAGm8B,EAAG3zB,EAAM2pC,EAAQhc,EAAM4e,EAY3LqB,EAKAtB,EAWAuB,EA5BJC,EAAgBx4C,EAAEg4C,GAAazsC,KAAKR,EAAI6X,cAAc3P,KAAK,MAAOwlC,KAAuBC,KAAgHC,GACrM,IACA,KACA,KACA,KACA,KACA,KACA,KAER,KAAKz2C,EAAI,EAAGA,EAAIs2C,EAAc/4C,OAAQyC,IAClCm8B,EAAIma,EAAct2C,GAClB+0C,EAAWj3C,EAAEq+B,GAAG7K,OACZ8kB,EAAYrB,EAAS5e,KACzBr2B,EAAO+I,EAAI/I,KAAKq8B,GACJ,MAARr8B,IAGAg1C,EAAWp4C,KAAKo4C,SAAS3Y,EAAG4Y,GAChCvsC,EAAOssC,GAAYA,EAASld,KACvBpvB,GAAQiuC,EAAiBvsC,QAAQpK,GAAQ,EACrCq8B,EAAE/wB,UAEIugC,IAAOuK,GACdvK,EAAG9+B,OAAOsvB,GAFVtzB,EAAI0E,OAAO4uB,IAMnBgW,EAAS4C,EAASW,OAASgB,WAAWva,EAAE34B,MAAMmzC,YAAc,GACxDN,EAAY7tC,EAAO4tC,EAClBI,EAAOrE,KACRqE,EAAOrE,SAEN4D,GAAcA,EAAa,KAC5BA,EAAa5D,EACb6D,EAAYI,EACZH,EAAan4C,EAAEg4C,GAAazsC,KAAK,eAAkB2sC,EAAY,WAAY,GAC3EG,EAAWz5C,KAAKi5C,YAAYntC,EAAMssC,EAAStxC,OAC3CqF,EAAIY,aAAa0sC,EAAUha,GAC3Boa,EAAapE,EACbqE,EAAOrE,GAAQkE,GAAaF,GAEhCD,EAAeD,IAAe9Z,EAC9BhG,EAAOqgB,EAAOrE,GAAQkE,IAClBlE,EAASoE,IAAepgB,KACxBA,EAAOz5B,KAAKi5C,YAAYntC,EAAMssC,EAAStxC,OACvCgzC,EAAOrE,GAAQkE,GAAalgB,EAC5BwV,EAAGv4B,YAAY+iB,IAEnBwV,EAAKjvC,KAAK64C,aAAapZ,GACvBhG,EAAK/iB,YAAYu4B,GACbuK,EACAH,EAAaQ,KAEbA,EAAapE,KAIzByE,iBAAkB,SAAUxuC,GAExB,IADA,GAAIgqB,GAAahqB,EAAQgqB,WAAYpyB,EAAIoyB,EAAW70B,OAC7CyC,KAC4B,WAA3B6I,EAAI/I,KAAKsyB,EAAWpyB,KACpBoI,EAAQyuC,oBAAoBzkB,EAAWpyB,KAInD82C,eAAgB,SAAUC,GAAV,GACRC,GAAQD,EAAIC,MACZhL,EAAQluC,EAAEi5C,GAAK9tC,QAAQ,SACvBguC,EAAWjL,EAAM/uB,SAAS,WAC1B+5B,GAAMz5C,OAAS,IAER05C,EAAS15C,SAChBy5C,EAAQC,EAASh6B,WACjBg6B,EAAS,GAAGzlB,WAAW+C,YAAY0iB,EAAS,KAEhDA,EAAWn5C,EAAEA,EAAE+S,IAAImmC,EAAO,SAAU/M,GAChC,GAAIxkC,GAAQwkC,EAAKxkC,KACjB,OAAIA,IAAiC,IAAxBuE,SAASvE,EAAO,IAClBvJ,EAAM6D,OAAO,8BAA+B0F,GAEhD,YACRsL,KAAK,KACHkmC,EAAS//B,GAAG,cACb+/B,EAAWn5C,EAAE,eAAe+O,OAAOoqC,IAEvCA,EAASjb,UAAUgQ,KAEvBkL,eAAgB,SAAUH,GACtB,GAAuB/2C,GAAnBg3C,EAAQD,EAAIC,MAAUG,EAAcr5C,EAAE+S,IAAImmC,EAAO,SAAU/M,GACvD,GAAIlV,GAAQj3B,EAAEmsC,GAAMhtB,SAAS,KAAKA,SAAS,UAAU,EACrD,IAAI8X,GAA4B,UAAnBlsB,EAAI/I,KAAKi1B,GAClB,MAAOA,IAGnB,IAAIoiB,EAAY55C,QAAUy5C,EAAMz5C,OAAQ,CACpC,IAAKyC,EAAI,EAAGA,EAAIm3C,EAAY55C,OAAQyC,IAChC6I,EAAI4vB,OAAO0e,EAAYn3C,GAG3B,KADAlC,EAAEi5C,GAAK9tC,QAAQ,SAASI,KAAK,YAAYymC,MAAM,mBAAmB3R,MAAM90B,KAAK,SAASwD,OAAOkqC,GACxF/2C,EAAI,EAAGA,EAAIg3C,EAAMz5C,OAAQyC,IAC1B6I,EAAIovB,UAAU+e,EAAMh3C,GAAI,QAIpCo3C,iBAAkB,SAAUJ,GACxB,GAAIh3C,GAAGs5B,EAAGha,EAAK2qB,EAAMoN,CACrB,KAAKr3C,EAAI,EAAGA,EAAIg3C,EAAMz5C,OAAQyC,IAI1B,IAHAtD,KAAKk6C,iBAAiBI,EAAMh3C,IAC5BiqC,EAAOnsC,EAAEk5C,EAAMh3C,IACfq3C,EAAapN,EAAKhtB,SAAS,KACtBqc,EAAI,EAAGha,EAAM+3B,EAAW95C,OAAQ+7B,EAAIha,EAAKga,IACtCA,EAAIha,EAAM,GACVzW,EAAI2D,YAAY3D,EAAIgF,OAAOlG,SAAU,MAAO0vC,EAAW/d,IAE3DzwB,EAAI4vB,OAAO4e,EAAW/d,KAIlCge,oBAAqB,SAAUC,GAC3B,IAAK,GAAIv3C,GAAI,EAAGA,EAAIu3C,EAAMh6C,OAAQyC,IAC1B,yBAAyBmV,KAAKoiC,EAAMv3C,GAAGwD,MAAM80B,UAC7CzvB,EAAI4vB,OAAO8e,EAAMv3C,KAI7BmI,OAAQ,SAAU2tC,GACd,GAAwDzuC,GAAMmwC,EAAUC,EAAYz3C,EAAGs5B,EAAnFnxB,EAASrK,EAAEg4C,GAAazsC,KAAK,SAAUX,EAAOhM,IAClD,KAAKsD,EAAI,EAAGA,EAAImI,EAAO5K,OAAQyC,IAAK,CAGhC,IAFAqH,EAAOc,EAAOnI,GAAGqH,KACjBowC,EAAaD,EAAWnwC,EAAK,GACxBiyB,EAAI,EAAGA,EAAIjyB,EAAK9J,OAAQ+7B,IACrBjyB,EAAKiyB,GAAG0d,MAAMz5C,OAASk6C,EAAWT,MAAMz5C,SACxCk6C,EAAapwC,EAAKiyB,GAG1B5wB,GAAKouC,eAAeW,GACpB/uC,EAAKwuC,eAAeM,GACpB9uC,EAAKkuC,iBAAiBzuC,EAAOnI,IAC7B0I,EAAK0uC,iBAAiBjvC,EAAOuvC,GAAG13C,GAAGqJ,KAAK,UACxCX,EAAK4uC,oBAAoBnvC,EAAOuvC,GAAG13C,GAAGqJ,KAAK,WAGnDsuC,QAAS,SAAU7B,GAAV,GAEI91C,GADL43C,EAAS95C,EAAEg4C,GAAazsC,KAAK,aACjC,KAASrJ,EAAI,EAAGA,EAAI43C,EAAOr6C,OAAQyC,IAC/B6I,EAAIovB,UAAU2f,EAAO53C,GAAI,OAGjC63C,iBAAkB,SAAU/B,GACxBh4C,EAAEg4C,GAAazsC,KAAK,KAAK6yB,KAAK,WAC1Bp+B,EAAEpB,MAAMyS,KACJ/L,SAAU,GACVy7B,WAAY,KAEXniC,KAAK6X,aAAa,UAAa7X,KAAK8G,MAAM80B,SAC3C57B,KAAKi8B,gBAAgB,YAIjCkZ,MAAO,SAAUz3B,GAAV,GACc07B,GAAbptC,EAAOhM,KACPo7C,EAAUp7C,KAAKH,OAmBnB,OAlBIu7C,GAAQj/B,MACRuB,EAAO65B,EAAQz3C,GAAGq1C,MAAMp1C,KAAKiM,EAAM0R,EAAM1d,KAAK23C,kBAC9Cj6B,EAAO1R,EAAKksC,kBAAkBx6B,KAE9BA,EAAO1d,KAAK84C,kBAAkBp7B,GAC9BA,EAAO65B,EAAQz3C,GAAGq1C,MAAMp1C,KAAKiM,EAAM0R,GACnCA,EAAO1R,EAAKksC,kBAAkBx6B,GAC9B07B,EAAcjtC,EAAIgF,OAAOlG,SAAU,OAASyD,UAAWgP,IACvD1R,EAAKivC,QAAQ7B,GACTgC,EAAQn/B,gBACRjQ,EAAKV,MAAM8tC,GAEfptC,EAAKP,OAAO2tC,GACRgC,EAAQp/B,iBACRhQ,EAAKmvC,iBAAiB/B,GAE1B17B,EAAO07B,EAAY1qC,UAAUD,QAAQ,kCAAmC,OAErEiP,KAGX60B,EAAsBgF,EAAQ53C,QAC9BC,KAAM,SAAUC,GACZ03C,EAAQz3C,GAAGF,KAAKG,KAAKC,KAAMH,GAC3BG,KAAKw3C,cACD,qCACA,GACA,oCACA,MACA,qBACA,OAGRJ,WAAY,SAAU15B,GAClB,MAAO,0DAA0DjF,KAAKiF,MAG1E29B,EAAa9D,EAAQ53C,QACrBw1C,MAAO,SAAUz3B,GACb,GAAIrG,GAAYlL,EAAIgF,OAAOlG,SAAU,OAASyD,UAAWgP,GAEzD,OADArG,GAAYrX,KAAKs7C,SAASjkC,GACnBA,EAAU3I,WAErB4sC,SAAU,SAAUjkC,GAChB,MAAOA,MAGXm7B,EAAkB6I,EAAW17C,QAC7B27C,SAAU,SAAUjkC,GAChB,GAAI7T,GAAOxD,KAAKu7C,aAIhB,OAHAn6C,GAAEiW,GAAW1K,KAAKnJ,GAAMg8B,KAAK,WACzBrzB,EAAI4vB,OAAO/7B,QAERqX,GAEXkkC,YAAa,WACT,GAAIv7C,KAAKH,QAAQuc,KACb,MAAO,QAGfg7B,WAAY,WACR,MAAOp3C,MAAKH,QAAQuc,QAGxBq2B,EAAkB4I,EAAW17C,QAC7B27C,SAAU,SAAUjkC,GAAV,GACFqe,GAAa11B,KAAKw7C,cAClB56B,EAAQxf,EAAEiW,GAAW1K,KAAK,IAAM+oB,EAAWrhB,KAAK,OAAS,IAE7D,OADAuM,GAAM66B,WAAW/lB,EAAWrhB,KAAK,MAC1BgD,GAEXmkC,YAAa,WACT,MAAIx7C,MAAKH,QAAQ4S,KAET,QACA,aAKZ2kC,WAAY,WACR,MAAOp3C,MAAKH,QAAQ4S,OAGxBipC,EAAgB,WAChB17C,KAAK0c,KAAO,GACZ1c,KAAK0oC,IAAM,SAAUhsB,GACjB1c,KAAK0c,MAAQA,IAGjBi/B,EAAgB/5C,EAAMjC,QACtBC,KAAM,SAAUg8C,GACZ57C,KAAK47C,WAAaA,IACdl/B,KAAM,IACNm/B,KAAM,SAEV77C,KAAK87C,SACL97C,KAAK+7C,mBACL/7C,KAAKg8C,aAETC,WAAY,SAAUv/B,GACI,IAAlBA,EAAKxE,WACLwE,EAAOA,EAAKvE,WAEhBnY,KAAKk8C,cAAcxT,IAAIhsB,IAE3By/B,sBAAuB,SAAUz/B,GAC7B1c,KAAK+7C,gBAAgB57C,KAAKuc,IAE9B0/B,qBAAsB,WACdp8C,KAAK+7C,gBAAgBl7C,SACrBb,KAAKi8C,WAAWj8C,KAAK+7C,gBAAgB1nC,KAAK,MAC1CrU,KAAK+7C,qBAGbM,QAAS,WACLr8C,KAAKo8C,uBACLp8C,KAAKg8C,aAETt+B,KAAM,WAAA,GAKOpa,GAAOg5C,EAAmBC,EAC3BV,EACKjf,EAAO4f,EAAkBC,EAC1B//B,EAPRk/B,EAAa57C,KAAK47C,WAClBhjB,EAAS,GACTkjB,EAAQ97C,KAAK87C,KAEjB,KADA97C,KAAKo8C,uBACI94C,EAAI,EAAGg5C,EAAKR,EAAMj7C,OAAQ07C,EAAMD,EAAK,EAAGh5C,EAAIg5C,EAAIh5C,IAAK,CAE1D,IADIu4C,EAAOC,EAAMx4C,GACRs5B,EAAI,EAAG4f,EAAKX,EAAKh7C,OAAQ47C,EAAMD,EAAK,EAAG5f,EAAI4f,EAAI5f,IAChDlgB,EAAOm/B,EAAKjf,GAAGlgB,KACnBkc,GAAUlc,EACNkgB,IAAM6f,IACN7jB,GAAUgjB,EAAWl/B,KAGzBpZ,KAAMi5C,IACN3jB,GAAUgjB,EAAWC,MAG7B,MAAOjjB,IAEXojB,UAAW,WACPh8C,KAAKk8C,cAAgB,GAAIR,GACzB17C,KAAK67C,QACL77C,KAAK67C,KAAK17C,KAAKH,KAAKk8C,eACpBl8C,KAAK87C,MAAM37C,KAAKH,KAAK67C,SAGzBa,EAAgB96C,EAAMjC,QACtBC,KAAM,SAAUmnC,GACZ/mC,KAAK+mC,SAAWA,GAEpBS,UAAW,SAAUljB,GAAV,GAIHq4B,GACAtkB,CAJC/T,KAGDq4B,EAAc38C,KAAK+mC,SAASziB,GAC5B+T,EAAQ/T,EAAKE,YACZm4B,GAAetkB,GAChBr4B,KAAKwnC,UAAUnP,GAEnBr4B,KAAKwnC,UAAUljB,EAAKI,iBAGxBguB,EAAqB6E,EAAQ53C,QAC7BC,KAAM,SAAUC,GACZ03C,EAAQz3C,GAAGF,KAAKG,KAAKC,KAAMH,GAC3BG,KAAK48C,SAAU,EACf58C,KAAK68C,WAAa,GAAIH,GAAct7C,EAAEe,MAAMnC,KAAK88C,UAAW98C,QAEhEm1C,MAAO,SAAUz3B,GACb,GAAIrG,GAAYlL,EAAIgF,OAAOlG,SAAU,OAASyD,UAAWgP,GACzD,OAAO1d,MAAKs7C,SAASjkC,IAEzBikC,SAAU,SAAUjkC,GAKhB,MAJArX,MAAK47C,WAAa57C,KAAK+8C,uBACvB/8C,KAAKg9C,UAAY,GAAIrB,GAAc37C,KAAK47C,YACxC57C,KAAK68C,WAAWrV,UAAUnwB,EAAUmN,YACpCxkB,KAAK48C,SAAU,EACR58C,KAAKg9C,UAAUt/B,QAE1Bo/B,UAAW,SAAUx4B,GACjB,GAAInY,EAAIwoB,WAAWrQ,GAAO,CACtB,GAAInY,EAAI6sB,aAAa1U,GACjB,MAEJtkB,MAAKg9C,UAAUf,WAAW33B,EAAKnM,UAAU1J,QAAQ,KAAMzO,KAAK47C,WAAWC,OACvE77C,KAAK48C,SAAU,MACZ,IAAIzwC,EAAImtB,QAAQhV,IAAStkB,KAAK48C,QAAS,CAC1C,GAAIK,GAASj9C,KAAKk9C,QAAQ/wC,EAAI/I,KAAKkhB,KAAUtkB,KAAKk9C,QAAQj5B,KAC1D,OAAOg5B,GAAOj9C,KAAMskB,KAG5B8yB,WAAY,WACR,GAAIn8B,GAAIjb,KAAKH,OACb,OAAOob,GAAEa,KAAOb,EAAEc,cAEtBghC,qBAAsB,WAClB,MAAI/8C,MAAKH,QAAQic,KAETY,KAAM,IACNm/B,KAAM,MAINn/B,KAAM,IACNm/B,KAAM,UAIlBqB,SACIC,GAAI/7C,EAAEqf,KACNmf,GAAIx+B,EAAEqf,KACN6uB,MAAOluC,EAAEqf,KACT28B,MAAOh8C,EAAEqf,KACT48B,MAAOj8C,EAAEqf,KACT68B,GAAI,SAAUC,EAASj5B,GAAnB,GACIk5B,GAAY,GAAI9K,IAAqB52B,KAAK,IAC1C2hC,EAAWD,EAAUlC,SAASh3B,EAElC,OADAi5B,GAAQP,UAAUb,sBAAsBsB,IACjC,GAEXx5B,MAAO,SAAUs5B,GACbA,EAAQP,UAAUX,cAI1B1J,EAAgB4E,EAAQ53C,QACxBw1C,MAAO,SAAUz3B,GACb,MAAO1d,MAAKH,QAAQ2b,OAAOkC,IAE/B05B,WAAY,WACR,MAAsC,kBAAxBp3C,MAAKH,QAAQ2b,UAG/BkiC,EAAehS,EAAQ/rC,QACvBC,KAAM,SAAUC,GACZ6rC,EAAQ5rC,GAAGF,KAAKG,KAAKC,KAAMH,GAC3BG,KAAKigB,iBAAkB,GAE3BvH,KAAM,WACF,GAAIxM,GAASlM,KAAKkM,MACd1M,GAAMwC,QAAQE,QAAQ+R,KACtB/H,EAAOjB,SAAS6L,YAAY,SAAS,EAAO,MACrC5K,EAAOvK,OAAOg8C,OACrBzxC,EAAOvK,OAAOg8C,WAItBC,EAAmBlS,EAAQ/rC,QAC3BC,KAAM,SAAUC,GACZG,KAAK+f,OAAQ,EACb2rB,EAAQ5rC,GAAGF,KAAKG,KAAKC,KAAMH,IAE/B6Y,KAAM,WAAA,GACE1M,GAAOhM,KACPmX,EAAQnL,EAAK4/B,WAAU,GACvB1/B,EAASF,EAAKE,MAClBA,GAAOoP;AACPpP,EAAOoV,YAAYK,KAAK,WACpB3V,EAAK6/B,aAAa10B,GAClBjL,EAAO0F,4BACP1F,EAAO8F,yBACP9F,EAAO+E,+BAInBtR,GAAOsM,GACHsJ,cAAe41B,EACfO,QAASA,EACTJ,eAAgBA,EAChB5rB,kBAAmBA,EACnB2sB,eAAgBA,EAChBt+B,cAAeA,EACfC,cAAeA,EACfF,iBAAkBA,EAClBG,iBAAkBA,EAClBJ,SAAUA,EACVM,UAAWA,EACXopC,QAASA,EACTnF,cAAeA,EACfC,WAAYA,EACZC,oBAAqBA,EACrBC,oBAAqBA,EACrBC,gBAAiBA,EACjBC,gBAAiBA,EACjBC,mBAAoBA,EACpBiJ,cAAeA,EACfhJ,cAAeA,EACf+K,aAAcA,EACdE,iBAAkBA,IAEtBp4C,EAAa,aAAc,GAAI6mC,IAC3B5pC,SAAU,GAAIF,IACVE,SAAUE,EAAYK,qBACtBsQ,MAAO,cACPuqC,aAAc,mBAGtBr4C,EAAa,QAAS,GAAIlE,IACtBlB,QAASs9C,EACTj7C,SAAU,GAAIF,IACVE,SAAUE,EAAYE,eACtByQ,MAAO,aAGf9N,EAAa,MAAO,GAAIlE,IACpBlB,QAASw9C,EACTn7C,SAAU,GAAIF,IACVE,SAAUE,EAAYE,eACtByQ,MAAO,mBAGjB3R,OAAOnC,MAAMijB,SACC,kBAAVljB,SAAwBA,OAAOyB,IAAMzB,OAAS,SAAU0B,EAAIC,EAAIC,IACrEA,GAAMD,OAEV,SAAU5B,EAAGC,QACVA,OAAO,uBAAwB,iBAAkBD,IACnD,YACG,SAAU8B,GAAV,GACO5B,GAAQmC,OAAOnC,MAAOoC,EAAQpC,EAAMoC,MAAOiE,EAASrG,EAAMsC,GAAGoK,OAAQjG,EAAUzG,EAAMsC,GAAG+D,OAAO/F,GAAGD,QAAQoG,QAAStD,EAAckD,EAAOlD,YAAarB,EAAOuE,EAAOvE,KAAMiB,EAAesD,EAAOtD,aAAchB,EAAasE,EAAOtE,WAAY4K,EAAMtG,EAAOuG,IAAKiR,EAAaxX,EAAOwX,WAAY1d,EAASyB,EAAEzB,OAAQ6F,EAAeK,EAAOlD,YAAY6C,aAAcO,EAAiBF,EAAOlD,YAAYoD,eAAgBgS,EAAiB,SAAU+lC,GAC7aA,EAAG/lC,kBACJgmC,EAAe,wBAAyBC,EAAa,sBAAuBn6B,EAAU,WACzFo6B,EAAqBr8C,EAAMjC,QAC3BC,KAAM,SAAUyD,GACZrD,KAAKqD,OAASA,GAElB66C,iBAAkB,SAAUC,GACxB,GAAuG75B,GAAnG85B,EAAiB,EAAGC,EAAoB,EAAGC,EAAc,EAAGxpB,EAAaqpB,EAAcrpB,UAC3F,KAAKxQ,EAAOwQ,EAAWtQ,WAAYF,EAAMA,EAAOA,EAAKI,YAC7CJ,GAAQ65B,IACJ75B,EAAKyT,WAAalU,EAClBy6B,IACwB,GAAjBh6B,EAAKpM,SACZkmC,IAEAC,IAIZ,OAAIC,GAAc,GAAKxpB,EAAWtQ,WAAWuT,WAAalU,GAAWiR,EAAW+D,UAAUd,WAAalU,EAC5F,EAEAw6B,EAAoBD,GAGnCG,aAAc,SAAUC,EAAYzd,GAAtB,GAINzc,GACA9gB,CAJJ,KAAKu9B,GAAQ/gC,KAAKk+C,iBAAiBM,GAAc,EAC7C,MAAO,KAIX,KAFIl6B,EAAOk6B,EAAW1pB,WAClBtxB,EAAOxD,KAAKqD,OAAO,GAAGG,MAClB2I,EAAImvB,OAAOhX,EAAM9gB,IAAO,CAC5B,GAAIxD,KAAKk+C,iBAAiB55B,GAAQ,EAC9B,MAAO,KAEXA,GAAOA,EAAKwQ,WAEhB,MAAOxQ,IAEXm6B,WAAY,SAAUD,GAClB,GAAuDl7C,GAAGsf,EAAK0B,EAAM9gB,EAAMkyB,EAAvEryB,EAASrD,KAAKqD,OAAQoyB,EAAatpB,EAAIspB,UAC3C,KAAKnyB,EAAI,EAAGsf,EAAMvf,EAAOxC,OAAQyC,EAAIsf,EAAKtf,IAAK,CAI3C,GAHAghB,EAAOk6B,EACPh7C,EAAOH,EAAOC,GAAGE,KACjBkyB,EAAaryB,EAAOC,GAAGsJ,KACnB0X,GAAQnY,EAAImvB,OAAOhX,EAAM9gB,IAASiyB,EAAWnR,EAAMoR,GACnD,MAAOpR,EAEX,MAAOA,GAEH,GADAA,EAAOnY,EAAI0pB,aAAavR,EAAM9gB,GAC1B8gB,GAAQmR,EAAWnR,EAAMoR,GACzB,MAAOpR,GAInB,MAAO,OAEX7G,YAAa,SAAUmD,GACnB,GAAItd,GAAGsf,CACP,KAAKtf,EAAI,EAAGsf,EAAMhC,EAAM/f,OAAQyC,EAAIsf,EAAKtf,IACrC,GAAItD,KAAKy+C,WAAW79B,EAAMtd,IACtB,OAAO,CAGf,QAAO,KAGXo7C,EAAkB98C,EAAMjC,QACxBC,KAAM,SAAUyD,EAAQs7C,GACpB3+C,KAAKod,OAAS,GAAI6gC,GAAmB56C,GACrCrD,KAAK01B,WAAa/1B,KAAW0D,EAAO,GAAGuJ,KAAM+xC,GAC7C3+C,KAAKk7B,IAAM73B,EAAO,GAAGG,KAAK,IAE9Bs4B,KAAM,SAAUxX,GACZ,MAAOnY,GAAI2vB,KAAKxX,EAAMnY,EAAIgF,OAAOmT,EAAKzP,cAAe7U,KAAKk7B,IAAKl7B,KAAK01B,cAExEkpB,SAAU,SAAUznC,EAAOyJ,GACnB5gB,KAAKod,OAAOK,YAAYmD,IACxB5gB,KAAK+V,MAAMoB,GACXnX,KAAK6Q,OAAO+P,IAEZ5gB,KAAKs9B,MAAM1c,IAGnBqrB,OAAQ,SAAU90B,GAAV,GACAgG,GAAYnd,KAAK2a,aAAe0C,EAAWusB,kBAAoBvsB,EAAWF,UAC1EyD,EAAQzD,EAAUhG,EAClByJ,GAAM/f,OAAS,GACfb,KAAK4+C,SAASznC,EAAOyJ,IAG7BjG,WAAY,WACR,MAAO3a,MAAKkM,QAAUlM,KAAKkM,OAAOrM,QAAQ8a,YAE9C2iB,MAAO,SAAU1c,GAAV,GAECtd,GAAG08B,EAAG1b,EAAMu6B,EADZC,KAEAppB,EAAa11B,KAAK01B,WAClBiL,EAAYjL,EAAaA,EAAW5uB,YACxC,KAAKxD,EAAI,EAAG08B,EAAIpf,EAAM/f,OAAQyC,EAAI08B,EAAG18B,IAAK,CAGtC,GAFAghB,EAAO1D,EAAMtd,GACbu7C,EAAa7+C,KAAKod,OAAOmhC,aAAaj6B,GAE9BnY,EAAIqO,GAAGqkC,EAAY,UACfle,EAAU1J,OACV4nB,EAAW5iB,gBAAgB,SAE3B0E,EAAUn6B,UACVq4C,EAAW5iB,gBAAgB,QAE3B0E,EAAUj6B,UACVm4C,EAAW5iB,gBAAgB,SAGnC9vB,EAAIS,KAAKiyC,EAAYnpB,OAClB,CACH,MAAQvpB,EAAImtB,QAAQhV,EAAKwQ,aAAoD,GAArCxQ,EAAKwQ,WAAWG,WAAWp0B,QAAmD,SAApCyjB,EAAKwQ,WAAW3pB,iBAC9FmZ,EAAOA,EAAKwQ,UAEhB+pB,GAAa7+C,KAAK87B,KAAKxX,GAE3Bw6B,EAAY3+C,KAAK0+C,GAErB7+C,KAAK++C,YAAYD,IAErBjuC,OAAQ,SAAU+P,GACd,GAAItd,GAAG08B,EAAG6e,CACV,KAAKv7C,EAAI,EAAG08B,EAAIpf,EAAM/f,OAAQyC,EAAI08B,EAAG18B,IACjCu7C,EAAa7+C,KAAKod,OAAOqhC,WAAW79B,EAAMtd,IACtCu7C,IACI7+C,KAAK01B,YAAc11B,KAAK01B,WAAW5uB,OACnCqF,EAAI+vB,QAAQ2iB,EAAY7+C,KAAK01B,WAAW5uB,OACnC+3C,EAAW/3C,MAAM80B,SAAYijB,EAAWnpB,WAAW,UACpDvpB,EAAI4vB,OAAO8iB,IAGf1yC,EAAI4vB,OAAO8iB,KAK3B9oC,MAAO,SAAUoB,GAAV,GAGC7T,GAAGu7C,EAFHj+B,EAAQvD,EAAWF,UAAUhG,GAC7B6oB,EAAIpf,EAAM/f,MAEd,IAAIm/B,EAAI,EACJ,IAAK18B,EAAI,EAAGA,EAAI08B,EAAG18B,IACfu7C,EAAa7+C,KAAKod,OAAOqhC,WAAW79B,EAAMtd,IACtCu7C,GACAxhC,EAAWtH,MAAMoB,EAAO0nC,GAAY,IAKpDE,YAAa,SAAUn+B,GAEnB,IADA,GAAI0D,GAAM+a,EACHze,EAAM/f,OAAS,GAMlB,GALAyjB,EAAO1D,EAAMo+B,MACb3f,EAAOze,EAAMA,EAAM/f,OAAS,GACxByjB,EAAKoQ,iBAAmBpQ,EAAKoQ,gBAAgBqD,WAAalU,GAC1Dwb,EAAK3oB,YAAY4N,EAAKoQ,iBAEtBpQ,EAAKkX,SAAW6D,EAAK7D,SAAWlX,EAAKoQ,iBAAmB2K,GAAQ/a,EAAKxd,MAAM80B,SAAWyD,EAAKv4B,MAAM80B,QAAS,CAC1G,KAAOtX,EAAKE,YACR6a,EAAK3oB,YAAY4N,EAAKE,WAE1BrY,GAAI0E,OAAOyT,OAKvB26B,EAA2BhB,EAAmBt+C,QAC9CC,KAAM,SAAUyD,EAAQ67C,GACpBl/C,KAAKqD,OAASA,EACdrD,KAAKk/C,eAAiBA,EACtBjB,EAAmBn+C,GAAGF,KAAKG,KAAKC,KAAMqD,IAE1C87C,kBAAmB,SAAU76B,GAAV,GAGXhhB,GAAG08B,EAAGtE,EAAWt4B,EAAMg8C,EAAgB3sC,EAAK4sC,EAAMC,EAAU18B,EAC5D28B,EAAkB/e,EAAU70B,EAH5B+pB,EAAapR,EAAKoR,WAClBnnB,EAAOnN,EAAEmN,IAGb,IAAKmnB,EAGL,IAAKpyB,EAAI,EAAG08B,EAAItK,EAAW70B,OAAQyC,EAAI08B,EAAG18B,IAItC,GAHAo4B,EAAYhG,EAAWpyB,GACvBF,EAAOs4B,EAAUlD,SACjB4mB,EAAiB1jB,EAAUvjB,UACvBujB,EAAUC,WAAqB,SAARv4B,EAEvB,IADAqP,EAAMlE,EAAK6wC,GAAkB96B,EAAKxd,MAAM80B,SAAS7lB,MAAM,KAClDupC,EAAW,EAAG18B,EAAMnQ,EAAI5R,OAAQy+C,EAAW18B,EAAK08B,IAEjD,GADAD,EAAO5sC,EAAI6sC,GACPD,EAAKx+C,OAAQ,CAIb,GAHA0+C,EAAmBF,EAAKtpC,MAAM,KAC9ByqB,EAAWjyB,EAAKgxC,EAAiB,GAAG35C,eACpC+F,EAAQ4C,EAAKgxC,EAAiB,IAC1B/e,GAAYxgC,KAAKk/C,eACjB,QAEJ,OAAO1e,GAAShzB,QAAQ,UAAY,EAAIrB,EAAI6qB,MAAMrrB,GAASA,IAM/E6zC,eAAgB,SAAUl7B,GAAV,GAGRhhB,GAAGsf,EAAKjX,EAFRk1B,EAAQz/B,EAAE+K,EAAIwoB,WAAWrQ,GAAQA,EAAKwQ,WAAaxQ,GACnDzJ,EAAUgmB,EAAM4e,aAAa,qBAAqBC,UAAUC,UAAUziB,SAE1E,KAAK55B,EAAI,EAAGsf,EAAM/H,EAAQha,OAAQyC,EAAIsf,EAAKtf,IAEvC,GADAqI,EAA+B,aAAvB3L,KAAKk/C,eAAgCrkC,EAAQvX,GAAGy0B,UAAY/3B,KAAKm/C,kBAAkBtkC,EAAQvX,IAE/F,MAAOqI,EAGf,OAAO,WAEX6R,UAAW,SAAUoD,GACjB,GAA4Ctd,GAAGsf,EAA3CgW,EAAS54B,KAAKw/C,eAAe5+B,EAAM,GACvC,KAAKtd,EAAI,EAAGsf,EAAMhC,EAAM/f,OAAQyC,EAAIsf,EAAKtf,IACrC,GAAIs1B,GAAU54B,KAAKw/C,eAAe5+B,EAAMtd,IACpC,MAAO,EAGf,OAAOs1B,IAEXnb,YAAa,SAAUmD,GACnB,MAAiC,KAA1B5gB,KAAKwd,UAAUoD,MAG1Bg/B,EAAwBlB,EAAgB/+C,QACxCC,KAAM,SAAUyD,EAAQs7C,EAAQO,GAC5BR,EAAgB5+C,GAAGF,KAAKG,KAAKC,KAAMqD,EAAQs7C,GAC3C3+C,KAAK2+C,OAASA,EACd3+C,KAAKod,OAAS,GAAI6hC,GAAyB57C,EAAQ67C,GAC/CA,IACAl/C,KAAKk/C,eAAiB1/C,EAAMqgD,YAAYX,KAGhDN,SAAU,SAAUznC,EAAOyJ,GAAjB,GACFs+B,GAAiBl/C,KAAKk/C,eACtBjC,EAAS,OACbj9C,MAAK+V,MAAMoB,GACP+nC,GAAuD,WAArCl/C,KAAK2+C,OAAO73C,MAAMo4C,KACpCjC,EAAS,UAEbj9C,KAAKi9C,GAAQr8B,MAGjBk/B,EAAmBv+C,EAAW5B,QAC9BC,KAAM,SAAUC,GACZ0B,EAAWzB,GAAGF,KAAKG,KAAKC,KAAML,EAAOE,GACjCud,OAAQ,GAAI6gC,GAAmBp+C,EAAQwD,QACvCsd,UAAW,WACP,MAAO,IAAI+9B,GAAgB7+C,EAAQwD,eAK/C08C,EAAuBz+C,EAAK3B,QAC5B6M,OAAQ,SAAU1K,EAAI8e,GAClB,GAAI6Y,GAAO33B,EAAG8yB,KAAK50B,KAAK8L,KACxB2tB,GAAKnlB,QACLmlB,EAAK9tB,MAAM3L,KAAKod,OAAOI,UAAUoD,OAGrCo/B,EAAWD,EAAqBpgD,QAChCC,KAAM,SAAUC,GACZyB,EAAKxB,GAAGF,KAAKG,KAAKC,KAAMH,GACxBG,KAAK8L,KAAOtM,EAAMwC,QAAQE,QAAQ+R,MAAQzU,EAAMwC,QAAQ+U,MAAQ,oBAAsB,gBACtF/W,KAAKqD,SACGG,MACI,OACA,UAGZxD,KAAKod,OAAS,GAAI6hC,GAAyBj/C,KAAKqD,OAAQxD,EAAQogD,UAEpE7/C,QAAS,SAAUogB,GACf,GAAI3gB,GAAUG,KAAKH,QAASwD,EAASrD,KAAKqD,OAAQyD,IAClD,OAAO,IAAIjB,GAAO6a,cAAc/gB,EAAO6gB,GACnCG,UAAW,WAEP,MADA7Z,GAAMjH,EAAQqgD,SAAW1/B,EAAiB7U,MACnC,GAAIi0C,GAAsBv8C,GAAUyD,MAAOA,GAASjH,EAAQogD,cAI/E5/B,WAAY,SAAUve,EAAIwqC,GAAd,GAC0EC,GAAYp1B,EAyB1FgpC,EAzBAj0C,EAASogC,EAAYpgC,OAAQrM,EAAUG,KAAKH,QAAS4F,EAAW5F,EAAQuD,KAAyBoL,IACjG3O,GAAQ2O,eACRA,IACQkO,KAAMxQ,EAAOrM,QAAQqG,SAASrG,EAAQ2O,aAAa,GAAGkO,MACtD/Q,MAAO9L,EAAQ2O,aAAa,GAAG7C,SAG3C4gC,EAAa/9B,EAAamO,OAAO9c,EAAQ8iB,MAAQ9iB,EAAQ8iB,MAAQzW,EAAOrM,QAAQ4F,QAChF3D,EAAG8K,MAAO0G,MAAOg5B,EAAYh5B,QAC7BxR,EAAG9B,KAAK8L,OACJ4gC,cAAe,OACfC,eAAgB,QAChBJ,WAAYA,EACZvsB,OAAQ,WACJ9T,EAAOoT,OAASnI,EAChB7V,EAAKoX,KAAKxM,EAAQzG,EAAUzF,KAAK2L,UAErC2I,MAAO,WACHnH,WAAW,WACPjB,EAAOmT,qBACR,IAEPutB,gBAAgB,IAEpB9qC,EAAGyK,QAAQ,aAAamO,YAAY,KAAOjV,GAAUkH,KAAK,KAAK+yC,UAAU9yC,KAAK,eAAgB,MAC1FuzC,EAASr+C,EAAG8yB,KAAK50B,KAAK8L,MAC1Bq0C,EAAOx0C,MAAM,WACbw0C,EAAOzzC,QAAQsJ,GAAG+nC,EAAc,qBAAsB,WAClD,GAAIqC,GAAWl0C,EAAOkJ,UACtB+B,GAAQjL,EAAOiT,eAAeihC,GAAYA,EAAWjpC,IACtDnB,GAAGgoC,EAAY,SAAUlvC,GACpBA,EAAE4I,UAAYlY,EAAM4C,KAAKi+C,QACzBn0C,EAAOmT,oBACPvQ,EAAEiJ,uBAKduoC,EAAYh/C,EAAK3B,QACjBC,KAAM,SAAUC,GACZyB,EAAKxB,GAAGF,KAAKG,KAAKC,KAAMH,GACxBG,KAAKqD,SACGG,MACI,OACA,UAGZxD,KAAKod,OAAS,GAAI6hC,GAAyBj/C,KAAKqD,OAAQxD,EAAQogD,UAEpEpgD,SAAW0gD,QAAS,WACpB/zC,OAAQ,WACJxM,KAAKwgD,QAAQlsC,SAEjBlU,QAAS,SAAUogB,GACf,GAAI3gB,GAAUG,KAAKH,QAASwD,EAASrD,KAAKqD,OAAQyD,IAClD,OAAO,IAAIjB,GAAO6a,cAAc/gB,EAAO6gB,GACnCG,UAAW,WAEP,MADA7Z,GAAMjH,EAAQqgD,SAAW1/B,EAAiB7U,MACnC,GAAIi0C,GAAsBv8C,GAAUyD,MAAOA,GAASjH,EAAQogD,cAI/E5/B,WAAY,SAAUve,EAAIwqC,GACtB,GAAIpgC,GAASogC,EAAYpgC,OAAQzG,EAAWzF,KAAKoD,KAAMvD,EAAUF,KAAW2gD,EAAUxgD,GAAGD,QAASG,KAAKH,SAAU0gD,EAAU1gD,EAAQ0gD,QAAS71C,EAAU7K,EAAQ6K,OAC9J5I,GAAK9B,KAAKwgD,QAAU,GAAIhhD,GAAMsC,GAAG2+C,YAAY3+C,GACzC4+C,SAAU,cAAgB/9C,EAAYc,gBAAgB5D,EAAQuD,MAC9Dm9C,QAASA,EACT71C,QAASA,EACTsV,OAAQ,WACJ,GAAIiX,GAAQn1B,EAAG6J,OACXsrB,IACA31B,EAAKoX,KAAKxM,EAAQzG,EAAUwxB,GAEhC/qB,EAAOgL,SAEXpD,KAAM,SAAUhF,GACZ,GAAI6xC,GAAS7xC,EAAE8xC,MACfD,GAAOh1C,MAAM,MACbg1C,EAAOE,OAAOn1C,QAAQsK,GAAG+nC,EAAchmC,GAClC4oC,EAAOE,OAAOn1C,QAAQ8O,GAAG,wBAC1BmmC,EAAOE,OAAOn1C,QAAQkB,MAAO0T,aAAc,OAAQ3T,KAAK,KAAKC,KAAK,eAAgB,OAG1F0H,MAAO,SAAUxF,GACbA,EAAE8xC,OAAOC,OAAOn1C,QAAQyK,IAAI4nC,IAEhCa,SAAU,SAAU9vC,GAChBA,EAAEiJ,iBACFjW,EAAGpB,QAAQ,aAGnBoB,EAAG4K,QAAQE,MACP0G,MAAOg5B,EAAYh5B,MACnBgN,aAAc,OACf3T,KAAK,KAAKC,KAAK,eAAgB,QAG1CjN,GAAOkG,GACHo4C,mBAAoBA,EACpBS,gBAAiBA,EACjBqB,qBAAsBA,EACtBd,yBAA0BA,EAC1BW,sBAAuBA,EACvBE,iBAAkBA,EAClBE,SAAUA,EACVM,UAAWA,IAEfv6C,EAAe,SAEPvC,MACI,SACA,OAIJA,MAAO,QACPoJ,MAAQ9F,OAAS8uC,WAAY,YAGrCpwC,EAAa,OAAQ,GAAIs6C,IACrB5/B,IAAK,IACLC,MAAM,EACN9c,OAAQ4C,EAAQE,KAChB1D,SAAU,GAAIF,IACVE,SAAUE,EAAYE,eACtByQ,MAAO,YAGfvN,EAAe,WAEPvC,MACI,KACA,OAIJA,MAAO,QACPoJ,MAAQ9F,OAASg6C,UAAW,cAGpCt7C,EAAa,SAAU,GAAIs6C,IACvB5/B,IAAK,IACLC,MAAM,EACN9c,OAAQ4C,EAAQG,OAChB3D,SAAU,GAAIF,IACVE,SAAUE,EAAYE,eACtByQ,MAAO,cAGfvN,EAAe,cAEPvC,MAAO,QACPoJ,MAAQ9F,OAASo7B,eAAgB,gBAEnC1+B,MAAO,QAEbgC,EAAa,YAAa,GAAIs6C,IAC1B5/B,IAAK,IACLC,MAAM,EACN9c,OAAQ4C,EAAQI,UAChB5D,SAAU,GAAIF,IACVE,SAAUE,EAAYE,eACtByQ,MAAO,iBAGfvN,EAAe,kBAEPvC,MACI,MACA,YAIJA,MAAO,QACPoJ,MAAQ9F,OAASo7B,eAAgB,oBAGzC18B,EAAa,gBAAiB,GAAIs6C,IAC9Bz8C,OAAQ4C,EAAQK,cAChB7D,SAAU,GAAIF,IACVE,SAAUE,EAAYE,eACtByQ,MAAO,qBAGfvN,EAAe,gBAAkBvC,MAAO,UACxCgC,EAAa,cAAe,GAAIs6C,IAC5Bz8C,OAAQ4C,EAAQtC,YAChBlB,SAAU,GAAIF,IACVE,SAAUE,EAAYE,eACtByQ,MAAO,mBAGfvN,EAAe,cAAgBvC,MAAO,UACtCgC,EAAa,YAAa,GAAIs6C,IAC1Bz8C,OAAQ4C,EAAQrC,UAChBnB,SAAU,GAAIF,IACVE,SAAUE,EAAYE,eACtByQ,MAAO,iBAGf9N,EAAa,YAAa,GAAI86C,IAC1BL,QAAS,QACTC,QAAS,QACT98C,KAAM,YACNX,SAAU,GAAIF,IACVE,SAAUE,EAAYG,oBACtBwQ,MAAO,aAGf9N,EAAa,YAAa,GAAI86C,IAC1BL,QAAS,mBACTC,QAAS,kBACT98C,KAAM,YACNX,SAAU,GAAIF,IACVE,SAAUE,EAAYG,oBACtBwQ,MAAO,wBAGf9N,EAAa,WAAY,GAAIw6C,IACzBC,QAAS,cACTC,QAAS,aACT98C,KAAM,WACNoL,eACQkO,KAAM,kBACN/Q,MAAO,YAEflJ,SAAU,GAAIF,IACVE,SAAUE,EAAYI,iBACtBuQ,MAAO,iBAGf9N,EAAa,WAAY,GAAIw6C,IACzBC,QAAS,YACTC,QAAS,WACT98C,KAAM,WACNoL,eACQkO,KAAM,kBACN/Q,MAAO,YAEflJ,SAAU,GAAIF,IACVE,SAAUE,EAAYI,iBACtBuQ,MAAO,kBAGjB3R,OAAOnC,MAAMijB,SACC,kBAAVljB,SAAwBA,OAAOyB,IAAMzB,OAAS,SAAU0B,EAAIC,EAAIC,IACrEA,GAAMD,OAEV,SAAU5B,EAAGC,QACVA,OAAO,sBAAuB,uBAAwBD,IACxD,YACG,SAAU8B,GAAV,GAwSO2/C,GAvSAvhD,EAAQmC,OAAOnC,MAAOoC,EAAQpC,EAAMoC,MAAOjC,EAASyB,EAAEzB,OAAQkG,EAASrG,EAAMsC,GAAGoK,OAAQjG,EAAUzG,EAAMsC,GAAG+D,OAAO/F,GAAGD,QAAQoG,QAASkG,EAAMtG,EAAOuG,IAAKs/B,EAAU7lC,EAAO6lC,QAASnpC,EAAesD,EAAOtD,aAAchB,EAAasE,EAAOtE,WAAYoB,EAAckD,EAAOlD,YAAa6C,EAAe7C,EAAY6C,aAAcO,EAAiBpD,EAAYoD,eAAgBsX,EAAaxX,EAAOwX,WAClY2jC,EAAoBp/C,EAAMjC,QAC1BC,KAAM,SAAUyD,GACZrD,KAAKqD,OAASA,GAElBiX,SAAU,SAAUgK,EAAM/D,GACtB,GAAIjd,GAAGsf,EAAKyV,CACZ,KAAK/0B,EAAI,EAAGsf,EAAMrC,EAAS1f,OAAQyC,EAAIsf,EAAKtf,IAExC,GADA+0B,EAAQ9X,EAASjd,IACZ+0B,IAAUlsB,EAAIiT,iBAAiBkF,EAAM+T,GACtC,OAAO,CAGf,QAAO,GAEXkmB,aAAc,SAAU39B,GAAV,GAC+Btd,GAAGsf,EAAKq+B,EAEpC3hD,EAFT+D,EAASrD,KAAKqD,OAAQ69C,IAC1B,KAAK59C,EAAI,EAAGsf,EAAMhC,EAAM/f,OAAQyC,EAAIsf,EAAKtf,IAAK,CAC1C,IAAShE,EAAI+D,EAAOxC,OAAS,EAAGvB,GAAK,KACjC2hD,EAAY90C,EAAImvB,OAAO1a,EAAMtd,GAAID,EAAO/D,GAAGkE,MAAQod,EAAMtd,GAAK6I,EAAIuxB,sBAAsB9c,EAAMtd,GAAID,EAAO/D,GAAGkE,OADxElE,KAMxC,IAAK2hD,GAA2C,SAA9BA,EAAU91C,gBACxB,QAEA/J,GAAEmC,QAAQ09C,EAAWC,GAAY,GACjCA,EAAS/gD,KAAK8gD,GAItB,IADAjhD,KAAKmhD,mBAAmBD,GACnB59C,EAAI,EAAGsf,EAAMs+B,EAASrgD,OAAQyC,EAAIsf,EAAKtf,IACxC,GAAItD,KAAKsa,SAAS4mC,EAAS59C,GAAI49C,GAC3B,OAAQA,EAAS59C,GAGzB,OAAO49C,IAEXC,mBAAoB,SAAUvgC,GAC1B,GAAItd,GAAGghB,EAAM5X,CACb,KAAKpJ,EAAI,EAAGA,EAAIsd,EAAM/f,OAAQyC,IAC1BghB,EAAO1D,EAAMtd,GACboJ,EAAUP,EAAIqO,GAAG8J,EAAM,MAAQA,EAAOnY,EAAIO,QAAQ4X,GAClD5X,EAAUA,GAAWP,EAAIstB,KAAK/sB,GAAWA,EAAQ6T,SAAS,GAAK7T,EAC3DP,EAAIqO,GAAG9N,EAAS,QAChB4X,EAAO1D,EAAMtd,GAAKoJ,IAI9B+xC,WAAY,SAAUD,GAAV,GACkBl7C,GAAGsf,EAAK0B,EAAM9gB,EAAMkyB,EASlC0J,EATR/7B,EAASrD,KAAKqD,OACdw4B,EAAiB1vB,EAAI0vB,eAAe2iB,GACpC7jC,EAAa3a,KAAKH,SAAWG,KAAKH,QAAQ8a,WAC1CymC,EAAev7C,EAAO+U,UAC1B,KAAKtX,EAAI,EAAGsf,EAAMvf,EAAOxC,OAAQyC,EAAIsf,EAAKtf,IAAK,CAI3C,GAHAghB,EAAOk6B,EACPh7C,EAAOH,EAAOC,GAAGE,KACjBkyB,EAAaryB,EAAOC,GAAGsJ,KACnB+N,GAAcnX,GAAmB,aAAXA,EAAK,KACvB47B,EAAYgiB,EAAavX,gBAAgBvlB,GACzC8a,GAAajzB,EAAIspB,WAAW2J,EAAW1J,IACvC,MAAOpR,EAGf,MAAOA,GAAQnY,EAAI0oB,aAAagH,EAAgBvX,IAAO,CACnD,GAAInY,EAAImvB,OAAOhX,EAAM9gB,IAAS2I,EAAIspB,WAAWnR,EAAMoR,GAC/C,MAAOpR,EAEXA,GAAOA,EAAKwQ,YAGpB,MAAO,OAEXtX,UAAW,SAAUoD,GACjB,GAEsCtd,GAAGsf,EAFrC5W,EAAOhM,KAAMy+C,EAAa,SAAUn6B,GAChC,MAAOtY,GAAKyyC,WAAWtyC,EAAIwoB,WAAWrQ,GAAQA,EAAKwQ,WAAaxQ,IACjEsU,EAAS6lB,EAAW79B,EAAM,GACjC,KAAKgY,EACD,MAAO,EAEX,KAAKt1B,EAAI,EAAGsf,EAAMhC,EAAM/f,OAAQyC,EAAIsf,EAAKtf,IACrC,GAAIs1B,GAAU6lB,EAAW79B,EAAMtd,IAC3B,MAAO,EAGf,OAAOs1B,GAAOJ,SAAS5yB,eAE3B6X,YAAa,SAAUmD,GACnB,IAAK,GAAItd,GAAI,EAAGsf,EAAMhC,EAAM/f,OAAQyC,EAAIsf,EAAKtf,IACzC,IAAKtD,KAAKy+C,WAAW79B,EAAMtd,IACvB,OAAO,CAGf,QAAO,KAGX+9C,EAAiBz/C,EAAMjC,QACvBC,KAAM,SAAUyD,EAAQs7C,GACpB3+C,KAAKqD,OAASA,EACdrD,KAAK2+C,OAASA,EACd3+C,KAAKod,OAAS,GAAI4jC,GAAkB39C,IAExCy4B,KAAM,SAAUZ,EAAKxF,EAAY9U,GAA3B,GAKE8b,GAAuD5B,EAA4CpuB,EAAqEpJ,EAAG+rC,EAJ3K5S,EAAiC,GAAhB7b,EAAM/f,OAAcsL,EAAIypB,kBAAkBhV,EAAM,IAAMzU,EAAIswB,eAAea,MAAM,KAAM1c,EAK1G,KAJIzU,EAAIqtB,SAASiD,KACbA,EAAiBtwB,EAAIypB,kBAAkB6G,IAEvCC,EAAYvwB,EAAIssB,sBAAsBgE,GAAiB3B,EAAW3uB,EAAIqoB,cAAckI,EAAU,IAAKhwB,EAAUP,EAAIgF,OAAOsrB,EAAe5nB,cAAeqmB,EAAKxF,GAC1JpyB,EAAI,EAAGA,EAAIo5B,EAAU77B,OAAQyC,IAC9B+rC,EAAW3S,EAAUp5B,GACjB6I,EAAImtB,QAAQ+V,IACZljC,EAAIS,KAAKyiC,EAAU3Z,GACfhpB,EAAQuoB,WAAWp0B,SACnBsL,EAAIY,aAAaL,EAAS2iC,GAC1B3iC,EAAUA,EAAQ2oB,WAAU,IAEhCyF,EAAW3uB,EAAIqoB,cAAc6a,GAAY,GAG7C3iC,EAAQgK,YAAY24B,EAEpB3iC,GAAQ8X,YACRrY,EAAIyuB,SAAS6B,EAAgB/vB,EAASouB,IAG9CwC,MAAO,SAAU1c,GAEb,QAAS8U,GAAWryB,GAChB,MAAO1D,MAAW0D,GAAUA,EAAOuJ,KAAM+xC,GAH1C,GACCt7C,GAKAmxC,EACA8M,EACAC,EAOAC,EACA1C,EAESx7C,EAAOsf,EAjBR+7B,EAAS3+C,KAAK2+C,MAW1B,IAPA3+C,KAAKwvC,kBAAkB5uB,GAAO,GAC1B4zB,EAASroC,EAAIwxB,OAAO,MAAO/c,GAC3B0gC,EAAc3+C,EAAYQ,aAAa,MAAOnD,KAAKqD,QACnDk+C,EAAkB7rB,EAAW4rB,GACjClgD,EAAEo+B,KAAKgV,EAAQ,WACXroC,EAAIS,KAAK5M,KAAMuhD,KAEf/M,EAAO3zC,QAAU+f,EAAM/f,OAK3B,GAFI2gD,EAAYr1C,EAAIwxB,OAAO,MAAO/c,GAAO,GACrCk+B,EAAc9+C,KAAKod,OAAOmhC,aAAaiD,GACvC1C,EAAYj+C,OACZ,IAASyC,EAAI,EAAGsf,EAAMk8B,EAAYj+C,OAAQyC,EAAIsf,EAAKtf,IAC/CD,EAASV,EAAYQ,aAAagJ,EAAI/I,KAAK07C,EAAYx7C,IAAKtD,KAAKqD,QACjE8I,EAAIS,KAAKkyC,EAAYx7C,GAAIoyB,EAAWryB,QAGxCA,GAASrD,KAAKqD,OAAO,GACrBrD,KAAK87B,KAAKz4B,EAAOG,KAAK,GAAIkyB,EAAWryB,GAASm+C,IAGtDhS,kBAAmB,SAAU5uB,EAAO6gC,GAAjB,GAIXC,GAIAN,EACAphB,EACK18B,EACDumC,CAVR,IAAK7pC,KAAK2a,eAGN+mC,EAAkB/+C,EAAYQ,aAAa,YAAanD,KAAKqD,SAMjE,IAFI+9C,EAAev7C,EAAO+U,WACtBolB,EAAIpf,EAAM/f,OAAS,EACdyC,EAAI08B,EAAG18B,GAAK,EAAGA,IAChBumC,EAAkBuX,EAAavX,gBAAgBjpB,EAAMtd,IACpDumC,IAGDA,IAAoBjpB,EAAMtd,EAAI,KAC1Bm+C,EACAt1C,EAAIS,KAAKi9B,EAAiB6X,EAAgB90C,MAE1CT,EAAI+vB,QAAQ2N,EAAiB6X,EAAgB90C,KAAK9F,QAG1D8Z,EAAM8hB,OAAOp/B,EAAG,KAGxBqX,WAAY,WACR,MAAO3a,MAAKkM,QAAUlM,KAAKkM,OAAOrM,QAAQ8a,YAE9C9J,OAAQ,SAAU+P,GACd,GAAItd,GAAG08B,EAAG6e,EAAY8C,EAAav+C,CAEnC,KADApD,KAAKwvC,kBAAkB5uB,GAAO,GACzBtd,EAAI,EAAG08B,EAAIpf,EAAM/f,OAAQyC,EAAI08B,EAAG18B,IACjCu7C,EAAa7+C,KAAKod,OAAOqhC,WAAW79B,EAAMtd,IACtCu7C,IACAz7C,EAAO+I,EAAI/I,KAAKy7C,GACJ,OAARz7C,GAAkBy7C,EAAWhnC,aAAa,UAG1C8pC,EAAch/C,EAAYQ,aAAaC,EAAMpD,KAAKqD,QAC9Cs+C,EAAY/0C,KAAK9F,OACjBqF,EAAI+vB,QAAQ2iB,EAAY8C,EAAY/0C,KAAK9F,OAEzC66C,EAAY/0C,KAAKmrB,WACjB5rB,EAAIuO,YAAYmkC,EAAY8C,EAAY/0C,KAAKmrB,YAPjD5rB,EAAI4vB,OAAO8iB,KAa3B5S,OAAQ,SAAU90B,GACd,GAAInL,GAAOhM,KAAM4gB,EAAQzU,EAAI2xB,SAASzgB,EAAWuD,MAAMzJ,GAAQhL,EAAI8sB,iBAAiB,EAChFjtB,GAAKoR,OAAOK,YAAYmD,GACxB5U,EAAK6E,OAAO+P,GAEZ5U,EAAKsxB,MAAM1c,MAInBghC,EAAuBhgD,EAAMjC,QAC7BC,KAAM,SAAUyD,EAAQs7C,GACpB,GAAI3yC,GAAOhM,IACXgM,GAAK3I,OAASA,EACd2I,EAAK2yC,OAASA,EACd3yC,EAAKoR,OAAS,GAAI4jC,GAAkB39C,IAExCi6B,MAAO,SAAU1c,GAAV,GAICtd,GAAGsf,EAAK6W,EAAM9Y,EAAWxJ,EACzBzL,EACA8vB,EACAvX,EACA49B,EAsBIC,EA7BJz+C,EAASrD,KAAKqD,OACd0yB,EAAS5pB,EAAI2pB,aAAalV,GAC1BmhC,EAAY1+C,EAAO,GAAGG,KAAK,EAM/B,IAAIuyB,EAAOl1B,OACP,IAAKyC,EAAI,EAAGsf,EAAMmT,EAAOl1B,OAAQyC,EAAIsf,EAAKtf,IACtC2gB,EAAQ8R,EAAOzyB,GACfu+C,EAAkB7hD,KAAK2a,cAAgB9U,EAAO+U,WAAWivB,gBAAgB5lB,GACpE49B,IACDrmB,EAAUrvB,EAAI/I,KAAK6gB,GACJ,MAAXuX,GACA/B,EAAOxV,EAAM6Q,WACbnU,EAAY,GAAI9a,GAAOqpC,cAAczV,EAAKjB,SAAS5yB,cAAem8C,GAClE5qC,EAAQnX,KAAKkM,OAAO2N,cACpB1C,EAAM2C,WAAWic,EAAOzyB,IACxBqd,EAAUsrB,OAAO90B,IACV4qC,IAAyB,MAAXvmB,GAAmBvX,EAAMyR,WAAWvqB,iBACzD,GAAIk2C,GAAeh+C,EAAQrD,KAAK2+C,QAAQrhB,MAAMrZ,EAAMgR,aAEpDvpB,EAAUS,EAAIovB,UAAUtX,EAAO89B,GAC/B51C,EAAIS,KAAKlB,EAASrI,EAAO,GAAGuJ,YAKpCk1C,GAAiB,GAAIT,GAAeh+C,EAAQrD,KAAK2+C,QACrDmD,EAAe51C,OAASlM,KAAKkM,OAC7B41C,EAAexkB,MAAM1c,IAG7BqrB,OAAQ,SAAU90B,GACd,GAAIyJ,GAAQvD,EAAWF,UAAUhG,EAC5ByJ,GAAM/f,SACPsW,EAAMsuB,mBAAmBtuB,EAAM8G,yBAC/B2C,EAAQvD,EAAWF,UAAUhG,GACxByJ,EAAM/f,SACP+f,EAAQzU,EAAIssB,sBAAsBthB,EAAM8G,2BAGhDje,KAAKs9B,MAAM1c,IAEfjG,WAAY,WACR,MAAO3a,MAAKkM,QAAUlM,KAAKkM,OAAOrM,QAAQ8a,cAG9C+F,EAAgBgrB,EAAQ/rC,QACxBC,KAAM,SAAUC,GACZA,EAAQ8gB,UAAY9gB,EAAQ8gB,WAC5B,IAAIvD,GAASvd,EAAQ8gB,UAAUvD,MAC3BA,IAAUza,EAAYQ,aAAa,YAAaia,EAAO/Z,SACvD+Z,EAAO4kC,cAAernC,WAAY9a,EAAQ8a,aAE9C+wB,EAAQ5rC,GAAGF,KAAKG,KAAKC,KAAMH,MAG/BoiD,EAAkB1gD,EAAW5B,QAC7BC,KAAM,SAAUC,GACZ0B,EAAWzB,GAAGF,KAAKG,KAAKC,KAAML,EAAOE,GACjCud,OAAQ,GAAI4jC,GAAkBnhD,EAAQwD,QACtCsd,UAAW,WACP,MAAO,IAAI0gC,GAAexhD,EAAQwD,cAKlD1D,GAAOkG,GACHm7C,kBAAmBA,EACnBK,eAAgBA,EAChBO,qBAAsBA,EACtBlhC,cAAeA,EACfuhC,gBAAiBA,IAEjBlB,GACA,KACA,KACA,MAEJh7C,EAAe,gBAEPvC,KAAM2I,EAAI4X,qBACVnX,MAAQ9F,OAASo7C,UAAW,WAG5B1+C,MAAO,OACPoJ,MACI9F,OACIq7C,QAAS,OACT7K,QAAS,GACT2C,WAAY,GACZmI,YAAa,OAKrB5+C,MAAO,aACPoJ,MACI9F,OACIq7C,QAAS,OACT7K,QAAS,GACT2C,WAAY,GACZmI,YAAa,OAKrB5+C,KAAMu9C,EACNn0C,MACI9F,OACIo7C,UAAW,OACXG,kBAAmB,QAKnC78C,EAAa,cAAe,GAAIy8C,IAC5B5+C,OAAQ4C,EAAQpC,YAChBpB,SAAU,GAAIF,IACVE,SAAUE,EAAYE,eACtByQ,MAAO,oBAGfvN,EAAe,kBAEPvC,KAAM2I,EAAI4X,qBACVnX,MAAQ9F,OAASo7C,UAAW,aAG5B1+C,MAAO,OACPoJ,MACI9F,OACIwwC,QAAS,QACT2C,WAAY,OACZmI,YAAa,OACbD,QAAS,OAKjB3+C,MAAO,aACPoJ,MACI9F,OACIwwC,QAAS,QACT2C,WAAY,OACZmI,YAAa,OACbD,QAAS,OAKjB3+C,KAAMu9C,EACNn0C,MACI9F,OACIo7C,UAAW,SACXG,kBAAmB,cAKnC78C,EAAa,gBAAiB,GAAIy8C,IAC9B5+C,OAAQ4C,EAAQnC,cAChBrB,SAAU,GAAIF,IACVE,SAAUE,EAAYE,eACtByQ,MAAO,sBAGfvN,EAAe,iBAEPvC,KAAM2I,EAAI4X,qBACVnX,MAAQ9F,OAASo7C,UAAW,YAG5B1+C,MAAO,OACPoJ,MACI9F,OACIq7C,QAAS,QACT7K,QAAS,GACT2C,WAAY,GACZmI,YAAa,OAKrB5+C,MAAO,aACPoJ,MACI9F,OACIq7C,QAAS,QACT7K,QAAS,GACT2C,WAAY,GACZmI,YAAa,OAKrB5+C,KAAMu9C,EACNn0C,MACI9F,OACIo7C,UAAW,QACXG,kBAAmB,cAKnC78C,EAAa,eAAgB,GAAIy8C,IAC7B5+C,OAAQ4C,EAAQlC,aAChBtB,SAAU,GAAIF,IACVE,SAAUE,EAAYE,eACtByQ,MAAO,qBAGfvN,EAAe,gBAEPvC,KAAM2I,EAAI4X,qBACVnX,MAAQ9F,OAASo7C,UAAW,cAG5B1+C,MAAO,OACPoJ,MACI9F,OACIwwC,QAAS,QACT2C,WAAY,OACZmI,YAAa,OACbD,QAAS,OAKjB3+C,MAAO,aACPoJ,MACI9F,OACIwwC,QAAS,QACT2C,WAAY,OACZmI,YAAa,OACbD,QAAS,OAKjB3+C,KAAMu9C,EACNn0C,MACI9F,OACIo7C,UAAW,UACXG,kBAAmB,QAKnC78C,EAAa,cAAe,GAAIy8C,IAC5B5+C,OAAQ4C,EAAQjC,YAChBvB,SAAU,GAAIF,IACVE,SAAUE,EAAYE,eACtByQ,MAAO,qBAGjB3R,OAAOnC,MAAMijB,SACC,kBAAVljB,SAAwBA,OAAOyB,IAAMzB,OAAS,SAAU0B,EAAIC,EAAIC,IACrEA,GAAMD,OAEV,SAAU5B,EAAGC,QACVA,OAAO,oBAAqB,sBAAuBD,IACrD,YACG,SAAU8B,GAAV,GACO5B,GAAQmC,OAAOnC,MAAOG,EAASyB,EAAEzB,OAAQsM,EAAWzM,EAAMsC,GAAGoK,OAAQC,EAAMF,EAASG,IAAKs/B,EAAUz/B,EAASy/B,QAASpqC,EAAO2K,EAAS3K,KAAM+/C,EAAiBp1C,EAASo1C,eAAgBh9B,EAAYlY,EAAIkY,UAAWhH,EAAapR,EAASoR,WAAY7X,EAAeyG,EAAStJ,YAAY6C,aACtR88C,EAAmB5W,EAAQ/rC,QAC3BC,KAAM,SAAUC,GACZG,KAAKH,QAAUA,EACf6rC,EAAQ5rC,GAAGF,KAAKG,KAAKC,KAAMH,IAE/B0iD,cAAe,SAAUzvC,EAAKqE,GAC1B,GAAmCE,GAA/B4iB,EAAS9tB,EAAIgF,OAAO2B,EAAK,IAS7B,OARAmnB,GAAOlC,UAAY,WACnB5gB,EAAMkvB,WAAWpM,GACZA,EAAOnF,aACRzd,EAAYF,EAAM8G,wBAClB5G,EAAU3I,UAAY,GACtB2I,EAAUX,YAAYujB,IAE1B5V,EAAU4V,EAAOnF,YACVmF,GAEXuoB,WAAY,SAAUrrC,EAAO8pC,GAAjB,GAKAwB,GAaIC,CAjBZ,IAAIv2C,EAAIotB,QAAQ0nB,GACZ9pC,EAAMkuB,eAAe4b,OAClB,CAGH,GAFA9pC,EAAMsuB,mBAAmBwb,GACrBwB,EAAYplC,EAAWF,UAAUhG,GAAO,IACvCsrC,EAAW,CACZ,KAAOxB,EAAUhsB,WAAWp0B,SAAWsL,EAAIqO,GAAGymC,EAAUz8B,WAAY,OAChEy8B,EAAYA,EAAUz8B,UAE1Bi+B,GAAYxB,EAEZ90C,EAAIotB,QAAQkpB,GACZtrC,EAAMkuB,eAAeod,IAEjBt2C,EAAIosB,UAAUkqB,KACdA,EAAU/zC,UAAY,UAEtBg0C,EAAYD,EAAUj+B,YAAci+B,EACpCt2C,EAAIwoB,WAAW+tB,GACfvrC,EAAMiB,SAASsqC,EAAW,GAE1BvrC,EAAMkuB,eAAeqd,MAKrCC,WAAY,SAAUxrC,GAClB,GAAI4e,GAAS,sBAAsBhgB,MAAM,KAAM6sC,EAAez2C,EAAI0pB,aAAa1e,EAAMoG,eAAgBwY,GAAS8sB,EAAa12C,EAAI0pB,aAAa1e,EAAM6H,aAAc+W,EAChK,OAAO6sB,KAAiBC,IAAeD,GAAgBC,GAE3DC,YAAa,SAAUx+B,GACnB,KAAOA,IAASnY,EAAI2sB,SAASxU,IAA0C,KAAjCnY,EAAIwrB,SAASrT,EAAKnM,aACpDmM,EAAOA,EAAKI,WAEhB,QAAQJ,GAEZ5L,KAAM,WAAA,GACsE6L,GAAQ6c,EAAU5pB,EAA4DurC,EAAW9oB,EAAQgV,EAAI+T,EAASC,EAAWC,EAAKP,EAkB1LvkB,EAIAtJ,EACAquB,EACA3+B,EAxBRrN,EAAQnX,KAAKoV,WAAYtC,EAAMuK,EAAW6nB,kBAAkB/tB,GAAgCo4B,EAAwBtjC,EAASxK,mBACjIzB,MAAKksC,mBAAmB/0B,GACxBwrC,EAAa3iD,KAAK2iD,WAAWxrC,GAC7BA,EAAMuuB,iBACNzL,EAASj6B,KAAKuiD,cAAczvC,EAAKqE,GACjChL,EAAIyrB,aAAaqC,EAAOvF,iBACxBvoB,EAAIyrB,aAAaqC,EAAOvV,aACxBuqB,EAAK9iC,EAAIuxB,sBAAsBzD,GAAS,OACxC+oB,EAAU72C,EAAIuxB,sBAAsBzD,EAAQ,oBAAoBlkB,MAAM,MACtEktC,EAAY92C,EAAIqO,GAAGyf,EAAOnF,WAAY,UAAYmF,EAAOnF,WACrDma,EACI9iC,EAAIosB,UAAU0W,KACd8T,EAAY52C,EAAIgF,OAAO2B,EAAK,KACxB3G,EAAIqL,KAAKy3B,KACTiU,EAAM/rC,EAAMwuB,aACZud,EAAIppC,WAAWm1B,GACf5xB,EAAWtH,MAAMmtC,EAAKjU,EAAGna,aAEzBsJ,EAAKh9B,EAAE,KAAM6tC,GACA,GAAb7Q,EAAGv9B,QACHu9B,EAAGvtB,SAEHikB,EAAama,EAAGna,WAChBquB,EAAuBlU,EAAGna,WAAWvU,SAAS1f,OAC9C2jB,EAAa2+B,EAAuB,GAA6B,GAAxBlU,EAAGha,WAAWp0B,QAAeouC,EAAG1uB,SAAS,GACtFpU,EAAI2D,YAAYizC,EAAWjuB,GAC3B3oB,EAAI0E,OAA+B,GAAxBsyC,EAA4BlU,EAAGna,WAAama,GACnDzqB,GAAcA,IAAeyV,GAC7B8oB,EAAUrsC,YAAY8N,GACtBu+B,EAAUrsC,YAAYujB,IAEtB8oB,EAAUr0C,UAAY6gC,EAE1B/3B,EAAOurC,GAEJC,GAAWhjD,KAAK8iD,YAAY7oB,IACnC8oB,EAAY/iD,KAAKojD,sBAAsBJ,GACvC72C,EAAI0E,OAAOopB,GACXziB,EAAOurC,GACAE,IACPF,EAAY/iD,KAAKojD,sBAAsBH,GACvC92C,EAAI0E,OAAOopB,GACXziB,EAAOurC,GAENvrC,IACKy3B,GAAM+T,GACR,GAAI3B,KAAkB79C,MAAO,QAAS85B,OAAOrD,IAEjD9iB,EAAM2C,WAAWmgB,GACjB1V,EAASpY,EAAI0pB,aAAaoE,GAASgV,EAAK,KAAO+T,EAAU72C,EAAI/I,KAAK4/C,GAAW,MAC7E3lC,EAAWtH,MAAMoB,EAAOoN,EAAQo+B,GAChCvhB,EAAW7c,EAAOmQ,gBACdvoB,EAAIqO,GAAG4mB,EAAU,OAASA,EAAS5c,aAAerY,EAAIqO,GAAG4mB,EAAS5c,WAAY,QAC9E4c,EAAWA,EAAS5c,YAExBhN,EAAO+M,EAAOG,YACd1kB,KAAKm1C,MAAM/T,GACXphC,KAAKm1C,MAAM39B,GAAQhM,OAAO,IACtBW,EAAIqO,GAAGhD,EAAM,OAASA,EAAKgN,aAAerY,EAAIqO,GAAGhD,EAAKgN,WAAY,QAClEhN,EAAOA,EAAKgN,YAEhBrY,EAAI0E,OAAO0T,GACXF,EAAU+c,IAEd/c,EAAU7M,GACVxX,KAAKwiD,WAAWrrC,EAAOK,GACvBL,EAAMkB,UAAS,GACflM,EAAI0tB,SAASriB,GAAM,GACnB6F,EAAW/E,YAAYnB,IAE3BisC,sBAAuB,SAAU9+B,GAAV,GACfnN,GAAQnX,KAAKoV,WACbtC,EAAMuK,EAAW6nB,kBAAkB/tB,GACnC1V,EAAsBwK,EAASxK,oBAC/BshD,EAAY52C,EAAIgF,OAAO2B,EAAK,IAGhC,OAFA3G,GAAI2D,YAAYizC,EAAWz+B,GAC3By+B,EAAUr0C,UAAYjN,EACfshD,GAEX5N,MAAO,SAAU7wB,EAAMzkB,GAAhB,GASKwjD,GARJzhC,EAAO0C,CAOX,IANIA,EAAKE,YAAcrY,EAAIqO,GAAG8J,EAAKE,WAAY,OAC3CrY,EAAI0E,OAAOyT,EAAKE,YAEhBrY,EAAIwoB,WAAWrQ,KAAUA,EAAKnM,YAC9BmM,EAAOA,EAAKwQ,YAEZxQ,EAAM,CAEN,IADI++B,GAAW,EACR/+B,EAAKE,YAA0C,GAA5BF,EAAKE,WAAWtM,UACtCmrC,EAAWA,GAAYl3C,EAAIgsB,iBAAiB7T,EAAK2Q,YAAYp0B,OAAS,EACtEyjB,EAAOA,EAAKE,UAMhB,IAJKrY,EAAIotB,QAAQjV,KAAS,QAAQ7L,KAAK6L,EAAK5V,YAAe20C,IACvDjiD,EAAEwgB,GAAMjV,KAAK,SAASkE,SACtByT,EAAK5V,UAAYzC,EAASxK,qBAE1B5B,GAAWA,EAAQ2L,MACnB,KAAO8Y,GAAQ1C,GAAM,CACjB,GAAIzV,EAAIqO,GAAG8J,EAAM,MAAQnY,EAAIosB,UAAUjU,GAAO,CAC1CnY,EAAI4vB,OAAOzX,EACX,OAEJA,EAAOA,EAAKwQ,gBAM5BwuB,EAAiB5X,EAAQ/rC,QACzBC,KAAM,SAAUC,GACZG,KAAKH,QAAUA,EACf6rC,EAAQ5rC,GAAGF,KAAKG,KAAKC,KAAMH,IAE/B6Y,KAAM,WAAA,GAGE0lB,GACA9Z,EACAi/B,EACArhD,EACAshD,EACAP,EAPA9rC,EAAQnX,KAAKoV,UACjBpV,MAAKksC,mBAAmB/0B,GACpBinB,EAAKjyB,EAAIgF,OAAOkM,EAAW6nB,kBAAkB/tB,GAAQ,MACrDmN,EAAOnN,EAAMoG,eAEbrb,EAAU1C,EAAMwC,QAAQE,QACxBshD,EAAQthD,EAAQ+R,MAAQ/R,EAAQ4e,QAAU,GAC1CmiC,EAAY92C,EAAIqO,GAAG8J,EAAM,UAAYA,EACzCnN,EAAMuuB,iBACFud,EACA92C,EAAI2D,YAAYsuB,EAAI6kB,GAEpB9rC,EAAMkvB,WAAWjI,GAErB/Z,EAAU+Z,EAAGtJ,YACR0uB,GAAWplB,EAAG1Z,cAAevY,EAAIusB,aAAa0F,EAAG1Z,eAClD6+B,EAASnlB,EAAG/I,WAAU,GACtBkuB,EAAOxrB,UAAY,OACnB5rB,EAAI2D,YAAYyzC,EAAQnlB,IAE5BjnB,EAAMmuB,cAAclH,GACpBjnB,EAAMkB,UAAS,GACflM,EAAI0tB,SAASuE,EAAG1Z,aAAe0Z,GAAI,GACnC/gB,EAAW/E,YAAYnB,KAG/BxX,GAAOsM,GACHq2C,iBAAkBA,EAClBgB,eAAgBA,IAEpB99C,EAAa,kBAAmB,GAAIlE,IAChC4e,IAAK,GACLmxB,OAAO,EACPjxC,QAASkjD,KAEb99C,EAAa,kBAAmB,GAAIlE,IAChC4e,IAAK,GACL9f,QAASkiD,MAEf3gD,OAAOnC,MAAMijB,SACC,kBAAVljB,SAAwBA,OAAOyB,IAAMzB,OAAS,SAAU0B,EAAIC,EAAIC,IACrEA,GAAMD,OAEV,SAAU5B,EAAGC,QACVA,OAAO,gBAAiB,oBAAqBD,IAC/C,YACG,SAAU8B,GAAV,GACO5B,GAAQmC,OAAOnC,MAAOoC,EAAQpC,EAAMoC,MAAOjC,EAASyB,EAAEzB,OAAQkG,EAASrG,EAAMsC,GAAGoK,OAAQC,EAAMtG,EAAOuG,IAAKiR,EAAaxX,EAAOwX,WAAY1a,EAAckD,EAAOlD,YAAa+oC,EAAU7lC,EAAO6lC,QAASnpC,EAAesD,EAAOtD,aAAchB,EAAasE,EAAOtE,WAAYy/C,EAAoBn7C,EAAOm7C,kBAAmB7jC,EAAYE,EAAWF,UAAW3X,EAAeK,EAAOlD,YAAY6C,aAC5Xi+C,EAAmBzC,EAAkBrhD,QACrCC,KAAM,SAAUs7B,GACZl7B,KAAKk7B,IAAMA,CACX,IAAI13B,GAAOxD,KAAKwD,MACL,MAAP03B,EAAc,KAAO,KACrBA,EAEJ8lB,GAAkBlhD,GAAGF,KAAKG,KAAKC,OAASwD,KAAMA,MAElDia,YAAa,SAAUmD,GAAV,GAELi+B,GAAYv7C,EADZw7C,IAEJ,KAAKx7C,EAAI,EAAGA,EAAIsd,EAAM/f,OAAQyC,IAC1Bu7C,EAAa7+C,KAAKy+C,WAAW79B,EAAMtd,IAC/Bu7C,GAAc1yC,EAAI/I,KAAKy7C,IAAe7+C,KAAKk7B,KAC3C4jB,EAAY3+C,KAAK0+C,EAGzB,IAAIC,EAAYj+C,OAAS,EACrB,OAAO,CAEX,IAAIi+C,EAAYj+C,QAAU+f,EAAM/f,OAC5B,OAAO,CAEX,KAAKyC,EAAI,EAAGA,EAAIw7C,EAAYj+C,QACpBi+C,EAAYx7C,GAAGwxB,YAAc+pB,EAAW/pB,WADZxxB,IAIhC,GAAIw7C,EAAYx7C,IAAMu7C,EAClB,OAAO,CAGf,QAAO,GAEXN,aAAc,SAAU39B,GACpB,GAAIqgC,GAAYjhD,KAAKy+C,WAAW79B,EAAM,GACtC,OAAIqgC,IAAa90C,EAAI/I,KAAK69C,IAAcjhD,KAAKk7B,IAClC+lB,EAEJ,QAGX/R,EAAgBttC,EAAMjC,QACtBC,KAAM,SAAUs7B,EAAKwoB,GACjB,GAAI13C,GAAOhM,IACXgM,GAAKoR,OAAS,GAAIqmC,GAAiBvoB,GACnClvB,EAAKkvB,IAAMA,EACXlvB,EAAK03C,UAAYA,GAErBC,OAAQ,SAAUr/B,GACd,MAAOnY,GAAIstB,KAAKnV,IAEpB3J,WAAY,WACR,MAAO3a,MAAKkM,UAAYlM,KAAKkM,OAAOrM,QAAQ8a,YAEhDmhB,KAAM,SAAUrC,EAAM7Y,GAClB,GAA+Ctd,GAAGghB,EAA9C2qB,EAAK9iC,EAAIgF,OAAOsoB,EAAK5kB,cAAe,MAAgB+uC,EAAc5jD,KAAK2a,aAAe9U,EAAO+U,WAAWwkB,UAAYh+B,EAAEqf,IAC1H,KAAKnd,EAAI,EAAGA,EAAIsd,EAAM/f,OAAQyC,IAE1B,GADAghB,EAAO1D,EAAMtd,GACT6I,EAAIqO,GAAG8J,EAAM,MACbmV,EAAK/iB,YAAY4N,OAGrB,IAAItkB,KAAK2jD,OAAOr/B,GACZ,KAAOA,EAAKE,YACRiV,EAAK/iB,YAAY4N,EAAKE,gBAI9B,IAAIrY,EAAIqO,GAAG8J,EAAM,MAAjB,CACI,KAAOA,EAAKE,YACRyqB,EAAGv4B,YAAY4N,EAAKE,WAExBiV,GAAK/iB,YAAYu4B,GACjB3qB,EAAK5N,YAAY+iB,GACjBA,EAAOA,EAAKpE,WAAU,GACtB4Z,EAAKA,EAAG5Z,WAAU,OAGtB4Z,GAAGv4B,YAAY4N,GACXnY,EAAImtB,QAAQhV,KACZmV,EAAK/iB,YAAYu4B,GACZ2U,EAAYt/B,IACbnY,EAAI4vB,OAAOzX,GAEf2qB,EAAKA,EAAG5Z,WAAU,GAGtB4Z,GAAGzqB,YACHiV,EAAK/iB,YAAYu4B,IAGzB4U,YAAa,SAAUt/B,EAAQ3D,GAC3B,IAAK,GAAItd,GAAI,EAAGA,EAAIsd,EAAM/f,OAAQyC,IAC9B,GAAI6I,EAAIiT,iBAAiBmF,EAAQ3D,EAAMtd,IACnC,OAAO,CAGf,QAAO,GAEX49C,SAAU,SAAUD,EAAWrgC,GAC3B,GAA2B,YAAvBqgC,EAAUlpB,UAAyB,CACnC,GAAImB,GAAU+nB,EAAUv8B,WACxB,IAAIwU,GAAW/sB,EAAImtB,QAAQJ,GACvB,OAAO,CAGX,IADAA,EAAU+nB,EAAUvsB,gBAChBwE,GAAW/sB,EAAImtB,QAAQJ,GACvB,OAAO,EAGf,MAAOl5B,MAAK6jD,YAAY5C,EAAWrgC,IAAUzU,EAAIqtB,SAASynB,IAAoC,GAAtBA,EAAU/oC,UAEtF4rC,aAAc,SAAUx/B,GACpB,GAAImZ,GAAWtxB,EAAIoxB,gBAAgBjZ,EACnC,OAAOljB,GAAEkjB,GAAMm7B,aAAahiB,EAAU,UAE1C1nB,MAAO,SAAUoB,GAAV,GAECnH,GAAOyxB,EAAK5mB,EAMHvX,EAAO08B,EACR6e,EARRj+B,EAAQzD,EAAUhG,EAEtB,IAAIyJ,EAAM/f,OAKN,IAJAmP,EAAQ7D,EAAI0pB,aAAajV,EAAM,IAAK,OACpC6gB,EAAMt1B,EAAI0pB,aAAajV,EAAMA,EAAM/f,OAAS,IAAK,OACjDsW,EAAMkuB,eAAer1B,GACrBmH,EAAMquB,YAAY/D,GACTn+B,EAAI,EAAG08B,EAAIpf,EAAM/f,OAAQyC,EAAI08B,EAAG18B,IACjCu7C,EAAa7+C,KAAKod,OAAOqhC,WAAW79B,EAAMtd,IAC1Cu7C,IACAhkC,EAAU7a,KAAK8jD,aAAajF,GACxBhkC,EAAQha,OACRwc,EAAWtH,MAAMoB,EAAO0D,EAAQwkB,OAAO,IAAI,GAE3ChiB,EAAWtH,MAAMoB,EAAO0nC,GAAY,KAMxDkF,MAAO,SAAU7oB,EAAK2jB,GAElB,IADA,GAAuCrnC,GAAnCiN,EAAOo6B,EAAWnqB,gBACfjQ,IAA2B,YAAlBA,EAAKsT,WAA4C,GAAjBtT,EAAKvM,UAAiB/L,EAAIusB,aAAajU,KACnFA,EAAOA,EAAKiQ,eAEhB,IAAIjQ,GAAQtY,EAAI/I,KAAKqhB,IAASyW,EAAK,CAC/B,KAAO2jB,EAAWr6B,YACdC,EAAK/N,YAAYmoC,EAAWr6B,WAEhCrY,GAAI0E,OAAOguC,GACXA,EAAap6B,EAGjB,IADAjN,EAAOqnC,EAAWn6B,YACXlN,IAA2B,YAAlBA,EAAKugB,WAA4C,GAAjBvgB,EAAKU,UAAiB/L,EAAIusB,aAAalhB,KACnFA,EAAOA,EAAKkN,WAEhB,IAAIlN,GAAQrL,EAAI/I,KAAKoU,IAAS0jB,EAAK,CAC/B,KAAO2jB,EAAWhmB,WACdrhB,EAAKzK,aAAa8xC,EAAWhmB,UAAWrhB,EAAKgN,WAEjDrY,GAAI0E,OAAOguC,KAGnBmF,UAAW,SAAU1/B,GACjB,MAAOA,IAAQA,EAAKzP,cAAchB,OAAS,oBAAoB4E,KAAKtM,EAAI/I,KAAKkhB,MAAWA,EAAKoR,WAAWvqB,iBAE5G84C,eAAgB,SAAUC,EAAStjC,GAwB/B,QAASujC,KACLznB,EAAUv8B,KAAKH,MAzBP,GAQRi1B,GAmBK3xB,EACD+0B,EACA6oB,EA5BJhmB,EAAMl7B,KAAKk7B,IACXuB,EAAiBtwB,EAAIgxB,wBAAwBvc,GAC7C8b,KACAmiB,EAAa7+C,KAAKod,OAAOmhC,aAAa39B,EAuB1C,KAtBKi+B,IACDA,EAAa,GAAI4E,GAAwB,MAAPvoB,EAAc,KAAO,MAAMqjB,aAAa39B,IAG1E,cAAcnI,KAAKtM,EAAI/I,KAAKq5B,IAC5BxH,EAAa7zB,EAAE+S,IAAIyM,EAAO,SAAU0D,GAChC,MAAOnY,GAAI0pB,aAAavR,GAAO,UAGnC2Q,EAAa9oB,EAAIssB,sBAAsBgE,GACnCr7B,EAAEg3B,KAAKnD,EAAY9oB,EAAImtB,SAASz4B,SAChCo0B,EAAa7zB,EAAEg3B,KAAKnD,EAAY7zB,EAAEe,MAAM,SAAUmiB,GAC9C,MAAOtkB,MAAK6jD,YAAYv/B,EAAM1D,IAC/B5gB,QAEFi1B,EAAWp0B,SACZo0B,EAAarU,IAMZtd,EAAI,EAAGA,EAAI2xB,EAAWp0B,OAAQyC,IAC/B+0B,EAAQpD,EAAW3xB,GACnB49C,IAAarC,IAAe1yC,EAAIiT,iBAAiBy/B,EAAYxmB,KAAWr4B,KAAKkhD,SAAS7oB,EAAOzX,GAC5FsgC,IAGDrC,GAAc7+C,KAAK2jD,OAAOtrB,IAC1Bj3B,EAAEo+B,KAAKnH,EAAM9X,SAAU4jC,GACvBh4C,EAAI0E,OAAOwnB,IAEXqE,EAAUv8B,KAAKk4B,GAWvB,KARIqE,EAAU77B,QAAUo0B,EAAWp0B,QAAUb,KAAKgkD,UAAUvnB,KACxDC,GAAaD,IAEZoiB,IACDA,EAAa1yC,EAAIgF,OAAOsrB,EAAe5nB,cAAeqmB,GACtD/uB,EAAIY,aAAa8xC,EAAYniB,EAAU,KAE3C18B,KAAK87B,KAAK+iB,EAAYniB,GACfvwB,EAAIurB,MAAMmnB,EAAWn6B,cACxBvY,EAAI0E,OAAOguC,EAAWn6B,YAErBvY,GAAIqO,GAAGqkC,EAAY3jB,IACpB/uB,EAAIovB,UAAUsjB,EAAY3jB,GAE9Bl7B,KAAK+jD,MAAM7oB,EAAK2jB,IAEpBvhB,MAAO,SAAU1c,GAEb,QAASwjC,KACDC,GACAC,EAASnkD,MACL+jD,QAASG,EACTzjC,MAAO2jC,IALnB,GAA0BF,GAAaE,EAAWL,EAAS5/B,EAAvDhhB,EAAI,EAAGghD,KAAsDtkB,EAAIpf,EAAM/f,OAAQgpC,EAAkB7pC,KAAK2a,aAAe9U,EAAO+U,WAAWivB,gBAAkBzoC,EAAEqf,IAS/J,KAAKnd,EAAI,EAAGA,EAAI08B,EAAG18B,IACfghB,EAAOulB,EAAgBjpB,EAAMtd,KAAOsd,EAAMtd,GAC1C4gD,EAAU/3C,EAAIoxB,gBAAgBjZ,GAC1B,KACA,SAEC+/B,GAAeH,GAAWG,EAK3BE,EAAUpkD,KAAKmkB,IAJf8/B,IACAG,GAAajgC,GACb+/B,EAAcH,EAMtB,KADAE,IACK9gD,EAAI,EAAGA,EAAIghD,EAASzjD,OAAQyC,IAC7BtD,KAAKikD,eAAeK,EAAShhD,GAAG4gD,QAASI,EAAShhD,GAAGsd,QAG7Dmb,OAAQ,SAAUohB,GACd,GAAsFtiC,GAASo0B,EAAIxP,EAAGpH,EAAlGwa,EAAWsK,EAAGtoC,cAAcoxB,yBAA0Byd,EAAY1jD,KAAK0jD,SAC3E,KAAKzU,EAAKkO,EAAG34B,WAAYyqB,EAAIA,EAAKA,EAAGvqB,YAAa,CAE9C,IADA+a,EAAItzB,EAAIgF,OAAOgsC,EAAGtoC,cAAe6uC,GAAa,KACvCzU,EAAGzqB,YACN6T,EAAQ4W,EAAGzqB,WACPrY,EAAImtB,QAAQjB,IACRoH,EAAEjb,aACFquB,EAASn8B,YAAY+oB,GACrBA,EAAItzB,EAAIgF,OAAOgsC,EAAGtoC,cAAe6uC,GAAa,MAElD7Q,EAASn8B,YAAY2hB,IAErBoH,EAAE/oB,YAAY2hB,EAGlBoH,GAAEjb,YACFquB,EAASn8B,YAAY+oB,GAG7B5kB,EAAU7a,KAAK8jD,aAAa3G,GACxBtiC,EAAQ,IACR1O,EAAI2D,YAAY+iC,EAAUh4B,EAAQwkB,OAAO,IACzCxkB,EAAQwkB,OAAOxuB,UAEf1E,EAAI2D,YAAY+iC,EAAUsK,GAE9BhxC,EAAI0E,OAAOssC,IAEftsC,OAAQ,SAAU+P,GAAV,GACAi+B,GACKv7C,EAAO08B,CAAhB,KAAS18B,EAAI,EAAG08B,EAAIpf,EAAM/f,OAAQyC,EAAI08B,EAAG18B,IACrCu7C,EAAa7+C,KAAKod,OAAOqhC,WAAW79B,EAAMtd,IACtCu7C,GACA7+C,KAAK+7B,OAAO8iB,IAIxB5S,OAAQ,SAAU90B,GAAV,GAMQuF,GALR1Q,EAAOhM,KAAM4gB,EAAQzD,EAAUhG,GAAQk4B,EAAWl4B,EAAM8G,uBACvD2C,GAAM/f,SACPsW,EAAMsuB,mBAAmB4J,GACzBzuB,EAAQzD,EAAUhG,GACbyJ,EAAM/f,SACH6b,EAAO2yB,EAASx6B,cAAck0B,eAAe,IACjD5xB,EAAMoG,eAAe7G,YAAYgG,GACjCkE,GAASlE,GACTvF,EAAM2C,WAAW4C,EAAKoY,cAG9BlU,EAAQzU,EAAI2xB,SAASld,EAAOzU,EAAI8sB,iBAAiB,GAC7CjtB,EAAKoR,OAAOK,YAAYmD,IACxB5U,EAAK+J,MAAMoB,GACXnL,EAAK6E,OAAO+P,IAEZ5U,EAAKsxB,MAAM1c,MAInB4jC,EAAc9Y,EAAQ/rC,QACtBC,KAAM,SAAUC,GACZA,EAAQ8gB,UAAY,GAAIuuB,GAAcrvC,EAAQq7B,KAC9CwQ,EAAQ5rC,GAAGF,KAAKG,KAAKC,KAAMH,MAG/B4kD,EAAWljD,EAAW5B,QACtBC,KAAM,SAAUC,GACZG,KAAKH,QAAUA,EACf0B,EAAWzB,GAAGF,KAAKG,KAAKC,KAAML,EAAOE,GAAWud,OAAQ,GAAIqmC,GAAiB5jD,EAAQq7B,SAEzF96B,QAAS,SAAUogB,GACf,MAAO,IAAIgkC,GAAY7kD,EAAO6gB,GAAoB0a,IAAKl7B,KAAKH,QAAQq7B,SAG5Ev7B,GAAOkG,GACH49C,iBAAkBA,EAClBvU,cAAeA,EACfsV,YAAaA,EACbC,SAAUA,IAEdj/C,EAAa,sBAAuB,GAAIi/C,IACpCvpB,IAAK,KACLz4B,SAAU,GAAIF,IACVE,SAAUE,EAAYE,eACtByQ,MAAO,6BAGf9N,EAAa,oBAAqB,GAAIi/C,IAClCvpB,IAAK,KACLz4B,SAAU,GAAIF,IACVE,SAAUE,EAAYE,eACtByQ,MAAO,4BAGjB3R,OAAOnC,MAAMijB,SACC,kBAAVljB,SAAwBA,OAAOyB,IAAMzB,OAAS,SAAU0B,EAAIC,EAAIC,IACrEA,GAAMD,OAEV,SAAU5B,EAAGC,QACVA,OAAO,eAAgB,gBAAiBD,IAC1C,YACG,SAAU8B,EAAGC,GA8TV,QAASqjD,GAAkBC,EAAK1Z,GAE5B,IADA,GAAI3nC,GAAIqhD,EAAI9jD,OACLyC,MAAQ2nC,EAAOxyB,KAAKksC,EAAIrhD,MAE/B,MAAOA,GAEX,QAASshD,GAAcD,EAAK1Z,GACxB,GAAI4J,GAAI5J,EAAOvyB,KAAKisC,EACpB,OAAO9P,GAAIA,EAAEzQ,SAtUpB,GACO5kC,GAAQmC,OAAOnC,MAAOoC,EAAQpC,EAAMoC,MAAOjC,EAASyB,EAAEzB,OAAQwC,EAAQf,EAAEe,MAAO0D,EAASrG,EAAMsC,GAAGoK,OAAQC,EAAMtG,EAAOuG,IAAKiR,EAAaxX,EAAOwX,WAAY1a,EAAckD,EAAOlD,YAAa+oC,EAAU7lC,EAAO6lC,QAASpqC,EAAOuE,EAAOvE,KAAMiB,EAAesD,EAAOtD,aAAcm8C,EAAkB74C,EAAO64C,gBAAiBT,EAAqBp4C,EAAOo4C,mBAAoB9gC,EAAYE,EAAWF,UAAWysB,EAAoBvsB,EAAWusB,kBAAmBpkC,EAAeK,EAAOlD,YAAY6C,aAAcpD,EAAO5C,EAAM4C,KAC1fyiD,EAAgB,UAChBC,EAAiB,YACjBC,EAAqB,mBACrBC,EAAmBpjD,EAAMjC,QACzB4+C,aAAc,SAAUC,GACpB,MAAOryC,GAAI0pB,aAAa2oB,GAAa,SAGzCyG,EAAgBrjD,EAAMjC,QACtBC,KAAM,WACFI,KAAKod,OAAS,GAAI4nC,IAEtB1nB,MAAO,SAAUnmB,EAAOue,GAAjB,GAECwvB,GAASpyC,EAAK6N,EAAWw3B,EAAG5zB,EAcxB4gC,EACK7hD,EAhBTsd,EAAQ5gB,KAAK2a,WAAaivB,EAAkBzyB,GAASgG,EAAUhG,EAEnE,IAAIue,EAAWhnB,UAAW,CActB,IAbAoE,EAAMuK,EAAW6nB,kBAAkB/tB,GACnC+tC,EAAU7nC,EAAWmtB,WAAWrzB,GAChCA,EAAMuuB,iBACNyS,EAAIhsC,EAAIgF,OAAO2B,EAAK,IAAK4iB,GACzBve,EAAMkvB,WAAW8R,GACjB5zB,EAAS4zB,EAAErjB,WACa,KAApB3oB,EAAI/I,KAAKmhB,IACTpY,EAAI2D,YAAYqoC,EAAG5zB,GAEnBpY,EAAIosB,UAAUhU,IACdpY,EAAI0E,OAAO0T,GAEX4gC,EAAMhN,EACD70C,EAAI,EAAGA,EAAI4hD,EAAQrkD,OAAQyC,IAChC6I,EAAI2D,YAAYo1C,EAAQ5hD,GAAI6hD,GAC5BA,EAAMD,EAAQ5hD,EAEd4hD,GAAQrkD,SACRsL,EAAIY,aAAa+F,EAAIi2B,eAAe,UAAWmc,EAAQ,IACvD/4C,EAAI2D,YAAYgD,EAAIi2B,eAAe,UAAWmc,EAAQ,IACtD/tC,EAAMkuB,eAAe6f,EAAQ,IAC7B/tC,EAAMquB,YAAY0f,EAAQA,EAAQrkD,OAAS,SAG/C8f,GAAY,GAAI+9B,KAAmBl7C,MAAO,OAASkyB,GACnD/U,EAAUvD,OAASpd,KAAKod,OACxBuD,EAAU2c,MAAM1c,MAIxBuuB,EAAgBzD,EAAQ/rC,QACxBC,KAAM,SAAUC,GACZ,GAAImM,GAAOhM,IACXH,GAAQ8gB,WACJsrB,OAAQ,SAAU90B,GACd,GAAIyJ,GAAQ5U,EAAK2O,aAAeivB,EAAkBzyB,GAASgG,EAAUhG,EACrE,IAAIunC,KAAmBl7C,MAAO,QAASqN,OAAO+P,KAGtD5gB,KAAKH,QAAUA,EACf6rC,EAAQ5rC,GAAGF,KAAKG,KAAKC,KAAMH,MAG/BulD,EAAc1Z,EAAQ/rC,QACtBC,KAAM,SAAUC,GACZ,GAAImM,EACJhM,MAAKH,QAAUA,EACf6rC,EAAQ5rC,GAAGF,KAAKG,KAAKC,KAAMH,GAC3BG,KAAK2gB,UAAY,GAAIskC,GAChBplD,EAAQwlD,IAITrlD,KAAK0Y,KAAO,WACR1Y,KAAK2gB,UAAUhG,WAAa3O,GAAQA,EAAK2O,aACzC3a,KAAK2gB,UAAU2c,MAAMz9B,EAAQsX,OACzB/C,KAAMvU,EAAQwlD,IACd32C,UAAW7O,EAAQ6c,MAAQ7c,EAAQwlD,IACnCzrC,OAAQ/Z,EAAQ+Z,WARxB5Z,KAAK01B,WAAa,KAClB11B,KAAK+f,OAAQ,IAYrBulC,gBAAiB,WACb,MAAO9lD,GAAMiD,SAAS,sqCAAy2CyD,SAAUlG,KAAKkM,OAAOrM,QAAQqG,YAEj6CwS,KAAM,WAAA,GAKEkI,GACAu3B,EACAoN,EACAC,EAPAt/C,EAAWlG,KAAKkM,OAAOrM,QAAQqG,QACnClG,MAAKylD,aAAe,GACpBzlD,KAAKsf,OAAStf,KAAK4rC,WAAU,GAC7B5rC,KAAK2gB,UAAUhG,WAAa3a,KAAK2a,aAC7BiG,EAAQzD,EAAUnd,KAAKsf,QACvB64B,EAAIv3B,EAAM/f,OAASb,KAAK2gB,UAAUvD,OAAOmhC,aAAa39B,EAAM,IAAM,KAClE2kC,EAAM3kC,EAAM/f,QAAgC,OAAtBsL,EAAI/I,KAAKwd,EAAM,IACrC4kC,EAASxlD,KAAK+rC,aAAa/rC,KAAKslD,mBAChChyC,MAAOpN,EAAS5B,WAChBgQ,MAAOnS,EAAMnC,KAAK0lD,OAAQ1lD,MAC1B2lD,SAAS,IAETxN,IACAn4C,KAAKsf,OAAOmmB,mBAAmB0S,GAC/Bv3B,EAAQzD,EAAUnd,KAAKsf,SAE3Btf,KAAKylD,aAAezlD,KAAKkI,SAAS0Y,GAClC4kC,EAAO74C,KAAK,oBAAoBgN,MAAMxX,EAAMnC,KAAK4lD,OAAQ5lD,OAAOyhC,MAAM90B,KAAK,mBAAmBgN,MAAMxX,EAAMnC,KAAK0lD,OAAQ1lD,OAAOyhC,MAAM90B,KAAK,uBAAuBqK,QAAQ7U,EAAMnC,KAAK6lD,SAAU7lD,OAAOyhC,MAAM90B,KAAK,sBAAsB8H,IAAIzU,KAAK8lD,QAAQ3N,IAAI1W,MAAM90B,KAAK,uBAAuB8H,IAAIzU,KAAKylD,cAAchkB,MAAM90B,KAAK,wBAAwB8H,IAAI0jC,EAAIA,EAAE7kC,MAAQ,IAAImuB,MAAM90B,KAAK,yBAAyBC,KAAK,YAAWurC,GAAgB,UAAZA,EAAEv+B,QAA4B6nB,MAAM90B,KAAK,2BAA2Bs/B,QAAQsZ,GAChfvlD,KAAK+lD,QAAUP,EAAO5wB,KAAK,eAAeoxB,SAASlyC,OACnD1S,EAAE,qBAAsBokD,GAAQtuC,QAAQmwB,UAE5Cwe,SAAU,SAAU/2C,GAChB,GAAI1M,GAAO5C,EAAM4C,IACb0M,GAAE4I,SAAWtV,EAAKi+C,MAClBrgD,KAAK4lD,OAAO92C,GACLA,EAAE4I,SAAWtV,EAAK6jD,KACzBjmD,KAAK0lD,OAAO52C,IAGpB82C,OAAQ,SAAU92C,GAAV,GAGAwE,GAAOoJ,EAAM9C,EAFblO,EAAU1L,KAAK+lD,QAAQr6C,QACvB0I,EAAOhT,EAAE,qBAAsBsK,GAAS+I,MAExCyxC,EAAY9kD,EAAE,sBAAuBsK,EACrC0I,IAAQA,GAAQywC,IACZzwC,EAAK5G,QAAQ,KAAO,IAAM,kBAAkBiL,KAAKrE,KACjDA,EAAO,UAAYA,GAEvBpU,KAAK01B,YAAethB,KAAMA,GAC1Bd,EAAQlS,EAAE,uBAAwBsK,GAAS+I,MACvCnB,IACAtT,KAAK01B,WAAWpiB,MAAQA,GAExB4yC,EAAU1rC,GAAG,cACbkC,EAAOwpC,EAAUzxC,MACZiI,GAAS1c,KAAKylD,aAER/oC,GAAQA,IAAS1c,KAAKylD,eAC7BzlD,KAAK01B,WAAWhnB,UAAYvC,EAAIwrB,SAASjb,IAFzC1c,KAAK01B,WAAWhnB,UAAY0F,GAKpCwF,EAASxY,EAAE,wBAAyBsK,GAAS8O,GAAG,YAChDxa,KAAK01B,WAAW9b,OAASA,EAAS,SAAW,KAC7C5Z,KAAK2gB,UAAU2c,MAAMt9B,KAAKsf,OAAQtf,KAAK01B,aAE3C11B,KAAK0lD,OAAO52C,GACR9O,KAAKggB,QACLhgB,KAAKggB,UAGb0lC,OAAQ,SAAU52C,GACdA,EAAEiJ,iBACF/X,KAAK+lD,QAAQt0C,UACbtF,EAAI6pB,mBAAmB3Y,EAAW6nB,kBAAkBllC,KAAKsf,SAASpI,QAClElX,KAAK6rC,aAAa7rC,KAAKsf,SAE3BwmC,QAAS,SAAUhX,GACf,MAAIA,GACOA,EAAOj3B,aAAa,OAAQ,GAEhCgtC,GAEX38C,SAAU,SAAU0Y,GAAV,GAEFtd,GADAoZ,EAAO,EAEX,KAAKpZ,EAAI,EAAGA,EAAIsd,EAAM/f,OAAQyC,IAC1BoZ,GAAQkE,EAAMtd,GAAG6U,SAErB,OAAOhM,GAAIwrB,SAASjb,GAAQ,KAEhC/b,KAAM,WACF,GAAIwW,GAAQnX,KAAK4rC,WAAU,EAC3B5rC,MAAK2gB,UAAU2c,MAAMnmB,EAAOnX,KAAK01B,YACjC11B,KAAK6rC,aAAa10B,MAGtBgvC,EAAkBza,EAAQ/rC,QAC1BC,KAAM,SAAUC,GACZ6rC,EAAQ5rC,GAAGF,KAAKG,KAAKC,KAAMH,GAC3BG,KAAK2gB,UAAY,GAAIskC,IAEzBvsC,KAAM,WAAA,GAKEvB,GACAivC,EACAvX,EANAwX,EAAermD,KAAKsmD,YACnBD,KAGDlvC,EAAQnX,KAAKoV,WACbgxC,EAAa,GAAI5mD,GAAMsC,GAAGoK,OAAO24B,OACjCgK,EAAY13B,EAAMwuB,aACtBkJ,EAAUz2B,SAASiuC,EAAar2C,MAAMsU,KAAM+hC,EAAar2C,MAAMsH,QAC/Du3B,EAAUzJ,OAAOihB,EAAa5kB,IAAInd,KAAM+hC,EAAa5kB,IAAInqB,QACzDH,EAAQnX,KAAK4rC,YACbwa,EAAW1d,IAAImG,GACf7uC,KAAK2gB,UAAU2c,MAAMuR,GAAaz6B,KAAMpU,KAAKumD,mBAAmBF,EAAa3pC,QAC7E0pC,EAAWv1C,OAAOg+B,GAClB7uC,KAAK6rC,aAAa10B,KAEtBmvC,WAAY,WAAA,GASJE,GAOAC,EAfAtvC,EAAQnX,KAAKoV,WACbstC,EAAYvrC,EAAMoG,eAClB0B,EAAc9H,EAAM8H,YACpBwF,EAAOi+B,EAAUhuB,eAarB,QAZKjQ,IAAStY,EAAIurB,MAAMgrB,KAAeA,EAAUh+B,cAAgBzF,GAAe9S,EAAIwoB,WAAW+tB,MAC3FA,EAAYA,EAAU5tB,WACtB7V,EAAc,GAEdunC,EAAY,GAAIE,IAChBpiC,KAAMo+B,EACNprC,OAAQ2H,EACR0nC,aAAc,SAAUriC,GACpB,MAAOA,IAA2B,MAAnBnY,EAAI/I,KAAKkhB,MAG5BmiC,EAAY,GAAIG,GAAqBJ,GAClCC,EAAUH,cAErBlrC,eAAgB,WACZ,QAASpb,KAAKsmD,cAElBC,mBAAoB,SAAUr+C,GAC1B,GAAI2+C,GAAc7mD,KAAK8mD,mBAAmB5+C,EAC1C,OAAO2+C,GAAc3+C,EAAWlI,KAAK+mD,uBAAuB7+C,IAEhE4+C,mBAAoB,SAAU5+C,GAC1B,MAAO48C,GAAersC,KAAKvQ,IAE/B6+C,uBAAwB,SAAU7+C,GAC9B,MAAO28C,GAAgB38C,KAG3B8+C,EAAa1lD,EAAK3B,QAClBC,KAAM,SAAUC,GACZG,KAAKH,QAAUA,EACfG,KAAKod,OAAS,GAAI6gC,KAAsBz6C,MAAO,QAC/ClC,EAAKxB,GAAGF,KAAKG,KAAKC,KAAMoB,EAAEzB,OAAOE,GAAWO,QAAS+uC,MAEzD9uB,WAAY,SAAUve,EAAIjC,GACtByB,EAAKxB,GAAGugB,WAAWtgB,KAAKC,KAAM8B,EAAIjC,GAClCiC,EAAG+K,SAAS,qBAEhBL,OAAQ,SAAU1K,EAAI8e,GAClB9e,EAAG+e,YAAY,oBAAqB7gB,KAAKod,OAAOK,YAAYmD,IAAQlG,YAAY,oBAGpFksC,EAAuBhlD,EAAMjC,QAC7BC,KAAM,SAAU4mD,GACZxmD,KAAKwmD,UAAYA,EACjBxmD,KAAKgQ,MAAQi3C,IACbjnD,KAAKyhC,IAAMwlB,IACXjnD,KAAK0c,KAAO,IAEhB4pC,WAAY,WAAA,GAIA5pC,GAKA+iB,EAUIynB,EACAC,EAnBR7iC,EAAOtkB,KAAKwmD,UAAUliC,KACtBhN,EAAStX,KAAKwmD,UAAUlvC,MAC5B,IAAInL,EAAIwoB,WAAWrQ,IAEf,GADI5H,EAAO4H,EAAKsQ,KAAKsW,UAAU,EAAG5zB,GAC9B,SAASmB,KAAKtM,EAAIwrB,SAASjb,IAC3B,WAEc,KAAXpF,IACHmoB,EAAItzB,EAAIuxB,sBAAsBpZ,EAAMnY,EAAI6X,eACxCyb,GAAKA,EAAE/K,iBACP10B,KAAKwmD,UAAU5mD,MAAO0kB,KAAMmb,EAAE/K,kBAgBtC,OAbA10B,MAAKwmD,UAAU1f,SAAS1lC,EAAEe,MAAMnC,KAAKonD,WAAYpnD,OAC5CA,KAAKyhC,IAAI4lB,UACVrnD,KAAKwmD,UAAYxmD,KAAKwmD,UAAUc,MAAMtnD,KAAKyhC;AAC3CzhC,KAAKwmD,UAAU1f,SAAS1lC,EAAEe,MAAMnC,KAAKunD,aAAcvnD,OAC9CA,KAAKwnD,oBACFN,EAAoBlnD,KAAKwmD,UAAUiB,cAAcznD,KAAKgQ,OACtDm3C,EAAsB,GAAIO,GAAsBR,GACpDC,EAAoBrgB,SAAS1lC,EAAEe,MAAMnC,KAAK2nD,qBAAsB3nD,OAC3DA,KAAKwnD,oBACNxnD,KAAKgQ,MAAQi3C,OAIrBjnD,KAAKgQ,MAAMq3C,QACJ,MAGHr3C,MAAOhQ,KAAKgQ,MACZyxB,IAAKzhC,KAAKyhC,IACV/kB,KAAM1c,KAAK0c,OAIvB8qC,gBAAiB,WACb,MAAO1C,GAAersC,KAAKzY,KAAK0c,OAAS,WAAWjE,KAAKzY,KAAK0c,OAElE0qC,WAAY,SAAU1qC,EAAM4H,GACxB,GAAIhhB,GAAIohD,EAAkBhoC,EAAMqoC,EAChC,IAAIzhD,KAGA,MAFAtD,MAAKyhC,IAAInd,KAAOA,EAChBtkB,KAAKyhC,IAAInqB,OAAShU,EAAI,GACf,GAGfikD,aAAc,SAAU7qC,EAAM4H,GAAhB,GACNhhB,GAAIohD,EAAkBhoC,EAAM,MAC5BkrC,EAAKtkD,EAAI,CAIb,IAHAtD,KAAK0c,KAAOA,EAAKwuB,UAAU0c,GAAM5nD,KAAK0c,KACtC1c,KAAKgQ,MAAMsU,KAAOA,EAClBtkB,KAAKgQ,MAAMsH,OAASswC,EAChBtkD,KACA,OAAO,GAGfqkD,qBAAsB,SAAUjrC,EAAM4H,EAAMhN,GAAtB,GACdhU,GAAIshD,EAAcloC,EAAM,MACxBkrC,EAAKtkD,CAOT,IANIA,SACAskD,EAAKlrC,EAAK7b,QAEdb,KAAK0c,KAAO1c,KAAK0c,KAAKwuB,UAAU0c,GAChC5nD,KAAKgQ,MAAMsU,KAAOA,EAClBtkB,KAAKgQ,MAAMsH,OAASswC,GAAe,EAATtwC,GACtBhU,KACA,OAAO,KAcf2jD,EAAS,WACT,OACI3iC,KAAM,KACNhN,OAAQ,KACR+vC,MAAO,WACH,MAAqB,QAAdrnD,KAAKskB,MAAiC,OAAhBtkB,KAAKsX,UAI1CuwC,EAAmBjmD,EAAMjC,QACzBC,KAAM,SAAUC,GACZG,KAAKskB,KAAOzkB,EAAQykB,KACpBtkB,KAAKsX,OAASzX,EAAQyX,SAAWjW,EAAY8K,EAAIwoB,WAAW30B,KAAKskB,OAAStkB,KAAKskB,KAAKzjB,QAAU,EAAIhB,EAAQyX,OAC1GtX,KAAK2mD,aAAe9mD,EAAQ8mD,cAAgB3mD,KAAK2mD,cAAgBvlD,EAAEqf,MAEvEqmB,SAAU,SAAUC,GACXA,IAGL/mC,KAAK8nD,QAAS,EACd9nD,KAAK+nD,UAAUhhB,EAAU/mC,KAAKskB,KAAMtkB,KAAKsX,UAE7CywC,UAAW,SAAUhhB,EAAUziB,EAAMhN,GAA1B,GAKCoF,GAMAsrC,EAIJxwC,EAEI+M,CAhBR,IAAKD,IAAQtkB,KAAK8nD,OAAlB,CAGA,GAAsB,IAAlBxjC,EAAKpM,SASL,MAFI8vC,GAAWhoD,KAAKgoD,SAAS1jC,GAC7BtkB,KAAK8nD,OAAS9nD,KAAK8nD,QAAU9nD,KAAK2mD,aAAaqB,GACxChoD,KAAK+nD,UAAUhhB,EAAUihB,EAGpC,IAXQtrC,EAAO4H,EAAKsQ,KACZtd,IAAWjW,IACXqb,EAAO1c,KAAKioD,QAAQvrC,EAAMpF,IAE9BtX,KAAK8nD,OAAS/gB,EAASrqB,EAAM4H,EAAMhN,MAAY,EAM/CE,EAAOxX,KAAKwX,KAAK8M,IAChB9M,EAED,IADI+M,EAASD,EAAKwQ,YACVtd,GAAQrL,EAAIqtB,SAASjV,IACzB/M,EAAOxX,KAAKwX,KAAK+M,GACjBA,EAASA,EAAOuQ,UAGxB90B,MAAK8nD,OAAS9nD,KAAK8nD,QAAU9nD,KAAK2mD,aAAanvC,GAC/CxX,KAAK+nD,UAAUhhB,EAAUvvB,KAE7BiwC,cAAe,SAAUxsC,GACrB,MAAO7Z,GAAEzB,QACL2kB,KAAMtkB,KAAKskB,KACXhN,OAAQtX,KAAKsX,OACbqvC,aAAc3mD,KAAK2mD,cACpB1rC,QAEP+sC,SAAU,SAAU1jC,KAEpB9M,KAAM,SAAU8M,KAEhB2jC,QAAS,SAAUvrC,EAAMpF,OAGzBovC,EAAuBmB,EAAiBloD,QACxCsoD,QAAS,SAAUvrC,EAAMwrC,GACrB,MAAOxrC,GAAKwuB,UAAU,EAAGgd,IAE7B1wC,KAAM,SAAU8M,GACZ,MAAOA,GAAKoQ,iBAEhBszB,SAAU,SAAU1jC,GAChB,MAAOA,GAAKuU,WAEhByuB,MAAO,SAAUznD,GACb,GAAIob,GAAIjb,KAAKynD,cAAc5nD,EAC3B,OAAO,IAAI6mD,GAAqBzrC,MAGpCysC,EAAwBG,EAAiBloD,QACzCsoD,QAAS,SAAUvrC,EAAMwrC,GACrB,MAAOxrC,GAAKwuB,UAAUgd,IAE1B1wC,KAAM,SAAU8M,GACZ,MAAOA,GAAKI,aAEhBsjC,SAAU,SAAU1jC,GAChB,MAAOA,GAAKE,YAEhB8iC,MAAO,SAAUznD,GACb,GAAIob,GAAIjb,KAAKynD,cAAc5nD,EAC3B,OAAO,IAAI6nD,GAAsBzsC,KAGzCtb,GAAOH,EAAMsC,GAAGoK,QACZ84C,iBAAkBA,EAClBC,cAAeA,EACf9V,cAAeA,EACfiW,YAAaA,EACbe,gBAAiBA,EACjBa,WAAYA,EACZJ,qBAAsBA,EACtBF,qBAAsBA,EACtBgB,sBAAuBA,IAE3BliD,EAAa,aAAc,GAAIlE,IAC3B4e,IAAK,IACLC,MAAM,EACN/f,QAASglD,EACT3iD,SAAU,GAAIF,IACVE,SAAUE,EAAYE,eACtByQ,MAAO,mBAGf9N,EAAa,SAAU,GAAIwhD,IACvB9mC,IAAK,IACLC,MAAM,EACNkxB,OAAO,EACP5uC,SAAU,GAAIF,IACVE,SAAUE,EAAYE,eACtByQ,MAAO,mBAGf9N,EAAa,WAAY,GAAIlE,IACzB4e,KACI9d,EAAKi+C,MACLj+C,EAAK+lD,UAET3vC,iBAAiB,EACjBpY,QAAS+lD,MAEfxkD,OAAOnC,MAAMijB,SACC,kBAAVljB,SAAwBA,OAAOyB,IAAMzB,OAAS,SAAU0B,EAAIC,EAAIC,IACrEA,GAAMD,OAEV,SAAU5B,EAAGC,QACVA,OAAO,eACH,oBACA,eACDD,IACL,YACG,SAAU8B,EAAGC,GAAb,GACO7B,GAAQmC,OAAOnC,MAAOG,EAASyB,EAAEzB,OAAQkG,EAASrG,EAAMsC,GAAGoK,OAAQvJ,EAAckD,EAAOlD,YAAawJ,EAAMtG,EAAOuG,IAAK5G,EAAe7C,EAAY6C,aAAcjD,EAAesD,EAAOtD,aAAc8a,EAAaxX,EAAOwX,WAAYquB,EAAU7lC,EAAO6lC,QAASuZ,EAAgBp/C,EAAOo/C,cAAe9nC,EAAYE,EAAWF,UAAW/a,EAAO5C,EAAM4C,KAAMgmD,EAAiB,qBAAsBC,EAAkB,sBAAuBC,EAAmB,uBAC5bC,EAAc7c,EAAQ/rC,QACtBC,KAAM,SAAUC,GACZ,GAAImM,GAAOhM,IACX0rC,GAAQ5rC,GAAGF,KAAKG,KAAKiM,EAAMnM,GAC3BmM,EAAK2U,UAAY,GAAIskC,GACrBj5C,EAAK+T,OAAQ,EACb/T,EAAK0pB,eAETjxB,WAAY,SAAU+jD,EAAMrxC,GAAhB,GACJue,GAAa11B,KAAK01B,WAClB5iB,EAAMuK,EAAW6nB,kBAAkB/tB,EACvC,IAAIue,EAAWthB,MAA2B,WAAnBshB,EAAWthB,KAAmB,CACjD,IAAKo0C,EAYD,MAXAA,GAAOr8C,EAAIgF,OAAO2B,EAAK,KAAOsB,KAAMshB,EAAWthB,OAC/Co0C,EAAK95C,UAAYgnB,EAAWhnB,UAC5B85C,EAAKl1C,MAAQoiB,EAAWpiB,MACxB6D,EAAMuuB,iBACNvuB,EAAMkvB,WAAWmiB,GACZA,EAAK9jC,aACNvY,EAAI2D,YAAYgD,EAAIi2B,eAAe,UAAWyf,GAElDrxC,EAAMmuB,cAAckjB,GACpBrxC,EAAMquB,YAAYgjB,GAClBnrC,EAAW/E,YAAYnB,IAChB,CAEPhL,GAAIS,KAAK47C,EAAM9yB,GAGvB,OAAO,GAEX4vB,gBAAiB,SAAUmD,GACvB,MAAOjpD,GAAMiD,SAAS,q/BAClByD,SAAUlG,KAAKkM,OAAOrM,QAAQqG,SAC9BuiD,YAAaA,KAGrB9nD,KAAM,WACF,GAAIqL,GAAOhM,KAAMmX,EAAQnL,EAAK4/B,WAC9B5rC,MAAK2gB,UAAU2c,MAAMnmB,EAAOnX,KAAK01B,YACjC1pB,EAAK6/B,aAAa10B,IAEtBuB,KAAM,WAOF,QAAS4kB,GAAMxuB,GACX,GAAIpD,GAAU85C,EAAO95C,QAAS0I,EAAO1I,EAAQiB,KAAKy7C,GAAgB3zC,MAAMhG,QAAQ,KAAM,OAAQC,EAAYhD,EAAQiB,KAAK07C,GAAiB5zC,MAAOnB,EAAQ5H,EAAQiB,KAAK27C,GAAkB7zC,KACtLzI,GAAK0pB,YACDthB,KAAMA,EACN1F,UAAyB,KAAdA,EAAmBA,EAAY0F,EAC1Cd,MAAOA,GAEXo1C,EAAU18C,EAAKvH,WAAW+jD,EAAMrxC,GAChC7C,EAAMxF,GACF9C,EAAKgU,QACLhU,EAAKgU,SAGb,QAAS1L,GAAMxF,GACXA,EAAEiJ,iBACFytC,EAAO/zC,UACPtF,EAAI6pB,mBAAmB3Y,EAAW6nB,kBAAkB/tB,IAAQD,QACvDwxC,GACD18C,EAAK6/B,aAAa10B,GAG1B,QAASwxC,GAAQ75C,GACTA,EAAE4I,SAAWtV,EAAKi+C,MAClB/iB,EAAMxuB,GACCA,EAAE4I,SAAWtV,EAAK6jD,KACzB3xC,EAAMxF,GAhCZ,GAC+J02C,GAuC7J95C,EAWIk9C,EAlDJ58C,EAAOhM,KAAMmX,EAAQnL,EAAK4/B,YAAahrB,EAAQzD,EAAUhG,GAAQuxC,GAAU,EAAOF,EAAO5nC,EAAM/f,OAASb,KAAK2gB,UAAUvD,OAAOmhC,aAAa39B,EAAM,IAAM,KAAcioC,EAAOrpD,EAAMwC,QAAQE,QAAQ+R,KAAMpU,EAAUmM,EAAKE,OAAOrM,QAASqG,EAAWrG,EAAQqG,SAAUuW,EAAc5c,EAAQ4c,YAAagsC,KAAiBjpD,EAAMsC,GAAGgnD,aAAersC,GAAeA,EAAYssC,WAAatsC,EAAYssC,UAAUC,OAAS3nD,GAAYgb,GAC/Z/I,MAAOpN,EAASzB,WAChBkhD,SAAS,EACTj2C,UAAW+4C,EAEnBzoD,MAAKksC,mBAAmB/0B,GA6BxBkF,EAAc/H,MAAQA,EAClBm0C,IACApsC,EAActT,MAAQ,KAE1By8C,EAASxlD,KAAK+rC,aAAa//B,EAAKs5C,gBAAgBmD,GAAcpsC,GAAewE,YAAY,uBAAwB4nC,GAAa97C,KAAK,oBAAoBgN,MAAM2jB,GAAOmE,MAAM90B,KAAK,mBAAmBgN,MAAMrF,GAAOmtB,MAAM90B,KAAK,uBAAuBqK,QAAQ2xC,GAASlnB,MAAM90B,KAAKy7C,GAAgB3zC,IAAI+zC,EAAOA,EAAK3wC,aAAa,OAAQ,GAAK,WAAW4pB,MAAM90B,KAAK07C,GAAiB5zC,IAAI+zC,EAAOA,EAAKlsB,UAAY,IAAImF,MAAM90B,KAAK27C,GAAkB7zC,IAAI+zC,EAAOA,EAAKl1C,MAAQ,IAAImuB,MAAM7M,KAAK,eAC9clpB,EAAU85C,EAAO95C,QACjB+8C,IACAz8C,EAAKi9C,aAAe,GAAIzpD,GAAMsC,GAAGgnD,YAAYp9C,EAAQiB,KAAK,kBAAmBhN,KAAW8c,IACxFzQ,EAAKi9C,aAAa33C,KAAK,SAAU,SAAUwsC,GACP,MAA5BA,EAAGvS,SAAS32B,IAAI,SAChBlJ,EAAQiB,KAAKy7C,GAAgB3zC,IAAIzU,KAAK2L,WAG9CK,EAAKi9C,aAAa33C,KAAK,QAASgsB,IAEhCurB,IACID,EAAel9C,EAAQa,QAAQ,aAAavD,SAChD0C,EAAQ+G,IAAI,aAAcm2C,IAE9BpD,EAAOQ,SAASlyC,OAChBpI,EAAQiB,KAAKy7C,GAAgBlxC,QAAQmwB,WAG7C7nC,GAAMsC,GAAGoK,OAAOq8C,YAAcA,EAC9B/iD,EAAa,aAAc,GAAIK,GAAOvE,MAClClB,QAASmoD,EACT9lD,SAAU,GAAIF,IACVE,SAAUE,EAAYE,eACtByQ,MAAO,oBAGjB3R,OAAOnC,MAAMijB,SACC,kBAAVljB,SAAwBA,OAAOyB,IAAMzB,OAAS,SAAU0B,EAAIC,EAAIC,IACrEA,GAAMD,OAEV,SAAU5B,EAAGC,QACVA,OAAO,gBACH,qBACA,eACDD,IACL,YACG,SAAU8B,EAAGC,GAAb,GACO7B,GAAQmC,OAAOnC,MAAOG,EAASyB,EAAEzB,OAAQkG,EAASrG,EAAMsC,GAAGoK,OAAQvJ,EAAckD,EAAOlD,YAAawJ,EAAMtG,EAAOuG,IAAK5G,EAAe7C,EAAY6C,aAAcjD,EAAesD,EAAOtD,aAAc8a,EAAaxX,EAAOwX,WAAYquB,EAAU7lC,EAAO6lC,QAAStpC,EAAO5C,EAAM4C,KAAM8mD,EAAkB,sBAAuBC,EAAoB,wBAAyBC,EAAoB,wBAAyBC,EAAqB,yBACzaC,EAAe5d,EAAQ/rC,QACvBC,KAAM,SAAUC,GACZ,GAAImM,GAAOhM,IACX0rC,GAAQ5rC,GAAGF,KAAKG,KAAKiM,EAAMnM,GAC3BmM,EAAK+T,OAAQ,EACb/T,EAAK0pB,eAETlxB,YAAa,SAAU+gD,EAAKpuC,GAAf,GAIDoyC,GAHJ7zB,EAAa11B,KAAK01B,WAClB5iB,EAAMuK,EAAW6nB,kBAAkB/tB,EACvC,IAAIue,EAAWxiB,KAAyB,WAAlBwiB,EAAWxiB,IAAkB,CAY/C,GAXIq2C,EAAqB,WACrBp8C,WAAW,WACFuoB,EAAW3sB,OACZw8C,EAAItpB,gBAAgB,SAEnBvG,EAAW1sB,QACZu8C,EAAItpB,gBAAgB,UAExBspB,EAAItpB,gBAAgB,gBAGvBspB,EAYD,MAXAA,GAAMp5C,EAAIgF,OAAO2B,EAAK,MAAO4iB,GAC7B6vB,EAAIvR,OAASuR,EAAIiE,QAAUD,EAC3BpyC,EAAMuuB,iBACNvuB,EAAMkvB,WAAWkf,GACZA,EAAI7gC,aACLvY,EAAI2D,YAAYgD,EAAIi2B,eAAe,UAAWwc,GAElDgE,IACApyC,EAAMmuB,cAAcigB,GACpBpuC,EAAMquB,YAAY+f,GAClBloC,EAAW/E,YAAYnB,IAChB,CAEPouC,GAAIvR,OAASuR,EAAIiE,QAAUD,EAC3Bp9C,EAAIS,KAAK24C,EAAK7vB,GACd6zB,IAGR,OAAO,GAEXjE,gBAAiB,SAAUmD,GACvB,MAAOjpD,GAAMiD,SAAS,kuCAClByD,SAAUlG,KAAKkM,OAAOrM,QAAQqG,SAC9BuiD,YAAaA,KAGrB9nD,KAAM,WACF,GAAIqL,GAAOhM,KAAMmX,EAAQnL,EAAK4/B,WACzB5/B,GAAKxH,YAAY6Y,EAAWysB,MAAM3yB,GAAQA,IAC3CnL,EAAK6/B,aAAa10B,IAG1BuB,KAAM,WAOF,QAAS4kB,GAAMxuB,GACX,GAAIpD,GAAU85C,EAAO95C,QAAS0G,EAAI9E,SAAS5B,EAAQiB,KAAKy8C,GAAmB30C,MAAO,IAAKpC,EAAI/E,SAAS5B,EAAQiB,KAAK08C,GAAoB50C,MAAO,GAC5IzI,GAAK0pB,YACDxiB,IAAKxH,EAAQiB,KAAKu8C,GAAiBz0C,MAAMhG,QAAQ,KAAM,OACvD2iC,IAAK1lC,EAAQiB,KAAKw8C,GAAmB10C,OAEzCzI,EAAK0pB,WAAW3sB,MAAQ,KACxBiD,EAAK0pB,WAAW1sB,OAAS,MACpByE,MAAM2E,IAAMA,EAAI,IACjBpG,EAAK0pB,WAAW3sB,MAAQqJ,IAEvB3E,MAAM4E,IAAMA,EAAI,IACjBrG,EAAK0pB,WAAW1sB,OAASqJ,GAE7Bq2C,EAAU18C,EAAKxH,YAAY+gD,EAAKpuC,GAChC7C,EAAMxF,GACF9C,EAAKgU,QACLhU,EAAKgU,SAGb,QAAS1L,GAAMxF,GACXA,EAAEiJ,iBACFytC,EAAO/zC,UACPtF,EAAI6pB,mBAAmB3Y,EAAW6nB,kBAAkB/tB,IAAQD,QACvDwxC,GACD18C,EAAK6/B,aAAa10B,GAG1B,QAASwxC,GAAQ75C,GACTA,EAAE4I,SAAWtV,EAAKi+C,MAClB/iB,EAAMxuB,GACCA,EAAE4I,SAAWtV,EAAK6jD,KACzB3xC,EAAMxF,GAvCZ,GACqM02C,GA8CnM95C,EAWIk9C,EAzDJ58C,EAAOhM,KAAMmX,EAAQnL,EAAK4/B,YAAa8c,GAAU,EAAOnD,EAAMloC,EAAWysB,MAAM3yB,GAAQvP,EAAa29C,GAAOA,EAAI1tC,aAAa,UAAY,GAAIhQ,EAAc09C,GAAOA,EAAI1tC,aAAa,WAAa,GAAYgxC,EAAOrpD,EAAMwC,QAAQE,QAAQ+R,KAAMpU,EAAUmM,EAAKE,OAAOrM,QAASqG,EAAWrG,EAAQqG,SAAUsW,EAAe3c,EAAQ2c,aAAcisC,KAAiBjpD,EAAMsC,GAAG2nD,cAAgBjtC,GAAgBA,EAAausC,WAAavsC,EAAausC,UAAUC,OAAS3nD,GAAYgb,GAC3c/I,MAAOpN,EAAS1B,YAChBmhD,SAAS,EACTj2C,UAAW+4C,EAEnBzoD,MAAKksC,mBAAmB/0B,GAoCxBkF,EAAc/H,MAAQA,EAClBm0C,IACApsC,EAActT,MAAQ,KAE1By8C,EAASxlD,KAAK+rC,aAAa//B,EAAKs5C,gBAAgBmD,GAAcpsC,GAAewE,YAAY,uBAAwB4nC,GAAa97C,KAAK,oBAAoBgN,MAAM2jB,GAAOmE,MAAM90B,KAAK,mBAAmBgN,MAAMrF,GAAOmtB,MAAM90B,KAAK,uBAAuBqK,QAAQ2xC,GAASlnB,MAAM90B,KAAKu8C,GAAiBz0C,IAAI8wC,EAAMA,EAAI1tC,aAAa,MAAO,GAAK,WAAW4pB,MAAM90B,KAAKw8C,GAAmB10C,IAAI8wC,EAAMA,EAAInU,IAAM,IAAI3P,MAAM90B,KAAKy8C,GAAmB30C,IAAI7M,GAAY65B,MAAM90B,KAAK08C,GAAoB50C,IAAI5M,GAAa45B,MAAM7M,KAAK,eAC3elpB,EAAU85C,EAAO95C,QACjB+8C,IACAzoD,KAAK0pD,cAAgB,GAAIlqD,GAAMsC,GAAG2nD,aAAa/9C,EAAQiB,KAAK,mBAAoBhN,KAAW6c,IAC3Fxc,KAAK0pD,cAAcp4C,KAAK,SAAU,SAAUwsC,GACR,MAA5BA,EAAGvS,SAAS32B,IAAI,SAChBlJ,EAAQiB,KAAKu8C,GAAiBz0C,IAAIzU,KAAK2L,WAG/C3L,KAAK0pD,cAAcp4C,KAAK,QAASgsB,IAEjCurB,IACID,EAAel9C,EAAQa,QAAQ,aAAavD,SAChD0C,EAAQ+G,IAAI,aAAcm2C,IAE9BpD,EAAOQ,SAASlyC,OAChBpI,EAAQiB,KAAKu8C,GAAiBhyC,QAAQmwB,WAG9C7nC,GAAMsC,GAAGoK,OAAOo9C,aAAeA,EAC/B9jD,EAAa,cAAe,GAAIK,GAAOvE,MACnClB,QAASkpD,EACT7mD,SAAU,GAAIF,IACVE,SAAUE,EAAYE,eACtByQ,MAAO,qBAGjB3R,OAAOnC,MAAMijB,SACC,kBAAVljB,SAAwBA,OAAOyB,IAAMzB,OAAS,SAAU0B,EAAIC,EAAIC,IACrEA,GAAMD,OAEV,SAAU5B,EAAGC,QACVA,OAAO,qBAAsB,gBAAiBD,IAChD,YACG,SAAU8B,EAAGC,GAAb,GACO7B,GAAQmC,OAAOnC,MAAOmqD,EAAenqD,EAAMsC,GAAG6nD,aAAcx9C,EAAM3M,EAAMsC,GAAGoK,OAAOE,IAClFqgC,EAAYkd,EAAahqD,QACzBC,KAAM,SAAU8L,EAAS7L,GACrB,GAAImM,GAAOhM,IACX2pD,GAAa7pD,GAAGF,KAAKG,KAAKiM,EAAMN,EAAS7L,GACrCL,EAAMwC,QAAQC,SAAS8I,MACvB/K,KAAK4pD,qBACL5pD,KAAKsR,KAAK,YAAalQ,EAAEe,MAAMnC,KAAK4pD,mBAAoB5pD,QAE5DgM,EAAK0Q,KAAK1Q,EAAKnM,QAAQyT,OACvBtH,EAAKsF,KAAK,OAAQ,WACd,GAAItF,EAAKnM,QAAQgqD,SAAU,CACvB,GAAsBC,GAAlBrwB,EAAOztB,EAAKytB,IAChBA,GAAKhnB,KACDs3C,WAAY,SACZhhD,MAAO,SAEX+gD,EAAYrwB,EAAK1wB,QACb+gD,EACAA,GAAa,GAEbA,EAAY99C,EAAKg+C,WAErBvwB,EAAKhnB,IAAI,QAASq3C,EAAYtqD,EAAMwC,QAAQioD,aAC5Cj+C,EAAKg+C,WAAaF,MAI9BjqD,SACIuD,KAAM,YACNghC,UAEJwlB,mBAAoB,WAAA,GAIZnnB,GAGKn/B,EAQL+jC,EACA36B,EAfAw9C,EAAYlqD,KACZ2L,EAAQu+C,EAAUv+C,QAClBw+C,EAAOnqD,KAAKusC,WAAW4d,OAEvBzsC,EAAO,GACPa,EAAS/e,EAAMshC,UACnB,KAASx9B,EAAI,EAAGA,EAAI6mD,EAAKtpD,OAAQyC,IAC7Bm/B,EAAO0nB,EAAK7mD,GACZoa,GAAQ,kBAAqBa,EAAOkkB,EAAK92B,OAAS,IAC9C82B,EAAK92B,OAASA,IACd+R,GAAQ,aAEZA,GAAQ,IAAMa,EAAOkkB,EAAK/lB,MAAQ,WAElC2qB,GAASjmC,EAAE,oCAAwCsc,EAAO,aAC1DhR,EAAUtL,EAAEpB,KAAK0L,SAASa,QAAQ,aACtCG,EAAQ8K,KAAK,qBAAqB3G,SAClCw2B,EAAOv3B,YAAYpD,GACnB26B,EAAOrxB,GAAG,SAAU,WAChBk0C,EAAUv+C,MAAM3L,KAAK2L,OACrBu+C,EAAUxpD,QAAQ,aAG1BiL,MAAO,SAAUA,GACb,GAAIK,GAAOhM,KAAM44B,EAAS+wB,EAAa7pD,GAAG6L,MAAM5L,KAAKiM,EAAML,EAC3D,OAAIA,KAAUtK,EACHu3B,GAEN+wB,EAAa7pD,GAAG6L,MAAM5L,KAAKiM,IAC5BA,EAAK0Q,KAAK1Q,EAAKnM,QAAQyT,OAD3B,IAIJ82C,SAAU,SAAUv2C,GAChB,GAA0EvQ,GAAG43B,EAAKnD,EAAWjxB,EAAzFkF,EAAOhM,KAAMusC,EAAavgC,EAAKugC,WAAY5pB,EAAQ4pB,EAAW3X,MAIlE,KAHI/gB,GACA7H,EAAKytB,KAAKhnB,IAAI,mBAAoBtG,EAAIiwB,uBAAuBh7B,EAAEyS,KAE9DvQ,EAAI,EAAGA,EAAIqf,EAAM9hB,OAAQyC,IAC1B43B,EAAMvY,EAAMrf,GAAG43B,KAAO,OACtBnD,EAAYpV,EAAMrf,GAAGy0B,UACrBjxB,EAAQqF,EAAIgwB,YAAYtoB,EAAMqnB,GAAOnD,UAAWA,IAChDjxB,EAAQA,EAAM2H,QAAQ,KAAM,KAC5BkU,EAAMrf,GAAGwD,MAAQA,EAAQ,uBAE7BylC,GAAW7rC,QAAQ,YAG3BlB,GAAMsC,GAAGse,OAAOqsB,GAChBjtC,EAAMsC,GAAGoK,OAAOugC,UAAYA,GAC9B9qC,OAAOnC,MAAMijB,SACC,kBAAVljB,SAAwBA,OAAOyB,IAAMzB,OAAS,SAAU0B,EAAIC,EAAIC,IACrEA,GAAMD,OAEV,SAAU5B,EAAGC,QACVA,OAAO,iBAAkB,qBAAsBD,IACjD,YACG,SAAU8B,EAAGC,GAEV,QAAS+C,GAAOkgB,EAAM3Y,GAClB,GAAIqI,GAAoC,OAA5B5S,EAAEkjB,GAAM7R,IAAI,aAAuB43C,EAAkBr2C,EAAQ,QAAU,OAAQwsB,EAA6B,MAAlBr0B,EAAI/I,KAAKkhB,GAAgB,SAAW+lC,EAAkB,UAAYA,CACxK,OAAI1+C,KAAUtK,EACHijB,EAAKxd,MAAM05B,IAAa,GAE3B70B,EAAQ,EACR2Y,EAAKxd,MAAM05B,GAAY70B,EAAQ,MAE/B2Y,EAAKxd,MAAM05B,GAAY,GAClBlc,EAAKxd,MAAM80B,SACZtX,EAAK2X,gBAAgB,UAL7B,GAPX,GACOz8B,GAAQmC,OAAOnC,MAAOoC,EAAQpC,EAAMoC,MAAOjC,EAASyB,EAAEzB,OAAQkG,EAASrG,EAAMsC,GAAGoK,OAAQC,EAAMtG,EAAOuG,IAAKzJ,EAAckD,EAAOlD,YAAa6C,EAAe7C,EAAY6C,aAAckmC,EAAU7lC,EAAO6lC,QAASpqC,EAAOuE,EAAOvE,KAAMiB,EAAesD,EAAOtD,aAAc8a,EAAaxX,EAAOwX,WAAY2G,EAAgB7X,EAAI6X,cAAeg9B,EAAoBn7C,EAAOm7C,kBAAmBK,EAAiBx7C,EAAOw7C,eAgBhZiJ,EAAkB1oD,EAAMjC,QACxBC,KAAM,WACFI,KAAKod,OAAS,GAAI4jC,KAAqBx9C,KAAM2I,EAAI6X,kBAErDsZ,MAAO,SAAU1c,GAAV,GAECk+B,GAA+CyL,EAAcjnD,EAAGsf,EAAKi8B,EAAY2L,EAAYtxB,EAmBjFuxB,EACAC,EAsBAzQ,EAEK0Q,EAQbhqC,CAlDR,IAHAC,EAAQzU,EAAI2xB,SAASld,EAAOzU,EAAI8sB,iBAAiB,GAC7C6lB,EAAc9+C,KAAKod,OAAOmhC,aAAa39B,GAAQ2pC,KACnDzL,EAAc9+C,KAAK4qD,cAAc9L,GAC7BA,EAAYj+C,OAAQ,CACpB,IAAKyC,EAAI,EAAGsf,EAAMk8B,EAAYj+C,OAAQyC,EAAIsf,EAAKtf,IACvC6I,EAAIqO,GAAGskC,EAAYx7C,GAAI,MAClBlC,EAAE09C,EAAYx7C,IAAI8gC,QAEZhjC,EAAEmC,QAAQu7C,EAAYx7C,GAAGwxB,WAAYy1B,GAAW,GACvDA,EAAQpqD,KAAK2+C,EAAYx7C,IAFzBinD,EAAQpqD,KAAK2+C,EAAYx7C,GAAGwxB,YAKhCy1B,EAAQpqD,KAAK2+C,EAAYx7C,GAGjC,MAAOinD,EAAQ1pD,QAEX,GADAg+C,EAAa0L,EAAQlZ,QACjBllC,EAAIqO,GAAGqkC,EAAY,MAKnB,GAJA2L,EAAa3L,EAAW/pB,WACxBoE,EAAU93B,EAAEy9C,GAAYp6B,KAAK,MACzBgmC,EAAcvxB,EAAQvsB,KAAK,SAAS0yB,OACpCqrB,EAAatpD,EAAEy9C,GAAYt+B,SAAS,SAAS,GAC7CmqC,GAAcxxB,EAAQ,GAClBuxB,EAAY,IACZA,EAAYt6C,OAAO0uC,GACnB4L,EAAYt6C,OAAO/O,EAAEspD,GAAYnqC,YACjCpU,EAAI0E,OAAO65C,KAEXxxB,EAAQ/oB,OAAOu6C,GACfA,EAAW39C,aAAa8xC,EAAY6L,EAAWlmC,iBAQnD,KALAkmC,EAAaxxB,EAAQ3Y,SAAS,SAAS,GAClCmqC,IACDA,EAAav+C,EAAIgF,OAAO0tC,EAAWhqC,cAAe1I,EAAI/I,KAAKonD,IAC3DtxB,EAAQ/oB,OAAOu6C,IAEZ7L,GAAcA,EAAW/pB,YAAc01B,GAC1CE,EAAWh0C,YAAYmoC,GACvBA,EAAa0L,EAAQlZ,YAM7B,KAFI4I,EAAa3sC,SAASlJ,EAAOy6C,GAAa,IAAM,GACpDz6C,EAAOy6C,EAAY5E,GACV0Q,EAAc,EAAGA,EAAcJ,EAAQ1pD,OAAQ8pD,IAChDvpD,EAAEkZ,SAASukC,EAAY0L,EAAQI,KAC/BJ,EAAQ7nB,OAAOioB,EAAa,OAMxChqC,GAAY,GAAI0gC,KAAkB79C,MAAO,QAAWsD,OAASmzC,WAAY,MAC7Et5B,EAAU2c,MAAM1c,IAGxBgqC,cAAe,SAAUhqC,GACrB,GAAK5gB,KAAK2a,WAEH,CACH,GAAIA,KACJ,OAAOvZ,GAAE+S,IAAIyM,EAAO,SAAU0D,GAC1B,GAAI8a,GAAYv5B,EAAO+U,WAAWivB,gBAAgBvlB,EAClD,IAAI8a,EAAW,CACX,GAAIh+B,EAAEmC,QAAQ67B,EAAWzkB,QAGrB,MAAO,KAFPA,GAAWxa,KAAKi/B,GAKxB,MAAOA,IAAa9a,IAZxB,MAAO1D,IAgBf/P,OAAQ,SAAU+P,GACdA,EAAQzU,EAAI2xB,SAASld,EAAOzU,EAAI8sB,iBAAiB,EACjD,IAAmD4xB,GAAYvnD,EAAGsf,EAAK6W,EAAMqxB,EAAYzH,EAAUxE,EAAY5E,EAA3G6E,EAAc9+C,KAAKod,OAAOmhC,aAAa39B,EAE3C,KADAk+B,EAAc9+C,KAAK4qD,cAAc9L,GAC5Bx7C,EAAI,EAAGsf,EAAMk8B,EAAYj+C,OAAQyC,EAAIsf,EAAKtf,IAAK,CAEhD,GADAu7C,EAAaz9C,EAAE09C,EAAYx7C,IACvBu7C,EAAWrkC,GAAG,MAAO,CAGrB,GAFAif,EAAOolB,EAAWt6B,SAClBumC,EAAarxB,EAAKlV,SACdumC,EAAWtwC,GAAG,cAAgBpW,EAAOq1B,EAAK,IAAK,CAC/C,GAAIoxB,GAAczpD,EAAEkZ,SAASuwC,EAAYC,EAAW,IAChD,QAEJzH,GAAWxE,EAAWkM,QAAQ,MAC1B1H,EAASxiD,QACTO,EAAEq4B,EAAK,GAAGpE,WAAU,IAAQ7iB,SAASqsC,GAAY1uC,OAAOkzC,GAExDyH,EAAWtwC,GAAG,MACdqkC,EAAW/uC,YAAYg7C,GAEvBjM,EAAWrsC,SAASs4C,GAEnBrxB,EAAKlZ,SAAS,MAAM1f,QACrB44B,EAAK5oB,QAET,UAEA,GAAIg6C,GAAcpxB,EAAK,GACnB,QAEJoxB,GAAapxB,EAAK,OAGtBoxB,GAAa/L,EAAYx7C,EAE7B22C,GAAa3sC,SAASlJ,EAAOymD,GAAa,IAAM,GAChDzmD,EAAOymD,EAAY5Q,OAI3B+Q,EAAgBtf,EAAQ/rC,QACxBC,KAAM,SAAUC,GACZ,GAAImM,GAAOhM,IACXH,GAAQ8gB,WACJsrB,OAAQ7qC,EAAEe,MAAM,SAAUgV,GACtB,GAAI8zC,GAAkB,GAAIX,EAC1BW,GAAgBtwC,WAAa3a,KAAKkM,QAAUlM,KAAKkM,OAAOrM,QAAQ8a,WAChEswC,EAAgB3tB,MAAMjgB,EAAWuD,MAAMzJ,KACxCnL,IAEP0/B,EAAQ5rC,GAAGF,KAAKG,KAAKC,KAAMH,MAG/BqrD,EAAiBxf,EAAQ/rC,QACzBC,KAAM,SAAUC,GACZ,GAAImM,GAAOhM,IACXH,GAAQ8gB,WACJsrB,OAAQ7qC,EAAEe,MAAM,SAAUgV,GACtB,GAAI8zC,GAAkB,GAAIX,EAC1BW,GAAgBtwC,WAAa3a,KAAKkM,QAAUlM,KAAKkM,OAAOrM,QAAQ8a,WAChEswC,EAAgBp6C,OAAOwM,EAAWuD,MAAMzJ,KACzCnL,IAEP0/B,EAAQ5rC,GAAGF,KAAKG,KAAKC,KAAMH,MAG/BsrD,EAAc7pD,EAAK3B,QACnBC,KAAM,SAAUC,GACZyB,EAAKxB,GAAGF,KAAKG,KAAKC,KAAMH,GACxBG,KAAKod,OAAS,GAAI4jC,KAAqBx9C,KAAMwgB,MAEjD3D,WAAY,SAAUve,EAAIjC,GACtByB,EAAKxB,GAAGugB,WAAWtgB,KAAKC,KAAM8B,EAAIjC,GAClCuB,EAAEzB,OAAOK,KAAKH,SAAW8a,WAAY9a,EAAQqM,QAAUrM,EAAQqM,OAAOrM,QAAQ8a,aAC9E7Y,EAAG+K,SAAS,qBAEhBL,OAAQ,SAAU1K,EAAI8e,GAClB,GAAqDwqC,GAAeC,EAAkB/nD,EAAGsf,EAAKs+B,EAAUrX,EAApGyhB,EAAgBtrD,KAAKod,OAAOmhC,aAAa39B,EAC7C,KAAKtd,EAAI,EAAGsf,EAAM0oC,EAAczqD,OAAQyC,EAAIsf,EAAKtf,IAgB7C,GAfA49C,EAAWoK,EAAchoD,GACrBtD,KAAKH,QAAQ8a,aACbkvB,EAAkBhkC,EAAO+U,WAAWivB,gBAAgBqX,GAChDrX,IACAqX,EAAWrX,IAGnBuhB,EAAgBhnD,EAAO88C,GAClBkK,IACDC,EAAmBjqD,EAAE8/C,GAAUrmC,QAAQ,SAASha,OAChDuqD,EAAgBj/C,EAAIqO,GAAG0mC,EAAU,QAAUmK,EAAmB,GAAKjnD,EAAO88C,EAASpsB,cAAgB3oB,EAAImvB,OAAO4lB,GAC1G,KACA,QACEmK,EAAmB,GAEzBD,EAEA,MADAtpD,GAAG4Y,YAAY,oBACf,CAGR5Y,GAAG+K,SAAS,oBAAoB6N,YAAY,mBAGpD/a,GAAOkG,GACHykD,gBAAiBA,EACjBU,cAAeA,EACfE,eAAgBA,EAChBC,YAAaA,IAEjB3lD,EAAa,SAAU,GAAIlE,IACvBlB,QAAS4qD,EACTvoD,SAAU,GAAIF,IACVE,SAAUE,EAAYE,eACtByQ,MAAO,cAGf9N,EAAa,UAAW,GAAI2lD,IACxB/qD,QAAS8qD,EACTzoD,SAAU,GAAIF,IACVE,SAAUE,EAAYE,eACtByQ,MAAO,gBAGjB3R,OAAOnC,MAAMijB,SACC,kBAAVljB,SAAwBA,OAAOyB,IAAMzB,OAAS,SAAU0B,EAAIC,EAAIC,IACrEA,GAAMD,OAEV,SAAU5B,EAAGC,QACVA,OAAO,mBAAoB,iBAAkBD,IAC/C,YACG,SAAU8B,EAAGC,GAAb,GACO7B,GAAQmC,OAAOnC,MAAOG,EAASyB,EAAEzB,OAAQkG,EAASrG,EAAMsC,GAAGoK,OAAQvJ,EAAckD,EAAOlD,YAAa+oC,EAAU7lC,EAAO6lC,QAASpqC,EAAOuE,EAAOvE,KAAMiB,EAAesD,EAAOtD,aACzKgpD,EAAkB7f,EAAQ/rC,QAC1BC,KAAM,SAAUC,GACZ,GAAIqb,GAAMlb,IACVkb,GAAIrb,QAAUA,EACd6rC,EAAQ5rC,GAAGF,KAAKG,KAAKmb,EAAKrb,GAC1Bqb,EAAIwa,WAAa,KACjBxa,EAAI6E,OAAQ,GAEhBrH,KAAM,WAKF,QAAS4kB,GAAMxuB,GACXjP,EAAQ0b,gBAAgBZ,WAAazO,EAAOyO,WAC5CzO,EAAOP,MAAM65C,EAAO74C,KAAK0B,GAAUoG,OACnC5U,EAAQ0b,gBAAgBZ,WAAatZ,EACrCiT,EAAMxF,GACF9C,EAAKgU,QACLhU,EAAKgU,SAET9T,EAAOxL,QAAQ,UAEnB,QAAS4T,GAAMxF,GACXA,EAAEiJ,iBACFytC,EAAO5wB,KAAK,eAAenjB,UACvBvF,EAAOyO,aACPzO,EAAOyO,WAAWktB,yBAEtB37B,EAAOgL,QApBX,GAA8NrH,GAA1N7D,EAAOhM,KAAMkM,EAASF,EAAKE,OAAQrM,EAAUqM,EAAOrM,QAASqG,EAAWgG,EAAOrM,QAAQqG,SAAUs/C,EAASpkD,EAAE5B,EAAMiD,SAAS8oD,EAAgB9oD,UAAUyD,IAAWsM,SAASvH,SAAS4I,MAAOxF,EAAW,oBACxMxO,GAAQ4b,cAAcd,WAAazO,EAAOyO,WAC1C9K,EAAU07C,EAAgBnnD,OAAO8H,EAAOP,SACxC9L,EAAQ4b,cAAcd,WAAatZ,EAmBnCrB,KAAK+rC,aAAayZ,GACdlyC,MAAOpN,EAASxB,SAChB4P,MAAOA,EACPqxC,SAAS,IACVh5C,KAAK0B,GAAUoG,IAAI5E,GAAS4xB,MAAM90B,KAAK,oBAAoBgN,MAAM2jB,GAAOmE,MAAM90B,KAAK,mBAAmBgN,MAAMrF,GAAOmtB,MAAM7M,KAAK,eAAeoxB,SAASlyC,OACzJ0xC,EAAO74C,KAAK0B,GAAU6I,UAG9BvX,GAAO4rD,GACH9oD,SAAU,iXACV2B,OAAQ,SAAUyL,GACd,MAAOA,GAAQpB,QAAQ,2CAA4C,WAAWA,QAAQ,wBAAyB,eAAeA,QAAQ,YAAa,YAAYA,QAAQ,MAAO,OAGtLjP,EAAMsC,GAAGoK,OAAOq/C,gBAAkBA,EAClC1lD,EAAOlD,YAAY6C,aAAa,WAAY,GAAIlE,IAC5ClB,QAASmrD,EACT9oD,SAAU,GAAIF,IACVE,SAAUE,EAAYE,eACtByQ,MAAO,kBAGjB3R,OAAOnC,MAAMijB,SACC,kBAAVljB,SAAwBA,OAAOyB,IAAMzB,OAAS,SAAU0B,EAAIC,EAAIC,IACrEA,GAAMD,OAEV,SAAU5B,EAAGC,QACVA,OAAO,qBAAsB,mBAAoBD,IACnD,YACG,SAAU8B,GA2NP,QAASoqD,GAAelnC,GAAxB,GAGYmnC,GACAt0C,EAHJ83B,EAAK9iC,EAAIuxB,sBAAsBpZ,GAAO,MACtC2qB,KACIwc,EAAgB,GAAI5lD,GAAOqpC,cAAc/iC,EAAI/I,KAAK6rC,EAAGna,aACrD3d,EAAQ3X,EAAMsC,GAAGoK,OAAOi5B,SAASqB,SAASliB,GAC9CnN,EAAM2C,WAAWm1B,GACjBwc,EAAcxf,OAAO90B,IAjOhC,GACO3X,GAAQmC,OAAOnC,MAAOqG,EAASrG,EAAMsC,GAAGoK,OAAQ5K,EAAOuE,EAAOvE,KAAMiB,EAAesD,EAAOtD,aAAcw9C,EAAuBl6C,EAAOk6C,qBAAsBrU,EAAU7lC,EAAO6lC,QAASv/B,EAAMtG,EAAOuG,IAAKzJ,EAAckD,EAAOlD,YAAa0a,EAAaxX,EAAOwX,WAAY7X,EAAe7C,EAAY6C,aACrSkmD,EAAiB3L,EAAqBpgD,QACtCC,KAAM,SAAUC,GACZ,GAAImM,GAAOhM,IACXsB,GAAKxB,GAAGF,KAAKG,KAAKiM,EAAMxM,EAAMsB,cAAekL,EAAKnM,QAASA,IAC3DmM,EAAKF,KAAO,iBACZE,EAAKoR,QACDI,UAAW,WACP,MAAO,MAInB3d,SACI8iB,QAEQjG,KAAM,YACN/Q,MAAO,MAGP+Q,KAAM,YACN/Q,MAAO,eAGP+Q,KAAM,YACN/Q,MAAO,OAGP+Q,KAAM,YACN/Q,MAAO,OAGP+Q,KAAM,YACN/Q,MAAO,OAGP+Q,KAAM,YACN/Q,MAAO,OAGP+Q,KAAM,YACN/Q,MAAO,OAGP+Q,KAAM,YACN/Q,MAAO,OAGf5C,MAAO,KAEX4iD,iBAAkB,SAAUlpB,GAAV,GAQVmpB,GAPAjgD,EAAQ82B,EAAK92B,KACjB,OAAKA,GAGD82B,EAAKvH,KAAOuH,EAAK1K,UACV0K,GAEPmpB,EAAMjgD,EAAM6B,QAAQ,KACZ,IAARo+C,EACAnpB,EAAK1K,UAAYpsB,EAAMu/B,UAAU,GAC1B0gB,MACPnpB,EAAKvH,IAAMvvB,GAEX82B,EAAKvH,IAAMvvB,EAAMu/B,UAAU,EAAG0gB,GAC9BnpB,EAAK1K,UAAYpsB,EAAMu/B,UAAU0gB,EAAM,IAEpCnpB,GAdIA,GAgBfriC,QAAS,SAAUshB,GAAV,GACD1V,GAAOhM,KACPyiC,EAAO/gB,EAAK/V,KAEhB,OADA82B,GAAOziC,KAAK2rD,iBAAiBlpB,GACtB,GAAI58B,GAAO6a,eACdvJ,MAAOuK,EAAKvK,MACZwJ,UAAW,WACP,GAAIA,GAAWnd,GAAQi/B,EAAKvH,KAAOuH,EAAKopB,SAAW,QAAQ91C,MAAM,KAAM1S,IAC3DG,KAAMA,EACNoJ,MAAQmrB,UAAW0K,EAAK1K,WAAa,KAQjD,OALIpX,GADAvf,EAAEmC,QAAQC,EAAK,GAAI2I,EAAI+X,iBAAmB,EAC9B,GAAIre,GAAO+5C,sBAAsBv8C,GAEjC,GAAIwC,GAAO+7C,qBAAqBv+C,GAEhDsd,EAAUzU,OAASF,EAAKE,OACjByU,MAInBN,WAAY,SAAUve,EAAIwqC,GAAd,GACJpgC,GAASogC,EAAYpgC,OACrBrM,EAAUG,KAAKH,QACf4F,EAAW5F,EAAQuD,KACnB4I,EAAOhM,IACXgM,GAAKE,OAASA,EACdpK,EAAGiH,MAAMlJ,EAAQkJ,OACjBjH,EAAGgqD,gBACCpf,cAAe,OACfC,eAAgB,QAChBJ,WAAY1sC,EAAQ8iB,OAASzW,EAAOrM,QAAQ4F,GAC5C6N,MAAOpH,EAAOrM,QAAQqG,SAAST,GAC/BokD,UAAU,EACV7pC,OAAQ,WACJ,GAAI+rC,GAAW/rD,KAAK+rD,UAChBA,IACAzqD,EAAKoX,KAAKxM,EAAQzG,EAAUsmD,EAASC,WAG7CC,UAAW,WACP,GAAI3oD,GAAGqf,EAAQ3iB,KAAKusC,WAAW3X,MAC/B,KAAKtxB,EAAI,EAAGA,EAAIqf,EAAM9hB,OAAQyC,IAC1Bqf,EAAMrf,GAAK0I,EAAK2/C,iBAAiBhpC,EAAMrf,KAG/CspC,gBAAgB,EAChBnqC,SAAUjD,EAAMiD,SAAS,2FAE7BX,EAAG+K,SAAS,eAAeN,QAAQ,aAAamO,YAAY,KAAOjV,GAAUkH,KAAK,KAAK+yC,UAAU9yC,KAAK,eAAgB,OAE1Hs/C,mBAAoB,SAAUvpC,EAAO/B,GAAjB,GACPtd,GACDm/B,EACAvH,EACAnD,EACAwS,EACA7+B,EAOKygD,CAZb,KAAS7oD,EAAI,EAAGA,EAAIqf,EAAM9hB,OAAQyC,IAM9B,GALIm/B,EAAO9f,EAAMrf,GACb43B,EAAMuH,EAAKvH,KAAOuH,EAAKopB,SAAW,GAClC9zB,EAAY0K,EAAK1K,UAAY,IAAM0K,EAAK1K,UAAY,GACpDwS,EAAWrP,EAAMnD,EACjBrsB,EAAUtK,EAAEwf,EAAM,IAAIrU,QAAQg+B,GAAU,GAC5C,CAGA,GAAoB,GAAhB3pB,EAAM/f,OACN,MAAO4hC,GAAK92B,KAEhB,KAASwgD,EAAI,EAAGA,EAAIvrC,EAAM/f,QACjBO,EAAEwf,EAAMurC,IAAI5/C,QAAQg+B,GAAU,GADL4hB,IAGvB,GAAIA,GAAKvrC,EAAM/f,OAAS,EAC3B,MAAO4hC,GAAK92B,MAIxB,MAAO,IAEXa,OAAQ,SAAU1K,EAAI8e,GAAd,GAKA2rB,GAAmC5pB,EAA2Brf,EAAGuoD,EAASxc,EAJ1E6a,EAAY9oD,EAAEU,GAAI8yB,KAAK50B,KAAK8L,KAChC,IAAKo+C,IAGD3d,EAAa2d,EAAU3d,WAAY5pB,EAAQ4pB,EAAW3X,OAAoBya,EAAWljC,EAAIswB,eAAea,MAAM,KAAM1c,GACpHyuB,GAAYljC,EAAIoxB,gBAAgB8R,IAAarvC,KAAKosD,WAAa/c,GAAnE,CAKA,IAFIrvC,KAAKosD,UAAY/c,EAEhB/rC,EAAI,EAAGA,EAAIqf,EAAM9hB,OAAQyC,IAC1BuoD,EAAUlpC,EAAMrf,GAAGuoD,QACnBlpC,EAAMrf,GAAGqiD,SAAWkG,KAAazqD,EAAEiuC,GAAU9iC,QAAQs/C,GAAShrD,MAElE0rC,GAAW5O,SACH0uB,MAAO,UACPC,SAAU,KACV3gD,OAAO,KAEfo0C,EAAqBjgD,GAAG0M,OAAOzM,KAAKC,KAAM8B,EAAI8e,GAC9CspC,EAAUv+C,MAAM3L,KAAKksD,mBAAmB3f,EAAW4d,OAAQvpC,IAC3DspC,EAAUx9C,QAAQmU,YAAY,oBAAqB0rB,EAAW4d,OAAOtpD,UAEzE4Q,QAAS,WACLzR,KAAKosD,UAAY,QAGrBG,EAAqB7gB,EAAQ/rC,QAC7B+Y,KAAM,WAAA,GAIEkI,GAGK0W,EACDhT,EAPJnN,EAAQnX,KAAK4rC,WAAU,EAM3B,KALA5rC,KAAKwsD,YAAcxsD,KAAKH,QAAQgR,QAAU,wCAAwCkF,MAAM,KACxFsH,EAAWstB,qBAAqBxzB,GAC5ByJ,EAAQvD,EAAW8sB,OAAOhzB,EAAO,SAAUmN,GAC3C,MAAOA,KAEFgT,EAAI1W,EAAM/f,OAAS,EAAGy2B,GAAK,EAAGA,IAC/BhT,EAAO1D,EAAM0W,GACZt3B,KAAK6pC,gBAAgBvlB,IACtBtkB,KAAKm1C,MAAM7wB,EAGnBtkB,MAAK6rC,aAAa10B,IAEtBg+B,MAAO,SAAU7wB,GAAV,GAIClhB,GAEIqoD,EACAhnC,EACAjN,EAQKlU,CAfb,IAAKghB,IAAQnY,EAAI2sB,SAASxU,GAA1B,CAIA,GADIlhB,EAAO+I,EAAI/I,KAAKkhB,GACR,MAARlhB,GAAwB,MAARA,EAKhB,IAJIqoD,EAAgB,GAAI5lD,GAAOqpC,cAAc9rC,GACzCqhB,EAAOH,EAAKoQ,gBACZld,EAAO8M,EAAKI,YAChB+mC,EAAc1vB,OAAOzX,GACdG,GAAQA,GAAQjN,EAAMiN,EAAOA,EAAKC,YACrC1kB,KAAKm1C,MAAM1wB,OAEZ,IAAY,cAARrhB,EACP+I,EAAIovB,UAAUjX,EAAM,SACjB,IAAqB,GAAjBA,EAAKpM,UAAkB/L,EAAI2rB,cAAcxT,GAOhDknC,EAAelnC,OAPwC,CACvD,IAAShhB,EAAIghB,EAAK2Q,WAAWp0B,OAAS,EAAGyC,GAAK,EAAGA,IAC7CtD,KAAKm1C,MAAM7wB,EAAK2Q,WAAW3xB,GAE/BghB,GAAK2X,gBAAgB,SACrB3X,EAAK2X,gBAAgB,SAIrB76B,EAAEmC,QAAQH,EAAMpD,KAAKwsD,iBACrBrgD,EAAI4vB,OAAOzX,KAGnBulB,gBAAiB,SAAUvlB,GACvB,MAAOtkB,MAAK2a,cAAgB9U,EAAO+U,WAAWivB,gBAAgBvlB,KAYtEljB,GAAEzB,OAAOkG,GACL6lD,eAAgBA,EAChBa,mBAAoBA,IAExB/mD,EAAa,aAAc,GAAIkmD,IAC3BjpD,SAAU,GAAIF,IACVE,SAAUE,EAAYK,qBACtBsQ,MAAO,cAGf9N,EAAa,kBAAmB,GAAIlE,IAChClB,QAASmsD,EACT9pD,SAAU,GAAIF,IACVE,SAAUE,EAAYE,eACtByQ,MAAO,yBAGjB3R,OAAOnC,MAAMijB,SACC,kBAAVljB,SAAwBA,OAAOyB,IAAMzB,OAAS,SAAU0B,EAAIC,EAAIC,IACrEA,GAAMD,OAEV,SAAU5B,EAAGC,QACVA,OAAO,kBAAmB,qBAAsBD,IAClD,YACG,SAAU8B,EAAGC,GAAb,GAgEO4L,GA/DAzN,EAAQmC,OAAOnC,MACfsC,EAAKtC,EAAMsC,GACXmK,EAAWnK,EAAGoK,OACdrK,EAASC,EAAGD,OACZlC,EAASyB,EAAEzB,OACXwC,EAAQf,EAAEe,MACVC,EAAO5C,EAAM4C,KACbuT,EAAK,eACLhT,EAAcnD,EAAMsC,GAAGoK,OAAOvJ,YAC9BJ,EAAe/C,EAAMsC,GAAGoK,OAAO3J,aAC/BjB,EAAO9B,EAAMsC,GAAGoK,OAAO5K,KACvBmrD,EAAajtD,EAAMktD,YACnBC,EAAcntD,EAAMotD,aACpBC,EAAiB,iBACjBC,EAAY,wPACZC,GACAC,iBAAkB,cAClBC,iBAAkB,YAClBC,iBAAkB,cAClBC,mBAAoB,gBACpBC,kBAAmB,eACnBC,oBAAqB,cACrBC,qBAAsB,sBACtBC,mBAAoB,oBACpBC,YAAa,SACbC,sBAAuB,SACvBC,sBAAuB,UACvBC,sBAAuB,aACvBC,wBAAyB,SACzBC,YAAa,cACbC,eAAgB,aAChBC,WAAY,WACZC,uBAAwB,YACxBC,YAAa,YACbC,mBAAoB,cACpBC,+BAAgC,gBAChCC,gCAAiC,iBACjCC,6BAA8B,cAC9BC,6BAA8B,cAC9BC,uBAAwB,YACxBC,0BAA2B,eAC3BC,uBAAwB,cACxBC,mBAAoB,oBACpBC,gBAAiB,mBAEjBC,EAAqBttD,EAAK3B,QAC1B0gB,WAAY,SAAUve,EAAIjC,GACtBiC,EAAG8K,MAAO0T,aAAc,MACxB,IAAItT,GAAUnN,EAAQqM,OAAOc,OAC7BlL,GAAG8K,KAAK,gBAAiB/M,EAAQqM,OAAOR,QAAQkB,KAAK,OAAOoJ,GAAG,QAAS5U,EAAEe,MAAM,WAC5EnC,KAAK6uD,cAAc5iB,UACpBj/B,KAEPnN,SAAWuD,KAAMypD,GACjBzsD,QAASgB,EAAEqf,KACXjU,OAAQpL,EAAEqf,KACVhP,QAASrQ,EAAEqf,MAEf9d,GAAY6C,aAAaqnD,EAAgB,GAAI+B,IACzC1uC,IAAK,GACLC,MAAM,EACN1d,SAAU,GAAIF,IAAeE,SAAUE,EAAYO,4BAEnD+J,EAAUpL,EAAOlC,QACjBC,KAAM,SAAU8L,EAAS7L,GACrB,GAAImM,GAAOhM,IACXH,GAAUF,KAAWE,GAAWuD,KAAM,kBACtCvB,EAAO/B,GAAGF,KAAKG,KAAKiM,EAAMN,EAAS7L,GAC/BA,EAAQiN,OACRd,EAAK8iD,aAELjvD,EAAQ6P,WAAa7P,EAAQ6P,UAAU1C,UACvChB,EAAK+iD,eAAiBvvD,EAAMwvD,SAAS,WACjChjD,EAAKiD,WAETjD,EAAKN,QAAQmB,SAAS,yBAG9B3M,QAAS,WACT+uD,QACI5jD,OACI,OACA,SACA,YACA,iBAEJuQ,SACI,YACA,eAEJvS,WACI,cACA,gBACA,eACA,eAEJmC,OACI,cACA,aACA,aACA,UAEJF,OACI,sBACA,oBACA,SACA,WAEJG,QACI,cACA,gBACA,iBACA,cACA,cACA,YACA,gBAEJyjD,UACI,WACA,kBACA,QACA,MACA,WACA,UAEJC,OACI,WACA,YAEJC,QACI,YACA,cAGRC,oBACI,aACA,WACA,WACA,YACA,YACA,cAEJP,WAAY,WACR,GAAI9iD,GAAOhM,IACXA,MAAK2B,OAASP,EAAEpB,KAAK0L,SAASowB,KAAK,gDAAkDvX,SAAS+qC,QAAQ,gHAAoHtjB,aACtN14B,OAAO,EACP5D,WAAW,EACXqB,WAAaw+C,WAAY,+BACzBhzC,WACIzI,MAAQ07C,QAAS,WACjBl7C,OAASk7C,QAAS,aAEtBC,UAAW,GACX9J,SAAS,EACT+J,WAAW,EACXxS,WACAyS,QAAS,WACL3vD,KAAK4vD,QAAS,KAEnB55C,GAAG,YAAa,SAAUlH,GACpB1N,EAAE0N,EAAE8K,QAAQY,GAAG,aAChBxO,EAAKuO,kBAAmB,KAE7BvE,GAAG,WAAY,WACdhK,EAAKnM,QAAQqM,OAAOR,QAAQyO,aAC7Bya,KAAK,gBAEZi7B,sBAAuB,SAAUnkD,EAASwO,GACtCxO,EAAQiB,KAAK,MAAMkU,YAAY,yBAA0B3G,GAAMvN,KAAK,qDAAqDkU,YAAY,6BAA8B3G,IAEvK41C,mBAAoB,SAAUhuD,GAAV,GACZkK,GAAOhM,KACP+vD,EAAgB,iFACpB/jD,GAAK6iD,cAAgBztD,EAAE2uD,GAAev9C,SAAS,QAAQw9C,YACnDlhB,OAAQhtC,EACRmuD,OAAQ,eACRn1B,SAAU,YACVo1B,kBAAkB,EAClBp8C,KAAM,SAAUhF,GACR9O,KAAK0L,QAAQ8O,GAAG,WAChB1L,EAAEiJ,iBAEN/L,EAAK6jD,sBAAsB7vD,KAAK0L,SAAS,GACzC5J,EAAG8K,KAAK,iBAAiB,IAE7B0H,MAAO,WACHxS,EAAG8K,KAAK,iBAAiB,IAE7BgyC,SAAUz8C,EAAM6J,EAAKmkD,mBAAoBnkD,KAC1C4oB,KAAK,eAEZjS,MAAO,WACH,GAA4E7V,GAAO8rB,EAA/EjpB,EAAc3P,KAAKH,QAAQ6P,WAAa1P,KAAKH,QAAQ6P,UAAU1C,OAMnE,OALA4rB,GAAS54B,KAAK0L,QAAQ6U,WAAW5T,KAAK,eAClCgD,IACA7C,EAAQ9M,KAAK6uD,cACbj2B,EAASA,EAAO8P,IAAI57B,EAAMpB,QAAQ6U,WAAW5T,KAAK,SAE/CisB,GAEXne,QAAS,WACL,MAAOza,MAAK0L,QAAQiB,KAAK,oBAAoB9L,OAAS,GAAKb,KAAKua,kBAAoBva,KAAK6uD,eAAiB7uD,KAAK6uD,cAAclJ,WAEjI7lC,SAAU,SAAU1c,GAChB,GAAImG,GAAI8C,EAAQrM,KAAKqM,KACrB,KAAK9C,IAAM8C,GACP,GAAI9C,EAAG3D,eAAiBxC,EACpB,MAAOiJ,GAAM9C,IAIzB6mD,aAAc,SAAU3qD,GACpB,GAAInC,GAAG2rD,EAASjvD,KAAKivD,MACrB,IAAIjvD,KAAKqwD,aAAa5qD,GAClB,MAAO,QAEX,KAAKnC,IAAK2rD,GACN,GAAI7tD,EAAEmC,QAAQkC,EAAUwpD,EAAO3rD,KAAO,EAClC,MAAOA,IAInB4J,OAAQ,SAAUhB,GACd,GAAIF,GAAOhM,KAAM2B,EAASqK,EAAKrK,MAC3BqK,GAAKskD,SACLtkD,EAAKskD,QAAQ5+C,OAAO,SAAUvP,EAAM6J,EAAKiD,OAAQjD,IAErDA,EAAKskD,QAAUpkD,EACXF,EAAKnM,QAAQ6P,WAAa1D,EAAKnM,QAAQ6P,UAAU1C,SACjDd,EAAOrM,QAAQwM,MAAMlM,KAAK0sD,GAE9B7gD,EAAKK,MAAQL,EAAKukD,YAAYrkD,EAAOrM,QAAQwM,OAC7CL,EAAKwkD,SACLxkD,EAAKN,QAAQiB,KAAK,wBAAwBqK,QAAQ,SAAUlI,GACxD,GAAI2hD,GAAWrvD,EAAEpB,MAAMuM,QAAQ,eAAeqoB,KAAK,iBAAkB1U,EAAMpR,EAAE4I,OACzEwI,IAAO9d,EAAK6V,OAASiI,GAAO9d,EAAK4V,KACjCy4C,EAASn8C,QACF4L,GAAO9d,EAAKkX,OACdm3C,EAASC,SAASC,aACnB7hD,EAAE8hD,2BACFH,EAAS38C,WAIrB9H,EAAK6kD,gBACL7kD,EAAK2W,QAAQ6c,KAAK,WAAA,GAMNsxB,GALJrrD,EAAWuG,EAAK+kD,UAAU/wD,MAAO0F,EAAoB,iBAAbD,EAA8BuG,EAAKK,MAAM5G,GAAYuG,EAAKK,MAAMnF,eAAgBrH,EAAU6F,GAAQA,EAAK7F,QAASqG,EAAWgG,EAAOrM,QAAQqG,SAAU8qD,EAAcnxD,GAAWA,EAAQoxD,SAAW/qD,EAAST,GAAW3D,EAAKV,EAAEpB,KAClQ0F,IAASA,EAAK2a,aAGH,YAAZ5a,GAAsC,YAAZA,IACtBqrD,EAAc5qD,EAAST,EAAW,WACtC3D,EAAG6K,KAAK,SAAS8H,IAAIq8C,GAAarvB,MAAM90B,KAAK,gBAAgB+P,KAAKo0C,GAAarvB,OAEnF/7B,EAAK2a,WAAWve,GACZwR,MAAOtH,EAAKklD,wBAAwBF,EAAatrD,GACjDwG,OAAQF,EAAKskD,UAEjBxuD,EAAGyK,QAAQ,YAAaP,EAAKN,SAASmB,SAAS,mBAC/C/K,EAAGyK,QAAQ,iBAAkBP,EAAKN,SAAS8L,KAAK,kBAAkB3K,SAAS,sBAE/EX,EAAOoF,KAAK,SAAUnP,EAAM6J,EAAKiD,OAAQjD,IACzCA,EAAKQ,SACD7K,GACAA,EAAO+K,QAAQ+F,KACX2nB,IAAK,GACLhjB,KAAM,GACNrO,MAAO,MAInBmR,KAAM,WACF,GAA4ExN,GAASykD,EAAeC,EAAhGplD,EAAOhM,KAAM2B,EAASqK,EAAKrK,OAAQ0vD,EAAgBrlD,EAAKnM,QAAQqM,OAA8ChK,EAAU1C,EAAMwC,QAAQE,OACtIP,KACA+K,EAAU/K,EAAO+K,QACjBykD,EAAgBE,EAAc3lD,QACzBgB,EAAQ8N,GAAG,aAAgBxO,EAAKrK,OAAO9B,QAAQ8lD,UAC3Cj5C,EAAQ,GAAG5F,MAAMiC,OAClB2D,EAAQ3D,MAAM0jD,EAAW0E,GAAiB7jD,SAASZ,EAAQ+F,IAAI,qBAAsB,IAAMnF,SAASZ,EAAQ+F,IAAI,sBAAuB,KAEtI9Q,EAAOiuD,SACRwB,EAAeD,EAAc75C,SAC7B5K,EAAQ+F,KACJ2nB,IAAKzpB,KAAKF,IAAI,EAAGnD,SAAS8jD,EAAah3B,IAAK,IAAMuyB,EAAYjgD,GAAWY,SAAStB,EAAKrK,OAAO+J,QAAQ+G,IAAI,kBAAmB,KAC7H2E,KAAMzG,KAAKF,IAAI,EAAGnD,SAAS8jD,EAAah6C,KAAM,SAGjDlV,EAAQ+R,MAAQ/R,EAAQgS,OAASlI,EAAKslD,UAAUH,GACjDhkD,WAAW,WACPxL,EAAOmS,QACR,GAEHnS,EAAOmS,UAKvBw9C,UAAW,SAAUC,GACjB,GAAIC,GAAiBxxD,KAAK2B,OAAO+K,QAAS+kD,EAAuBD,EAAel6C,SAAUo6C,EAAqBD,EAAqBr6C,KAAMu6C,EAAoBF,EAAqBr3B,IAAKw3B,EAAYL,EAAIj6C,SAAUu6C,EAAgBD,EAAUx6C,KAAM06C,EAAeF,EAAUx3B,GAC3Q,SAASy3B,EAAgBN,EAAIxoD,QAAU2oD,GAAsBG,EAAgBH,EAAqBF,EAAezoD,SAAW+oD,EAAeP,EAAIvoD,SAAW2oD,GAAqBG,EAAeH,EAAoBH,EAAexoD,WAErOqK,KAAM,WACErT,KAAK2B,QACL3B,KAAK2B,OAAO2S,SAGpB4C,MAAO,WAAA,GACC66C,GAAW,WACXrmD,EAAU1L,KAAK0L,QACf8H,EAAWxT,KAAKswD,QAAQ5kD,QAAQkB,KAAKmlD,EACzCrmD,GAAQkB,KAAKmlD,EAAUv+C,GAAY,GAAG0D,QAAQvK,KAAKmgD,GAAWnwB,QAAQzlB,QACjE1D,GAAyB,IAAbA,GACb9H,EAAQ+vC,WAAWsW,IAG3B5B,mBAAoB,WAAA,GACZ4B,GAAW,WACXrmD,EAAU1L,KAAK6uD,cAAcnjD,QAC7B8H,EAAWxT,KAAKswD,QAAQ5kD,QAAQkB,KAAKmlD,EACzCrmD,GAAQa,QAAQ,0BAA0BM,SAAS,sBACnDnB,EAAQkB,KAAKmlD,EAAUv+C,GAAY,GAAG7G,KAAKmgD,GAAWnwB,QAAQzlB,QACzD1D,GAAyB,IAAbA,GACb9H,EAAQ+vC,WAAWsW,IAG3Bb,wBAAyB,SAAUc,EAAetsD,GAC9C,IAAKA,EAAKwa,IACN,MAAO8xC,EAEX,IAAIC,GAAMD,EAAgB,IAW1B,OAVItsD,GAAKya,OACL8xC,GAAO,WAEPvsD,EAAK2rC,QACL4gB,GAAO,YAEPvsD,EAAK0rC,MACL6gB,GAAO,UAEXA,GAAOvsD,EAAKwa,IAAM,KAGtBgyC,cACI,kBACA,kBACA,OACA,OACA,YAEJ7lD,SACAgkD,aAAc,SAAU5qD,GACpB,QAASA,IAAYjG,GAAMsC,GAAG+D,OAAOC,eAEzCyqD,YAAa,SAAUlkD,GACnB,GAAI8lD,GAAa7uD,EAAoCzD,EAAyFuD,EAA1HgvD,EAAcpyD,KAAKkyD,aAAuBpsD,EAAetG,EAAMsB,cAAetB,EAAMsC,GAAG+D,OAAOC,cAAe8yB,IACjI,KAAKt1B,EAAI,EAAGA,EAAI+I,EAAMxL,OAAQyC,IAC1B6uD,EAAc9lD,EAAM/I,GACpBF,EAAO+uD,EAAY/uD,KACfhC,EAAEwO,cAAcuiD,GACZ/uD,GAAQ0C,EAAa1C,IACrBw1B,EAAOx1B,GAAQzD,KAAWmG,EAAa1C,IACvCzD,EAAOi5B,EAAOx1B,GAAMvD,QAASsyD,KAE7BtyD,EAAUF,GACN4F,SAAU,WACVuG,KAAM,SACNwH,MAAO,IACR6+C,GACEtyD,EAAQuD,OACTvD,EAAQuD,KAAO,UAEnBvD,EAAQ0F,SAAW,KAAO1F,EAAQuD,KAC7BvD,EAAQ4C,UAA4B,UAAhB5C,EAAQiM,OAC7BjM,EAAQ4C,SAAWwJ,EAAStJ,YAAYE,eACxChD,EAAQyT,MAAQzT,EAAQyT,OAASzT,EAAQoxD,SAE7Cr4B,EAAOx1B,IAAUvD,QAASA,IAEvBiG,EAAaqsD,KACpBv5B,EAAOu5B,GAAersD,EAAaqsD,GAG3C,KAAK7uD,EAAI,EAAGA,EAAI8uD,EAAYvxD,OAAQyC,IAC3Bs1B,EAAOw5B,EAAY9uD,MACpBs1B,EAAOw5B,EAAY9uD,IAAMwC,EAAassD,EAAY9uD,IAG1D,OAAOs1B,IAEX43B,OAAQ,WAEJ,QAASzmB,GAAUtnC,GACf,GAAIm2B,EASJ,OARIn2B,GAASD,QACTo2B,EAASn2B,EAASD,WAEbpB,EAAEk9B,WAAW77B,KACdA,EAAWjD,EAAMiD,SAASA,IAE9Bm2B,EAASn2B,EAAS5C,IAEfuB,EAAEmN,KAAKqqB,GAElB,QAASy5B,KACDC,EAAM/xC,WAAW1f,SACb6O,IACA4iD,EAAM19B,KAAK,WAAY29B,GACvBA,KAEJD,EAAM9/C,SAAS9G,IAGvB,QAAS8mD,GAAW/sD,GACZA,IAAaonD,GACbyF,EAAQlxD,EAAE,mDACVkxD,EAAM19B,KAAK,WAAYxzB,EAAEmC,QAAQkC,EAAU4pD,UAE3CiD,EAAQlxD,EAAE,mCA3BlB,GAAqCvB,GAAS4C,EAAUgwD,EAAahtD,EAAgFitD,EAAWC,EAAwFL,EAAOhvD,EAA3P0I,EAAOhM,KAAMqM,EAAQL,EAAKK,MAAiD8kD,EAAgBnlD,EAAKskD,QAAQ5kD,QAASA,EAAUM,EAAKN,QAAQoY,QAAkC8uC,EAAa5mD,EAAKskD,QAAQzwD,QAAQwM,MAAOnK,EAAU1C,EAAMwC,QAAQE,QAAmBqwD,EAAgB,EAAG7iD,EAAY1D,EAAKnM,QAAQ6P,WAAa1D,EAAKnM,QAAQ6P,UAAU1C,QAASqiD,EAAqBrvD,KAAKqvD,kBAmCrX,KALA3jD,EAAQoY,QACJ8uC,EAAW/xD,SACX4E,EAAWmtD,EAAW,GAAGxvD,MAAQwvD,EAAW,IAEhDJ,EAAW/sD,EAAU4pD,GAChB/rD,EAAI,EAAGA,EAAIsvD,EAAW/xD,OAAQyC,IAC/BmC,EAAWmtD,EAAWtvD,GAAGF,MAAQwvD,EAAWtvD,GAC5CzD,EAAUwM,EAAM5G,IAAa4G,EAAM5G,GAAU5F,SACxCA,GAAWuB,EAAEwO,cAAcnK,KAC5B5F,EAAU4F,GAEdhD,EAAW5C,GAAWA,EAAQ4C,SACd,SAAZgD,IACA4sD,IACAjxD,EAAE,8BAAgCoR,SAASxG,EAAKN,SAChD8mD,EAAW/sD,EAAU4pD,IAEpB5sD,IAGLkwD,EAAe3mD,EAAKokD,aAAa3qD,GAC7BitD,GAAaC,GAAgBltD,GAAYonD,IACzCwF,IACAG,EAAW/sD,EAAU4pD,GACrBqD,EAAYC,GAEZltD,GAAYonD,IACZpqD,EAAS5C,QAAQyT,MAAQtH,EAAKnM,QAAQqG,SAASgB,gBAEnDzE,EAAWsnC,EAAUtnC,GACrBgwD,EAAcrxD,EAAEqB,GAAU+P,SAAS8/C,GACf,UAAhBK,IACAN,IACAG,EAAW/sD,EAAU4pD,IAErBxvD,EAAQ6Y,MAAQ+5C,EAAYlxB,SAAS,WACrCkxB,EAAY94C,MAAMxX,EAAMtC,EAAQ6Y,KAAMy4C,EAAc,KAG5DkB,KACAjxD,EAAE4K,EAAKN,SAAS6U,SAAS,mBAAmB1T,SAAS,kBACjDb,EAAKnM,QAAQiN,OAAS5K,EAAQ+R,MAAQ/R,EAAQ4e,QAAU,GACxD9U,EAAKrK,OAAO+K,QAAQC,KAAK,KAAKC,KAAK,eAAgB,MAEvDZ,EAAK6mD,eACDnjD,GACA1D,EAAK8jD,mBAAmB9jD,EAAKN,QAAQiB,KAAK,uBAE9CX,EAAK8mD,QAAQ,UAAW,WACpB,OAAS70B,SAAUjyB,EAAKN,YAGhCmnD,aAAc,WACVzxD,EAAEpB,KAAK0L,SAAS6U,WAAWif,KAAK,WAC5Bp+B,EAAEpB,MAAMugB,WAAWod,OAAO,WACtB,OAAQv8B,EAAEpB,MAAMuhC,SAAS,sBAC1B7mB,YAAY,eAAeiiB,QAAQ9vB,SAAS,iBAAiB40B,MAAMpC,OAAOxyB,SAAS,eAAe40B,SAG7G7tB,aAAc,SAAUC,GACpB7T,KAAK2iB,QAAQgb,OAAO,gBAAgB6B,KAAK,WACrC,GAAI0qB,GAAY9oD,EAAEpB,MAAM40B,KAAK,iBACzBs1B,IACAA,EAAUE,SAASv2C,MAI/BpC,QAAS,WACL5P,EAAO/B,GAAG2R,QAAQ1R,KAAKC,KACvB,IAAIuJ,GAAI8C,EAAQrM,KAAKqM,KACrB,KAAK9C,IAAM8C,GACHA,EAAM9C,GAAIkI,SACVpF,EAAM9C,GAAIkI,SAGdzR,MAAK2B,QACL3B,KAAK2B,OAAO8P,UAEZzR,KAAK+uD,gBACLvvD,EAAMuzD,aAAa/yD,KAAK+uD,gBAExB/uD,KAAK6uD,eACL7uD,KAAK6uD,cAAcp9C,WAG3Bo/C,cAAe,WACX,GAAI7kD,GAAOhM,KAAMgzD,EAAehnD,EAAK6iD,cAAgB7iD,EAAK6iD,cAAcnjD,QAAUtK,KAClF4K,GAAKinD,kBAAkBjnD,EAAKN,QAAQg9B,IAAIsqB,KAE5CC,kBAAmB,SAAUvnD,GACzB,GAAIM,GAAOhM,KAAMkzD,EAAU,uBAAwBC,EAAiBD,EAAU,0BAA2BE,EAAkBF,EAAU,oBAAqBG,EAAW,cAAeC,EAAc,iBAAkBC,GAC5ML,EACAG,EACAC,GACFj/C,KAAK,IACX3I,GAAQyK,IAAIR,GAAIK,GAAG,aAAeL,EAAIw9C,EAAgB,WAClD/xD,EAAEpB,MAAM6M,SAAS,mBAClBmJ,GAAG,aAAeL,EAAIw9C,EAAgB,WACrC/xD,EAAEpB,MAAM0a,YAAY,mBACrB1E,GAAG,YAAcL,EAAI49C,EAAa,SAAUzkD,GAC3CA,EAAEiJ,mBACH/B,GAAG,UAAYL,EAAIm3C,EAAW,SAAUh+C,GAMvC,QAAS0kD,GAAKj8C,EAAWF,EAAWo8C,GAApC,GACQpnD,GAAQgL,EAAU1K,KAAKmgD,GACvB1oB,EAAQ/3B,EAAM+3B,MAAMyC,GAAWtvB,CAInC,OAHIk8C,KACArvB,EAAQzzB,KAAKF,IAAI,EAAGE,KAAKH,IAAInE,EAAMxL,OAAS,EAAGujC,KAE5C/3B,EAAM+3B,GAZY,GAIzBsvB,GACAC,EAAcC,EAJd/sB,EAAU7mC,KACV0P,EAAY1D,EAAKnM,QAAQ6P,WAAa1D,EAAKnM,QAAQ6P,UAAU1C,QAC7DuK,EAAY/X,EAAMwC,QAAQgS,MAAMhI,EAAKN,YAAgB,EAErBgM,EAAU5I,EAAE4I;AAS5CA,GAAWtV,EAAK6V,OAASP,GAAWtV,EAAK4V,KAIrC27C,EAHCvyD,EAAEylC,GAASrsB,GAAG,eAGApZ,EAAEylC,GAFF2sB,EAAK97C,GAAWtV,EAAK6V,MAAQ,EAAIV,KAAiBA,EAAWvL,EAAKN,SAAS,IAIvFgE,GAAcgI,GAAWtV,EAAKiX,IAAM3B,GAAWtV,EAAKkX,KAEpD5B,GAAWtV,EAAKgX,MACvBu6C,EAAe3nD,EAAKN,QAAQiB,KAAKmgD,GAAW,GAC5Ch+C,EAAEiJ,kBACKL,GAAWtV,EAAK+W,KACvBu6C,EAAiB1nD,EAAKN,QAAQiB,KAAKmgD,GAAWnvB,OAAO,WACjD,MAAqC,WAA9Bv8B,EAAEpB,MAAMyS,IAAI,gBAEvBkhD,EAAeD,EAAeA,EAAe7yD,OAAS,GACtDiO,EAAEiJ,kBACKL,GAAWtV,EAAK6jD,KACnBj6C,EAAK6iD,eAAiB7iD,EAAK6iD,cAAclJ,WACzC35C,EAAK6iD,cAAcv6C,QAEvBq/C,EAAe3nD,EAAKskD,SACb54C,GAAWtV,EAAK4W,KAASlK,EAAE0K,SAAW1K,EAAE2K,SAE3Cm6C,EADAlkD,GACmBtO,EAAEylC,EAAQrD,eAAejC,SAAS,yBAA2Bv1B,EAAK6iD,cAAcnjD,QAEhFM,EAAKN,QAExBoD,EAAE4K,SACFi6C,EAAeH,KAASI,IAExBD,EAAeH,EAAK,EAAGI,GAClBD,GAAmF,WAAnEvyD,EAAEuyD,GAAcpnD,QAAQ,qBAAqBkG,IAAI,gBAClEkhD,EAAe3nD,EAAKskD,WA1B5BqD,EAAeH,EAAK97C,GAAWtV,EAAKkX,KAAO,KAAQtN,EAAK6iD,cAAcnjD,SAAS,GA8B/EioD,IACA7kD,EAAEiJ,iBACF47C,EAAaz8C,SAEZQ,IAAYtV,EAAKi+C,OAAS3oC,IAAYtV,EAAK+lD,WAAa/mD,EAAEylC,GAASrsB,GAAG,MAASpZ,EAAEylC,GAASj6B,KAAK,SAChGZ,EAAK6nD,oBAAoBhtB,EAAS/3B,KAEvCkH,GAAG,QAAUL,EAAIw9C,EAAgB,SAAUrkD,GAC1C9C,EAAK6nD,oBAAoB7zD,KAAM8O,KAChCkH,GAAG,QAAUL,EAAIy9C,EAAiB,SAAUtkD,GAC3CA,EAAEiJ,oBAGV87C,oBAAqB,SAAUpB,EAAa3jD,GAAvB,GACb9C,GAAOhM,KACP8zD,EAAS1yD,EAAEqxD,EACf3jD,GAAEiJ,iBACFjJ,EAAEgM,kBACFg5C,EAAOp5C,YAAY,iBACdo5C,EAAOt5C,GAAG,iBACXxO,EAAKskD,QAAQ53C,KAAK1M,EAAK+kD,UAAU0B,KAGzC1B,UAAW,SAAUrlD,GAAV,GAIHqsB,GAIAryB,EAIIquD,CAXR,IAAKroD,EAUL,MAPIqsB,GAAYrsB,EAAQqsB,UACpB,YAAYtf,KAAKsf,KACjBA,EAAYrsB,EAAQ8Y,WAAWuT,WAE/BryB,EAAOtE,EAAEg3B,KAAKL,EAAUhiB,MAAM,KAAM,SAAUohB,GAC9C,OAAQ,+FAA+F1e,KAAK0e,KAE5GzxB,EAAK,IACDquD,EAAWruD,EAAK,GAChBqnD,EAAoBgH,KACpBA,EAAWhH,EAAoBgH,IAE/BA,EAASvmD,QAAQ,SAAW,EACrBhO,EAAMqgD,YAAYkU,EAAS7oB,UAAU6oB,EAASvmD,QAAQ,QAAU,IAEhEumD,EAAS7oB,UAAU6oB,EAASC,YAAY,KAAO,IAGvD,UAEXh2C,aAAc,WACV,GAAIhS,GAAOhM,KAAMiM,EAAWzM,EAAMsC,GAAGoK,OAAQA,EAASF,EAAKskD,QAASn5C,EAAQjL,EAAOkJ,WAAYwL,EAAQ3U,EAASoR,WAAWF,UAAUhG,GAAQwD,EAAazO,EAAOrM,QAAQ8a,WAAYqzB,EAAoBhiC,EAAKioD,mBAAmB98C,EACjOyJ,GAAQ3U,EAASG,IAAI0xB,SAASld,EAAO3U,EAASG,IAAI6sB,iBAAiB,GAC9DrY,EAAM/f,SACP+f,GAASzJ,EAAMoG,iBAEnBvR,EAAK2W,QAAQ6c,KAAK,WAAA,GAGN19B,GAFJ4D,EAAOsG,EAAKK,MAAML,EAAK+kD,UAAU/wD,MACjC0F,KACI5D,EAAKV,EAAEpB,MACP0F,EAAK8G,QACL9G,EAAK8G,OAAO1K,EAAI8e,GAEhBjG,GACA3O,EAAKkoD,uBAAuBxuD,EAAM5D,EAAIksC,MAIlDhuC,KAAKwM,UAETynD,mBAAoB,SAAU98C,GAC1B,GAAInX,KAAKswD,QAAQzwD,QAAQ8a,WAAY,CACjC,GAAI1O,GAAWzM,EAAMsC,GAAGoK,MACxB,OAAIiL,GAAMmG,UACCrR,EAAS2O,WAAWozB,kBAAkB72B,GAEkB,IAAxDlL,EAASoR,WAAWusB,kBAAkBzyB,GAAOtW,SAIhEqzD,uBAAwB,SAAUxuD,EAAM5D,EAAIksC,GAApB,GAQZsJ,GAEI6c,EACKj0C,EAEGigC,EAOZiU,EAnBJhxD,EAAOsC,EAAKtC,KACZixD,EAAYvyD,EACZwyD,EAAkB5uD,EAAK7F,QAAQy0D,eAInC,IAHIA,IAAoBjzD,IACpBizD,EAAkBlzD,EAAEmC,QAAQH,EAAM6I,EAAS2O,WAAW25C,sBAEtDD,EAAiB,CAEjB,GADIhd,EAAUtJ,EAAoB,OAAS,IACtClsC,EAAG0Y,GAAG,WAAY,CACf25C,EAASryD,EAAG8yB,MAChB,KAAS1U,IAAOi0C,GACZ,GAAIj0C,EAAI6d,MAAM,wBAAyB,CAC/BoiB,EAASgU,EAAOj0C,GACpBm0C,EAAYlU,EAAOzzC,OACnB,QAIZ2nD,EAAU5hD,IAAI,UAAW6kC,GACrB8c,EAAUC,EAAU9nD,QAAQ,MACY,IAAxC6nD,EAAQ7zC,SAAS,YAAY1f,QAC7BuzD,EAAQ3hD,IAAI,UAAW6kC,KAInC9qC,OAAQ,WACJxM,KAAK6yD,gBAET2B,QAAS,SAAU1lD,GAAV,GACD2lD,GAAiB3lD,EAAE/F,MACnB2G,EAAY1P,KAAKH,QAAQ6P,WAAa1P,KAAKH,QAAQ6P,UAAU1C,QAC7DF,EAAQ9M,KAAK6uD,aACjB7uD,MAAKge,eACAtO,IAGD5C,EAAM64C,WACN74C,EAAMwH,OAAM,GAEhBtU,KAAK00D,iBACL10D,KAAK20D,QAAQF,GACbz0D,KAAK40D,SAASH,GACdz0D,KAAK6vD,sBAAsB7vD,KAAK0L,SAAS,GACzC1L,KAAK6vD,sBAAsB7vD,KAAK6uD,cAAcnjD,SAAS,GACvD1L,KAAK0L,QAAQ6U,SAAS,uBAAuB9N,IAAI,aAAc3F,EAAMpB,QAAQ8O,GAAG,UAAY,SAAW,aAE3Gk6C,eAAgB,WACZ10D,KAAK0L,QAAQ6U,SAAS,MAAMif,KAAK,SAAUq1B,EAAKnpD,GAC5C,GAAI4mD,GAAQlxD,EAAEsK,EACd4mD,GAAM19B,KAAK,aAAc63B,EAAW6F,GAAO,OAGnDqC,QAAS,SAAU5rD,GAAV,GACDupD,GAAOwC,EAGExxD,CAFb,IAAIyF,EAAQ/I,KAAK+0D,eAEb,IADAD,EAAgB90D,KAAKg1D,iBAAiBr3B,OAAO,2BACpCr6B,EAAIwxD,EAAcj0D,OAAS,EAAGyC,GAAK,IACxCgvD,EAAQwC,EAAc9Z,GAAG13C,KACrByF,EAAQ/I,KAAK+0D,iBAF0BzxD,IAKvCtD,KAAKi1D,WAAW3C,IAKhCsC,SAAU,SAAU7rD,GAAV,GACFupD,GAAO4C,EAGE5xD,CAFb,IAAIyF,EAAQ/I,KAAK+0D,eAEb,IADAG,EAAel1D,KAAKm1D,gBACX7xD,EAAI,EAAGA,EAAI4xD,EAAar0D,SAC7ByxD,EAAQ4C,EAAala,GAAG13C,KACpByF,EAAQ/I,KAAK+0D,iBAAmB/0D,KAAKo1D,WAAW9C,EAAOvpD,IAFtBzF,OAQjD6xD,cAAe,WAAA,GACProD,GAAQ9M,KAAK6uD,cACbqG,EAAel1D,KAAK0L,QAAQ6U,SAAS,mBAAmBod,OAAO,UAKnE,OAJAu3B,GAAeA,EAAaxsB,IAAI57B,EAAMpB,QAAQ6U,SAAS,OACvD20C,EAAaG,KAAK,SAAUld,EAAG7V,GAC3B,MAAOlhC,GAAE+2C,GAAGvjB,KAAK,YAAcxzB,EAAEkhC,GAAG1N,KAAK,YAAc,OAEpDsgC,GAEXF,eAAgB,WACZ,MAAOh1D,MAAK0L,QAAQ6U,SAAS,wCAAwCod,OAAO,aAEhFo3B,aAAc,WACV,GAAIhsD,GAAQ,CAIZ,OAHA/I,MAAKg1D,iBAAiBx1B,KAAK,WACvBz2B,GAAS3H,EAAEpB,MAAM40B,KAAK,gBAEnBjkB,KAAK2pB,KAAKvxB,IAErBksD,WAAY,SAAU3C,GAClB,GAAIA,EAAM19B,KAAK,YAAa,CACxB,GAAI9nB,GAAQ9M,KAAK6uD,aACjByD,GAAMgD,SAASh2B,UAAUxyB,EAAMpB,SAASmB,SAAS,6BAEjDylD,GAAMj/C,QAGd+hD,WAAY,SAAU9C,EAAOvpD,GACzB,GAAI+xB,GAAUsG,CACd,UAAIkxB,EAAMzxD,QAAUkI,EAAQ/I,KAAK+0D,eAAiBzC,EAAM19B,KAAK,iBACrD09B,EAAM/wB,SAAS,0BACfzG,EAAWw3B,EAAM19B,KAAK,YACL,IAAbkG,EACAw3B,EAAMgD,SAASh2B,UAAUt/B,KAAK0L,UAE9B01B,EAAWphC,KAAK0L,QAAQ6U,WAAWod,OAAO,SAAUk3B,EAAKnpD,GACrD,MAAOtK,GAAEsK,GAASkpB,KAAK,cAAgBkG,EAAW,IAEtDw3B,EAAMgD,SAASxlD,YAAYsxB,IAE/BkxB,EAAM53C,YAAY,0BAElB43C,EAAMp4C,QAEH,MAKnB9Y,EAAEzB,OAAOsM,GAAYgB,QAASA,KAChCtL,OAAO8gB,QAAU9gB,OAAOnC,MAAMijB,SAChB,kBAAVljB,SAAwBA,OAAOyB,IAAMzB,OAAS,SAAU0B,EAAIC,EAAIC,IACrEA,GAAMD,OAEV,SAAU5B,EAAGC,QACVA,OAAO,iBAAkB,kBAAmBD,IAC9C,YACG,SAAU8B,EAAGC,GAAb,GACO7B,GAAQmC,OAAOnC,MAAOG,EAASyB,EAAEzB,OAAQwC,EAAQf,EAAEe,MAAO0D,EAASrG,EAAMsC,GAAGoK,OAAQC,EAAMtG,EAAOuG,IAAKzJ,EAAckD,EAAOlD,YAAa0a,EAAaxX,EAAOwX,WAAYquB,EAAU7lC,EAAO6lC,QAAS/1B,EAAK,cAAe4/C,EAAc,iBAAkBC,EAAgB,mBAAoBl0D,EAAOuE,EAAOvE,KAAMiB,EAAesD,EAAOtD,aAAcmd,EAAoB7Z,EAAO6Z,kBAAmBshC,EAAoBn7C,EAAOm7C,kBAAmBx7C,EAAeK,EAAOlD,YAAY6C,aAAciwD,EAAaj2D,EAAMi2D,WACjfhzD,EAAWjD,EAAMiD,SACjBizD,EAAiB,+CACjBC,EAAoB,GAAI3U,KAAqBx9C,MAAO,YACpDoyD,EAAel2C,EAAkB/f,QACjCC,KAAM,SAAUC,GACZ,GAAIob,GAAI7Z,EAAEzB,QACNysC,YAAapsC,KAAKosC,YAClB+K,cAAc,GACft3C,MACH6f,GAAkB5f,GAAGF,KAAKG,KAAKC,KAAMib,IAEzC46C,WAAY,SAAUlrD,EAAMD,GAAhB,GAGJorD,GAIAC,CACJ,OAPAprD,GAAOA,GAAQ,EACfD,EAAUA,GAAW,EACjBorD,EAAarzD,EAASizD,IACtB3sD,MAAO,IAAM2B,EACbmF,QAAShK,EAAOnE,wBAEhBq0D,EAAY,IAAMprD,EACf,oCAA4CgqC,MAAMhqC,EAAO,GAAG0J,KAAK,qBAAwB0hD,EAAY,OAAcphB,MAAMjqC,EAAU,GAAG2J,KAAKyhD,GAAc,SAAW,YAE/K1pB,YAAa,SAAUlgC,EAAQiL,GAC3B,GAAI6+C,GAAgB50D,EAAE,mBAAoB8K,EAAOjB,UAAUwwC,WAAW,YACtEtkC,GAAMiB,SAAS49C,EAAcrpD,KAAK,MAAM,GAAI,GAC5CwK,EAAMkB,UAAS,GACfnM,EAAOoM,YAAYnB,IAEvBuB,KAAM,WACF,GAAI7Y,GAAUG,KAAKH,OACnBA,GAAQ6d,KAAO1d,KAAK61D,WAAWh2D,EAAQ8K,KAAM9K,EAAQ6K,SACrDgV,EAAkB5f,GAAG4Y,KAAK3Y,KAAKC,SAGnCi2D,EAAY30D,EAAK3B,QACjB0gB,WAAY,SAAUve,EAAIjC,GAAd,GAEJiN,GAQAZ,EAEA9G,EASA8wD,CApBJ50D,GAAKxB,GAAGugB,WAAWtgB,KAAKC,KAAM8B,EAAIjC,GAC9BiN,EAAQ1L,EAAEpB,KAAKH,QAAQkwD,eAAev9C,SAAS,QAAQw9C,YACvDlhB,OAAQhtC,EACRouD,kBAAkB,EAClBp8C,KAAM3R,EAAMnC,KAAKm2D,MAAOn2D,MACxB4+C,SAAUz8C,EAAMnC,KAAKo2D,UAAWp2D,MAChCsU,MAAOnS,EAAMnC,KAAK0lD,OAAQ1lD,QAC3B40B,KAAK,cACR9yB,EAAG6X,MAAMxX,EAAMnC,KAAKq2D,QAASr2D,OAAOgX,QAAQ7U,EAAMnC,KAAK6lD,SAAU7lD,OAC7DkM,EAASlM,KAAKswD,QAAUzwD,EAAQqM,OACpClM,KAAK6gD,OAAS/zC,EACV1H,EAAc,GAAIS,GAAOywD,iBACzB7zD,SAAU,GAAIF,IACVE,SAAUE,EAAYE,eACtByQ,MAAOpH,EAAOrM,QAAQqG,SAASd,cAEnChF,QAASyF,EAAO0wD,mBAChBC,gBAAgB,IAEpBhxD,EAAa,oBAAqBJ,GAC9B8wD,EAAS90D,EAAE,iCAAqCgE,EAAYvF,QAAQ4C,SAASD,UAAY,UAC7F0zD,EAAO1jD,SAAS1F,EAAMpB,SAClBQ,EAAOc,SACPd,EAAOc,QAAQimD,kBAAkBiD,IAGzCppD,MAAO,WACH,MAAO9M,MAAK6gD,QAEhBuV,UAAWh1D,EAAEqf,KACb01C,MAAO,WACHn2D,KAAK6gD,OAAOhhD,QAAQivC,OAAOjiC,SAAS0oD,IAExC7P,OAAQ,WACJ1lD,KAAK6gD,OAAOhhD,QAAQivC,OAAOp0B,YAAY66C,IAE3C1P,SAAU,SAAU/2C,GAAV,GACF1M,GAAO5C,EAAM4C,KACb8d,EAAMpR,EAAE4I,OACRwI,IAAO9d,EAAKkX,MAAQxK,EAAE2K,OACtBzZ,KAAK6gD,OAAO/sC,OACLoM,GAAO9d,EAAK6jD,KACnBjmD,KAAK6gD,OAAOvsC,SAGpB+hD,QAAS,SAAUvnD,GACf,GAAIglD,GAAS1yD,EAAE0N,EAAE8K,QAAQrN,QAAQ,UAC5BunD,GAAOvyB,SAAS,qBACjBvhC,KAAK8M,QAAQm/B,UAGrBz/B,OAAQ,SAAU1K,GACd,GAAIgL,GAAQ9M,KAAK8M,OACbA,GAAMJ,SAA2C,SAAhCI,EAAMJ,QAAQ+F,IAAI,YACnC3F,EAAMwH,QAEVxS,EAAG4Y,YAAY,kBAEnBjJ,QAAS,WACLzR,KAAK6gD,OAAOpvC,aAGhBglD,EAAkBR,EAAUt2D,QAC5BC,KAAM,SAAUC,GACZG,KAAK02D,KAAO,EACZ12D,KAAK2K,KAAO,EACZsrD,EAAUn2D,GAAGF,KAAKG,KAAKC,KAAMoB,EAAEzB,OAAOE,GAClCO,QAASw1D,EACT7F,cAAe,2BAAmCpb,MAAM30C,KAAK02D,KAAO12D,KAAK2K,KAAO,GAAG0J,KAAK,+CAAmD,yCAGnJ+hD,UAAW,WAOP,QAASO,GAAkB7nD,GACvB,GAAIsD,GAAIhR,EAAEO,OACV,QACI04C,IAAK1pC,KAAKimD,OAAO9nD,EAAE+nD,QAAUzkD,EAAE+L,YAAcnO,EAAMoqB,KAAO08B,GAAc,EACxEC,IAAKpmD,KAAKimD,OAAO9nD,EAAEkoD,QAAU5kD,EAAE6kD,aAAejnD,EAAMoH,MAAQ8/C,GAAa,GAVjF,GAA6PA,GAAWJ,EAApQ9qD,EAAOhM,KAAM0L,EAAUM,EAAK60C,OAAOn1C,QAAS4uC,EAAQ5uC,EAAQiB,KAAK,cAAewqD,EAAY7c,EAAMU,GAAG,GAAIoc,EAAW9c,EAAMU,GAAGV,EAAMz5C,OAAS,GAAImP,EAAQxQ,EAAM63D,UAAUF,GAAY11B,EAAMjiC,EAAM63D,UAAUD,GAAWV,EAAO1qD,EAAK0qD,KAAM/rD,EAAOqB,EAAKrB,IACvPe,GAAQiB,KAAK,KAAK+yC,UAAU9yC,KAAK,eAAgB,MACjD60B,EAAIrqB,MAAQggD,EAAS,GAAGE,YACxB71B,EAAIrH,KAAOg9B,EAAS,GAAG/8B,aACvB68B,GAAaz1B,EAAIrqB,KAAOpH,EAAMoH,MAAQs/C,EACtCI,GAAcr1B,EAAIrH,IAAMpqB,EAAMoqB,KAAOzvB,EAQrCe,EAAQ6rD,YAAY5hD,GAAIK,GAAG,YAAa,SAAUlH,GAC9C9C,EAAKwrD,cAAcb,EAAkB7nD,MACtCkH,GAAG,aAAc,WAChBhK,EAAKwrD,kBACNxhD,GAAG,OAAQ,SAAUlH,GACpBA,EAAEiJ,gBACF,IAAIhB,GAAQ0+C,EAAW3mD,GAAG,EAC1B9C,GAAKyrD,MAAMd,EAAkB5/C,EAAM5D,cAG3CukD,OAAQ,SAAU11B,GACd,MAAOA,IAAQA,EAAKqY,IAAM,GAAKrY,EAAK+0B,IAAM,GAAK/0B,EAAKqY,KAAOr6C,KAAK2K,MAAQq3B,EAAK+0B,KAAO/2D,KAAK02D,MAE7Fe,MAAO,SAAUz1B,GACThiC,KAAK03D,OAAO11B,KACZhiC,KAAKswD,QAAQ53C,KAAK,eACd/N,KAAMq3B,EAAKqY,IACX3vC,QAASs3B,EAAK+0B,MAElB/2D,KAAK6gD,OAAOvsC,UAGpBkjD,cAAe,SAAUx1B,GAAV,GACPt2B,GAAU1L,KAAK6gD,OAAOn1C,QACtBisD,EAASjsD,EAAQiB,KAAK,aACtB2tC,EAAQ5uC,EAAQiB,KAAK,cACrB+pD,EAAO12D,KAAK02D,KACZxwD,EAAWlG,KAAKswD,QAAQzwD,QAAQqG,QAChClG,MAAK03D,OAAO11B,IACZ21B,EAAOj7C,KAAKld,EAAM6D,OAAO6C,EAASuC,gBAAiBu5B,EAAKqY,IAAKrY,EAAK+0B,MAClEzc,EAAM9a,KAAK,SAAUl8B,GACjBlC,EAAEpB,MAAM6gB,YAAY20C,EAAelyD,EAAIozD,EAAO10B,EAAK+0B,KAAOzzD,EAAIozD,EAAO10B,EAAKqY,SAG9Esd,EAAOj7C,KAAKxW,EAASrB,aACrBy1C,EAAM5/B,YAAY86C,KAG1B3P,SAAU,SAAU/2C,GAAV,GAKF1M,GACA8d,EACAo6B,EACApjC,EACA0gD,EACAC,EACAtnB,EAcAunB,CAxBJ7B,GAAUn2D,GAAG+lD,SAAS9lD,KAAKC,KAAM8O,GAC5B9O,KAAK6gD,OAAO8E,YAGbvjD,EAAO5C,EAAM4C,KACb8d,EAAMpR,EAAE4I,QACR4iC,EAAQt6C,KAAK6gD,OAAOn1C,QAAQiB,KAAK,cACjCuK,EAAQvG,KAAKF,IAAI6pC,EAAM3c,OAAO,qBAAqB0B,OAAO+E,QAAS,GACnEwzB,EAAejnD,KAAKimD,MAAM1/C,EAAQlX,KAAK02D,MACvCmB,EAAkB3gD,EAAQlX,KAAK02D,KAC/BnmB,GAAU,EACVrwB,GAAO9d,EAAKkX,MAASxK,EAAE2K,OAGhByG,GAAO9d,EAAKiX,IACnBk3B,GAAU,EACVqnB,KACO13C,GAAO9d,EAAK6V,OACnBs4B,GAAU,EACVsnB,KACO33C,GAAO9d,EAAK4V,OACnBu4B,GAAU,EACVsnB,MAVAtnB,GAAU,EACVqnB,KAWAE,GACAzd,IAAK1pC,KAAKF,IAAI,EAAGE,KAAKH,IAAIxQ,KAAK2K,KAAMitD,EAAe,IACpDb,IAAKpmD,KAAKF,IAAI,EAAGE,KAAKH,IAAIxQ,KAAK02D,KAAMmB,EAAkB,KAEvD33C,GAAO9d,EAAKi+C,MACZrgD,KAAKy3D,MAAMK,GAEX93D,KAAKw3D,cAAcM,GAEnBvnB,IACAzhC,EAAEiJ,iBACFjJ,EAAE8hD,8BAGVuF,MAAO,WACH,GAAIjwD,GAAWlG,KAAKswD,QAAQzwD,QAAQqG,QACpC+vD,GAAUn2D,GAAGq2D,MAAMp2D,KAAKC,MACxBA,KAAK8M,QAAQpB,QAAQiB,KAAK,aAAa+P,KAAKxW,EAASrB,aAAa48B,MAAM90B,KAAK,cAAc+N,YAAY86C,IAE3G9P,OAAQ,WACJuQ,EAAUn2D,GAAG4lD,OAAO3lD,KAAKC,MACzBA,KAAK8M,QAAQpB,QAAQyK,IAAI,IAAMR,MAGnCoiD,EAAmBrsB,EAAQ/rC,QAC3B+Y,KAAM,WAEF,IAFE,GACyDs/C,GAAW3d,EAAK4d,EAUlE30D,EAVL6T,EAAQnX,KAAK4rC,WAAU,GAAO0R,EAAKnmC,EAAM6H,aACtB,MAAhB7S,EAAI/I,KAAKk6C,IACZA,EAAKA,EAAGxoB,UAEZ,KAAI90B,KAAK2a,eAAgB9U,EAAO+U,WAAWivB,gBAAgByT,GAA3D,CAMA,IAHAjD,EAAMiD,EAAGxoB,WACTkjC,EAAY3d,EAAI95B,SAAS1f,OACzBo3D,EAAS5d,EAAIhlB,WAAU,GACd/xB,EAAI,EAAGA,EAAI+2C,EAAIC,MAAMz5C,OAAQyC,IAClC20D,EAAO3d,MAAMh3C,GAAGoL,UAAY7I,EAAOnE,qBAEV,WAAzB1B,KAAKH,QAAQi7B,SACb3uB,EAAIY,aAAakrD,EAAQ5d,GAEzBluC,EAAI2D,YAAYmoD,EAAQ5d,GAE5Br6C,KAAK6rC,aAAa10B,OAGtB+gD,EAAsBxsB,EAAQ/rC,QAC9B+Y,KAAM,WACF,GAAgHy/C,GAAa70D,EAAsBiqC,EAAM6qB,EAArJjhD,EAAQnX,KAAK4rC,WAAU,GAAO0R,EAAKnxC,EAAII,QAAQ4K,EAAM6H,aAAc,MAAOswB,EAAQnjC,EAAII,QAAQ+wC,EAAI,SAA0B3yC,EAAO2kC,EAAM3kC,KAAqBmwB,EAAW96B,KAAKH,QAAQi7B,QAC1L,KAAI96B,KAAK2a,eAAgB9U,EAAO+U,WAAWivB,gBAAgByT,GAA3D,CAIA,IADA6a,EAAchsD,EAAIqoB,cAAc8oB,GAAI,GAC/Bh6C,EAAI,EAAGA,EAAIqH,EAAK9J,OAAQyC,IACzBiqC,EAAO5iC,EAAKrH,GAAGg3C,MAAM6d,GACrBC,EAAU7qB,EAAKlY,YACf+iC,EAAQ1pD,UAAY7I,EAAOnE,sBACX,UAAZo5B,EACA3uB,EAAIY,aAAaqrD,EAAS7qB,GAE1BphC,EAAI2D,YAAYsoD,EAAS7qB,EAGjCvtC,MAAK6rC,aAAa10B,OAGtBkhD,EAAmB3sB,EAAQ/rC,QAC3B+Y,KAAM,WAAA,GASE42B,GACAqkB,EAQSrwD,EAjBT6T,EAAQnX,KAAK4rC,YACbjhC,EAAO0S,EAAW8sB,OAAOhzB,EAAO,SAAUmN,GAC1C,MAAOljB,GAAEkjB,GAAM/X,QAAQ,MAAM,KAE7B8tC,EAAM1vC,EAAK,EACf,KAAI3K,KAAK2a,eAAgB9U,EAAO+U,WAAWivB,gBAAgBwQ,GAA3D,CAKA,GAFI/K,EAAQnjC,EAAII,QAAQ8tC,EAAK,SAEzB/K,EAAM3kC,KAAK9J,QAAU8J,EAAK9J,OAC1B8yD,EAAexnD,EAAIqL,KAAK83B,GACnBqkB,IAAgBxnD,EAAI2rB,cAAc67B,KACnCA,EAAexnD,EAAIsY,KAAK6qB,IAE5BnjC,EAAI0E,OAAOy+B,OAEX,KAAShsC,EAAI,EAAGA,EAAIqH,EAAK9J,OAAQyC,IAC7B+2C,EAAM1vC,EAAKrH,GACX6I,EAAI8uB,mBAAmBof,GACvBsZ,EAAexnD,EAAIqL,KAAK6iC,IAAQluC,EAAIsY,KAAK41B,GACzCsZ,EAAeA,EAAarZ,MAAM,GAClCnuC,EAAI0E,OAAOwpC,EAGfsZ,KACAx8C,EAAMiB,SAASu7C,EAAc,GAC7Bx8C,EAAMkB,UAAS,GACfrY,KAAKkM,OAAOoM,YAAYnB,QAIhCmhD,EAAsB5sB,EAAQ/rC,QAC9B+Y,KAAM,WACF,GAA8Mi7C,GAAcrwD,EAAxN6T,EAAQnX,KAAK4rC,YAAa0R,EAAKnxC,EAAII,QAAQ4K,EAAM6H,aAAc,MAAOswB,EAAQnjC,EAAII,QAAQ+wC,EAAI,SAAU3yC,EAAO2kC,EAAM3kC,KAAMwtD,EAAchsD,EAAIqoB,cAAc8oB,GAAI,GAAOib,EAAc5tD,EAAK,GAAG2vC,MAAMz5C,MACtM,KAAIb,KAAK2a,eAAgB9U,EAAO+U,WAAWivB,gBAAgByT,GAA3D,CAGA,GAAmB,GAAfib,EACA5E,EAAexnD,EAAIqL,KAAK83B,GACnBqkB,IAAgBxnD,EAAI2rB,cAAc67B,KACnCA,EAAexnD,EAAIsY,KAAK6qB,IAE5BnjC,EAAI0E,OAAOy+B,OAIX,KAFAnjC,EAAI8uB,mBAAmBqiB,GACvBqW,EAAexnD,EAAIqL,KAAK8lC,IAAOnxC,EAAIsY,KAAK64B,GACnCh6C,EAAI,EAAGA,EAAIqH,EAAK9J,OAAQyC,IACzB6I,EAAI0E,OAAOlG,EAAKrH,GAAGg3C,MAAM6d,GAG7BxE,KACAx8C,EAAMiB,SAASu7C,EAAc,GAC7Bx8C,EAAMkB,UAAS,GACfrY,KAAKkM,OAAOoM,YAAYnB,QAIhCqhD,EAAwBl3D,EAAK3B,QAC7BS,QAAS,SAAUP,GAEf,MADAA,GAAUF,EAAOE,EAASG,KAAKH,SACT,UAAlBA,EAAQo9C,OACY,OAAhBp9C,EAAQiM,KACD,GAAIusD,GAAiBx4D,GAErB,GAAIy4D,GAAoBz4D,GAGf,OAAhBA,EAAQiM,KACD,GAAIisD,GAAiBl4D,GAErB,GAAIq4D,GAAoBr4D,IAI3CwgB,WAAY,SAAUve,EAAIjC,GACtByB,EAAKxB,GAAGugB,WAAWtgB,KAAKC,KAAM8B,EAAIjC,GAClCiC,EAAG+K,SAAS,qBAEhBL,OAAQ,SAAU1K,EAAI8e,GAClB,GAAInD,IAAek4C,EAAkBl4C,YAAYmD,EACjD9e,GAAG+e,YAAY,mBAAoBpD,KAG3C9d,GAAOH,EAAMsC,GAAGoK,QACZ+pD,UAAWA,EACXL,aAAcA,EACda,gBAAiBA,EACjB+B,sBAAuBA,EACvBT,iBAAkBA,EAClBG,oBAAqBA,EACrBG,iBAAkBA,EAClBC,oBAAqBA,IAEzB9yD,EAAa,cAAe,GAAIixD,IAC5Bh0D,SAAU,GAAIF,IACVE,SAAUE,EAAYE,eACtBiK,OAAO,EACPwG,MAAO,oBAGf9N,EAAa,gBAAiB,GAAIgzD,IAC9B1sD,KAAM,SACNgvB,SAAU,SACVr4B,SAAU,GAAIF,IACVE,SAAUE,EAAYE,eACtByQ,MAAO,8BAGf9N,EAAa,iBAAkB,GAAIgzD,IAC/B1sD,KAAM,SACNrJ,SAAU,GAAIF,IACVE,SAAUE,EAAYE,eACtByQ,MAAO,+BAGf9N,EAAa,cAAe,GAAIgzD,IAC5B1sD,KAAM,MACNgvB,SAAU,SACVr4B,SAAU,GAAIF,IACVE,SAAUE,EAAYE,eACtByQ,MAAO,qBAGf9N,EAAa,cAAe,GAAIgzD,IAC5B1sD,KAAM,MACNrJ,SAAU,GAAIF,IACVE,SAAUE,EAAYE,eACtByQ,MAAO,qBAGf9N,EAAa,YAAa,GAAIgzD,IAC1B1sD,KAAM,MACNmxC,OAAQ,SACRx6C,SAAU,GAAIF,IACVE,SAAUE,EAAYE,eACtByQ,MAAO,kBAGf9N,EAAa,eAAgB,GAAIgzD,IAC7B1sD,KAAM,SACNmxC,OAAQ,SACRx6C,SAAU,GAAIF,IACVE,SAAUE,EAAYE,eACtByQ,MAAO,sBAGjB3R,OAAOnC,MAAMijB,SACC,kBAAVljB,SAAwBA,OAAOyB,IAAMzB,OAAS,SAAU0B,EAAIC,EAAIC,IACrEA,GAAMD,OAEV,SAAU5B,EAAGC,QACVA,OAAO,iBAAkB,eAAgBD,IAC3C,YACG,SAAU8B,EAAGC,GAAb,GACO7B,GAAQmC,OAAOnC,MAAOG,EAASyB,EAAEzB,OAAQwC,EAAQf,EAAEe,MAAO0D,EAASrG,EAAMsC,GAAGoK,OAAQvJ,EAAckD,EAAOlD,YAAa+oC,EAAU7lC,EAAO6lC,QAASpqC,EAAOuE,EAAOvE,KAAMkE,EAAe7C,EAAY6C,aAAcjD,EAAesD,EAAOtD,aAAck2D,IAEzO/7C,KAAM,OACN/Q,MAAO,SAGP+Q,KAAM,MACN/Q,MAAO,QAGP+Q,KAAM,MACN/Q,MAAO,QAGP+Q,KAAM,OACN/Q,MAAO,SAGP+Q,KAAM,aACN/Q,MAAO,QAGf+sD,EAAkBhtB,EAAQ/rC,QAC1BC,KAAM,SAAUC,GACZ,GAAIqb,GAAMlb,IACVkb,GAAIrb,QAAUA,EACd6rC,EAAQ5rC,GAAGF,KAAKG,KAAKmb,EAAKrb,GAC1Bqb,EAAIwa,WAAa,KACjBxa,EAAIy9C,WAAa94D,EAAQ84D,YAE7BjgD,KAAM,WAAA,GACEwC,GAAMlb,KACNmX,EAAQnX,KAAK4rC,WAAU,EAC3B1wB,GAAI09C,cACJ19C,EAAI2wB,aAAa10B,IAErByhD,YAAa,WACT54D,KAAK64D,eAAermD,SAAS,QAAQsmD,SAASjoD,UAElDgoD,aAAc,WAAA,GACN39C,GAAMlb,KACN+4D,EAAkB79C,EAAIhP,OAAOrM,QAAQgL,SACrCmuD,EAAO53D,EAAE,UAAUwL,MACnBqwC,OAAQ8b,GAAmBA,EAAgB72C,UAAY,GACvDguB,OAAQ,QAOZ,OALA8oB,GAAK7oD,QACD+K,EAAI+9C,aACJ/9C,EAAIg+C,kBACJh+C,EAAIi+C,kBAEDH,GAEXC,WAAY,WACR,GAAI/sD,GAASlM,KAAKkM,MAClB,OAAO9K,GAAE,WAAWwL,MAChBjB,MAAOO,EAAOyI,eACdvR,KAAM,QACN0I,KAAM,YAGdotD,gBAAiB,WACb,GAAIh+C,GAAMlb,IACV,OAAOoB,GAAE,WAAWwL,MAChBjB,MAAOuP,EAAIy9C,WACXv1D,KAAM,aACN0I,KAAM,YAGdqtD,cAAe,WAAA,GACPjtD,GAASlM,KAAKkM,OACd6sD,EAAkB7sD,EAAOrM,QAAQgL,SACjCoX,EAAW82C,GAAmBA,EAAgB92C,UAAY/V,EAAOR,QAAQkB,KAAK,OAAS,QAC3F,OAAOxL,GAAE,WAAWwL,MAChBjB,MAAOsW,EACP7e,KAAM,WACN0I,KAAM,cAIdstD,EAAe93D,EAAK3B,QACpBC,KAAM,SAAUC,GACZ,GAAI6F,GAAO1F,IACXsB,GAAKxB,GAAGF,KAAKG,KAAK2F,EAAMlG,EAAMsB,cAAe4E,EAAK7F,QAASA,IAC3D6F,EAAKoG,KAAO,kBAEhBjM,SACI8iB,MAAO81C,EACP1vD,MAAO,KAEX3I,QAAS,SAAUshB,GACf,GAAI/V,GAAQ+V,EAAK/V,KACjB,OAAO,IAAI9F,GAAO6yD,iBACdvhD,MAAOuK,EAAKvK,MACZwhD,WAAYhtD,EAAMgtD,cAG1Bt4C,WAAY,SAAUve,EAAIwqC,GAAd,GACJ5mC,GAAO1F,KACPkM,EAASogC,EAAYpgC,OACrBrM,EAAU6F,EAAK7F,QACf4F,EAAW5F,EAAQuD,KACnBi2D,EAAgBl3D,EAAMuD,EAAK2zD,cAAe3zD,GAC1C6mC,EAAa1sC,EAAQ8iB,OAASzW,EAAOrM,QAAQ4F,EACjD8mC,GAAW+sB,SACP58C,KAAMxQ,EAAOrM,QAAQqG,SAAST,GAC9BkG,MAAO,KAEXjG,EAAKwG,OAASA,EACdpK,EAAGiH,MAAMlJ,EAAQkJ,OACjBjH,EAAGgqD,gBACCpf,cAAe,OACfC,eAAgB,QAChBJ,WAAYA,EACZsd,UAAU,EACV7pC,OAAQq5C,EACRvlD,KAAM,SAAUhF,GACZ,GAAI8xC,GAAS9xC,EAAE8xC,MACfA,GAAOj+B,QAAQ,GAAG7b,MAAMwwC,QAAU,OAClCsJ,EAAOlvC,OAAO,SAElBk7B,gBAAgB,EAChBnqC,SAAUjD,EAAMiD,SAAS,2FAE7BX,EAAG+K,SAAS,eAAeN,QAAQ,aAAamO,YAAY,KAAOjV,GAAUkH,KAAK,KAAK+yC,UAAU9yC,KAAK,eAAgB,OAE1HysD,cAAe,SAAUvqD,GAAV,GACP8xC,GAAS9xC,EAAE8xC,OACXmL,EAAWnL,EAAOmL,WAClBpgD,EAAQogD,GAAYA,EAASpgD,KACjC3L,MAAKy3D,MAAM9rD,GACXi1C,EAAOj1C,MAAM,KAEjB8rD,MAAO,SAAU9rD,GACTA,GACArK,EAAKoX,KAAK1Y,KAAKkM,OAAQlM,KAAKH,QAAQuD,MAAQu1D,WAAYhtD,KAGhE8F,QAAS,WACLzR,KAAKosD,UAAY,OAGzBzsD,GAAOkG,GACHuzD,aAAcA,EACdV,gBAAiBA,IAErBlzD,EAAa,WAAY,GAAI4zD,IACzB32D,SAAU,GAAIF,IACVE,SAAUE,EAAYK,qBACtBsQ,MAAO,kBAGjB3R,OAAOnC,MAAMijB,SACC,kBAAVljB,SAAwBA,OAAOyB,IAAMzB,OAAS,SAAU0B,EAAIC,EAAIC,IACrEA,GAAMD,OAEV,SAAU5B,EAAGC,QACVA,OAAO,iBAAkB,eAAgBD,IAC3C,YACG,SAAU8B,EAAGC,GAAb,GACO7B,GAAQmC,OAAOnC,MAAOG,EAASyB,EAAEzB,OAAQwC,EAAQf,EAAEe,MAAO0D,EAASrG,EAAMsC,GAAGoK,OAAQvJ,EAAckD,EAAOlD,YAAa+oC,EAAU7lC,EAAO6lC,QAASpqC,EAAOuE,EAAOvE,KAAMkE,EAAe7C,EAAY6C,aAAcjD,EAAesD,EAAOtD,aAAcg3D,EAAiB,+MAClQC,EAAgB9tB,EAAQ/rC,QACxB+Y,KAAM,YACD1Y,KAAKkM,OAAO+Q,eAAiBjd,KAAKy5D,2BAA2B/tD,QAAQiO,SAE1E8/C,wBAAyB,WAAA,GACjBv+C,GAAMlb,KACNkM,EAASgP,EAAIhP,OACbwtD,EAAgBxtD,EAAOrM,QAAQ,UAC/B85D,EAASv4D,EAAE,wDAAwDw4D,aACnEC,QAAS13D,EAAM+Y,EAAI4+C,iBAAkB5+C,GACrCqG,SAAUpf,EAAM+Y,EAAI6+C,kBAAmB7+C,GACvCmsB,OAAQllC,EAAM+Y,EAAI8+C,gBAAiB9+C,GACnC++C,MAAO93D,EAAM+Y,EAAIg/C,eAAgBh/C,GACjCi/C,SAAUh4D,EAAM+Y,EAAIk/C,kBAAmBl/C,GACvCm/C,cAAc,EACdC,UAAU,EACVv6C,OACIw6C,QAASb,EAAcc,SACvBC,YAAY,EACZC,UAAW,QAEfC,YACIC,kBAAmBlB,EAAckB,kBACjCC,YAAanB,EAAcmB,eAEhCC,gBAEH,OADA5uD,GAAO+Q,cAAgB08C,EAChBA,GAEXS,kBAAmB,SAAUtc,GACzB99C,KAAK+6D,SAAS,WAAYjd,GAC1BA,EAAG8C,OAAOoa,gBACVh7D,KAAKi7D,yBAETnB,iBAAkB,SAAUhc,GACxB99C,KAAKkM,OAAOP,MAAMmyC,EAAGod,SAASx9C,KAAKjP,QAAQ,cAAe,KAC1DzO,KAAK+6D,SAAS,UAAWjd,IAE7Bic,kBAAmB,SAAUjc,GACzB99C,KAAK+6D,SAAS,WAAYjd,IAE9Bkc,gBAAiB,SAAUlc,GACvB99C,KAAK+6D,SAAS,SAAUjd,GACnBA,EAAGxJ,MAAM,GAAG6mB,kBACbn7D,KAAKo7D,uBAGblB,eAAgB,SAAUpc,GACtB99C,KAAK+6D,SAAS,QAASjd,IAE3Bid,SAAU,SAAUM,EAAWC,GAArB,GACFpvD,GAASlM,KAAKkM,OACdwtD,EAAgBxtD,EAAOrM,QAAQ,SACK,mBAA7B65D,GAAc2B,IACrB3B,EAAc2B,GAAWt7D,KAAKmM,EAAQovD,IAG9CF,oBAAqB,WACjB,GAAI39B,GAAWz9B,KAAKkM,OAAO2H,IACvBhO,GAAOuG,IAAIoO,GAAGijB,EAAU,QACxBz9B,KAAKu7D,eAAiBv7D,KAAKw7D,WAAax7D,KAAKkM,OAAOQ,QAAQC,KAAK,UAAU4X,SAAS9R,KAAMqoB,SAAU,aAAc3qB,OAAOopD,GAEzHv5D,KAAKw7D,WAAap6D,EAAEq8B,GAAUttB,OAAOopD,GAEzC/5D,EAAMsC,GAAGyf,SAASvhB,KAAKw7D,YAAY,IAEvCP,sBAAuB,WACnBz7D,EAAMsC,GAAGyf,SAASvhB,KAAKw7D,YAAY,GACnCp6D,EAAEpB,KAAKu7D,gBAAgB9oD,KAAMqoB,SAAU,WAChC96B,MAAKw7D,iBACLx7D,MAAKu7D,iBAGpB57D,GAAOkG,GAAU2zD,cAAeA,IAChCh0D,EAAa,SAAU,GAAIlE,IACvBlB,QAASo5D,EACT/2D,SAAU,GAAIF,IACVE,SAAUE,EAAYE,eACtByQ,MAAO,eAGjB3R,OAAOnC,MAAMijB,SACC,kBAAVljB,SAAwBA,OAAOyB,IAAMzB,OAAS,SAAU0B,EAAIC,EAAIC,IACrEA,GAAMD,OAEV,SAAU5B,EAAGC,QACVA,OAAO,kCAAmC,eAAgBD,IAC5D,YACG,SAAUE,EAAO6B,GAcd,QAASoyD,GAAU5zD,GAAnB,GACQ8L,GAAQ9L,EAAQ8L,MAChB8vD,EAAa57D,EAAQ2Q,IACrBkrD,EAAa77D,EAAQ4Q,GACzB,OAAOA,GAAID,EAAIwpC,EAAWruC,GAAQquC,EAAW0hB,IAAc1hB,EAAWyhB,IAE1E,QAASE,GAAkBjwD,GACvB,MAAIA,KAAYtK,EAAEsK,GAAS8O,GAAG,SAAW9O,EAAQkwD,aAAelwD,EAAQmwD,aAC7Dr8D,EAAMwC,QAAQioD,YAElB,EAEX,QAAS6R,GAAyBnwD,EAAOowD,GACrC,MAAIC,GAAcrwD,GACPquC,EAAWruC,GAEXquC,EAAWruC,GAASowD,EAAQ,IAG3C,QAASC,GAAcrwD,GACnB,aAAcA,KAAUswD,GAAUC,EAA4BzjD,KAAK9M,GAEvE,QAASwwD,GAASxwD,GACd,aAAcA,KAAUswD,GAAUG,EAAuB3jD,KAAK9M,GAElE,QAAS0wD,GAAc1wD,GACnB,MAAOquC,GAAWruC,GAAS2wD,EAE/B,QAASC,GAAS5wD,GACd,MAAOquC,GAAWruC,GAAS6wD,EA3ClC,GACOC,GAAS96D,OACT+6D,EAAOD,EAAO9rD,KACdH,EAAMksD,EAAKlsD,IACXC,EAAMisD,EAAKjsD,IACXupC,EAAayiB,EAAOziB,WACpB54C,EAAI5B,EAAMijB,OACV9iB,EAASyB,EAAEzB,OACXkG,EAASrG,EAAMsC,GAAGoK,OAClBowD,EAAa,IACbE,EAAQ,KACRN,EAA8B,mBAC9BE,EAAyB,oBACzBH,EAAS,SAgCTU,GACAlJ,UAAWA,EACXkI,kBAAmBA,EACnBG,yBAA0BA,EAC1BE,cAAeA,EACfG,SAAUA,EACVE,cAAeA,EACfE,SAAUA,EAEd58D,GAAOkG,GAAU82D,cAAeA,KAClCh7D,OAAOnC,QACO,kBAAVD,SAAwBA,OAAOyB,IAAMzB,OAAS,SAAU0B,EAAIC,EAAIC,IACrEA,GAAMD,OAEV,SAAU5B,EAAGC,QACVA,OAAO,0CACH,cACA,kBACA,kCACDD,IACL,YACG,SAAUE,EAAO6B,GAAjB,GACOD,GAAI5B,EAAMijB,OACV9iB,EAASyB,EAAEzB,OACX8gB,EAAOrf,EAAEqf,KACTte,EAAQf,EAAEe,MACV0D,EAASrG,EAAMsC,GAAGoK,OAClBtK,EAAQpC,EAAMoC,MACdg7D,EAAW,UACXC,EAAa,YACbC,EAAc,aACdC,EAAc,aACdC,EAAa,YACbC,EAAW,UACXC,EAAQ,IACRC,EAAM,IACNC,EAAa,cACbC,EAAQ,QACRC,EAAuB17D,EAAMjC,QAC7BC,KAAM,SAAU8L,EAAS7L,GACrB,GAAImM,GAAOhM,IACXgM,GAAKnM,QAAUF,KAAWqM,EAAKnM,QAASA,GACxCmM,EAAKnM,QAAQ2D,KAAOpC,EAAEywC,QAAQ7lC,EAAKnM,QAAQ2D,MAAQwI,EAAKnM,QAAQ2D,MAAQwI,EAAKnM,QAAQ2D,MACjFpC,EAAEsK,GAAS8O,GAAG6iD,KACdrxD,EAAKN,QAAUA,EACfM,EAAKuxD,yBAGb9rD,QAAS,WAAA,GACDzF,GAAOhM,KACPw9D,EAAiBxxD,EAAKnM,QAAQ29D,cAC9BxxD,GAAKN,UACLtK,EAAE4K,EAAKN,SAASyK,IAAIqnD,GACpBxxD,EAAKN,QAAU,MAEnBtK,EAAE4K,EAAKnM,QAAQ49D,aAAatnD,IAAIymD,EAAWY,GAC3CxxD,EAAK0xD,wBAET79D,SACI2D,QACAgN,IAAK,EACLitD,YAAa,KACbD,eAAgB,GAChBG,KAAK,EACLC,QACIC,cAAe,GACf70D,OAAQ,EACRD,MAAO,EACPwzB,cACA95B,SAAU,KAGlB86D,qBAAsB,WAAA,GACdvxD,GAAOhM,KACPH,EAAUmM,EAAKnM,OACnBuB,GAAE4K,EAAKN,SAASsK,GAAGgnD,EAAan9D,EAAQ29D,eAAgB39D,EAAQ2D,KAAK6Q,KAAK6oD,GAAQ/6D,EAAM6J,EAAK8xD,4BAA6B9xD,KAE9H+xD,mBAAoB,WAAA,GACZ/xD,GAAOhM,KACP0P,EAAY1D,EAAK0B,UACrB,SAAIgC,KACSA,EAAUsuD,UAI3B/uD,OAAQwR,EACRq9C,4BAA6B,SAAUhvD,GAAV,GACrB9C,GAAOhM,KACPH,EAAUmM,EAAKnM,QACfo+D,EAAgBp+D,EAAQ+9D,OACxBM,EAAe98D,EAAE0N,EAAEmB,eACnBkuD,EAAenyD,EAAKmyD,aACpBN,EAAgBI,EAAcJ,aAC7B7xD,GAAK+xD,wBACDG,EAAa1jD,GAAG4iD,IAAepxD,EAAKoyD,qBAAqBF,EAAcpvD,GACpEqvD,EACIA,EAAavpC,KAAKipC,IAAkBM,EAAavpC,KAAKipC,KAAmBK,EAAa,IACtFlyD,EAAKqyD,iBAAiBH,EAAcpvD,GAGxC9C,EAAKqyD,iBAAiBH,EAAcpvD,GAGpCqvD,GACAnyD,EAAK0xD,yBAKrBU,qBAAsB39C,EACtB49C,iBAAkB,SAAUH,EAAcpvD,GACtC,GAAI9C,GAAOhM,IACO,KAAd8O,EAAEokD,UAGNlnD,EAAKsyD,oBACLtyD,EAAKuyD,wBAAwBL,GAC7BlyD,EAAKwyD,4BACLxyD,EAAKyyD,8BAA8BP,EAAa,IAChDlyD,EAAK0yD,mCACL1yD,EAAK2yD,eAAeT,GACpBlyD,EAAK4yD,oBACL5yD,EAAKmyD,aAAajkD,SAEtBokD,kBAAmB,WAAA,GACXtyD,GAAOhM,KACPH,EAAUmM,EAAKnM,OACnBmM,GAAK0xD,uBACL1xD,EAAKmyD,aAAe/8D,EAAEvB,EAAQ+9D,OAAOn7D,UAAU+P,SAAS3S,EAAQ49D,cAEpEc,wBAAyB99C,EACzB+9C,0BAA2B/9C,EAC3Bg+C,8BAA+B,SAAUP,GACrC,GAAIlyD,GAAOhM,IACXgM,GAAKmyD,aAAavpC,KAAK5oB,EAAKnM,QAAQ+9D,OAAOC,cAAeK,IAE9DQ,iCAAkC,WAAA,GAC1B1yD,GAAOhM,KACPH,EAAUmM,EAAKnM,QACf29D,EAAiB39D,EAAQ29D,eACzBqB,EAAch/D,EAAQ+9D,OAAOrhC,WAAWtC,OACxCkkC,EAAenyD,EAAKmyD,YACxBnyD,GAAKmyD,aAAanoD,GAAG6mD,EAAaW,EAAgB,WAC9CW,EAAaxxD,KAAKwwD,EAAM0B,GAAa3kD,SACtClE,GAAGinD,EAAWO,EAAgB,WAC7BW,EAAaxxD,KAAKwwD,EAAM0B,GAAaxrD,UAG7CurD,kBAAmB,WACf,GAAI5yD,GAAOhM,IACXgM,GAAKmyD,aAAaxxD,KAAKwwD,EAAMnxD,EAAKnM,QAAQ+9D,OAAOrhC,WAAWtC,QAAQ5mB,QAExEqqD,qBAAsB,WAClB,GAAI1xD,GAAOhM,IACPgM,GAAKmyD,eACLnyD,EAAK8yD,oBACL9yD,EAAKmyD,aAAahoD,IAAInK,EAAKnM,QAAQ29D,gBAAgB3sD,SACnD7E,EAAKmyD,aAAe,OAG5BQ,eAAgB,SAAUT,GACtB,GAAIlyD,GAAOhM,IACNgM,GAAKmyD,eAGVnyD,EAAK8yD,oBACL9yD,EAAK0B,WAAa,GAAIlO,GAAMsC,GAAGi9D,UAAUb,GACrCc,iBAAkBhzD,EAAKmyD,aAAa,GACpCnuD,MAAO7N,EAAM6J,EAAKizD,cAAejzD,GACjCiD,OAAQ9M,EAAM6J,EAAKgjD,SAAUhjD,GAC7B4E,UAAWzO,EAAM6J,EAAKkzD,YAAalzD,OAG3C8yD,kBAAmB,WACf,GAAI9yD,GAAOhM,IACPgM,GAAK0B,aACL1B,EAAK0B,WAAW+D,UAChBzF,EAAK0B,WAAa,OAG1BuxD,cAAe,WACXj/D,KAAKm/D,oBAETnQ,SAAU,SAAUlgD,GAChB9O,KAAKo/D,4BAA4BtwD,IAErCswD,4BAA6B3+C,EAC7By+C,YAAa,SAAUpwD,GACnB,GAAI9C,GAAOhM,IACXgM,GAAKiD,OAAOH,GACZ9C,EAAK0xD,uBACL1xD,EAAKqzD,mBAETA,gBAAiB,WACb,GAAIx/D,GAAUG,KAAKH,OACnBuB,GAAEvB,EAAQ49D,aAAatnD,IAAIymD,EAAW/8D,EAAQ29D,iBAElD2B,iBAAkB,WACd,GAAIt/D,GAAUG,KAAKH,OACnBuB,GAAEvB,EAAQ49D,aAAaznD,GAAG4mD,EAAW/8D,EAAQ29D,eAAgB,SAAU1uD,GACnEA,EAAEiJ,oBAGVunD,eAAgB,SAAUxwD,GACtB,GAAIY,GAAY1P,KAAK0N,UACjBgC,IAAaA,EAAU6vD,YACvB7vD,EAAU6vD,WAAW54B,KAAK73B,MAIlC0wD,EAAkB59D,EAAMjC,QACxBwR,OAAQ,SAAUjF,EAAQrM,GAAlB,GACAmM,GAAOhM,KACPy/D,EAAe5/D,EAAQuD,KACvBuS,EAAK9V,EAAQ29D,cACjBp8D,GAAE8K,EAAO2H,MAAMmC,GAAG8mD,EAAcnnD,EAAI0nD,EAAO,SAAUvuD,GAAV,GACnCwgC,GAAQxgC,EAAEmB,cACV+tD,EAAW9xD,EAAOuzD,EACtB3wD,GAAEgM,kBACEkjD,EACIA,EAAStyD,UAAY4jC,GAAU0uB,EAASD,uBACxC/xD,EAAK0zD,iBAAiBxzD,EAAQrM,GAC9BmM,EAAK2zD,cAAczzD,EAAQojC,EAAOzvC,IAGtCmM,EAAK2zD,cAAczzD,EAAQojC,EAAOzvC,KAEvCmW,GAAG+mD,EAAcpnD,EAAI0nD,EAAO,SAAUvuD,GAAV,GACvB8wD,GACA5B,EAAW9xD,EAAOuzD,EACtB3wD,GAAEgM,mBACEkjD,GAAaA,EAASD,sBAAyBC,EAASG,eACxDyB,EAAcx+D,EAAE48D,EAAStyD,SAASmP,QAAQwiD,GAAO,GAC7CuC,IACA5zD,EAAK0zD,iBAAiBxzD,EAAQrM,GAC9BmM,EAAK2zD,cAAczzD,EAAQ0zD,EAAa//D,OAGjDmW,GAAG+mD,EAAcpnD,EAAI,WACpB,GAAIqoD,GAAW9xD,EAAOuzD,EAClBzB,KAAaA,EAASD,sBACtB/xD,EAAK0zD,iBAAiBxzD,EAAQrM,KAEnCmW,GAAGinD,EAAWtnD,EAAI,SAAU7G,GAAV,GAEb8wD,GADA5B,EAAW9xD,EAAOuzD,EAElBzB,IAAYA,EAASD,uBACrB6B,EAAcx+D,EAAE0N,EAAE8K,QAAQiB,QAAQwiD,GAAO,GACrCuC,IACA5B,EAASsB,eAAexwD,GACxB9C,EAAK0zD,iBAAiBxzD,EAAQrM,GAC9BmM,EAAK2zD,cAAczzD,EAAQ0zD,EAAa//D,QAKxDid,QAAS,SAAU5Q,EAAQrM,GACvBuB,EAAE8K,EAAO2H,MAAMsC,IAAItW,EAAQ29D,iBAE/BmC,cAAe,SAAUzzD,EAAQgyD,EAAcr+D,GAAhC,GACP4/D,GAAe5/D,EAAQuD,KACvBy8D,EAAehgE,EAAQiM,IAC3BI,GAAOuzD,GAAgB,GAAII,GAAa3B,GACpCP,IAAKn+D,EAAMwC,QAAQgS,MAAM9H,EAAOR,SAChC+xD,YAAavxD,EAAO2H,QAG5B6rD,iBAAkB,SAAUxzD,EAAQrM,GAChC,GAAI4/D,GAAe5/D,EAAQuD,IACvB8I,GAAOuzD,KACPvzD,EAAOuzD,GAAchuD,UACrBvF,EAAOuzD,GAAgB,QAInCD,GAAgB34B,QAAU,GAAI24B,GAC9BlC,EAAqBnsD,OAAS,SAAUjF,EAAQrM,GAC5C2/D,EAAgB34B,QAAQ11B,OAAOjF,EAAQrM,IAE3Cy9D,EAAqBxgD,QAAU,SAAU5Q,EAAQrM,GAC7C2/D,EAAgB34B,QAAQ/pB,QAAQ5Q,EAAQrM,IAE5CF,EAAOkG,GAAUy3D,qBAAsBA,KACzC37D,OAAOnC,QACO,kBAAVD,SAAwBA,OAAOyB,IAAMzB,OAAS,SAAU0B,EAAIC,EAAIC,IACrEA,GAAMD,OAEV,SAAU5B,EAAGC,QACVA,OAAO,mCACH,cACA,iCACA,0CACDD,IACL,YACG,SAAUE,EAAO6B,GAAjB,GACOo7D,GAAS96D,OACT+6D,EAAOD,EAAO9rD,KACdmvD,EAAMpD,EAAKoD,IACX1+D,EAAI5B,EAAMijB,OACV9iB,EAASyB,EAAEzB,OACXkG,EAASrG,EAAMsC,GAAGoK,OAClBoxD,EAAuBz3D,EAAOy3D,qBAC9BX,EAAgB92D,EAAO82D,cACvBlJ,EAAYkJ,EAAclJ,UAC1BqI,EAA2Ba,EAAcb,yBACzCH,EAAoBgB,EAAchB,kBAClCK,EAAgBW,EAAcX,cAC9BK,EAAgBM,EAAcN,cAC9BE,EAAWI,EAAcJ,SACzB9P,EAAajtD,EAAMktD,YACnB/2C,EAAK,6BACLoqD,EAAsB,yBACtBC,EAAsB,yBACtBC,EAAO,OACPC,EAAQ,QACR3hC,EAAK,KACL4hC,EAAK,KACLC,EAAK,KACLlD,EAAQ,IACRmD,EAAQ,QACRxuD,EAAiByrD,EAAqB39D,QACtCE,SACI2D,MACI+6B,EACA4hC,GAEJ3vD,IAAK,GACLitD,YAAa,KACbD,eAAgB7nD,EAChBgoD,KAAK,EACLC,QACIC,cAAe,SACf90D,MAAO,GACPC,OAAQ,EACRuzB,YACIqhC,OAAQmC,EACR9lC,OAAQ+lC,GAEZv9D,SAAU,qGAA4Gs9D,EAAsB,iBAAwBC,EAAsB,yBAGlM5B,qBAAsB,SAAUkC,EAAQxxD,GAAlB,GACd9C,GAAOhM,KACPH,EAAUmM,EAAKnM,QACf0gE,EAAc1gE,EAAQ+9D,OAAO70D,MAC7By3D,EAAeF,EAAOhpD,SAASF,MAAQvX,EAAQ89D,IAAM,EAAIlR,EAAW6T,IACpEG,EAAgB3xD,EAAEkoD,QAAU51D,EAAEk/D,EAAO,GAAGzrD,eAAeoiD,YAC3D,OAAIwJ,GAAgBD,EAAeD,GAAeE,EAAgBD,EAAeD,GAMrFhC,wBAAyB,SAAU+B,GAAV,GACjBt0D,GAAOhM,KACP0gE,EAAYt/D,EAAE4K,EAAKN,SAAS6U,SAAS2/C,GACrCrgE,EAAUmM,EAAKnM,QACf89D,EAAM99D,EAAQ89D,IACd4C,EAAc1gE,EAAQ+9D,OAAO70D,MAC7B00D,EAAcr8D,EAAEvB,EAAQ49D,aACxBkD,EAAkBlD,EAAYjjD,GAAGylD,GAAQ,EAAIxC,EAAYt/C,YACzDyiD,EAAmBnD,EAAYjjD,GAAGylD,GAAQ,EAAIxC,EAAYxG,aAC1D4J,EAAoBlD,EAAM,EAAIlR,EAAW6T,GACzCQ,EAAiBnD,EAAMhC,EAAkB8B,EAAY,IAAM,CAC/DzxD,GAAKmyD,aAAa1rD,KACd2nB,IAAKsmC,EAAU5lC,WAAWV,IAAMumC,EAChCvpD,KAAMkpD,EAAOxlC,WAAW1jB,KAAOypD,GAAqBD,EAAmBE,GAAkBP,EAAc,EACvGzlC,SAAU,cAGlB0jC,0BAA2B,WAAA,GACnBxyD,GAAOhM,KACP0gE,EAAYt/D,EAAE4K,EAAKN,SAAS6U,SAAS2/C,EACzCl0D,GAAKmyD,aAAa1rD,KACd1J,MAAOiD,EAAKnM,QAAQ+9D,OAAO70D,MAC3BC,OAAQ03D,EAAU13D,YAG1Bo2D,4BAA6B,SAAUtwD,GAAV,GACrB9C,GAAOhM,KACPsgE,EAASl/D,EAAEA,EAAE0N,EAAEmB,eAAe2kB,KAAK5oB,EAAKnM,QAAQ+9D,OAAOC,gBACvDh+D,EAAUmM,EAAKnM,QACf0gE,EAAc1gE,EAAQ+9D,OAAS/9D,EAAQ+9D,OAAO70D,MAAQ,EACtDyH,EAAM3Q,EAAQ2Q,IACdmtD,EAAM99D,EAAQ89D,IACdoD,EAActU,EAAW6T,GACzBU,EAAmBV,EAAOxlC,WAAW1jB,KACrC6pD,EAAsBxU,EAAW6T,EAAO9oD,QACxC2mD,EAAe/8D,EAAE4K,EAAKmyD,cACtBV,EAAcr8D,EAAEvB,EAAQ49D,aACxBmD,EAAmBnD,EAAYjjD,GAAGylD,GAAQ,EAAIxC,EAAYxG,aAC1D6J,EAAiBnD,EAAMhC,EAAkB8B,EAAY,IAAM,EAC3DyD,EAAezN,GACf9nD,MAAOwyD,EAAarjC,WAAW1jB,MAAQwpD,EAAmBE,GAAkBhyD,EAAEqoB,EAAE/mB,MAChFI,IAAKwwD,GAAoBJ,EAAmBE,IAAmBnD,EAAMsD,EAAsB,GAAKzwD,EAChGC,IAAKuwD,EAAmBD,GAAeH,EAAmBE,IAAmBnD,EAAM,EAAIsD,GAAuBV,EAAc/vD,GAEhI2tD,GAAa1rD,KAAM2E,KAAM8pD,KAE7BjyD,OAAQ,SAAUH,GAAV,GAOAqyD,GACAC,EACAC,EARAr1D,EAAOhM,KACPsgE,EAASl/D,EAAEA,EAAE0N,EAAEmB,eAAe2kB,KAAK5oB,EAAKnM,QAAQ+9D,OAAOC,gBACvDh+D,EAAUmM,EAAKnM,QACfyhE,EAAczhE,EAAQ89D,OAAW,EACjCntD,EAAM3Q,EAAQ2Q,IACd+wD,EAAgBD,EAAcxyD,EAAEqoB,EAAE7mB,YAItCtE,GAAKw1D,yBACLx1D,EAAKy1D,2BACLJ,EAAqB5U,EAAW6T,GAChCc,EAA6B3U,EAAW6T,EAAO9oD,QAC/C2pD,EAAW1N,GACP9nD,MAAO01D,EAAqBE,EAC5B/wD,IAAKA,EACLC,IAAK4wD,EAAqBD,EAA6B5wD,IAE3DxE,EAAK01D,cAAcpB,EAAO,GAAIa,GAC9Bn1D,EAAK21D,2BAA2BrB,EAAO,GAAIa,GAC3Cn1D,EAAK41D,uBAAuBtB,EAAOl8B,QAASg9B,EAA4BC,EAAoBA,EAAqBF,IAErHK,uBAAwB,WACpB,GAAI91D,GAAU1L,KAAK0L,OACU,MAAzBA,EAAQ5E,MAAMu5D,KACd30D,EAAQ5E,MAAMu5D,GAAS9D,EAAS9P,EAAWrrD,EAAEsK,OAGrD+1D,yBAA0B,WAAA,GASlBn+D,GARA0I,EAAOhM,KACP0gE,EAAYt/D,EAAE4K,EAAKN,SAAS6U,SAAS2/C,GACrC2B,EAAiBpV,EAAWiU,GAC5Bh2D,EAAUg2D,EAAUngD,SAAS6/C,GAAI7/C,SAASge,GAC1C19B,EAAS6J,EAAQ7J,OACjBihE,EAAuBp3D,EAAQyJ,IAAI,WACnC,MAAOs4C,GAAWrrD,EAAEpB,QAGxB,KAAKsD,EAAI,EAAGA,EAAIzC,EAAQyC,IAEhBoH,EAAQpH,GAAGwD,MAAMu5D,GADjBrE,EAActxD,EAAQpH,GAAGwD,MAAMu5D,IACLhE,EAAcP,EAAyBgG,EAAqBx+D,GAAIu+D,IAEhEtF,EAASuF,EAAqBx+D,KAIpEq+D,2BAA4B,SAAUrB,EAAQa,GAAlB,GAQpB79D,GAPA0I,EAAOhM,KACPm4D,EAAc/2D,EAAEk/D,GAAQl8B,QACxB29B,EAAsB3gE,EAAE4K,EAAKN,SAAS6U,SAAS2/C,GAAO3/C,SAAS6/C,GAAI7/C,SAASvU,EAAKnM,QAAQ2D,KAAK6Q,KAAK6oD,IAAQv/B,OAAO,WAClH,GAAI4P,GAAOvtC,IACX,OAAOoB,GAAEmsC,GAAMnJ,UAAY+zB,GAAe5qB,IAAS+yB,IAEnDz/D,EAASkhE,EAAoBlhE,MAEjC,KAAKyC,EAAI,EAAGA,EAAIzC,EAAQyC,IACpB0I,EAAK01D,cAAcK,EAAoBz+D,GAAI69D,IAGnDO,cAAe,SAAUpB,EAAQa,GAEzBb,EAAOx5D,MAAMu5D,GADbrE,EAAcsE,EAAOx5D,MAAMu5D,IACLhE,EAAcP,EAAyBqF,EAAU1U,EAAWrrD,EAAEpB,KAAK0L,SAAS6U,SAAS2/C,MAErF3D,EAAS4E,IAGvCS,uBAAwB,SAAUzJ,EAAaiJ,EAA4BC,EAAoBW,GAAvE,GAMhB1+D,GALA0I,EAAOhM,KACPiiE,EAAkB7gE,EAAE4K,EAAKN,SAAS6U,SAAS2/C,GAAO3/C,SAAS6/C,GAAI7/C,SAASvU,EAAKnM,QAAQ2D,KAAK6Q,KAAK6oD,IAAQv/B,OAAO,WAC9G,MAAOv8B,GAAEpB,MAAMokC,UAAY+zB,EAAc,IAEzCt3D,EAASohE,EAAgBphE,MAE7B,KAAKyC,EAAI,EAAGA,EAAIzC,EAAQyC,IACpB0I,EAAKk2D,sBAAsBD,EAAgB3+D,GAAI89D,EAA4BC,EAAoBW,IAGvGE,sBAAuB,SAAUC,EAAgBf,EAA4BC,EAAoBW,GAA1E,GACfh2D,GAAOhM,KACPwQ,EAAMxE,EAAKnM,QAAQ2Q,IACnB2wD,EACO1N,GACP9nD,MAAOy1D,EAA6BY,EACpCxxD,IAAKA,EACLC,IAAKqvD,EAAIuB,EAAqBD,EAA6B5wD,IAE/DxE,GAAK01D,cAAcS,EAAgBhB,KAG3CtvD,GAAeV,OAAS,SAAUjF,GAC9BoxD,EAAqBnsD,OAAOjF,GACxB9I,KAAM,iBACN0I,KAAM+F,EACN2rD,eAAgB7nD,KAGxB9D,EAAeiL,QAAU,SAAU5Q,GAC/BoxD,EAAqBxgD,QAAQ5Q,GAAUsxD,eAAgB7nD,KAE3DhW,EAAOkG,GAAUgM,eAAgBA,KACnClQ,OAAOnC,QACO,kBAAVD,SAAwBA,OAAOyB,IAAMzB,OAAS,SAAU0B,EAAIC,EAAIC,IACrEA,GAAMD,OAEV,SAAU5B,EAAGC,QACVA,OAAO,gCACH,cACA,iCACA,0CACDD,IACL,YACG,SAAUE,EAAO6B,GAAjB,GACOq7D,GAAO/6D,OAAOgP,KACdmvD,EAAMpD,EAAKoD,IACX1+D,EAAI5B,EAAMijB,OACV9iB,EAASyB,EAAEzB,OACXkG,EAASrG,EAAMsC,GAAGoK,OAClBoxD,EAAuBz3D,EAAOy3D,qBAC9BX,EAAgB92D,EAAO82D,cACvBhB,EAAoBgB,EAAchB,kBAClClI,EAAYkJ,EAAclJ,UAC1BqI,EAA2Ba,EAAcb,yBACzCE,EAAgBW,EAAcX,cAC9BK,EAAgBM,EAAcN,cAC9BE,EAAWI,EAAcJ,SACzB5P,EAAcntD,EAAMotD,aACpBj3C,EAAK,0BACLoqD,EAAsB,sBACtBqC,EAAqC,8BACrCpC,EAAsB,sBACtBC,EAAO,OACPG,EAAK,KACLF,EAAQ,QACRmC,EAAS,SACTpwD,EAAcqrD,EAAqB39D,QACnCE,SACI2D,MAAO48D,GACP5vD,IAAK,GACLitD,YAAa,KACbD,eAAgB7nD,EAChBgoD,KAAK,EACLC,QACIC,cAAe,MACf90D,MAAO,EACPC,OAAQ,GACRuzB,YACIqhC,OAAQmC,EACR9lC,OAAQ+lC,GAEZv9D,SAAU,kGAAyGs9D,EAAsB,iBAAwBqC,EAAqC,iBAAwBpC,EAAsB,+BAG5P5B,qBAAsB,SAAUF,EAAcpvD,GAAxB,GACd9C,GAAOhM,KACPsiE,EAAet2D,EAAKnM,QAAQ+9D,OAAOyE,GACnC7B,EAAetC,EAAa5mD,SAAS8iB,IAAMuyB,EAAYuR,GACvDuC,EAAgB3xD,EAAE+nD,QAAUz1D,EAAE88D,EAAa,GAAGrpD,eAAesJ,WACjE,OAAIsiD,GAAgBD,EAAe8B,GAAgB7B,EAAgBD,EAAe8B,GAMtF/D,wBAAyB,SAAUlkB,GAAV,GACjBruC,GAAOhM,KACPH,EAAUmM,EAAKnM,QACfyiE,EAAeziE,EAAQ+9D,OAAOyE,GAC9BE,EAAcloB,EAAIvf,WAClB2iC,EAAcr8D,EAAEvB,EAAQ49D,aACxBkD,EAAkBlD,EAAYjjD,GAAGylD,GAAQ,EAAIxC,EAAYt/C,YACzDyiD,EAAmBnD,EAAYjjD,GAAGylD,GAAQ,EAAIxC,EAAYxG,aAC1D6J,EAAiBjhE,EAAQ89D,IAAMhC,EAAkB8B,EAAY,IAAM,CACvEzxD,GAAKmyD,aAAa1rD,KACd2nB,IAAKmoC,EAAYnoC,IAAMuyB,EAAYtS,GAAOsmB,EAAkB2B,EAAe,EAC3ElrD,KAAMmrD,EAAYnrD,MAAQwpD,EAAmBE,GAC7ChmC,SAAU,cAGlB0jC,0BAA2B,WACvB,GAAIxyD,GAAOhM,IACXgM,GAAKmyD,aAAa1rD,KACd1J,MAAO3H,EAAE4K,EAAKN,SAAS6U,SAAS2/C,GAAOn3D,QACvCC,OAAQgD,EAAKnM,QAAQ+9D,OAAOyE,MAGpCjD,4BAA6B,SAAUtwD,GAAV,GACrB9C,GAAOhM,KACPH,EAAUmM,EAAKnM,QACf2Q,EAAM3Q,EAAQ2Q,IACdkwD,EAAYt/D,EAAE4K,EAAKN,SAAS6U,SAAS2/C,GACrCsC,EAAqB9B,EAAU5lC,WAAWV,IAC1C+jC,EAAe/8D,EAAE4K,EAAKmyD,cACtB9jB,EAAMj5C,EAAE0N,EAAEmB,eAAe2kB,KAAK/0B,EAAQ+9D,OAAOC,eAC7CJ,EAAcr8D,EAAEvB,EAAQ49D,aACxBkD,EAAkBlD,EAAYjjD,GAAGylD,GAAQ,EAAIxC,EAAYt/C,YACzD+iD,EAAezN,GACf9nD,MAAOwyD,EAAarjC,WAAWV,IAAMumC,EAAkB7xD,EAAEuB,EAAED,MAC3DI,IAAKpP,EAAEi5C,GAAKvf,WAAWV,IAAMumC,EAAkBnwD,EAC/CC,IAAK+xD,EAAqB7V,EAAY+T,GAAaC,EAAkB9gE,EAAQ+9D,OAAOyE,GAAU7xD,GAElG2tD,GAAa1rD,KAAM2nB,IAAK8mC,KAE5BjyD,OAAQ,SAAUH,GAAV,GACA9C,GAAOhM,KACPH,EAAUmM,EAAKnM,QACfw6C,EAAMj5C,EAAE0N,EAAEmB,eAAe2kB,KAAK/0B,EAAQ+9D,OAAOC,eAC7C4E,EAAmB9V,EAAYvrD,EAAEi5C,IACjC3uC,EAAUtK,EAAE4K,EAAKN,SACjBg3D,EAAqB/V,EAAYjhD,GACjCg1D,EAAYh1D,EAAQ6U,SAAS2/C,GAC7ByC,EAAkBjC,EAAU13D,SAC5B45D,EAAqBvoB,EAAIvzC,MAAMu7D,GAC/BQ,EAAepP,GACf9nD,MAAO82D,EAAmB3zD,EAAEuB,EAAEC,aAC9BE,IAAK3Q,EAAQ2Q,IACbC,IAAKqvD,EAAI6C,EAAkB9iE,EAAQ2Q,MAEvCxE,GAAK82D,yBACLzoB,EAAIvzC,MAAMu7D,GAAU9F,EAASsG,GAC7B72D,EAAK+2D,gBAAgBL,GAAsBG,EAAeJ,IACtDzG,EAAc4G,IACd52D,EAAKg3D,+BAGbF,uBAAwB,WAAA,GAOhBx/D,GANA0I,EAAOhM,KACP2K,EAAOvJ,EAAE4K,EAAKN,SAAS6U,SAAS2/C,GAAO3/C,SAAS6/C,GAChDv/D,EAAS8J,EAAK9J,OACdoiE,EAAqBt4D,EAAKwJ,IAAI,WAC9B,MAAOw4C,GAAYvrD,EAAEpB,QAGzB,KAAKsD,EAAI,EAAGA,EAAIzC,EAAQyC,IACpBqH,EAAKrH,GAAGwD,MAAMu7D,GAAU9F,EAAS0G,EAAmB3/D,KAG5D0/D,4BAA6B,WAAA,GASrB1/D,GARA0I,EAAOhM,KACP0gE,EAAYt/D,EAAE4K,EAAKN,SAAS6U,SAAS2/C,GACrCyC,EAAkBjC,EAAU13D,SAC5B2B,EAAO+1D,EAAUngD,SAAS6/C,GAC1Bv/D,EAAS8J,EAAK9J,OACdoiE,EAAqBt4D,EAAKwJ,IAAI,WAC9B,MAAOw4C,GAAYvrD,EAAEpB,QAGzB,KAAKsD,EAAI,EAAGA,EAAIzC,EAAQyC,IACpBqH,EAAKrH,GAAGwD,MAAMu7D,GAAUhG,EAAcP,EAAyBmH,EAAmB3/D,GAAIq/D,KAG9FI,gBAAiB,SAAUG,GACvB,GAAIx3D,GAAU1L,KAAK0L,OAEfA,GAAQ5E,MAAMu7D,GADdrG,EAActwD,EAAQ5E,MAAMu7D,IACJhG,EAAcP,EAAyBoH,EAAW9hE,EAAEsK,GAAS6Y,SAASvb,WAEtEuzD,EAAS2G,KAI7CjxD,GAAYd,OAAS,SAAUjF,GAC3BoxD,EAAqBnsD,OAAOjF,GACxB9I,KAAM,cACN0I,KAAMmG,EACNurD,eAAgB7nD,KAGxB1D,EAAY6K,QAAU,SAAU5Q,GAC5BoxD,EAAqBxgD,QAAQ5Q,GAAUsxD,eAAgB7nD,KAE3DhW,EAAOkG,GAAUoM,YAAaA,KAChCtQ,OAAOnC,QACO,kBAAVD,SAAwBA,OAAOyB,IAAMzB,OAAS,SAAU0B,EAAIC,EAAIC,IACrEA,GAAMD,OAEV,SAAU5B,EAAGC,QACVA,OAAO,uCACH,cACA,oBACA,kCACDD,IACL,YACG,SAAUE,EAAO6B,GAAjB,GA4KO8hE,GA+CAC,EAWAC,EAWAC,EAWAC,EAWAC,EAWAC,EAWAC,EAWAC,EAWAC,EAEAC,EA8BAC,EAYAC,EAEAC,EAEAC,EAYAC,EAEAC,EAEAC,EAYAC,EAOAC,EAOAC,EAOAC,EAnZApjE,EAAI5B,EAAMijB,OACV9iB,EAASyB,EAAEzB,OACX8gB,EAAOrf,EAAEqf,KACTte,EAAQf,EAAEe,MACV0D,EAASrG,EAAMsC,GAAGoK,OAClBtK,EAAQpC,EAAMoC,MACd6iE,EAAYjlE,EAAMsC,GAAG2iE,UACrB/kE,EAAaF,EAAME,WACnBi8D,EAAoB91D,EAAO82D,cAAchB,kBACzClP,EAAajtD,EAAMktD,YACnBC,EAAcntD,EAAMotD,aACpBj3C,EAAK,gCACLoqD,EAAsB,wBACtB2E,EAAa,YACbC,EAAO,OACPC,EAAW,UACXC,EAAc,aACdC,EAAa,YACbC,EAAY,WACZ9E,EAAO,OACP5C,EAAQ,QACR2H,EAAO,OACPC,EAAQ,QACRC,EAAY,YACZC,EAAY,YACZC,EAAQ,QACRC,EAAY,YACZC,EAAY,YACZC,EAAO,OACPpI,EAAM,IACNqI,GAAoB9lE,EAAWC,QAC/BC,KAAM,SAAUC,GACZ,GAAImM,GAAOhM,IACXN,GAAWI,GAAGF,KAAKG,KAAKiM,GACxBA,EAAKnM,QAAUF,KAAWqM,EAAKnM,QAASA,GACxCmM,EAAKN,QAAUtK,EAAE4K,EAAKnM,QAAQ4C,UAAU+P,SAASxG,EAAKnM,QAAQ2S,UAAU,GACxExG,EAAKuxD,uBACLvxD,EAAKy5D,aACLz5D,EAAK05D,iBACL15D,EAAK25D,2BACL35D,EAAK45D,wBACLxkE,EAAE4K,EAAKN,SAASkpB,KAAKyoC,EAAOrxD,EAAKnM,QAAQgmE,mBAE7Cp0D,QAAS,WACL,GAAIzF,GAAOhM,IACXoB,GAAE4K,EAAKN,SAASyK,IAAIR,GAAI9E,SACxB7E,EAAKN,QAAU,KACfM,EAAK85D,oBACL95D,EAAK0F,UAET7R,SACI2S,SAAU,KACV+E,UAAW8tD,EACXQ,iBAAkB,KAClBlI,KAAK,EACLl7D,SAAU,oGAAkHs9D,EAAsB,kBAEtJ7/D,QACIwkE,EACAC,EACAC,EACAE,EACAC,GAEJ7qD,KAAM,WACFla,KAAK+lE,gBAETA,aAAc,WAAA,GACN/5D,GAAOhM,KACP86B,EAAW9uB,EAAKg6D,qBAAqBC,aACzC7kE,GAAE4K,EAAKN,SAAS+G,KACZ2nB,IAAKU,EAASV,IACdhjB,KAAM0jB,EAAS1jB,KACf0jB,SAAU,cAGlByiC,qBAAsB,WAClB,GAAIvxD,GAAOhM,IACXoB,GAAE4K,EAAKN,SAASsK,GAAG8uD,EAAanvD,EAAIxT,EAAM6J,EAAKk6D,aAAcl6D,IAAOgK,GAAG+uD,EAAYpvD,EAAIxT,EAAM6J,EAAKm6D,YAAan6D,KAEnHk6D,aAAc,WACVlmE,KAAKU,QAAQokE,IAEjBqB,YAAa,WACTnmE,KAAKU,QAAQqkE,IAEjBU,WAAY,WACR,GAAIz5D,GAAOhM,IACXoB,GAAE4K,EAAKN,SAAS6U,SAAS48C,EAAM4C,GAAqBlzD,SAAS,YAAcb,EAAKnM,QAAQ0X,YAE5FouD,yBAA0B,WAAA,GAClB35D,GAAOhM,KACPH,EAAUmM,EAAKnM,OACnBmM,GAAKg6D,qBAAuB7C,EAA0BhyD,QAClD/N,KAAMvD,EAAQ0X,UACdqmD,OAAQ5xD,EAAKN,QACbm6D,iBAAkBhmE,EAAQgmE,iBAC1BpI,YAAa59D,EAAQ49D,YACrBE,IAAK99D,EAAQ89D,OAGrB+H,eAAgB,WAAA,GACR15D,GAAOhM,KACP0L,EAAUM,EAAKN,SACfM,EAAKo6D,YAAe16D,IAGxBM,EAAKo6D,WAAa,GAAI3B,GAAU/4D,GAC5B26D,UAAWlkE,EAAM6J,EAAKs6D,aAAct6D,GACpCu6D,KAAMpkE,EAAM6J,EAAKw6D,QAASx6D,GAC1B2jD,QAASxtD,EAAM6J,EAAKy6D,WAAYz6D,OAGxCs6D,aAAc,WACVtmE,KAAKU,QAAQgkE,IAEjB8B,QAAS,SAAU13D,GACf,GAAI9C,GAAOhM,IACXgM,GAAKtL,QAAQikE,EAAM34D,EAAK06D,kBAAkBC,iBACtCC,OAAQ93D,EAAEqoB,EAAE/mB,MACZy2D,OAAQ/3D,EAAEuB,EAAED,MACZmxD,cAAezyD,EAAEqoB,EAAE7mB,aACnBw2D,cAAeh4D,EAAEuB,EAAEC,iBAG3Bm2D,WAAY,WACRzmE,KAAKU,QAAQkkE,IAEjBkB,kBAAmB,WACf,GAAI95D,GAAOhM,IACPgM,GAAKo6D,aACLp6D,EAAKo6D,WAAW30D,UAChBzF,EAAKo6D,WAAa,OAG1BR,sBAAuB,WACnB,GAAI55D,GAAOhM,IACXgM,GAAK06D,kBAAoB7C,EAAuB1yD,QAAS/N,KAAM4I,EAAKnM,QAAQ0X,eAGhFwvD,GAAkBnlE,EAAMjC,QACxBC,KAAM,WACFI,KAAKgnE,WAETC,SAAU,SAAU7jE,EAAM0I,GACtB9L,KAAKgnE,OAAO7mE,MACRiD,KAAMA,EACN0I,KAAMA,KAGdqF,OAAQ,SAAUtR,GAAV,GAIAk+B,GACA0E,EACAn/B,EALAqf,EAAQ3iB,KAAKgnE,OACbE,EAAcvkD,EAAM9hB,OACpBuC,EAAOvD,EAAQuD,KAAOvD,EAAQuD,KAAKwC,cAAgB,EAIvD,KAAKtC,EAAI,EAAGA,EAAI4jE,EAAa5jE,IAEzB,GADAm/B,EAAO9f,EAAMrf,GACTm/B,EAAKr/B,KAAKwC,gBAAkBxC,EAAM,CAClC26B,EAAQ0E,CACR,OAGR,GAAI1E,EACA,MAAO,IAAIA,GAAMjyB,KAAKjM,MAI9BsnE,GAA6BJ,GAAgBpnE,UACjDwnE,IAA2BtgC,QAAU,GAAIsgC,IACrChE,EAA4BvhE,EAAMjC,QAClCC,KAAM,SAAUC,GACZ,GAAImM,GAAOhM,IACXgM,GAAKnM,QAAUF,KAAWqM,EAAKnM,QAASA,IAE5CA,SACI+9D,OAAQ,KACRtmD,OAAQutD,EACRgB,iBAAkB,KAClBpI,YAAa,KACbE,KAAK,GAETsI,YAAa,WAAA,GACLj6D,GAAOhM,KACP86B,EAAW9uB,EAAKo7D,oBAChBC,EAAuBr7D,EAAKs7D,kBAAkBxsC,GAC9CysC,EAAuBv7D,EAAKw7D,kBAAkBH,EAClD,OAAOE,IAEXH,kBAAmB3mD,EACnB6mD,kBAAmB,SAAUxsC,GAAV,GACXj7B,GAAUG,KAAKH,QACf+9D,EAASx8D,EAAEvB,EAAQ+9D,OACvB,OAAI/9D,GAAQyX,SAAWutD,GAEfzqC,IAAKU,EAASV,IAAMuyB,EAAYiR,GAAU,EAC1CxmD,KAAM0jB,EAAS1jB,KAAOq1C,EAAWmR,GAAU,GAG5C9iC,GAEX0sC,kBAAmB,SAAU1sC,GAAV,GACXj7B,GAAUG,KAAKH,QACf49D,EAAcr8D,EAAEvB,EAAQ49D,aACxBqD,EAAiBjhE,EAAQ89D,IAAMhC,EAAkB8B,EAAY,IAAM;AACvE,MAAKA,GAAYjjD,GAAGylD,GAMbnlC,GAJCV,IAAKU,EAASV,KAAOqjC,EAAYt/C,aAAe,GAChD/G,KAAM0jB,EAAS1jB,MAAQqmD,EAAYxG,cAAgB,GAAK6J,MAMxEqC,EAA0BhyD,OAAS,SAAUtR,GACzC,MAAOsnE,IAA2BtgC,QAAQ11B,OAAOtR,IAEjDujE,EAA0BD,EAA0BxjE,QACpDynE,kBAAmB,WAAA,GACXvB,GAAmBzkE,EAAEpB,KAAKH,QAAQgmE,kBAClCvuD,EAASuuD,EAAiB/qC,UAC9B,QACIV,IAAK9iB,EAAO8iB,IAAMuyB,EAAYkZ,GAAoB,EAClDzuD,KAAME,EAAOF,KAAOq1C,EAAWoZ,OAI3CsB,GAA2BtgC,QAAQogC,SAASjC,EAAM5B,GAC9CC,EAA2BF,EAA0BxjE,QACrDynE,kBAAmB,WAAA,GACXvB,GAAmBzkE,EAAEpB,KAAKH,QAAQgmE,kBAClCvuD,EAASuuD,EAAiB/qC,UAC9B,QACIV,IAAK9iB,EAAO8iB,IACZhjB,KAAME,EAAOF,KAAOq1C,EAAWoZ,GAAoB,MAI/DsB,GAA2BtgC,QAAQogC,SAAShC,EAAO5B,GAC/CC,EAA+BH,EAA0BxjE,QACzDynE,kBAAmB,WAAA,GACXvB,GAAmBzkE,EAAEpB,KAAKH,QAAQgmE,kBAClCvuD,EAASuuD,EAAiB/qC,UAC9B,QACIV,IAAK9iB,EAAO8iB,IACZhjB,KAAME,EAAOF,KAAOq1C,EAAWoZ,OAI3CsB,GAA2BtgC,QAAQogC,SAAS/B,EAAW5B,GACnDC,EAA+BJ,EAA0BxjE,QACzDynE,kBAAmB,WAAA,GACXvB,GAAmBzkE,EAAEpB,KAAKH,QAAQgmE,kBAClCvuD,EAASuuD,EAAiB/qC,UAC9B,QACIV,IAAK9iB,EAAO8iB,IACZhjB,KAAME,EAAOF,SAIzB+vD,GAA2BtgC,QAAQogC,SAAS9B,EAAW5B,GACnDC,EAA2BL,EAA0BxjE,QACrDynE,kBAAmB,WAAA,GACXvB,GAAmBzkE,EAAEpB,KAAKH,QAAQgmE,kBAClCvuD,EAASuuD,EAAiB/qC,UAC9B,QACIV,IAAK9iB,EAAO8iB,IAAMuyB,EAAYkZ,GAC9BzuD,KAAME,EAAOF,KAAOq1C,EAAWoZ,GAAoB,MAI/DsB,GAA2BtgC,QAAQogC,SAAS7B,EAAO5B,GAC/CC,EAA+BN,EAA0BxjE,QACzDynE,kBAAmB,WAAA,GACXvB,GAAmBzkE,EAAEpB,KAAKH,QAAQgmE,kBAClCvuD,EAASuuD,EAAiB/qC,UAC9B,QACIV,IAAK9iB,EAAO8iB,IAAMuyB,EAAYkZ,GAC9BzuD,KAAME,EAAOF,KAAOq1C,EAAWoZ,OAI3CsB,GAA2BtgC,QAAQogC,SAAS5B,EAAW5B,GACnDC,EAA+BP,EAA0BxjE,QACzDynE,kBAAmB,WAAA,GACXvB,GAAmBzkE,EAAEpB,KAAKH,QAAQgmE,kBAClCvuD,EAASuuD,EAAiB/qC,UAC9B,QACIV,IAAK9iB,EAAO8iB,IAAMuyB,EAAYkZ,GAC9BzuD,KAAME,EAAOF,SAIzB+vD,GAA2BtgC,QAAQogC,SAAS3B,EAAW5B,GACnDC,EAA0BR,EAA0BxjE,QACpDynE,kBAAmB,WAAA,GACXvB,GAAmBzkE,EAAEpB,KAAKH,QAAQgmE,kBAClCvuD,EAASuuD,EAAiB/qC,UAC9B,QACIV,IAAK9iB,EAAO8iB,IAAMuyB,EAAYkZ,GAAoB,EAClDzuD,KAAME,EAAOF,SAIzB+vD,GAA2BtgC,QAAQogC,SAAS1B,EAAM5B,GAC9CC,EAA0BmD,GAAgBpnE,WAC9CikE,EAAwB/8B,QAAU,GAAI+8B,GAClCC,EAAyBjiE,EAAMjC,QAC/BC,KAAM,SAAUC,GACZ,GAAImM,GAAOhM,IACXgM,GAAKnM,QAAUF,KAAWqM,EAAKnM,QAASA,IAE5CA,SACI+mE,QACIa,WAAY,KACZz2B,SAAU,MAEd61B,QACIY,WAAY,KACZz2B,SAAU,OAGlB21B,gBAAiB,SAAUe,GAAV,GACT7nE,GAAUG,KAAKH,QACf8nE,EAAkB9nE,EAAQ+mE,OAAOa,WAAa5nE,EAAQ+mE,OAAO51B,SAC7D42B,EAAkB/nE,EAAQgnE,OAAOY,WAAa5nE,EAAQgnE,OAAO71B,QACjE,QACI41B,OAAQc,EAAOd,OAASe,EACxBd,OAAQa,EAAOb,OAASe,EACxBrG,cAAemG,EAAOnG,cAAgBoG,EACtCb,cAAeY,EAAOZ,cAAgBc,MAIlD/D,EAAuB1yD,OAAS,SAAUtR,GACtC,MAAO+jE,GAAwB/8B,QAAQ11B,OAAOtR,IAE9CikE,EAA6BD,EAAuBlkE,QACpDE,SACI+mE,QACIa,WAAY,EACZz2B,SAAU,GAEd61B,QACIY,WAAY,EACZz2B,SAAU,MAIlB+yB,EAAuBD,EAA2BnkE,QAASE,SAAW+mE,QAAU51B,SAAU,MAC9F4yB,EAAwB/8B,QAAQogC,SAASjC,EAAMjB,GAC3CC,EAAuBF,EAA2BnkE,QAASE,SAAW+mE,QAAU51B,gBACpF4yB,EAAwB/8B,QAAQogC,SAAS1B,EAAMvB,GAC3CC,EAA2BJ,EAAuBlkE,QAClDE,SACI+mE,QACIa,WAAY,EACZz2B,SAAU,GAEd61B,QACIY,WAAY,EACZz2B,SAAU,MAIlBkzB,EAAwBD,EAAyBtkE,QAASE,SAAWgnE,QAAU71B,gBACnF4yB,EAAwB/8B,QAAQogC,SAAShC,EAAOf,GAC5CC,EAAwBF,EAAyBtkE,QAASE,SAAWgnE,QAAU71B,SAAU,MAC7F4yB,EAAwB/8B,QAAQogC,SAAS7B,EAAOjB,GAC5CC,EAAwCP,EAAuBlkE,QAC/DE,SACI+mE,QACIa,WAAY,EACZz2B,SAAU,GAEd61B,QACIY,WAAY,EACZz2B,SAAU,MAIlBqzB,EAA4BD,EAAsCzkE,QAClEE,SACI+mE,QAAU51B,SAAU,GACpB61B,QAAU71B,gBAGlB4yB,EAAwB/8B,QAAQogC,SAAS/B,EAAWb,GAChDC,EAA4BF,EAAsCzkE,QAClEE,SACI+mE,QAAU51B,aACV61B,QAAU71B,gBAGlB4yB,EAAwB/8B,QAAQogC,SAAS9B,EAAWb,GAChDC,EAA4BH,EAAsCzkE,QAClEE,SACI+mE,QAAU51B,SAAU,GACpB61B,QAAU71B,SAAU,MAG5B4yB,EAAwB/8B,QAAQogC,SAAS5B,EAAWd,GAChDC,EAA4BJ,EAAsCzkE,QAClEE,SACI+mE,QAAU51B,aACV61B,QAAU71B,SAAU,MAG5B4yB,EAAwB/8B,QAAQogC,SAAS3B,EAAWd,GACpD7kE,EAAOkG,GAAU2/D,kBAAmBA,MACtC7jE,OAAOnC,QACO,kBAAVD,SAAwBA,OAAOyB,IAAMzB,OAAS,SAAU0B,EAAIC,EAAIC,IACrEA,GAAMD,OAEV,SAAU5B,EAAGC,QACVA,OAAO,kCACH,cACA,sCACA,kCACDD,IACL,YACG,SAAUE,EAAO6B,GAgDd,QAASwmE,GAAYl8D,GACjB,MAAwB,KAAVA,EAjDrB,GACO8wD,GAAS96D,OACT+6D,EAAOD,EAAO9rD,KACdH,EAAMksD,EAAKlsD,IACXC,EAAMisD,EAAKjsD,IACXrP,EAAI5B,EAAMijB,OACVnI,EAAWlZ,EAAEkZ,SACb3a,EAASyB,EAAEzB,OACXwC,EAAQf,EAAEe,MACVD,EAAU1C,EAAMwC,QAAQE,QACxB2D,EAASrG,EAAMsC,GAAGoK,OAClBtK,EAAQpC,EAAMoC,MACd4jE,EAAoB3/D,EAAO2/D,kBAC3B7I,EAAgB92D,EAAO82D,cACvBb,EAA2Ba,EAAcb,yBACzCrI,EAAYkJ,EAAclJ,UAC1BuI,EAAgBW,EAAcX,cAC9BG,EAAWQ,EAAcR,SACzBE,EAAgBM,EAAcN,cAC9BE,EAAWI,EAAcJ,SACzB9P,EAAajtD,EAAMktD,YACnBC,EAAcntD,EAAMotD,aACpBj3C,EAAK,4BACLmyD,EAA8B,gCAC9BC,EAAc,UACdC,EAAuB,mBACvBtD,EAAa,YACbC,EAAO,OACPC,EAAW,UACXhI,EAAW,UACXC,EAAa,YACbiI,EAAa,YACbC,EAAY,WACZkD,EAAS,KACTC,EAAM,KACNhI,EAAQ,QACR7C,EAAQ,QACRgD,EAAQ,QACRgC,EAAS,SACT2C,EAAO,OACPC,EAAQ,QACRC,EAAY,YACZC,EAAY,YACZC,EAAQ,QACRC,EAAY,YACZC,EAAY,YACZC,EAAO,OACPpI,EAAM,IAINjsD,EAAgBtP,EAAMjC,QACtBC,KAAM,SAAU8L,EAAS7L,GACrB,GAAImM,GAAOhM,IACXgM,GAAKnM,QAAUF,KAAWqM,EAAKnM,QAASA,GACxCmM,EAAKm8D,WACD/mE,EAAEsK,GAAS8O,GAAG6iD,KACdrxD,EAAKN,QAAUA,IAGvB+F,QAAS,WACL,GAAIzF,GAAOhM,IACXoB,GAAE4K,EAAKN,SAASyK,IAAIR,GACpB3J,EAAKN,QAAU,KACftK,EAAE4K,EAAKnM,QAAQ49D,aAAatnD,IAAIymD,EAAWjnD,GAC3C3J,EAAKo8D,yBAETvoE,SACIwoE,gBAAiB,KACjB1K,KAAK,EACLF,YAAa,KACb6K,SAAU,GACV7Y,UAAW,GACX0Y,UACM5wD,UAAW4tD,IACX5tD,UAAW0tD,IACX1tD,UAAW2tD,IACX3tD,UAAWytD,IACXztD,UAAW8tD,IACX9tD,UAAW6tD,IACX7tD,UAAW+tD,IACX/tD,UAAWguD,KAGrBt2D,OAAQ,SAAUyS,GAAV,GACA1V,GAAOhM,KACP0nE,EAAS/nE,MACTinE,OAAQ,EACRC,OAAQ,EACRtF,cAAe,EACfuF,cAAe,GAChBplD,EACH1V,GAAKu8D,aAAab,EAAOd,OAAQc,EAAOnG,eACxCv1D,EAAKw8D,cAAcd,EAAOb,OAAQa,EAAOZ,eACzC96D,EAAK2F,qBAET42D,aAAc,SAAUn4D,EAAOE,GAAjB,GAON6wD,GACAsH,EACAC,EACAC,EATA38D,EAAOhM,KACP0L,EAAUtK,EAAE4K,EAAKN,SACjBk9D,EAAal9D,EAAQ,GAAG5E,MAAMu5D,GAC9BwI,EAAepc,EAAW/gD,GAC1Bo9D,EAAcp9D,EAAQ6Y,SAASxb,QAC/BggE,EAAW/8D,EAAKg9D,sBAAsB3I,EAK5B,KAAVjwD,IAGAy3D,EAAY77D,EAAKi9D,wBACjBj9D,EAAKi9D,qBAAuBJ,GAEhCF,EAAmBlV,GACf9nD,MAAOK,EAAKi9D,qBAAuB34D,EACnCE,IAAKxE,EAAKnM,QAAQyoE,SAClB73D,IAAKs4D,IAEL/M,EAAc4M,IACVC,EAAez4D,EAAQ04D,GACvBL,EAAah4D,EAAIk4D,EAAkBG,GACnCJ,EAAkBl4D,EAAIm4D,EAAkBG,KAExCL,EAAaj4D,EAAIm4D,EAAkBG,GACnCJ,EAAkBj4D,EAAIk4D,EAAkBG,IAE5C3H,EAAW9E,EAAcP,EAAyB2M,EAAYC,KAE9DvH,EAAW5E,EAASoM,GAExB38D,EAAKk9D,mBACLx9D,EAAQ,GAAG5E,MAAMu5D,GAASc,IAE9BqH,cAAe,SAAUp4D,EAAOE,GAAjB,GAQP4yD,GACAuF,EACAC,EACAS,EAVAn9D,EAAOhM,KACP0L,EAAUtK,EAAE4K,EAAKN,SACjB09D,EAAc19D,EAAQ,GAAG5E,MAAMu7D,GAC/BgH,EAAgB1c,EAAYjhD,GAC5B6Y,EAAS7Y,EAAQ6Y,SACjB+kD,EAAe/kD,EAAOvb,SACtBugE,EAAYv9D,EAAKg9D,sBAAsB3G,GAKvC5S,EAAYzjD,EAAKnM,QAAQ4vD,UACzB+Z,EAAkBx9D,EAAKy9D,kBACb,KAAVr5D,IAGAy3D,EAAY77D,EAAK09D,yBACjB19D,EAAK09D,sBAAwBL,GAEjCF,EAAoB1V,GAChB9nD,MAAOK,EAAK09D,sBAAwBp5D,EACpCE,IAAKi/C,EACLh/C,IAAK84D,IAELC,GAAmBp5D,EAAQ,GAC3BpE,EAAKg3D,8BAELhH,EAAcoN,IACVC,EAAgBj5D,EAAQk5D,GACxBb,EAAah4D,EAAI04D,EAAmBG,GACpCZ,EAAkBl4D,EAAI24D,EAAmBG,KAEzCb,EAAaj4D,EAAI24D,EAAmBG,GACpCZ,EAAkBj4D,EAAI04D,EAAmBG,IAE7CpG,EAAY7G,EAAcP,EAAyB2M,EAAYC,KAE/DxF,EAAY3G,EAAS4M,GAEzBz9D,EAAQ,GAAG5E,MAAMu7D,GAAUa,EACvBsG,GAAmBp5D,EAAQ,GAC3BpE,EAAK82D,2BAGbkG,sBAAuB,SAAUW,GAAV,GACf39D,GAAOhM,KACP0L,EAAUtK,EAAE4K,EAAKN,SACjBk+D,EAAqBD,EAAU/jE,cAC/B07D,EAAct1D,EAAKnM,QAAQ89D,OAAW,EACtCp5C,EAASnjB,EAAE4K,EAAKN,SAAS6Y,SACzBif,EAAgBjf,EAAO,GACvBslD,EAAkBtlD,EAAOqlD,KACzBE,EAAqBxI,GAAeqI,IAActJ,EAAQ97C,EAAO0yC,aAAe1yC,EAAOpG,YAC3F,OAAIqlB,KAAkB93B,EAAQa,QAAQ07D,GAAQ,GACM,KAA5CzkC,EAAc18B,MAAM8iE,IAA+B5N,EAAchwD,EAAKN,QAAQ5E,MAAM8iE,IAG7EC,EAAkBC,EAFlBp5D,EAAAA,EAKJm5D,EAAkBC,GAGjCZ,iBAAkB,WAQd,QAASa,GAAqBr+D,GAC1B,GAAIk9D,GAAal9D,EAAQ5E,MAAMiC,KAC/B,OAAmB,KAAf6/D,IACO5M,EAAc4M,KAEdxnE,EAAEsK,GAAS61B,SAASwmC,GAbrB,GAOVzkE,GANA0I,EAAOhM,KACP0L,EAAUtK,EAAE4K,EAAKN,SACjB83B,EAAgB93B,EAAQ6Y,SAAS,GACjCylD,EAAet+D,EAAQa,QAAQ07D,GAC/Bv9D,EAAUs/D,EAAaz9D,QAAQ27D,GAAK3nD,WACpC0pD,EAAgBv/D,EAAQ7J,MAU5B,IAAIkpE,EAAqBr+D,EAAQ,KAAO83B,IAAkBwmC,EAAa,IAAqC,KAA/BxmC,EAAc18B,MAAMu5D,GAC7F,IAAK/8D,EAAI,EAAGA,EAAI2mE,EAAe3mE,IAC3BoH,EAAQpH,GAAGwD,MAAMu5D,GAAS9D,EAASn7D,EAAEsJ,EAAQpH,IAAIyF,UAI7D0gE,iBAAkB,WAAA,GAGLnmE,GAFL0I,EAAOhM,KACP2K,EAAOvJ,EAAE4K,EAAKN,SAAS6U,SAAS2/C,GAAO3/C,SAAS2nD,EACpD,KAAS5kE,EAAI,EAAGA,EAAIqH,EAAK9J,OAAQyC,IAC7B,GAA6B,KAAzBqH,EAAKrH,GAAGwD,MAAMkC,QAAiBmzD,EAASxxD,EAAKrH,GAAGwD,MAAMkC,QACtD,OAAO,CAGf,QAAO,GAEXg6D,4BAA6B,WAAA,GASrB1/D,GARA0I,EAAOhM,KACP0gE,EAAYt/D,EAAE4K,EAAKN,SAAS6U,SAAS2/C,GACrCyC,EAAkBjC,EAAU13D,SAC5B2B,EAAO+1D,EAAUngD,SAAS2nD,GAC1BrnE,EAAS8J,EAAK9J,OACdoiE,EAAqBt4D,EAAKwJ,IAAI,WAC9B,MAAOw4C,GAAYvrD,EAAEpB,QAGzB,KAAKsD,EAAI,EAAGA,EAAIzC,EAAQyC,IACpBqH,EAAKrH,GAAGwD,MAAMu7D,GAAUhG,EAAcP,EAAyBmH,EAAmB3/D,GAAIq/D,KAG9FG,uBAAwB,WAAA,GAOhBx/D,GANA0I,EAAOhM,KACP2K,EAAOvJ,EAAE4K,EAAKN,SAAS6U,SAAS2/C,GAAO3/C,SAAS2nD,GAChDrnE,EAAS8J,EAAK9J,OACdoiE,EAAqBt4D,EAAKwJ,IAAI,WAC9B,MAAOw4C,GAAYvrD,EAAEpB,QAGzB,KAAKsD,EAAI,EAAGA,EAAIzC,EAAQyC,IACpBqH,EAAKrH,GAAGwD,MAAMu7D,GAAU9F,EAAS0G,EAAmB3/D,KAG5DqO,kBAAmB,WACf,GAAI3F,GAAOhM,IACXgM,GAAKk+D,qBACLl+D,EAAKm+D,sBAETD,mBAAoB,WAAA,GAMZ5mE,GALA0I,EAAOhM,KACPmoE,EAAUn8D,EAAKm8D,QACftoE,EAAUmM,EAAKnM,QACfo+D,EAAgBjyD,EAAKnM,QAAQsoE,QAC7BtnE,EAASo9D,EAAcp9D,MAE3B,MAAIsnE,GAAWA,EAAQtnE,OAAS,GAAhC,CAGA,IAAKyC,EAAI,EAAGA,EAAIzC,EAAQyC,IACpB0I,EAAKm8D,QAAQhoE,KAAK,GAAIqlE,GAAkB7lE,GACpC6S,SAAU3S,EAAQwoE,gBAClBxC,iBAAkB75D,EAAKN,QACvB+xD,YAAa59D,EAAQ49D,YACrBE,IAAK99D,EAAQ89D,KACdM,EAAc36D,KAErB0I,GAAKo+D,+BAEThC,sBAAuB,WAAA,GAGV9kE,GAFL0I,EAAOhM,KACPa,EAASmL,EAAKm8D,QAAUn8D,EAAKm8D,QAAQtnE,OAAS,CAClD,KAASyC,EAAI,EAAGA,EAAIzC,EAAQyC,IACxB0I,EAAKm8D,QAAQ7kE,GAAGmO,WAGxB04D,mBAAoB,WAAA,GAIZ7mE,GAHA0I,EAAOhM,KACPmoE,EAAUn8D,EAAKm8D,YACftnE,EAASsnE,EAAQtnE,MAErB,KAAKyC,EAAI,EAAGA,EAAIzC,EAAQyC,IACpB0I,EAAKm8D,QAAQ7kE,GAAG4W,QAGxBkwD,2BAA4B,WAAA,GAIpB9mE,GACAs6D,EAJA5xD,EAAOhM,KACPmoE,EAAUn8D,EAAKm8D,YACftnE,EAASsnE,EAAQtnE,MAGrB,KAAKyC,EAAI,EAAGA,EAAIzC,EAAQyC,IACpBs6D,EAASuK,EAAQ7kE,GACjBs6D,EAAOtsD,KAAKozD,EAAYviE,EAAM6J,EAAKq+D,yBAA0Br+D,IAC7D4xD,EAAOtsD,KAAKqzD,EAAMxiE,EAAM6J,EAAKs+D,oBAAqBt+D,IAClD4xD,EAAOtsD,KAAKszD,EAAUziE,EAAM6J,EAAKu+D,uBAAwBv+D,IACzD4xD,EAAOtsD,KAAKwzD,EAAY3iE,EAAM6J,EAAKw+D,yBAA0Bx+D,IAC7D4xD,EAAOtsD,KAAKyzD,EAAW5iE,EAAM6J,EAAKy+D,wBAAyBz+D,KAGnEq+D,yBAA0B,WAAA,GAClBr+D,GAAOhM,KACP0L,EAAUtK,EAAE4K,EAAKN,QACrBA,GAAQmB,SAASm7D,GACjBh8D,EAAK09D,sBAAwB/c,EAAYjhD,GACzCM,EAAKi9D,qBAAuBxc,EAAW/gD,GACvCM,EAAKmzD,oBAETmL,oBAAqB,SAAUx7D,GAC3B9O,KAAKiP,OAAOH,IAEhBy7D,uBAAwB,WACpB,GAAIv+D,GAAOhM,IACXoB,GAAE4K,EAAKN,SAASgP,YAAYstD,GAC5Bh8D,EAAKqzD,mBAETA,gBAAiB,WACbj+D,EAAEpB,KAAKH,QAAQ49D,aAAatnD,IAAIymD,EAAWjnD,IAE/CwpD,iBAAkB,WACd/9D,EAAEpB,KAAKH,QAAQ49D,aAAaznD,GAAG4mD,EAAWjnD,EAAI,SAAU7G,GACpDA,EAAEiJ,sBAIV2yD,EAAuB9oE,EAAMjC,QAC7BwR,OAAQ,SAAUjF,GACd,GAAIy+D,GAAU3qE,IACdoB,GAAE8K,EAAO2H,MAAMmC,GAAG6mD,EAAalnD,EAAI0nD,EAAO,SAAUvuD,GAAV,GAClC87D,GAAc97D,EAAE8K,OAChBixD,EAAqB/7D,EAAEmB,cACvBuB,EAAgBtF,EAAOsF,cACvB9F,EAAU8F,EAAgBA,EAAc9F,QAAU,IACtD,IAAI8F,GACA,GAAI9F,GAAWm/D,IAAuBn/D,EAAS,CAC3C,GAAI4O,EAASuwD,EAAoBn/D,IAAYA,IAAYk/D,GAAetwD,EAAS5O,EAASk/D,GACtF,MAEIl/D,KAAYk/D,IACZ1+D,EAAOqF,wBACPo5D,EAAQhL,cAAczzD,EAAQ2+D,SAK1CF,GAAQhL,cAAczzD,EAAQ2+D,EAElC3+D,GAAOmF,4BACR2E,GAAG6mD,EAAalnD,EAAI,SAAU7G,GAAV,GACf0C,GAAgBtF,EAAOsF,cACvB9F,EAAU8F,EAAgBA,EAAc9F,QAAU,KAClDkO,EAAS9K,EAAE8K,OACXkxD,EAAwB1pE,EAAEwY,GAAQ2nB,SAASumC,IAAgC1mE,EAAEwY,GAAQiB,QAAQsiD,EAAM2K,GAA6BjnE,OAAS,GACzI2Q,GAAiB9F,IAAYkO,GAAWU,EAAS5O,EAASkO,IAAYkxD,GACtE5+D,EAAOqF,2BAInBuL,QAAS,SAAU5Q,GACf9K,EAAE8K,EAAO2H,MAAMsC,IAAIR,IAEvBgqD,cAAe,SAAUzzD,EAAQojC,GACxBptC,EAAQ+R,MAAS/R,EAAQoT,UAC1BpJ,EAAOsF,cAAgB,GAAIN,GAAco+B,GACrC+4B,gBAAiBn8D,EAAO2H,KACxB8pD,IAAKn+D,EAAMwC,QAAQgS,MAAM9H,EAAOR,SAChC+xD,YAAavxD,EAAO2H,UAKpC62D,GAAqB7jC,QAAU,GAAI6jC,GACnCx5D,EAAcC,OAAS,SAAUjF,GAC7Bw+D,EAAqB7jC,QAAQ11B,OAAOjF,IAExCgF,EAAc4L,QAAU,SAAU5Q,GAC9Bw+D,EAAqB7jC,QAAQ/pB,QAAQ5Q,IAEzCvM,EAAOkG,GAAUqL,cAAeA,KAClCvP,OAAOnC,QACO,kBAAVD,SAAwBA,OAAOyB,IAAMzB,OAAS,SAAU0B,EAAIC,EAAIC,IACrEA,GAAMD,OAEV,SAAU5B,EAAGC,QACVA,OAAO,qBAAsB,iBAAkBD,IACjD,YACG,SAAU8B,EAAGC,GAAb,GACO7B,GAAQmC,OAAOnC,MAAOoC,EAAQpC,EAAMoC,MAAOiE,EAASrG,EAAMsC,GAAGoK,OAAQC,EAAMtG,EAAOuG,IAAK3J,EAAWjD,EAAMiD,SAAU4a,EAAaxX,EAAOwX,WAAY0tD,GAC9I,KACA,KACA,QACA,QACA,SACDxW,GACC,OACA,SACA,YACA,gBACA,cACA,YACA,YACA,YACA,WACA,WACA,aACA,SACA,WACA,gBACA,iBACA,cACA,cACA,YACA,eACA,aACA,aACA,mBACDyW,EAAa,cAAeC,EAA6B,IAAMD,EAAa,IAAKE,EAAqB,4BACzG7vC,EAAgB,SAAU/W,GAC1B,MAAOljB,GAAEkjB,GAAM9J,GAAG,mBAElB4kB,EAAY,SAAU9a,GACtB,MAAOA,GAAKzM,cAAwD,SAAxCyM,EAAKzM,aAAa,oBAE9CgyB,EAAkB,SAAUvlB,GAC5B,MAAOnY,GAAIgvB,UAAU7W,EAAM8a,EAAW/D,IAEtC6Q,EAAqB,SAAU/0B,GAAV,GACjBg0D,GAAuBthC,EAAgB1yB,EAAMoG,gBAC7C6tD,EAAqBvhC,EAAgB1yB,EAAM6H,eAC3CmsD,GAAwBC,KACpBD,GACAh0D,EAAMkuB,eAAe8lC,GAErBC,GACAj0D,EAAMquB,YAAY4lC,KAI1Bp9B,EAAoB,SAAU72B,GAC9B,GAAI0yB,EAAgB1yB,EAAM8G,yBACtB,OAAO,CACJ,IAAI4rB,EAAgB1yB,EAAMoG,iBAAmBssB,EAAgB1yB,EAAM6H,cAAe,CACrF,GAAIqsD,GAAgBhuD,EAAWusB,kBAAkBzyB,EACjD,IAA6B,IAAzBk0D,EAAcxqE,OACd,OAAO,EAGf,OAAO,GAEPyqE,EAAW,SAAUzqE,GAAV,GAGFyC,GAFLs1B,EAAS,GACT2yC,EAAQ,gEACZ,KAASjoE,EAAIzC,GAAU,GAAIyC,EAAI,IAAKA,EAChCs1B,GAAU2yC,EAAM5hC,OAAOh5B,KAAK66D,MAAM76D,KAAK86D,UAAYF,EAAM1qE,OAAS,IAEtE,OAAO+3B,IAEPkP,EAAmB,SAAUlmB,GAC7B,GAA4C4W,GAAUjvB,EAAImiE,EAAtD7jC,GAAyB/jB,OAAO,EAYpC,OAXA1iB,GAAEwgB,GAAMjV,KAAKu+D,GAAoB1rC,KAAK,SAAUl8B,EAAGghB,GAC/CkU,EAAWrsB,EAAI/I,KAAKkhB,GACpB/a,EAAK+hE,IACLI,EAAa,IAAMlzC,EAAW,IAAMwyC,EAAa,KAAQzhE,EAAK,OAAUivB,EAAW,IACnFqP,EAAqBt+B,IACjB+a,KAAMA,EACNxd,MAAO1F,EAAEkjB,GAAM1X,KAAK,UAExBi7B,EAAqB/jB,OAAQ,EAC7B1iB,EAAEkjB,GAAMqnD,YAAYD,KAEjB7jC,GAEPE,EAAoB,SAAUnmB,EAAMimB,GACpC,GAAIt+B,GAAI61B,CACRh+B,GAAEwgB,GAAMjV,KAAKs+D,GAA4BzrC,KAAK,SAAUl8B,EAAGghB,GACvD/a,EAAK+a,EAAKzM,aAAamzD,GACvB5rC,EAAYyI,EAAqBt+B,GACjCnI,EAAEkjB,GAAMqnD,YAAYvsC,EAAU9a,MAC1B8a,EAAUt4B,OAAS1F,EAAEg+B,EAAU9a,MAAM1X,KAAK,UAC1CxL,EAAEg+B,EAAU9a,MAAMm3B,WAAW,SAAS7uC,KAAK,QAASwyB,EAAUt4B,UAItE8kE,EAAc,SAAUl0D,GACxB,GAAItV,GAAO5C,EAAM4C,IACjB,OAAOsV,KAAYtV,EAAKuV,WAAaD,GAAWtV,EAAKwV,QAErDi0D,EAAoB,SAAUnmE,GAC9B,GAAI7F,GAAU6F,EAAOA,EAAK7F,QAAUwB,CAChCxB,IAAWA,EAAQud,QACnBvd,EAAQud,OAAO4kC,cAAernC,YAAY,KAG9CC,EAAahZ,EAAMjC,QACnBC,KAAM,SAAUsM,GACZlM,KAAKkM,OAASA,EACdlM,KAAK6nC,wBACL7nC,KAAKH,QAAUuB,EAAEzB,UAAWuM,GAAUA,EAAOrM,SAAWqM,EAAOrM,QAAQ8a,WACvE,IAAItO,GAAQH,EAAOc,QAAQX,KAC3Bw/D,GAAkBx/D,EAAMxI,aACxBgoE,EAAkBx/D,EAAMvI,eACxB+nE,EAAkBx/D,EAAMtI,cACxB8nE,EAAkBx/D,EAAMrI,cAE5Bs9B,UAAW,SAAUhd,GACjB,GAAiC/a,GAA7BqvB,EAAS54B,KAAK8rE,QAAQxnD,EAQ1B,OAPIsU,GAAOprB,QAAQw9D,SACfzhE,EAAKvJ,KAAKsrE,WACV1yC,EAASA,EAAOnqB,QAAQ,IAAK,IAAMu8D,EAAa,KAAOzhE,EAAK,OAE5DA,EAAKqvB,EAAOmF,MAAM,kCAAkC,GAExD/9B,KAAK6nC,qBAAqBt+B,GAAM+a,EACzBsU,GAEXkzC,QAAS,SAAUxnD,GAAV,GAGDkU,GAFA/c,EAAgBzb,KAAKH,QAAQ4b,cAC7BswD,QAA2BtwD,EAE/B,QAAQswD,GACR,IAAK,SACD,MAAOtpE,GAASgZ,GAAe6I,EACnC,KAAK,WACD,MAAO7I,GAAc6I,EACzB,SAEI,MADAkU,GAAWrsB,EAAI/I,KAAKkhB,GACb,IAAMkU,EAAW,MAAQA,EAAW,MAGnD4H,YAAa,SAAU9b,GAAV,GACLtY,GAAOhM,KACPub,EAAkBvb,KAAKH,QAAQ0b,eACnCna,GAAE6pE,EAA4B3mD,GAAMkb,KAAK,WAAA,GACjCj2B,GAAKvJ,KAAK6X,aAAamzD,GACvB5rC,EAAYpzB,EAAK67B,qBAAqBt+B,EACtC/J,GAAM8+B,WAAW/iB,IACjBA,EAAgBvb,KAAMo/B,GAE1Bh+B,EAAEpB,MAAM2rE,YAAYvsC,KAExBpzB,EAAK67B,yBAETyjC,SAAU,SAAUzqE,GAChB,MAAOyqE,GAASzqE,IAEpBmW,QAAS,SAAUlI,EAAGqI,GAAb,GACD60D,GAAaJ,EAAY98D,EAAE4I,SAC3Bu0D,EAAoBD,GAAchsE,KAAKksE,gBAAgBp9D,EAAGqI,KAAW60D,GAAchsE,KAAKmsE,cAAcr9D,EAAGqI,EAC7G,IAAI80D,EAEA,MADAn9D,GAAEiJ,kBACK,GAGfo0D,cAAe,SAAUr9D,EAAGqI,GAAb,GACPjL,GAASlM,KAAKkM,OACd0B,EAAW1B,EAAO0B,QACtB,OAAOuJ,GAAMmG,YAAc1P,EAASgjC,kBAAoBhjC,EAASggC,YAAY9+B,IAAMk/B,EAAkB72B,IAEzG+0D,gBAAiB,SAAUp9D,EAAGqI,GAAb,GAOTi1D,GAKIhtC,EAEIitC,EAEIC,EAfZlqE,EAAO5C,EAAM4C,KACb+tC,EAAYrhC,EAAE4I,UAAYtV,EAAKuV,UAC/By4B,EAAMthC,EAAE4I,SAAWtV,EAAKwV,MAC5B,KAAKu4B,IAAcC,EACf,OAAO,CAGX,IADIg8B,GAAiB,EACjBj1D,EAAMmG,UAAW,CACjB,GAAI0wB,EAAkB72B,GAClB,OAAO,CAGX,IADIioB,EAAYp/B,KAAKusE,cAAcp1D,EAAOi5B,GACtChR,GAAa+Q,IACTk8B,EAAqBlgE,EAAII,QAAQ4K,EAAM8G,wBAAyB,MAChEouD,IACIC,EAAqBngE,EAAII,QAAQ6yB,EAAW,MAC5CktC,GAAsBA,IAAuBD,IAC7C,MAAOD,EAInB,IAAIhtC,IAAcjzB,EAAI+rB,UAAUkH,GAAY,CACxC,GAAIjzB,EAAI0pB,aAAauJ,EAAW2rC,KAAmB5+D,EAAI0pB,aAAa1e,EAAM8G,wBAAyB8sD,GAAgB,CAC/G,KAAO3rC,GAAuD,GAA1CA,EAAUtK,WAAWG,WAAWp0B,QAChDu+B,EAAYA,EAAUtK,UAE1B,IAAI3oB,EAAI+rB,UAAUkH,GACd,MAAOgtC,EAEXpsE,MAAKwsE,iBAAiBptC,EAAWjoB,GAErCi1D,GAAiB,GAGzB,MAAOA,IAEXG,cAAe,SAAUp1D,EAAOq2B,GAAjB,GAGHh2B,GAFJi1D,EAAkBt1D,EAAM8G,uBAC5B,IAAI9R,EAAIurB,MAAM+0C,IAAqBj/B,GAAYnwB,EAAWqtB,QAAQvzB,EAAOs1D,KAAqBj/B,GAAYnwB,EAAWotB,UAAUtzB,EAAOs1D,GAAmB,CAErJ,GADIj1D,EAAOxX,KAAK0sE,UAAUD,EAAiBj/B,GACvCh2B,GAAQrL,EAAImtB,QAAQ9hB,KAAUqyB,EAAgBryB,GAC9C,KAAOA,GAAQA,EAAK+I,UAAY/I,EAAK+I,SAASitB,EAAW,EAAIh2B,EAAK+I,SAAS1f,OAAS,IAChF2W,EAAOA,EAAK+I,SAASitB,EAAW,EAAIh2B,EAAK+I,SAAS1f,OAAS,EAGnE,OAAOgpC,GAAgBryB,KAG/Bg1D,iBAAkB,SAAUptC,EAAWjoB,GAArB,GACVjL,GAASlM,KAAKkM,OACdk/B,EAAoB,GAAIvlC,GAAOsP,aAAagC,EAAOjL,EAAO2H,KAC9D1H,GAAI0E,OAAOuuB,GACXv5B,EAAO0P,cAAcrJ,EAAQk/B,IAEjCshC,UAAW,SAAUpoD,EAAMkpB,GAGvB,IAHO,GAEah2B,GADhB0hB,EAAUsU,EAAW,cAAgB,kBACrC3G,EAAUviB,EACPuiB,IAAYrvB,GACfA,EAAOqvB,EAAQ3N,GACX1hB,GAAQrL,EAAIwoB,WAAWnd,IAAS,gBAAgBiB,KAAKjB,EAAKW,aAC1D0uB,EAAUrvB,EACVA,EAAOqvB,EAAQ3N,IAEd1hB,IACDqvB,EAAUA,EAAQ/R,WAG1B,OAAOtd,KAGfoD,GAAWwkB,UAAYA,EACvBxkB,EAAWivB,gBAAkBA,EAC7BjvB,EAAWsxB,mBAAqBA,EAChCtxB,EAAWozB,kBAAoBA,EAC/BpzB,EAAW25C,iBAAmBA,EAC9B35C,EAAWktB,iBAAmBA,EAC9BltB,EAAWmtB,kBAAoBA,EAC/BliC,EAAO+U,WAAaA,GACtBjZ,OAAOnC,MAAMijB,SACC,kBAAVljB,SAAwBA,OAAOyB,IAAMzB,OAAS,SAAU0B,EAAIC,EAAIC,IACrEA,GAAMD,OAEV,SAAU5B,EAAGC,QACVA,OAAO,4CAA6C,iBAAkBD,IACxE,YACG,SAAU8B,EAAGC,GAAb,GACO7B,GAAQmC,OAAOnC,MAAOqG,EAASrG,EAAMsC,GAAGoK,OAAQvJ,EAAckD,EAAOlD,YAAa0a,EAAaxX,EAAOwX,WAAYlR,EAAMtG,EAAOuG,IAAK5G,EAAe7C,EAAY6C,aAAcjD,EAAesD,EAAOtD,aAAcmpC,EAAU7lC,EAAO6lC,QAClOiqB,EAAoB,GAAI9vD,GAAOm7C,oBAAqBx9C,MAAO,YAC3DmpE,EAAoB,GAAI9mE,GAAOm7C,oBAC3Bx9C,MACI,KACA,SAGRopE,EAAS,eACTrW,EAAqB7qB,EAAQ/rC,QAC7B+Y,KAAM,WAAA,GACEwC,GAAMlb,KACNkM,EAASgP,EAAIhP,OACbiL,EAAQ+D,EAAI/D,MAAQ+D,EAAI0wB,YACxBihC,EAAgB3xD,EAAI4xD,aAAgB5xD,EAAIrb,QAAQ22D,eAA6Cn1D,EAA5B6Z,EAAI6xD,eAAe51D,GACpF61D,EAAgB9xD,EAAI+xD,oBAAsBJ,EAAgB3xD,EAAIgyD,eAAe/1D,GAAS9V,EACtFxB,GACA8lD,SAAS,EACTz/C,SAAUgG,EAAOrM,QAAQqG,SACzBinE,cAAe/rE,EAAEe,MAAM+Y,EAAIkyD,cAAelyD,GAC1Co0B,MAAOp0B,EAAImyD,WAAWR,EAAeG,GACrC3wD,cAAenQ,EAAOrM,QAAQwc,cAC9BrI,MAAOxU,EAAMwC,QAAQgS,MAAM9H,EAAOQ,UAElC84C,EAAS,GAAI3/C,GAAOynE,kBAAkBztE,EAC1C2lD,GAAO1xC,QAEXs5D,cAAe,SAAUx4C,GACrB,GAAI1Z,GAAMlb,IACVkb,GAAI2wB,aAAa3wB,EAAI/D,OACjByd,IACI1Z,EAAIrb,QAAQ22D,eACZt7C,EAAIqyD,YAAYryD,EAAIsyD,eAAe54C,IAEnC1Z,EAAIuyD,YAAY74C,EAAM1Z,EAAI4xD,aAAc5xD,EAAI+xD,uBAIxDphC,aAAc,SAAU10B,GAAV,GACN+D,GAAMlb,KACN8S,EAAMoI,EAAIhP,OAAOjB,QACrBkB,GAAI6pB,mBAAmBljB,GAAKoE,QAC5Bw0B,EAAQ5rC,GAAG+rC,aAAa9rC,KAAKmb,EAAK/D,IAEtCo2D,YAAa,SAAUj+B,GACnB,GAAIn4B,GAAQnX,KAAKmX,KACjBA,GAAMkvB,WAAWiJ,GACjBn4B,EAAMkB,UAAS,GACfrY,KAAKkM,OAAOoM,YAAYnB,GACxBnX,KAAK0tE,2BAA2Bp+B,IAEpCo+B,2BAA4B,SAAUp+B,GAIlC,IAJwB,GACpB0H,GAAe51C,EAAEkuC,GAAO/qB,SAAS0lB,WACjCgN,EAAmBD,EAAan2C,OAAS,EACzCq2C,EAAcF,EAAapiC,IAAIqiC,GACF,OAA1BC,EAAY/+B,YAAiD,MAA1B++B,EAAY/+B,WAA+C,KAA1B++B,EAAY/+B,YACnF8+B,GAAoB,EACpBC,EAAcF,EAAapiC,IAAIqiC,EAE/BC,KAAgB5H,GAChBnjC,EAAI2D,YAAY3D,EAAI6vB,gBAAgBh8B,KAAKkM,OAAOjB,SAAU,KAAMqkC,IAGxEm+B,YAAa,SAAU74C,EAAM0a,EAAO09B,GAShC,IATS,GAYLW,GACAtzB,EAAK91B,EAGDqpD,EACAC,EACAC,EAgBAC,EAMJC,EAvCA9yD,EAAMlb,KACNiuE,EAAY7sE,EAAEkuC,EAAM3kC,MAAMg1C,UAC1BuuB,EAAYt5C,EAAKu5C,gBACjBxjE,EAAOujE,EAAUvjE,KACjBD,EAAUwjE,EAAUxjE,QACpB20B,EAAO,SAAU+uC,GACjB,MAAOA,GAAWA,EAAWvtE,OAAS,IAEnCmsE,EAAcnsE,OAAS,GAC1BmsE,EAAchuB,KAKlB,IAHI2uB,EAAkBX,EAAcnsE,OAASw+B,EAAK2tC,GAAel4C,WAAauK,EAAK4uC,GAEnF/yD,EAAImzD,iBAAiBJ,EAAWA,EAAUptE,OAAS8J,GAC/CsjE,EAAUptE,OAAS8J,EAKnB,IAJIijE,EAAWxsE,EAAEusE,GAAiBvpC,QAC9BypC,EAAcF,EAAgBrzB,MAAMz5C,OACpCitE,EAAenjE,EAAOsjE,EAAUptE,OACpC0jB,EAASopD,EAAgB74C,WAClBg5C,GACHzzB,EAAM91B,EAAO+pD,UAAUV,EAAW,GAClC1yD,EAAIqzD,aAAaV,EAAcxzB,EAAIC,MAAMz5C,OAAQw5C,GACjDyzB,GAGJG,GAAU,GAAG3zB,MAAMz5C,OAAS6J,GAC5BtJ,EAAE6sE,GAAWzuC,KAAK,SAAUl8B,EAAG+2C,GAC3B,KAAOA,EAAIC,MAAMz5C,OAAS6J,GACtB2vC,EAAIm0B,iBAIZP,EAAU,GAAG3zB,MAAMz5C,OAAS6J,IACxBqjE,EAAY3sE,EAAEi+B,EAAK2tC,IAAkB3tC,EAAKsuC,EAAgBrzB,QAAQlW,QACtEhjC,EAAE6sE,GAAWzuC,KAAK,SAAUl8B,EAAG+2C,GAC3Bn/B,EAAIqzD,aAAa7jE,EAAU2vC,EAAIC,MAAMz5C,OAAQw5C,EAAK0zB,EAAY,MAGtE7yD,EAAIuzD,uBAAuBn/B,EAAO4+B,GAC9BF,EAAWp5C,EAAK85C,eAChB1B,EAAc,IACd7gE,EAAIS,KAAKogE,EAAc,IAAMzjE,GAAIykE,EAASzkE,IAAM,QAEnDykE,EAASpjE,eAAiBxJ,EAAE6sE,GAAW1tD,WAAanf,EAAE4rE,IAAgBxtC,KAAK,SAAUl8B,EAAGiqC,GACrFryB,EAAIyzD,sBAAsBphC,EAAMygC,KAEpC9yD,EAAI0zD,eAAet/B,EAAO4+B,GAC1BA,EAAUW,iBAAmBX,EAAUW,mBAAoB,EACvD3zD,EAAI4zD,2BAA2Bx/B,IAAU4+B,EAAUW,kBACnD3zD,EAAI6zD,yBAAyBz/B,EAAO4+B,EAAUW,mBAGtDG,cAAe,SAAU30B,GACrB,MAAOluC,GAAIqO,GAAG6/B,EAAIvlB,WAAY,UAAY3oB,EAAIqO,GAAG6/B,EAAIC,MAAM,GAAI,OAEnEy0B,yBAA0B,SAAUz/B,EAAO2/B,GAAjB,GAIlB7qC,GAAO8qC,EAASC,EAHhBC,GAAY,GAAIC,OAAOC,UACvBC,KACA7kE,EAAU4kC,EAAM3kC,KAAK,GAAG2vC,MAAMz5C,OAE9B2uE,EAAc,WACd,IAAK,GAAIlsE,GAAI,EAAGA,EAAIoH,EAASpH,IACzBisE,EAAIjsE,GAAK,WAAY8rE,GAGzBK,EAAiB,SAAUn4C,EAAGiW,GAC9BnsC,EAAEmsC,GAAM0hC,EAAY,OAAS,cAAc,KAAMM,EAAIj4C,KAErDo4C,EAAsB,SAAUp4C,EAAGiW,GACnCnsC,EAAEmsC,GAAM0hC,EAAY,OAAS,cAAc,UAAWM,EAAIj4C,KAE1Dq4C,EAAe3vE,KAAKgvE,aACxB5tE,GAAEkuC,EAAM3kC,MAAM60B,KAAK,SAAUqV,EAAGwF,GAC5B,GAAIs1B,EAAat1B,GAQb,IAPAjW,EAAQyQ,EACRq6B,EAAU5/B,EAAM3kC,OAAOy5B,GACvB+qC,EAAYD,IAAYS,EAAaT,GACjCC,IACAK,IACApuE,EAAEi5C,EAAIC,OAAO9a,KAAKiwC,IAEfN,GACH/tE,EAAE8tE,EAAQ50B,OAAO9a,KAAKkwC,GACtBR,EAAU5/B,EAAM3kC,OAAOy5B,GACvB+qC,EAAYD,IAAYS,EAAaT,MAKrDJ,2BAA4B,SAAUx/B,GAAV,GASpBsgC,GARAt1B,EAAQl5C,EAAEkuC,EAAM3kC,MAAM4V,WACtBovD,EAAe3vE,KAAKgvE,cACpBa,IAUJ,OATAv1B,GAAM9a,KAAK,SAAUlI,EAAGiW,GAChBA,EAAKhkC,IAAMomE,EAAapiC,EAAKzY,aAC7B+6C,EAAW1vE,KAAKotC,EAAKhkC,MAGzBqmE,EAAkBt1B,EAAM3c,OAAO,SAAUrG,EAAGiW,GAC5C,GAAIuiC,GAAcviC,EAAK11B,aAAa,UACpC,OAAOi4D,KAAgBH,EAAapiC,EAAKzY,aAAe1zB,EAAEmC,QAAQusE,EAAaD,UAE1ED,EAAgB/uE,QAE7B0tE,aAAc,SAAU1xC,EAAOwd,EAAKjW,GAChCA,EAAQ32B,MAAM22B,MAAcA,CAC5B,KAAK,GAAWmJ,GAAPjqC,EAAI,EAASA,EAAIu5B,EAAOv5B,IAC7BiqC,EAAO8M,EAAI01B,WAAW3rC,GACtBmJ,EAAK7+B,UAAY,UAGzB2/D,iBAAkB,SAAU1jE,EAAMkyB,GAC9B,IAAK,GAAWwd,GAAK21B,EAAZ1sE,EAAI,EAAmBA,EAAIu5B,EAAOv5B,IACvC+2C,EAAM1vC,EAAKq0C,MACXgxB,EAAY31B,EAAIvlB,WAChBk7C,EAAUn4C,YAAYwiB,GACjB21B,EAAUrlE,KAAK9J,QAChBsL,EAAI0E,OAAOm/D,IAIvBxC,eAAgB,SAAU54C,GAAV,GASRyoB,GACKxI,EAAOwF,EAEH/iB,EAAOiW,EAXhBryB,EAAMlb,KACN8S,EAAMoI,EAAIhP,OAAOjB,SACjBijE,EAAYt5C,EAAKu5C,gBACjBH,EAAWp5C,EAAK85C,eAChBuB,EAAgBjC,EAASpjE,eACzB0kC,EAAQnjC,EAAIgF,OAAO2B,EAAK,QAI5B,KAHAoI,EAAIuzD,uBAAuBn/B,EAAO4+B,GAClChzD,EAAI0zD,eAAet/B,EAAO4+B,GACtB7wB,EAAQ/N,EAAM4gC,cACTr7B,EAAI,EAAQA,EAAIq5B,EAAUvjE,KAAMkqC,IAErC,IADAwF,EAAMgD,EAAMixB,YACHh3C,EAAI,EAASA,EAAI42C,EAAUxjE,QAAS4sB,IACzCiW,EAAO8M,EAAI01B,aACXxiC,EAAK7+B,UAAY,SACP,IAANmmC,GAAiB,IAANvd,GAAW02C,EAASzkE,KAC/BgkC,EAAKhkC,GAAKykE,EAASzkE,IAEvB2R,EAAIyzD,sBAAsBphC,EAAM0iC,GAAuB,IAANp7B,GAAiB,IAANvd,EAAU02C,KAM9E,OAHIE,GAAUW,kBACV3zD,EAAI6zD,yBAAyBz/B,EAAO4+B,EAAUW,kBAE3Cv/B,GAEXm/B,uBAAwB,SAAUn/B,EAAO1a,GACrC,GAAI9tB,GAAQ9G,KAAKmwE,eAAev7C,EAChCzoB,GAAIS,KAAK0iC,GACLpmC,YAAa0rB,EAAK1rB,aAAe,KACjCC,YAAayrB,EAAKzrB,aAAe,KACjC4uB,UAAWnD,EAAKmD,WAAa,KAC7BxuB,GAAIqrB,EAAKrrB,IAAM,KACfT,QAAS8rB,EAAK9rB,SAAW,KACzBhC,MAAOA,GAAS,OAEpB1F,EAAEkuC,GAAOziC,SAAS,YAEtB8hE,sBAAuB,SAAUphC,EAAM3Y,GACnC,GAAI9tB,GAAQ9G,KAAKmwE,eAAev7C,EAChC9tB,GAAM4uC,QAAU9gB,EAAKzrB,aAAe,KACpCrC,EAAM2uC,OAAS7gB,EAAKxrB,YAAc,KAClC+C,EAAIS,KAAK2gC,GACLzmC,MAAOA,GAAS,KAChBixB,UAAWnD,EAAKmD,WAAa,QAGrC62C,eAAgB,SAAUt/B,EAAO1a,GAAjB,GAIJ/rB,GAEAQ,CALJimC,GAAMzmC,UAAY+rB,EAAKw7C,eACvB9gC,EAAM+gC,gBACCz7C,EAAKw7C,iBACRvnE,EAAUymC,EAAMghC,gBACpBznE,EAAQ6F,UAAYkmB,EAAKw7C,eACrB/mE,EAAYrJ,KAAKuwE,kBAAkB37C,EAAK47C,kBAC5CrkE,EAAIS,KAAK/D,GACL/B,OACIo7C,UAAW74C,EAAU64C,UACrBuuB,cAAepnE,EAAUonE,mBAKzCN,eAAgB,SAAUv7C,GAAV,GACRvrB,GAAYrJ,KAAKuwE,kBAAkB37C,EAAKvrB,WACxC0gD,EAAa,YAAcn1B,GAAOA,EAAKjrB,SAAW,GAAK,SAAW,IACtE,QACIZ,MAAO6rB,EAAK7rB,MAAQ6rB,EAAK7rB,MAAQ6rB,EAAK87C,UAAY,KAClD1nE,OAAQ4rB,EAAK5rB,OAAS4rB,EAAK5rB,OAAS4rB,EAAK+7C,WAAa,KACtDzuB,UAAW74C,EAAU64C,UACrBuuB,cAAepnE,EAAUonE,cACzBG,gBAAiBh8C,EAAKi8C,SAAW,KACjCt7B,YAAa3gB,EAAK2gB,YAClB9rC,YAAamrB,EAAKnrB,YAClBqnE,YAAal8C,EAAKk8C,YAClBC,eAAgBn8C,EAAKlrB,gBAAkB,WAAa,KACpDqgD,WAAYA,IAGpBwmB,kBAAmB,SAAUlnE,GAAV,GAKH2nE,GAJR9uB,EAAY,GACZuuB,EAAgBvuB,CAUpB,OATI74C,KACIA,EAAUmE,QAAQ,UACdwjE,EAAQ3nE,EAAU0M,MAAM,KAC5BmsC,EAAY8uB,EAAM,GAClBP,EAAgBO,EAAM,IAEtB9uB,EAAY74C,IAIhB64C,UAAWA,EACXuuB,cAAeA,IAGvBpD,WAAY,SAAU/9B,EAAO09B,GAAjB,GAOJ9xD,GACA+1D,EACAtmE,EACA9B,EACAqoE,EAEA3rE,EAIA4rE,EACAX,EACA3B,EACAuC,CAnBJ,OAAK9hC,IAMDp0B,EAAMlb,KACNixE,EAAS3hC,EAAMxoC,MACf6D,EAAO2kC,EAAM3kC,KACb9B,EAAUymC,EAAMzmC,QAChBqoE,EAAe9vE,EAAEyH,EAAUA,EAAQwsB,WAAU,GAAQh0B,GACzD6vE,EAAavkE,KAAK,aAAakE,SAC3BtL,EAAW+pC,EAAMvX,UACrBxyB,EAAWA,EAASkJ,QAAQ,wBAAyB,IACrDlJ,EAAWA,EAASkJ,QAAQ,cAAe,KAC3ClJ,EAAWA,EAASkJ,QAAQ,YAAa,IACrC0iE,EAAiBj2D,EAAIm2D,cAAc/hC,GAAO,GAC1CkhC,EAAmB3nE,EAAUqS,EAAIm2D,cAAcxoE,GAAWxH,EAC1DwtE,EAAmB3zD,EAAI4zD,2BAA2Bx/B,GAClD8hC,GACAjD,iBACIplE,MAAOkoE,EAAOloE,OAASumC,EAAMvmC,MAAQixC,WAAWi3B,EAAOloE,OAASumC,EAAMvmC,OAAS,KAC/EC,OAAQioE,EAAOjoE,QAAUsmC,EAAMtmC,OAASgxC,WAAWi3B,EAAOjoE,QAAUsmC,EAAMtmC,QAAU,KACpF0B,QAASC,EAAK,GAAKA,EAAK,GAAG4V,SAAS1f,OAAS,EAC7C8J,KAAMA,EAAK9J,OACX6vE,UAAWx1D,EAAIo2D,SAASL,EAAOloE,OAC/B4nE,WAAYz1D,EAAIo2D,SAASL,EAAOjoE,QAChCE,YAAaomC,EAAMpmC,YACnBC,YAAammC,EAAMnmC,YACnBE,UAAW8nE,EAAejvB,UAC1B2uB,QAASI,EAAOL,iBAAmBthC,EAAMuhC,QACzC94C,UAAWxyB,EACXgE,GAAI+lC,EAAM/lC,GACVgsC,YAAa07B,EAAO17B,aAAejG,EAAM9lC,OACzCsnE,YAAaG,EAAOH,YACpBrnE,YAAawnE,EAAOxnE,aAAe,GACnCC,kBAAmBunE,EAAOF,eAC1BjoE,QAASwmC,EAAMxmC,QACfsnE,eAAgBvnE,EAAUqoE,EAAaxzD,OAAS,GAChD8yD,iBAAkB3nE,GAAW2nE,EAAiBtuB,UAAYsuB,EAAiBtuB,UAAY,IAAMsuB,EAAiBC,cAAgB,GAC9H5B,iBAAkBA,GAEtB7B,kBAEJoE,EAAUzmE,KAAOuQ,EAAIq2D,eAAe5mE,EAAMqiE,EAAeoE,GAClDA,IA3CCjD,mBACAnB,mBA4CZuE,eAAgB,SAAU5mE,EAAMqiE,EAAeoE,GAA/B,GAEG/2B,GAAKm3B,EAASl3B,EAAO/M,EAAMkkC,EACjCnuE,EAKIs5B,EAPT1hB,EAAMlb,KACN40B,IACJ,KAAStxB,EAAI,EAAGA,EAAIqH,EAAK9J,OAAQyC,IAK7B,IAJA+2C,EAAM1vC,EAAKrH,GACXkuE,GAAYl3B,UACZA,EAAQD,EAAIC,MACZ1lB,EAAKz0B,KAAKqxE,GACD50C,EAAI,EAAGA,EAAI0d,EAAMz5C,OAAQ+7B,IAC9B2Q,EAAO+M,EAAM1d,GACb60C,EAAWv2D,EAAIw2D,UAAUnkC,GACrBnsC,EAAEmC,QAAQgqC,EAAMy/B,QAChBoE,EAAUpE,cAAc7sE,KAAKsxE,GAEjCD,EAAQl3B,MAAMn6C,KAAKsxE,EAG3B,OAAO78C,IAEX88C,UAAW,SAAUnkC,GAAV,GAKH3Y,GAJA1Z,EAAMlb,KACN2xE,EAASpkC,EAAKzmC,MACduC,EAAY6R,EAAIm2D,cAAc9jC,EAkBlC,OAjBAlkC,GAAYA,EAAU64C,UAAY74C,EAAU64C,UAAY,IAAM74C,EAAUonE,cAAgB,GACpF77C,GACA7rB,MAAO4oE,EAAO5oE,OAASwkC,EAAKxkC,MAAQixC,WAAW23B,EAAO5oE,OAASwkC,EAAKxkC,OAAS,KAC7EC,OAAQ2oE,EAAO3oE,QAAUukC,EAAKvkC,OAASgxC,WAAW23B,EAAO3oE,QAAUukC,EAAKvkC,QAAU,KAClF0nE,UAAWx1D,EAAIo2D,SAASK,EAAO5oE,OAC/B4nE,WAAYz1D,EAAIo2D,SAASK,EAAO3oE,QAChCI,WAAYuoE,EAAOl8B,OACnBtsC,YAAawoE,EAAOj8B,QACpBrsC,UAAWA,EACXwnE,QAASc,EAAOf,iBAAmBrjC,EAAKsjC,QACxC94C,UAAWwV,EAAKxV,UAChBxuB,GAAIgkC,EAAKhkC,GACTgsC,YAAao8B,EAAOp8B,aAAehI,EAAK/jC,OACxCsnE,YAAaa,EAAOb,YACpBrnE,YAAakoE,EAAOloE,YACpBE,SAA+B,UAArBgoE,EAAO5nB,aAIzBsnB,cAAe,SAAU3lE,EAASkmE,GAAnB,GAMPC,GALA/qE,EAAQ4E,EAAQ5E,MAChBgrE,EAAShrE,EAAMo7C,WAAax2C,EAAQslE,OAAS,EACjD,OAAIY,IACS1vB,UAAW4vB,IAEpBD,EAAS/qE,EAAM2pE,eAAiB/kE,EAAQmmE,QAAU,GAClDC,GAAUD,GAEN3vB,UAAW4vB,EACXrB,cAAeoB,IAGlBC,GAAUD,GAEP3vB,UAAW,OACXuuB,cAAeoB,GAGnBC,IAAWD,GAEP3vB,UAAW4vB,EACXrB,cAAe,QAInBvuB,UAAW,GACXuuB,cAAe,MAGvBa,SAAU,SAAU3lE,GAChB,GAAIomE,IAAQpmE,GAAS,IAAIoyB,MAAM6uC,EAC/B,OAAOmF,GAAOA,EAAK,GAAK,MAE5BhF,eAAgB,SAAU51D,GACtB,GAAIyJ,GAAQzU,EAAI2xB,SAASzgB,EAAWuD,MAAMzJ,GAAQhL,EAAI8sB,iBAAiB,EACvE,OAAO08B,GAAkBpX,aAAa39B,GAAO,IAEjDssD,eAAgB,SAAU/1D,GACtB,GAAIyJ,GAAQzU,EAAI2xB,SAASzgB,EAAWuD,MAAMzJ,GAAQhL,EAAI8sB,iBAAiB,EACvE,OAAO0zC,GAAkBpuB,aAAa39B,MAG1C01C,EAAkBzwD,EAAOvE,KAAK3B,QAC9BS,QAAS,SAAUP,GAEf,MADAA,GAAQ22D,eAAiBx2D,KAAKH,QAAQ22D,eAC/B,GAAID,GAAmB12D,MAGlCmyE,EAAsB1b,EAAgB32D,QACtC6M,OAAQ,SAAU1K,EAAI8e,GAClB,GAAInD,IAAek4C,EAAkBl4C,YAAYmD,EACjD9e,GAAG+e,YAAY,mBAAoBpD,KAG3Cje,GAAMsC,GAAGoK,OAAOoqD,gBAAkBA,EAClC92D,EAAMsC,GAAGoK,OAAOqqD,mBAAqBA,EACrC/wD,EAAa,cAAe,GAAIwsE,IAC5B5xE,QAASm2D,EACTC,gBAAgB,EAChB/zD,SAAU,GAAIF,IACVE,SAAUE,EAAYE,eACtByQ,MAAO,qBAGjB3R,OAAOnC,MAAMijB,SACC,kBAAVljB,SAAwBA,OAAOyB,IAAMzB,OAAS,SAAU0B,EAAIC,EAAIC,IACrEA,GAAMD,OAEV,SAAU5B,EAAGC,QACVA,OAAO,2CAA4C,4CAA6CD,IAClG,YACG,SAAU8B,EAAGC,GAAb,GACO7B,GAAQmC,OAAOnC,MAAOyyE,GAClB5uE,OAAQ,IACRmN,IAAK,GACNvH,GACC,KACA,MACDipE,GACC,QACA,SACA,SACA,SACA,SACA,QACA,QACA,SACA,UACA,UACA,OACA,UAEJC,GACA5lC,aAEQxU,UAAW,qCACXpsB,MAAO,SAGPosB,UAAW,uCACXpsB,MAAO,WAGPosB,UAAW,sCACXpsB,MAAO,UAGPosB,UAAW,0BACXpsB,MAAO,KAGf+gC,cAAe,YACfC,eAAgB,QAChBlqC,SAAU,4DACV2vE,cAAe,2EAEfC,GACA9lC,aAEQxU,UAAW,kCACXpsB,MAAO,aAGPosB,UAAW,oCACXpsB,MAAO,eAGPosB,UAAW,mCACXpsB,MAAO,cAGPosB,UAAW,qCACXpsB,MAAO,gBAGPosB,UAAW,uCACXpsB,MAAO,kBAGPosB,UAAW,sCACXpsB,MAAO,iBAGPosB,UAAW,qCACXpsB,MAAO,gBAGPosB,UAAW,uCACXpsB,MAAO,kBAGPosB,UAAW,sCACXpsB,MAAO,iBAGPosB,UAAW,0BACXpsB,MAAO,KAGf+gC,cAAe,YACfC,eAAgB,QAChBlqC,SAAU,4DACV2vE,cAAe,2EAEfE,GACA/lC,aAEQxU,UAAW,kCACXpsB,MAAO,aAGPosB,UAAW,oCACXpsB,MAAO,eAGPosB,UAAW,mCACXpsB,MAAO,cAGPosB,UAAW,qCACXpsB,MAAO,gBAGPosB,UAAW,uCACXpsB,MAAO,kBAGPosB,UAAW,sCACXpsB,MAAO,iBAGPosB,UAAW,0BACXpsB,MAAO,KAGf+gC,cAAe,YACfC,eAAgB,QAChBlqC,SAAU,4DACV2vE,cAAe,2EAEfG,EAAiB,06MACjBjF,EAAoB9tE,EAAMoC,MAAMjC,QAChCC,KAAM,SAAUC,GACZG,KAAKH,QAAUA,GAEnBiU,KAAM,WAEF,QAASQ,GAAMxF,GACXA,EAAEiJ,iBACF/L,EAAKyF,UACL+zC,EAAO/zC,UAEX,QAAS+gE,GAAU1jE,GACf9C,EAAKymE,oBAAoBC,GACzBp+D,EAAMxF,GACF9C,EAAKgU,QACLhU,EAAKgU,SAETngB,EAAQstE,cAAcuF,GAE1B,QAASC,GAAa7jE,GAClBwF,EAAMxF,GACNjP,EAAQstE,gBAjBV,GACyG3nB,GAsBvG95C,EAQIk9C,EA9BJ58C,EAAOhM,KAAMH,EAAUmM,EAAKnM,QAASwc,EAAgBxc,EAAQwc,cAAeq2D,EAAY7yE,EAAQyvC,MAAeppC,EAAWrG,EAAQqG,SAAU2iD,EAAOrpD,EAAMwC,QAAQE,QAAQ+R,IAkB7KoI,GAAc/H,MAAQq+D,EACtBt2D,EAAc/I,MAAQpN,EAASd,YAC/BiX,EAAcspC,QAAU9lD,EAAQ8lD,QAChCH,EAASpkD,EAAE4K,EAAKs5C,gBAAgBp/C,IAAWsM,SAASvH,SAAS4I,MAAMm4B,YAAY3vB,GAAe9P,QAAQ,aAAasU,YAAY,QAAShhB,EAAQmU,OAAOytB,MAAM90B,KAAK,gBAAgBgN,MAAM64D,GAAW/wC,MAAM90B,KAAK,mBAAmBgN,MAAMg5D,GAAclxC,MAAM7M,KAAK,eAC5PlpB,EAAU85C,EAAO95C,QACrBM,EAAK4mE,uBAAuBlnE,GAC5BM,EAAK6mE,yBAAyBnnE,EAASgnE,GACvC1mE,EAAK8mE,wBAAwBpnE,EAASgnE,GACtC1mE,EAAK+mE,iCAAiCrnE,EAASgnE,GAC/CltB,EAAOQ,SACPR,EAAO1xC,OACH+0C,IACID,EAAel9C,EAAQa,QAAQ,aAAavD,SAChD0C,EAAQ+G,IAAI,aAAcm2C,KAGlCgqB,uBAAwB,SAAUlnE,GAC9B,GAAIsnE,GAAahzE,KAAKgzE,aACtBA,GAAWC,SAAWvnE,EAAQiB,KAAK,wBAAwBumE,eAAgB32D,WAAW,IAASqY,KAAK,kBAExG69C,oBAAqB,WAAA,GACbzmE,GAAOhM,KACP40B,EAAO5oB,EAAKnM,QAAQyvC,KACxBtjC,GAAKmnE,wBAAwBv+C,GAC7B5oB,EAAKonE,uBAAuBx+C,GAC5B5oB,EAAKqnE,gCAAgCz+C,IAEzCu+C,wBAAyB,SAAUT,GAAV,GACjBY,GAAYtzE,KAAKgzE,WAAWM,UAC5BnF,EAAkBuE,EAAUvE,eAChCA,GAAgBplE,MAAQuqE,EAAUvqE,MAAM4C,QACxCwiE,EAAgBuC,UAAY4C,EAAU5C,UAAU/kE,QAChDwiE,EAAgBnlE,OAASsqE,EAAUtqE,OAAO2C,QAC1CwiE,EAAgBzjE,QAAU4oE,EAAU5oE,QAAQiB,QAC5CwiE,EAAgBxjE,KAAO2oE,EAAU3oE,KAAKgB,QACtCwiE,EAAgBwC,WAAa2C,EAAU3C,WAAWhlE,QAClDwiE,EAAgBjlE,YAAcoqE,EAAUpqE,YAAYyC,QACpDwiE,EAAgBhlE,YAAcmqE,EAAUnqE,YAAYwC,QACpDwiE,EAAgB9kE,UAAYiqE,EAAUjqE,UAAUsC,QAChDwiE,EAAgB0C,QAAUyC,EAAUzC,QAAQllE,QAC5CwiE,EAAgBp2C,UAAYu7C,EAAUv7C,UAAUpsB,MAChDwiE,EAAgB5kE,GAAK+pE,EAAU/pE,GAAGoC,MAClCwiE,EAAgB54B,YAAc+9B,EAAU/9B,YAAY5pC,QACpDwiE,EAAgB2C,YAAcwC,EAAUxC,YAAYnlE,QACpDwiE,EAAgB1kE,YAAc6pE,EAAU7pE,YAAYkC,QACpDwiE,EAAgBzkE,gBAAkB4pE,EAAU5pE,gBAAgB6pE,SAEhEH,uBAAwB,SAAU9jC,GAAV,GAChBmiC,GAAWniC,EAAMo/B,kBACjB8E,EAAWxzE,KAAKgzE,WAAWQ,QAC/B/B,GAAS7mE,eAAiB4oE,EAAS5oE,eAAe2oE,QAClD9B,EAAS1oE,MAAQyqE,EAASzqE,MAAM4C,QAChC8lE,EAASf,UAAY8C,EAAS9C,UAAU/kE,QACxC8lE,EAASzoE,OAASwqE,EAASxqE,OAAO2C,QAClC8lE,EAASd,WAAa6C,EAAS7C,WAAWhlE,QAC1C8lE,EAASroE,WAAaoqE,EAASpqE,WAAWuC,QAC1C8lE,EAAStoE,YAAcqqE,EAASrqE,YAAYwC,QAC5C8lE,EAASpoE,UAAYmqE,EAASnqE,UAAUsC,QACxC8lE,EAASZ,QAAU2C,EAAS3C,QAAQllE,QACpC8lE,EAAS15C,UAAYy7C,EAASz7C,UAAUpsB,MACxC8lE,EAASloE,GAAKiqE,EAASjqE,GAAGoC,MAC1B8lE,EAASl8B,YAAci+B,EAASj+B,YAAY5pC,QAC5C8lE,EAASX,YAAc0C,EAAS1C,YAAYnlE,QAC5C8lE,EAAShoE,YAAc+pE,EAAS/pE,YAAYkC,QAC5C8lE,EAAS9nE,SAAW6pE,EAAS7pE,SAAS4pE,QACjC9B,EAAS1oE,QACV0oE,EAAS7mE,gBAAiB;AAC1B6mE,EAAS1oE,MAAQ,IAAMumC,EAAM6+B,gBAAgBzjE,QAC7C+mE,EAASf,UAAY,MAG7B2C,gCAAiC,SAAU/jC,GAAV,GACzB6+B,GAAkB7+B,EAAM6+B,gBACxBsF,EAAoBzzE,KAAKgzE,WAAWS,iBACxCtF,GAAgBiC,eAAiBqD,EAAkBrD,eAAezkE,MAClEwiE,EAAgBqC,iBAAmBiD,EAAkBjD,iBAAiB7kE,QACtEwiE,EAAgBrlE,QAAU2qE,EAAkB3qE,QAAQ6C,MACpDwiE,EAAgBU,iBAAmB4E,EAAkB5E,iBAAiB0E,SAE1EG,SAAU,SAAUzqE,EAAO0C,GACnBA,GAASvK,EAAEmC,QAAQoI,EAAO1C,QAC1BA,EAAM9I,KAAKwL,IAGnBknE,yBAA0B,SAAUnnE,EAAS4jC,GAAnB,GAClB0jC,GAAahzE,KAAKgzE,WAClBM,EAAYN,EAAWM,aACvBnF,EAAkB7+B,EAAM6+B,gBAAkB7+B,EAAM6+B,mBACpDA,GAAgB1kE,YAAc0kE,EAAgB1kE,aAAe,GAC7DzJ,KAAK0zE,SAASzqE,EAAOklE,EAAgBuC,WACrC1wE,KAAK0zE,SAASzqE,EAAOklE,EAAgBwC,YACrC3wE,KAAK2zE,oBAAoBjoE,EAAQiB,KAAK,yBAA0B,QAASwhE,EAAiBmF,GAC1FtzE,KAAK2zE,oBAAoBjoE,EAAQiB,KAAK,0BAA2B,SAAUwhE,EAAiBmF,GAC5FtzE,KAAK2zE,oBAAoBjoE,EAAQiB,KAAK,2BAA4B,UAAWwhE,EAAiBmF,GAC1F9iE,IAAK,EACL7E,MAAO,IAEX3L,KAAK2zE,oBAAoBjoE,EAAQiB,KAAK,wBAAyB,OAAQwhE,EAAiBmF,GACpF9iE,IAAK,EACL7E,MAAO,IAEX3L,KAAK4zE,kBAAkBloE,EAAQiB,KAAK,8BAA+B,YAAawhE,EAAiBmF,EAAWrqE,GAC5GjJ,KAAK4zE,kBAAkBloE,EAAQiB,KAAK,+BAAgC,aAAcwhE,EAAiBmF,EAAWrqE,GAC9GjJ,KAAK2zE,oBAAoBjoE,EAAQiB,KAAK,gCAAiC,cAAewhE,EAAiBmF,GACvGtzE,KAAK2zE,oBAAoBjoE,EAAQiB,KAAK,gCAAiC,cAAewhE,EAAiBmF,GACvGtzE,KAAK6zE,4BAA4BnoE,EAAQiB,KAAK,6BAA8BwhE,GAC5EnuE,KAAK8zE,iBAAiBpoE,EAAQiB,KAAK,sBAAuB,UAAWwhE,EAAiBmF,GACtFtzE,KAAK+zE,WAAWroE,EAAQiB,KAAK,uBAAwB,YAAawhE,EAAiBmF,GACnFtzE,KAAK+zE,WAAWroE,EAAQiB,KAAK,gBAAiB,KAAMwhE,EAAiBmF,GACrEtzE,KAAK2zE,oBAAoBjoE,EAAQiB,KAAK,0BAA2B,cAAewhE,EAAiBmF,GACjGtzE,KAAK8zE,iBAAiBpoE,EAAQiB,KAAK,0BAA2B,cAAewhE,EAAiBmF,GAC9FtzE,KAAK4zE,kBAAkBloE,EAAQiB,KAAK,0BAA2B,cAAewhE,EAAiBmF,EAAWpB,GAC1GlyE,KAAKg0E,cAActoE,EAAQiB,KAAK,8BAA+B,kBAAmBwhE,EAAiBmF,IAEvGR,wBAAyB,SAAUpnE,EAAS4jC,GAAnB,GAIjBo/B,GAHAsE,EAAahzE,KAAKgzE,WAClBQ,EAAWR,EAAWQ,WAC1BlkC,GAAM09B,cAAgB19B,EAAM09B,cAAgB19B,EAAM09B,kBAC9C0B,EAAiBp/B,EAAM09B,cAAc,KACrCvjE,YAAa,GACbE,UAAU,GAEd3J,KAAK0zE,SAASzqE,EAAOylE,EAAegC,WACpC1wE,KAAK0zE,SAASzqE,EAAOylE,EAAeiC,YACpC3wE,KAAKg0E,cAActoE,EAAQiB,KAAK,4BAA6B,iBAAkB2iC,EAAM6+B,gBAAiBqF,GACtGxzE,KAAK2zE,oBAAoBjoE,EAAQiB,KAAK,wBAAyB,QAAS+hE,EAAgB8E,GACxFxzE,KAAK2zE,oBAAoBjoE,EAAQiB,KAAK,yBAA0B,SAAU+hE,EAAgB8E,GAC1FxzE,KAAK4zE,kBAAkBloE,EAAQiB,KAAK,6BAA8B,YAAa+hE,EAAgB8E,EAAUvqE,GACzGjJ,KAAK4zE,kBAAkBloE,EAAQiB,KAAK,8BAA+B,aAAc+hE,EAAgB8E,EAAUvqE,GAC3GjJ,KAAK2zE,oBAAoBjoE,EAAQiB,KAAK,+BAAgC,aAAc+hE,EAAgB8E,GACpGxzE,KAAK2zE,oBAAoBjoE,EAAQiB,KAAK,iCAAkC,cAAe+hE,EAAgB8E,GACvGxzE,KAAKi0E,2BAA2BvoE,EAAQiB,KAAK,4BAA6B+hE,GAC1E1uE,KAAK8zE,iBAAiBpoE,EAAQiB,KAAK,qBAAsB,UAAW+hE,EAAgB8E,GACpFxzE,KAAK+zE,WAAWroE,EAAQiB,KAAK,4BAA6B,YAAa+hE,EAAgB8E,GACvFxzE,KAAK+zE,WAAWroE,EAAQiB,KAAK,qBAAsB,KAAM+hE,EAAgB8E,GACzExzE,KAAK2zE,oBAAoBjoE,EAAQiB,KAAK,+BAAgC,cAAe+hE,EAAgB8E,GACrGxzE,KAAK8zE,iBAAiBpoE,EAAQiB,KAAK,+BAAgC,cAAe+hE,EAAgB8E,GAClGxzE,KAAK4zE,kBAAkBloE,EAAQiB,KAAK,+BAAgC,cAAe+hE,EAAgB8E,EAAUtB,GAC7GlyE,KAAKg0E,cAActoE,EAAQiB,KAAK,uBAAwB,WAAY+hE,EAAgB8E,IAExFT,iCAAkC,SAAUrnE,EAAS4jC,GAAnB,GAC1B0jC,GAAahzE,KAAKgzE,WAClBS,EAAoBT,EAAWS,qBAC/BtF,EAAkB7+B,EAAM6+B,eAC5BnuE,MAAK+zE,WAAWroE,EAAQiB,KAAK,2BAA4B,iBAAkBwhE,EAAiBsF,GAC5FzzE,KAAKk0E,oCAAoCxoE,EAAQiB,KAAK,qCAAsCwhE,GAC5FnuE,KAAK+zE,WAAWroE,EAAQiB,KAAK,mCAAoC,UAAWwhE,EAAiBsF,GAC7FzzE,KAAKg0E,cAActoE,EAAQiB,KAAK,2BAA4B,mBAAoBwhE,EAAiBsF,IAErGE,oBAAqB,SAAUjoE,EAAS80B,EAAU5L,EAAMu/C,EAASC,GAC7D,GAAIC,GAAYF,EAAQ3zC,GAAY90B,EAAQ4oE,oBAAoBF,EAAWhzE,EAAEzB,UAAWsyE,EAAwBmC,GAAYnC,GAAwBr9C,KAAK,sBACrJ4L,KAAY5L,IACZy/C,EAAU1oE,MAAM2B,SAASsnB,EAAK4L,GAAW,MAGjDozC,kBAAmB,SAAUloE,EAAS80B,EAAU5L,EAAMu/C,EAAS5nC,GAC3D,GAAI8nC,GAAYF,EAAQ3zC,GAAY90B,EAAQ6oE,mBAAoBhoC,WAAYA,IAAc3X,KAAK,oBAC/F50B,MAAKw0E,mBAAmBH,EAAWz/C,EAAM4L,IAE7CqzC,4BAA6B,SAAUnoE,EAASkpB,GAAnB,GACrB1uB,GAAWlG,KAAKH,QAAQqG,SACxBotE,EAAYtzE,KAAKgzE,WAAWM,UAC5B/mC,EAAa4lC,EAA+B5lC,UAChDA,GAAW,GAAG0kB,QAAU/qD,EAAS2D,UACjC0iC,EAAW,GAAG0kB,QAAU/qD,EAAS4D,YACjCyiC,EAAW,GAAG0kB,QAAU/qD,EAAS6D,WACjCwiC,EAAW,GAAG0kB,QAAU/qD,EAASuE,YACjCzK,KAAKy0E,uBAAuB/oE,EAASymE,EAAgC,YAAav9C,EAAM0+C,IAE5FW,2BAA4B,SAAUvoE,EAASkpB,GAAnB,GACpB1uB,GAAWlG,KAAKH,QAAQqG,SACxBstE,EAAWxzE,KAAKgzE,WAAWQ,SAC3BjnC,EAAa8lC,EAA8B9lC,UAC/CA,GAAW,GAAG0kB,QAAU/qD,EAAS8D,aACjCuiC,EAAW,GAAG0kB,QAAU/qD,EAAS+D,eACjCsiC,EAAW,GAAG0kB,QAAU/qD,EAASgE,cACjCqiC,EAAW,GAAG0kB,QAAU/qD,EAASiE,gBACjCoiC,EAAW,GAAG0kB,QAAU/qD,EAASkE,kBACjCmiC,EAAW,GAAG0kB,QAAU/qD,EAASmE,iBACjCkiC,EAAW,GAAG0kB,QAAU/qD,EAASoE,gBACjCiiC,EAAW,GAAG0kB,QAAU/qD,EAASqE,kBACjCgiC,EAAW,GAAG0kB,QAAU/qD,EAASsE,iBACjC+hC,EAAW,GAAG0kB,QAAU/qD,EAASuE,YACjCzK,KAAKy0E,uBAAuB/oE,EAAS2mE,EAA+B,YAAaz9C,EAAM4+C,IAE3FU,oCAAqC,SAAUxoE,EAASkpB,GAAnB,GAC7B1uB,GAAWlG,KAAKH,QAAQqG,SACxButE,EAAoBzzE,KAAKgzE,WAAWS,kBACpClnC,EAAa+lC,EAAuC/lC,UACxDA,GAAW,GAAG0kB,QAAU/qD,EAAS8D,aACjCuiC,EAAW,GAAG0kB,QAAU/qD,EAAS+D,eACjCsiC,EAAW,GAAG0kB,QAAU/qD,EAASgE,cACjCqiC,EAAW,GAAG0kB,QAAU/qD,EAASoE,gBACjCiiC,EAAW,GAAG0kB,QAAU/qD,EAASqE,kBACjCgiC,EAAW,GAAG0kB,QAAU/qD,EAASsE,iBACjC+hC,EAAW,GAAG0kB,QAAU/qD,EAASuE,YACjCzK,KAAKy0E,uBAAuB/oE,EAAS4mE,EAAwC,mBAAoB19C,EAAM6+C,IAE3GgB,uBAAwB,SAAU/oE,EAAS0oE,EAAUhxE,EAAMwxB,EAAMu/C,GAC7D,GAAIE,GAAYF,EAAQ/wE,GAAQsI,EAAQ6oE,kBAAkBH,GAAUx/C,KAAK,oBACzEy/C,GAAU56C,KAAK5sB,SAAS,WAAW4F,IAAI,QAAS,SAChDzS,KAAKw0E,mBAAmBH,EAAWz/C,EAAMxxB,IAE7CoxE,mBAAoB,SAAUH,EAAWz/C,EAAM4L,GACvCA,IAAY5L,IACZy/C,EAAU1oE,MAAMipB,EAAK4L,KAG7BszC,iBAAkB,SAAUpoE,EAAS80B,EAAU5L,EAAMu/C,GACjD,GAAIE,GAAYF,EAAQ3zC,GAAY90B,EAAQgpE,kBACxCxhB,SAAS,EACTyhB,aAAa,IACd//C,KAAK,mBACJA,GAAK4L,IACL6zC,EAAU1oE,MAAMipB,EAAK4L,KAG7BuzC,WAAY,SAAUroE,EAAS80B,EAAU5L,EAAMu/C,GAC3C,GAAIE,GAAYF,EAAQ3zC,GAAY90B,EAAQkJ,IAAI,EAC5C4rB,KAAY5L,KACZy/C,EAAU1oE,MAAQipB,EAAK4L,KAG/BwzC,cAAe,SAAUtoE,EAAS80B,EAAU5L,EAAMu/C,GAC9C,GAAIE,GAAYF,EAAQ3zC,GAAY90B,EAAQkJ,IAAI,EAC5C4rB,KAAY5L,KACZy/C,EAAUd,QAAU3+C,EAAK4L,KAGjC/uB,QAAS,WACLzR,KAAK40E,mBAAmB50E,KAAKgzE,WAAWM,WACxCtzE,KAAK40E,mBAAmB50E,KAAKgzE,WAAWQ,UACxCxzE,KAAK40E,mBAAmB50E,KAAKgzE,WAAWS,mBACxCzzE,KAAK40E,mBAAmB50E,KAAKgzE,kBACtBhzE,MAAKgzE,YAEhB4B,mBAAoB,SAAU5B,GAC1B,IAAK,GAAI7yB,KAAU6yB,GACXA,EAAW7yB,GAAQ1uC,SACnBuhE,EAAW7yB,GAAQ1uC,gBAEhBuhE,GAAW7yB,IAG1BmF,gBAAiB,SAAUp/C,GACvB,MAAO1G,GAAMiD,SAAS8vE,IAAkBrsE,SAAUA,MAG1D1G,GAAMsC,GAAGoK,OAAOohE,kBAAoBA,GACtC3rE,OAAOnC,MAAMijB,SACC,kBAAVljB,SAAwBA,OAAOyB,IAAMzB,OAAS,SAAU0B,EAAIC,EAAIC,IACrEA,GAAMD,OAEV,SAAU5B,EAAGC,QACVA,OAAO,gBACH,iBACA,qBACA,kBACA,eACA,oBACA,qBACA,iBACA,uBACA,qBACA,cACA,aACA,oBACA,eACA,gBACA,sBACA,qBACA,mBACA,eACA,cACA,cACA,eACA,oBACA,gBACA,kBACA,oBACA,iBACA,gBACA,gBACA,gBACA,kCACA,+BACA,iCACA,sCACA,oBACA,2CACA,2CACDD,IACL,WA8CE,MAAOqC,QAAOnC,OACE,kBAAVD,SAAwBA,OAAOyB,IAAMzB,OAAS,SAAU0B,EAAIC,EAAIC,IACrEA,GAAMD","file":"kendo.editor.min.js","sourcesContent":["/*!\n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n\n*/\n(function (f, define) {\n    define('util/undoredostack', ['kendo.core'], f);\n}(function () {\n    (function (kendo) {\n        var UndoRedoStack = kendo.Observable.extend({\n            init: function (options) {\n                kendo.Observable.fn.init.call(this, options);\n                this.clear();\n            },\n            events: [\n                'undo',\n                'redo'\n            ],\n            push: function (command) {\n                this.stack = this.stack.slice(0, this.currentCommandIndex + 1);\n                this.currentCommandIndex = this.stack.push(command) - 1;\n            },\n            undo: function () {\n                if (this.canUndo()) {\n                    var command = this.stack[this.currentCommandIndex--];\n                    command.undo();\n                    this.trigger('undo', { command: command });\n                }\n            },\n            redo: function () {\n                if (this.canRedo()) {\n                    var command = this.stack[++this.currentCommandIndex];\n                    command.redo();\n                    this.trigger('redo', { command: command });\n                }\n            },\n            clear: function () {\n                this.stack = [];\n                this.currentCommandIndex = -1;\n            },\n            canUndo: function () {\n                return this.currentCommandIndex >= 0;\n            },\n            canRedo: function () {\n                return this.currentCommandIndex != this.stack.length - 1;\n            }\n        });\n        kendo.deepExtend(kendo, { util: { UndoRedoStack: UndoRedoStack } });\n    }(kendo));\n}, typeof define == 'function' && define.amd ? define : function (a1, a2, a3) {\n    (a3 || a2)();\n}));\n(function (f, define) {\n    define('editor/main', [\n        'util/undoredostack',\n        'kendo.combobox',\n        'kendo.dropdownlist',\n        'kendo.window',\n        'kendo.colorpicker'\n    ], f);\n}(function () {\n    (function ($, undefined) {\n        var kendo = window.kendo, Class = kendo.Class, Widget = kendo.ui.Widget, os = kendo.support.mobileOS, browser = kendo.support.browser, extend = $.extend, proxy = $.proxy, deepExtend = kendo.deepExtend, keys = kendo.keys;\n        var SELECT = 'select';\n        var SELECT_OVERLAY_SELECTOR = 'select.k-select-overlay';\n        var ToolTemplate = Class.extend({\n            init: function (options) {\n                this.options = options;\n            },\n            getHtml: function () {\n                var options = this.options;\n                return kendo.template(options.template, { useWithBlock: false })(options);\n            }\n        });\n        var EditorUtils = {\n            editorWrapperTemplate: '<table cellspacing=\"4\" cellpadding=\"0\" class=\"k-widget k-editor k-header\" role=\"presentation\"><tbody>' + '<tr role=\"presentation\"><td class=\"k-editor-toolbar-wrap\" role=\"presentation\"><ul class=\"k-editor-toolbar\" role=\"toolbar\" /></td></tr>' + '<tr><td class=\"k-editable-area\" /></tr>' + '</tbody></table>',\n            buttonTemplate: '# var iconCssClass= \"k-icon k-i-\" + kendo.toHyphens(data.cssClass.replace(\"k-\", \"\"));#' + '<a tabindex=\"0\" role=\"button\" class=\"k-tool\"' + '#= data.popup ? \" data-popup\" : \"\" #' + ' unselectable=\"on\" title=\"#= data.title #\"><span unselectable=\"on\" class=\"k-tool-icon #= iconCssClass #\"></span><span class=\"k-tool-text\">#= data.title #</span></a>',\n            colorPickerTemplate: '<div class=\"k-colorpicker k-icon k-i-#= data.cssClass.replace(\"k-\", \"\") #\" />',\n            comboBoxTemplate: '<select title=\"#= data.title #\" class=\"#= data.cssClass #\" />',\n            dropDownListTemplate: '<span class=\"k-editor-dropdown\"><select title=\"#= data.title #\" class=\"#= data.cssClass #\" /></span>',\n            separatorTemplate: '<span class=\"k-separator\" />',\n            overflowAnchorTemplate: '<a tabindex=\"0\" role=\"button\" class=\"k-tool k-overflow-anchor\" data-popup' + ' unselectable=\"on\" title=\"#= data.title #\" aria-haspopup=\"true\" aria-expanded=\"false\">' + '<span unselectable=\"on\" class=\"k-icon k-i-more-vertical\"></span><span class=\"k-tool-text\">#= data.title #</span></a>',\n            formatByName: function (name, format) {\n                for (var i = 0; i < format.length; i++) {\n                    if ($.inArray(name, format[i].tags) >= 0) {\n                        return format[i];\n                    }\n                }\n            },\n            getToolCssClass: function (name) {\n                var toolCssClassNames = {\n                    superscript: 'sup-script',\n                    subscript: 'sub-script',\n                    justifyLeft: 'align-left',\n                    justifyCenter: 'align-center',\n                    justifyRight: 'align-right',\n                    justifyFull: 'align-justify',\n                    insertUnorderedList: 'list-unordered',\n                    insertOrderedList: 'list-ordered',\n                    'import': 'login',\n                    indent: 'indent-increase',\n                    outdent: 'indent-decrease',\n                    createLink: 'link-horizontal',\n                    unlink: 'unlink-horizontal',\n                    insertImage: 'image',\n                    insertFile: 'file-add',\n                    viewHtml: 'html',\n                    foreColor: 'foreground-color',\n                    backColor: 'paint',\n                    createTable: 'table-insert',\n                    addColumnLeft: 'table-column-insert-left',\n                    addColumnRight: 'table-column-insert-right',\n                    addRowAbove: 'table-row-insert-above',\n                    addRowBelow: 'table-row-insert-below',\n                    deleteRow: 'table-row-delete',\n                    deleteColumn: 'table-column-delete',\n                    tableWizard: 'table-properties',\n                    tableWizardInsert: 'table-wizard',\n                    cleanFormatting: 'clear-css'\n                };\n                var cssClass = toolCssClassNames[name];\n                if (cssClass) {\n                    return cssClass;\n                }\n                return name;\n            },\n            registerTool: function (toolName, tool) {\n                var toolOptions = tool.options;\n                if (toolOptions && toolOptions.template) {\n                    toolOptions.template.options.cssClass = 'k-' + EditorUtils.getToolCssClass(toolName);\n                }\n                if (!tool.name) {\n                    tool.options.name = toolName;\n                    tool.name = toolName.toLowerCase();\n                }\n                Editor.defaultTools[toolName] = tool;\n            },\n            registerFormat: function (formatName, format) {\n                Editor.fn.options.formats[formatName] = format;\n            }\n        };\n        var messages = {\n            bold: 'Bold',\n            italic: 'Italic',\n            underline: 'Underline',\n            strikethrough: 'Strikethrough',\n            superscript: 'Superscript',\n            subscript: 'Subscript',\n            justifyCenter: 'Center text',\n            justifyLeft: 'Align text left',\n            justifyRight: 'Align text right',\n            justifyFull: 'Justify',\n            insertUnorderedList: 'Insert unordered list',\n            insertOrderedList: 'Insert ordered list',\n            indent: 'Indent',\n            outdent: 'Outdent',\n            createLink: 'Insert hyperlink',\n            unlink: 'Remove hyperlink',\n            insertImage: 'Insert image',\n            insertFile: 'Insert file',\n            insertHtml: 'Insert HTML',\n            viewHtml: 'View HTML',\n            fontName: 'Select font family',\n            fontNameInherit: '(inherited font)',\n            fontSize: 'Select font size',\n            fontSizeInherit: '(inherited size)',\n            formatBlock: 'Format',\n            formatting: 'Format',\n            foreColor: 'Color',\n            backColor: 'Background color',\n            style: 'Styles',\n            emptyFolder: 'Empty Folder',\n            editAreaTitle: 'Editable area. Press F10 for toolbar.',\n            uploadFile: 'Upload',\n            overflowAnchor: 'More tools',\n            orderBy: 'Arrange by:',\n            orderBySize: 'Size',\n            orderByName: 'Name',\n            invalidFileType: 'The selected file \"{0}\" is not valid. Supported file types are {1}.',\n            deleteFile: 'Are you sure you want to delete \"{0}\"?',\n            overwriteFile: 'A file with name \"{0}\" already exists in the current directory. Do you want to overwrite it?',\n            directoryNotFound: 'A directory with this name was not found.',\n            imageWebAddress: 'Web address',\n            imageAltText: 'Alternate text',\n            imageWidth: 'Width (px)',\n            imageHeight: 'Height (px)',\n            fileWebAddress: 'Web address',\n            fileTitle: 'Title',\n            fileText: 'Text',\n            linkWebAddress: 'Web address',\n            linkText: 'Text',\n            linkToolTip: 'ToolTip',\n            linkOpenInNewWindow: 'Open link in new window',\n            dialogUpdate: 'Update',\n            dialogInsert: 'Insert',\n            dialogOk: 'Ok',\n            dialogCancel: 'Cancel',\n            cleanFormatting: 'Clean formatting',\n            createTable: 'Create a table',\n            createTableHint: 'Create a {0} x {1} table',\n            addColumnLeft: 'Add column on the left',\n            addColumnRight: 'Add column on the right',\n            addRowAbove: 'Add row above',\n            addRowBelow: 'Add row below',\n            deleteRow: 'Delete row',\n            deleteColumn: 'Delete column',\n            tableWizard: 'Table Wizard',\n            tableTab: 'Table',\n            cellTab: 'Cell',\n            accessibilityTab: 'Accessibility',\n            caption: 'Caption',\n            summary: 'Summary',\n            width: 'Width',\n            height: 'Height',\n            units: 'Units',\n            cellSpacing: 'Cell Spacing',\n            cellPadding: 'Cell Padding',\n            cellMargin: 'Cell Margin',\n            alignment: 'Alignment',\n            background: 'Background',\n            cssClass: 'CSS Class',\n            id: 'ID',\n            border: 'Border',\n            borderStyle: 'Border Style',\n            collapseBorders: 'Collapse borders',\n            wrapText: 'Wrap text',\n            associateCellsWithHeaders: 'Associate cells with headers',\n            alignLeft: 'Align Left',\n            alignCenter: 'Align Center',\n            alignRight: 'Align Right',\n            alignLeftTop: 'Align Left Top',\n            alignCenterTop: 'Align Center Top',\n            alignRightTop: 'Align Right Top',\n            alignLeftMiddle: 'Align Left Middle',\n            alignCenterMiddle: 'Align Center Middle',\n            alignRightMiddle: 'Align Right Middle',\n            alignLeftBottom: 'Align Left Bottom',\n            alignCenterBottom: 'Align Center Bottom',\n            alignRightBottom: 'Align Right Bottom',\n            alignRemove: 'Remove Alignment',\n            columns: 'Columns',\n            rows: 'Rows',\n            selectAllCells: 'Select All Cells',\n            exportAs: 'Export As',\n            'import': 'Import'\n        };\n        var supportedBrowser = !os || os.ios && os.flatVersion >= 500 || !os.ios && typeof document.documentElement.contentEditable != 'undefined';\n        var toolGroups = {\n            basic: [\n                'bold',\n                'italic',\n                'underline'\n            ],\n            alignment: [\n                'justifyLeft',\n                'justifyCenter',\n                'justifyRight'\n            ],\n            lists: [\n                'insertUnorderedList',\n                'insertOrderedList'\n            ],\n            indenting: [\n                'indent',\n                'outdent'\n            ],\n            links: [\n                'createLink',\n                'unlink'\n            ],\n            tables: [\n                'tableWizard',\n                'createTable',\n                'addColumnLeft',\n                'addColumnRight',\n                'addRowAbove',\n                'addRowBelow',\n                'deleteRow',\n                'deleteColumn'\n            ]\n        };\n        var Editor = Widget.extend({\n            init: function (element, options) {\n                var that = this, value, editorNS = kendo.ui.editor, toolbarContainer, toolbarOptions, type;\n                var domElement;\n                var dom = editorNS.Dom;\n                if (!supportedBrowser) {\n                    return;\n                }\n                Widget.fn.init.call(that, element, options);\n                that.options = deepExtend({}, that.options, options);\n                that.options.tools = that.options.tools.slice();\n                element = that.element;\n                domElement = element[0];\n                type = dom.name(domElement);\n                this._registerHandler(element.closest('form'), 'submit', proxy(that.update, that, undefined));\n                toolbarOptions = extend({}, that.options);\n                toolbarOptions.editor = that;\n                if (type == 'textarea') {\n                    that._wrapTextarea();\n                    toolbarContainer = that.wrapper.find('.k-editor-toolbar');\n                    if (domElement.id) {\n                        toolbarContainer.attr('aria-controls', domElement.id);\n                    }\n                } else {\n                    that.element.attr('contenteditable', true).addClass('k-widget k-editor k-editor-inline');\n                    toolbarOptions.popup = true;\n                    toolbarContainer = $('<ul class=\"k-editor-toolbar\" role=\"toolbar\" />').insertBefore(element);\n                }\n                that.toolbar = new editorNS.Toolbar(toolbarContainer[0], toolbarOptions);\n                that.toolbar.bindTo(that);\n                if (type == 'textarea') {\n                    setTimeout(function () {\n                        var heightStyle = that.wrapper[0].style.height;\n                        var expectedHeight = parseInt(heightStyle, 10);\n                        var actualHeight = that.wrapper.height();\n                        if (heightStyle.indexOf('px') > 0 && !isNaN(expectedHeight) && actualHeight > expectedHeight) {\n                            that.wrapper.height(expectedHeight - (actualHeight - expectedHeight));\n                        }\n                    });\n                }\n                that._resizable();\n                that._initializeContentElement(that);\n                that.keyboard = new editorNS.Keyboard([\n                    new editorNS.BackspaceHandler(that),\n                    new editorNS.TypingHandler(that),\n                    new editorNS.SystemHandler(that),\n                    new editorNS.SelectAllHandler(that)\n                ]);\n                that.clipboard = new editorNS.Clipboard(this);\n                that.undoRedoStack = new kendo.util.UndoRedoStack();\n                if (options && options.value) {\n                    value = options.value;\n                } else if (that.textarea) {\n                    value = domElement.value;\n                    if (that.options.encoded && $.trim(domElement.defaultValue).length) {\n                        value = domElement.defaultValue;\n                    }\n                    value = value.replace(/[\\r\\n\\v\\f\\t ]+/gi, ' ');\n                } else {\n                    value = domElement.innerHTML;\n                }\n                that.value(value || kendo.ui.editor.emptyElementContent);\n                this._registerHandler(document, {\n                    'mousedown': function () {\n                        that._endTyping();\n                    },\n                    'mouseup': function (e) {\n                        that._mouseup(e);\n                    }\n                });\n                that._initializeImmutables();\n                that.toolbar.resize();\n                kendo.notify(that);\n            },\n            setOptions: function (options) {\n                var editor = this;\n                Widget.fn.setOptions.call(editor, options);\n                if (options.tools) {\n                    editor.toolbar.bindTo(editor);\n                }\n            },\n            _endTyping: function () {\n                var keyboard = this.keyboard;\n                try {\n                    if (keyboard.isTypingInProgress()) {\n                        keyboard.endTyping(true);\n                        this.saveSelection();\n                    }\n                } catch (e) {\n                }\n            },\n            _selectionChange: function () {\n                this._selectionStarted = false;\n                this.saveSelection();\n                this.trigger('select', {});\n            },\n            _resizable: function () {\n                var resizable = this.options.resizable;\n                var isResizable = $.isPlainObject(resizable) ? resizable.content === undefined || resizable.content === true : resizable;\n                if (isResizable && this.textarea) {\n                    $('<div class=\\'k-resize-handle\\'><span class=\\'k-icon k-i-arrow-45-down-right\\' /></div>').insertAfter(this.textarea);\n                    this.wrapper.addClass('k-resizable');\n                    this.wrapper.kendoResizable(extend({}, this.options.resizable, {\n                        start: function (e) {\n                            var editor = this.editor = $(e.currentTarget).closest('.k-editor');\n                            this.initialSize = editor.height();\n                            editor.find('td:last').append('<div class=\\'k-overlay\\' />');\n                        },\n                        resize: function (e) {\n                            var delta = e.y.initialDelta;\n                            var newSize = this.initialSize + delta;\n                            var min = this.options.min || 0;\n                            var max = this.options.max || Infinity;\n                            newSize = Math.min(max, Math.max(min, newSize));\n                            this.editor.height(newSize);\n                        },\n                        resizeend: function () {\n                            this.editor.find('.k-overlay').remove();\n                            this.editor = null;\n                        }\n                    }));\n                    if (kendo.support.mobileOS.ios) {\n                        var resizableWidget = this.wrapper.getKendoResizable();\n                        resizableWidget.draggable.options.ignore = SELECT_OVERLAY_SELECTOR;\n                    }\n                }\n            },\n            _initializeTableResizing: function () {\n                var editor = this;\n                kendo.ui.editor.TableResizing.create(editor);\n                editor._showTableResizeHandlesProxy = proxy(editor._showTableResizeHandles, editor);\n                editor.bind(SELECT, editor._showTableResizeHandlesProxy);\n            },\n            _destroyTableResizing: function () {\n                var editor = this;\n                var tableResizing = editor.tableResizing;\n                if (tableResizing) {\n                    tableResizing.destroy();\n                    editor.tableResizing = null;\n                }\n                if (editor._showTableResizeHandlesProxy) {\n                    editor.unbind(SELECT, editor._showTableResizeHandlesProxy);\n                }\n            },\n            _showTableResizeHandles: function () {\n                var editor = this;\n                var tableResizing = editor.tableResizing;\n                if (tableResizing) {\n                    tableResizing.showResizeHandles();\n                }\n            },\n            _initializeColumnResizing: function () {\n                kendo.ui.editor.ColumnResizing.create(this);\n            },\n            _destroyColumnResizing: function () {\n                var editor = this;\n                if (editor.columnResizing) {\n                    editor.columnResizing.destroy();\n                    editor.columnResizing = null;\n                }\n            },\n            _initializeRowResizing: function () {\n                kendo.ui.editor.RowResizing.create(this);\n            },\n            _destroyRowResizing: function () {\n                var editor = this;\n                if (editor.rowResizing) {\n                    editor.rowResizing.destroy();\n                    editor.rowResizing = null;\n                }\n            },\n            _wrapTextarea: function () {\n                var that = this, textarea = that.element, w = textarea[0].style.width, h = textarea[0].style.height, template = EditorUtils.editorWrapperTemplate, editorWrap = $(template).insertBefore(textarea).width(w).height(h), editArea = editorWrap.find('.k-editable-area');\n                textarea.attr('autocomplete', 'off').appendTo(editArea).addClass('k-content k-raw-content').css('display', 'none');\n                that.textarea = textarea;\n                that.wrapper = editorWrap;\n            },\n            _createContentElement: function (stylesheets) {\n                var editor = this;\n                var iframe, wnd, doc;\n                var textarea = editor.textarea;\n                var specifiedDomain = editor.options.domain;\n                var domain = specifiedDomain || document.domain;\n                var domainScript = '';\n                var src = 'javascript:\"\"';\n                if (specifiedDomain || domain != location.hostname) {\n                    domainScript = '<script>document.domain=\"' + domain + '\"</script>';\n                    src = 'javascript:document.write(\\'' + domainScript + '\\')';\n                }\n                textarea.hide();\n                iframe = $('<iframe />', {\n                    title: editor.options.messages.editAreaTitle,\n                    frameBorder: '0'\n                })[0];\n                $(iframe).css('display', '').addClass('k-content').attr('tabindex', textarea[0].tabIndex).insertBefore(textarea);\n                iframe.src = src;\n                wnd = iframe.contentWindow || iframe;\n                doc = wnd.document || iframe.contentDocument;\n                $(iframe).one('load', function () {\n                    editor.toolbar.decorateFrom(doc.body);\n                });\n                doc.open();\n                doc.write('<!DOCTYPE html><html><head>' + '<meta charset=\\'utf-8\\' />' + '<style>' + 'html,body{padding:0;margin:0;height:100%;min-height:100%;}' + 'body{box-sizing:border-box;font-size:12px;font-family:Verdana,Geneva,sans-serif;margin-top:-1px;padding:5px .4em 0;' + 'word-wrap: break-word;-webkit-nbsp-mode: space;-webkit-line-break: after-white-space;' + (kendo.support.isRtl(textarea) ? 'direction:rtl;' : '') + (browser.msie || browser.edge ? 'height:auto;' : '') + (os.ios ? 'word-break:break-all;' : '') + '}' + 'h1{font-size:2em;margin:.67em 0}h2{font-size:1.5em}h3{font-size:1.16em}h4{font-size:1em}h5{font-size:.83em}h6{font-size:.7em}' + 'p{margin:0 0 1em;}.k-marker{display:none;}.k-paste-container,.Apple-style-span{position:absolute;left:-10000px;width:1px;height:1px;overflow:hidden}' + 'ul,ol{padding-left:2.5em}' + 'span{-ms-high-contrast-adjust:none;}' + 'a{color:#00a}' + 'code{font-size:1.23em}' + 'telerik\\\\3Ascript{display: none;}' + '.k-table{width:100%;border-spacing:0;margin: 0 0 1em;}' + '.k-table td{min-width:1px;padding:.2em .3em;}' + '.k-table,.k-table td{outline:0;border: 1px dotted #ccc;}' + '.k-table p{margin:0;padding:0;}' + '.k-column-resize-handle-wrapper {position: absolute; height: 10px; width:10px; cursor: col-resize; z-index: 2;}' + '.k-column-resize-handle {width: 100%; height: 100%;}' + '.k-column-resize-handle > .k-column-resize-marker {width:2px; height:100%; margin:0 auto; background-color:#00b0ff; display:none; opacity:0.8;}' + '.k-row-resize-handle-wrapper {position: absolute; cursor: row-resize; z-index:2; width: 10px; height: 10px;}' + '.k-row-resize-handle {display: table; width: 100%; height: 100%;}' + '.k-row-resize-marker-wrapper{display: table-cell; height:100%; width:100%; margin:0; padding:0; vertical-align: middle;}' + '.k-row-resize-marker{margin: 0; padding:0; width:100%; height:2px; background-color: #00b0ff; opacity:0.8; display:none;}' + '.k-table-resize-handle-wrapper {position: absolute; background-color: #fff; border: 1px solid #000; z-index: 100; width: 5px; height: 5px;}' + '.k-table-resize-handle {width: 100%; height: 100%;}' + '.k-table-resize-handle.k-resize-east{cursor:e-resize;}' + '.k-table-resize-handle.k-resize-north{cursor:n-resize;}' + '.k-table-resize-handle.k-resize-northeast{cursor:ne-resize;}' + '.k-table-resize-handle.k-resize-northwest{cursor:nw-resize;}' + '.k-table-resize-handle.k-resize-south{cursor:s-resize;}' + '.k-table-resize-handle.k-resize-southeast{cursor:se-resize;}' + '.k-table-resize-handle.k-resize-southwest{cursor:sw-resize;}' + '.k-table-resize-handle.k-resize-west{cursor:w-resize;}' + '.k-table.k-table-resizing{opacity:0.6;}' + 'k\\\\:script{display:none;}' + '</style>' + domainScript + '<script>(function(d,c){d[c](\\'header\\'),d[c](\\'article\\'),d[c](\\'nav\\'),d[c](\\'section\\'),d[c](\\'footer\\');})(document, \\'createElement\\');</script>' + $.map(stylesheets, function (href) {\n                    return '<link rel=\\'stylesheet\\' href=\\'' + href + '\\'>';\n                }).join('') + '</head><body autocorrect=\\'off\\' contenteditable=\\'true\\'></body></html>');\n                doc.close();\n                return wnd;\n            },\n            _blur: function () {\n                var textarea = this.textarea;\n                var old = textarea ? textarea.val() : this._oldValue;\n                var value = this.options.encoded ? this.encodedValue() : this.value();\n                this.update();\n                if (textarea) {\n                    textarea.trigger('blur');\n                }\n                if (value != old) {\n                    this.trigger('change');\n                    if (textarea) {\n                        $(textarea.get(0).ownerDocument).trigger('change');\n                    }\n                }\n            },\n            _spellCorrect: function (editor) {\n                var beforeCorrection;\n                var falseTrigger = false;\n                this._registerHandler(editor.body, {\n                    'contextmenu': function () {\n                        editor.one('select', function () {\n                            beforeCorrection = null;\n                        });\n                        editor._spellCorrectTimeout = setTimeout(function () {\n                            beforeCorrection = new kendo.ui.editor.RestorePoint(editor.getRange(), editor.body);\n                            falseTrigger = false;\n                        }, 10);\n                    },\n                    'input': function () {\n                        if (!beforeCorrection) {\n                            return;\n                        }\n                        if (kendo.support.browser.mozilla && !falseTrigger) {\n                            falseTrigger = true;\n                            return;\n                        }\n                        kendo.ui.editor._finishUpdate(editor, beforeCorrection);\n                    }\n                });\n            },\n            _registerHandler: function (element, type, handler) {\n                var editor = this;\n                var NS = '.kendoEditor';\n                var eventNames;\n                var i;\n                element = $(element);\n                if (!this._handlers) {\n                    this._handlers = [];\n                }\n                if (element.length) {\n                    if ($.isPlainObject(type)) {\n                        for (var t in type) {\n                            if (type.hasOwnProperty(t)) {\n                                this._registerHandler(element, t, type[t]);\n                            }\n                        }\n                    } else {\n                        eventNames = kendo.applyEventMap(type).split(' ');\n                        for (i = 0; i < eventNames.length; i++) {\n                            editor._handlers.push({\n                                element: element,\n                                type: eventNames[i] + NS,\n                                handler: handler\n                            });\n                            element.on(eventNames[i] + NS, handler);\n                        }\n                    }\n                }\n            },\n            _deregisterHandlers: function () {\n                var handlers = this._handlers;\n                for (var i = 0; i < handlers.length; i++) {\n                    var h = handlers[i];\n                    h.element.off(h.type, h.handler);\n                }\n                this._handlers = [];\n            },\n            _initializeContentElement: function () {\n                var editor = this;\n                var doc;\n                var blurTrigger;\n                var mousedownTrigger;\n                if (editor.textarea) {\n                    editor.window = editor._createContentElement(editor.options.stylesheets);\n                    doc = editor.document = editor.window.contentDocument || editor.window.document;\n                    if (!doc.body) {\n                        var body = doc.createElement('body');\n                        body.setAttribute('contenteditable', 'true');\n                        body.setAttribute('autocorrect', 'off');\n                        doc.getElementsByTagName('html')[0].appendChild(body);\n                        var interval = setInterval(function () {\n                            if ($(editor.document).find('body').length > 1) {\n                                $(editor.document).find('body:last').remove();\n                                window.clearInterval(interval);\n                            }\n                        }, 10);\n                    }\n                    editor.body = doc.body;\n                    blurTrigger = editor.window;\n                    mousedownTrigger = doc;\n                    this._registerHandler(doc, 'mouseup', proxy(this._mouseup, this));\n                } else {\n                    editor.window = window;\n                    doc = editor.document = document;\n                    editor.body = editor.element[0];\n                    blurTrigger = editor.body;\n                    mousedownTrigger = editor.body;\n                    editor.toolbar.decorateFrom(editor.body);\n                }\n                this._registerHandler(blurTrigger, 'blur', proxy(this._blur, this));\n                editor._registerHandler(mousedownTrigger, 'down', proxy(editor._mousedown, editor));\n                try {\n                    doc.execCommand('enableInlineTableEditing', null, false);\n                } catch (e) {\n                }\n                if (kendo.support.touch) {\n                    this._registerHandler(doc, {\n                        'keydown': function () {\n                            if (kendo._activeElement() != doc.body) {\n                                editor.window.focus();\n                            }\n                        }\n                    });\n                }\n                this._spellCorrect(editor);\n                this._registerHandler(editor.body, {\n                    'keydown': function (e) {\n                        var range;\n                        if ((e.keyCode === keys.BACKSPACE || e.keyCode === keys.DELETE) && editor.body.getAttribute('contenteditable') !== 'true') {\n                            return false;\n                        }\n                        if (e.keyCode === keys.F10) {\n                            setTimeout(proxy(editor.toolbar.focus, editor.toolbar), 100);\n                            e.preventDefault();\n                            return;\n                        } else if (e.keyCode == keys.LEFT || e.keyCode == keys.RIGHT) {\n                            range = editor.getRange();\n                            var left = e.keyCode == keys.LEFT;\n                            var container = range[left ? 'startContainer' : 'endContainer'];\n                            var offset = range[left ? 'startOffset' : 'endOffset'];\n                            var direction = left ? -1 : 1;\n                            var next = offset + direction;\n                            var nextChar = left ? next : offset;\n                            if (container.nodeType == 3 && container.nodeValue[nextChar] == '\\uFEFF') {\n                                range.setStart(container, next);\n                                range.collapse(true);\n                                editor.selectRange(range);\n                            }\n                        }\n                        var tools = editor.toolbar.tools;\n                        var toolName = editor.keyboard.toolFromShortcut(tools, e);\n                        var toolOptions = toolName ? tools[toolName].options : {};\n                        if (toolName && !toolOptions.keyPressCommand) {\n                            e.preventDefault();\n                            if (!/^(undo|redo)$/.test(toolName)) {\n                                editor.keyboard.endTyping(true);\n                            }\n                            editor.trigger('keydown', e);\n                            editor.exec(toolName);\n                            editor._runPostContentKeyCommands(e);\n                            return false;\n                        }\n                        editor.keyboard.clearTimeout();\n                        editor.keyboard.keydown(e);\n                    },\n                    'keypress': function (e) {\n                        setTimeout(function () {\n                            editor._runPostContentKeyCommands(e);\n                            editor._showTableResizeHandles();\n                        }, 0);\n                    },\n                    'keyup': function (e) {\n                        var selectionCodes = [\n                            keys.BACKSPACE,\n                            keys.TAB,\n                            keys.PAGEUP,\n                            keys.PAGEDOWN,\n                            keys.END,\n                            keys.HOME,\n                            keys.LEFT,\n                            keys.UP,\n                            keys.RIGHT,\n                            keys.DOWN,\n                            keys.INSERT,\n                            keys.DELETE\n                        ];\n                        if ($.inArray(e.keyCode, selectionCodes) > -1 || e.keyCode == 65 && e.ctrlKey && !e.altKey && !e.shiftKey) {\n                            editor._selectionChange();\n                        }\n                        editor.keyboard.keyup(e);\n                    },\n                    'click': function (e) {\n                        var dom = kendo.ui.editor.Dom, range;\n                        if (dom.name(e.target) === 'img') {\n                            range = editor.createRange();\n                            range.selectNode(e.target);\n                            editor.selectRange(range);\n                        }\n                    },\n                    'cut copy paste drop dragover': function (e) {\n                        editor.clipboard['on' + e.type](e);\n                    },\n                    'focusin': function () {\n                        if (editor.body.hasAttribute('contenteditable')) {\n                            $(this).addClass('k-state-active');\n                            editor.toolbar.show();\n                        }\n                    },\n                    'focusout': function () {\n                        setTimeout(function () {\n                            var active = kendo._activeElement();\n                            var body = editor.body;\n                            var toolbar = editor.toolbar;\n                            if (toolbar.options.popup) {\n                                var toolbarContainerElement = toolbar.window.element.get(0);\n                                if (toolbarContainerElement && !($.contains(toolbarContainerElement, active) || toolbarContainerElement == active)) {\n                                    toolbar.preventPopupHide = false;\n                                }\n                            }\n                            if (active != body && !$.contains(body, active) && !$(active).is('.k-editortoolbar-dragHandle') && !toolbar.focused()) {\n                                $(body).removeClass('k-state-active');\n                                toolbar.hide();\n                            }\n                        }, 10);\n                    }\n                });\n                editor._initializeColumnResizing();\n                editor._initializeRowResizing();\n                editor._initializeTableResizing();\n            },\n            _initializeImmutables: function () {\n                var that = this, editorNS = kendo.ui.editor;\n                if (that.options.immutables) {\n                    that.immutables = new editorNS.Immutables(that);\n                }\n            },\n            _mousedown: function (e) {\n                var editor = this;\n                editor._selectionStarted = true;\n                if ($(editor.body).parents('.k-window').length) {\n                    e.stopPropagation();\n                }\n                if (browser.gecko) {\n                    return;\n                }\n                var target = $(e.target);\n                if ((e.which == 2 || e.which == 1 && e.ctrlKey) && target.is('a[href]')) {\n                    window.open(target.attr('href'), '_new');\n                }\n            },\n            _mouseup: function (e) {\n                var that = this;\n                if (kendo.support.mobileOS.ios && e && $(e.target).is(SELECT_OVERLAY_SELECTOR)) {\n                    return;\n                }\n                if (that._selectionStarted) {\n                    setTimeout(function () {\n                        that._selectionChange();\n                    }, 1);\n                }\n            },\n            _runPostContentKeyCommands: function (e) {\n                var range = this.getRange();\n                var tools = this.keyboard.toolsFromShortcut(this.toolbar.tools, e);\n                for (var i = 0; i < tools.length; i++) {\n                    var tool = tools[i];\n                    var o = tool.options;\n                    if (!o.keyPressCommand) {\n                        continue;\n                    }\n                    var cmd = new o.command({ range: range });\n                    if (cmd.changesContent()) {\n                        this.keyboard.endTyping(true);\n                        this.exec(tool.name);\n                    }\n                }\n            },\n            refresh: function () {\n                var that = this;\n                if (that.textarea) {\n                    that._destroyResizings();\n                    var value = that.value();\n                    that.textarea.val(value);\n                    that.wrapper.find('iframe').remove();\n                    that._initializeContentElement(that);\n                    that.value(value);\n                }\n            },\n            events: [\n                'select',\n                'change',\n                'execute',\n                'error',\n                'paste',\n                'keydown',\n                'keyup'\n            ],\n            options: {\n                name: 'Editor',\n                messages: messages,\n                formats: {},\n                encoded: true,\n                domain: null,\n                resizable: false,\n                deserialization: { custom: null },\n                serialization: {\n                    entities: true,\n                    semantic: true,\n                    scripts: false\n                },\n                pasteCleanup: {\n                    all: false,\n                    css: false,\n                    custom: null,\n                    keepNewLines: false,\n                    msAllFormatting: false,\n                    msConvertLists: true,\n                    msTags: true,\n                    none: false,\n                    span: false\n                },\n                stylesheets: [],\n                dialogOptions: {\n                    modal: true,\n                    resizable: false,\n                    draggable: true,\n                    animation: false\n                },\n                imageBrowser: null,\n                fileBrowser: null,\n                fontName: [\n                    {\n                        text: 'Arial',\n                        value: 'Arial,Helvetica,sans-serif'\n                    },\n                    {\n                        text: 'Courier New',\n                        value: '\\'Courier New\\',Courier,monospace'\n                    },\n                    {\n                        text: 'Georgia',\n                        value: 'Georgia,serif'\n                    },\n                    {\n                        text: 'Impact',\n                        value: 'Impact,Charcoal,sans-serif'\n                    },\n                    {\n                        text: 'Lucida Console',\n                        value: '\\'Lucida Console\\',Monaco,monospace'\n                    },\n                    {\n                        text: 'Tahoma',\n                        value: 'Tahoma,Geneva,sans-serif'\n                    },\n                    {\n                        text: 'Times New Roman',\n                        value: '\\'Times New Roman\\',Times,serif'\n                    },\n                    {\n                        text: 'Trebuchet MS',\n                        value: '\\'Trebuchet MS\\',Helvetica,sans-serif'\n                    },\n                    {\n                        text: 'Verdana',\n                        value: 'Verdana,Geneva,sans-serif'\n                    }\n                ],\n                fontSize: [\n                    {\n                        text: '1 (8pt)',\n                        value: 'xx-small'\n                    },\n                    {\n                        text: '2 (10pt)',\n                        value: 'x-small'\n                    },\n                    {\n                        text: '3 (12pt)',\n                        value: 'small'\n                    },\n                    {\n                        text: '4 (14pt)',\n                        value: 'medium'\n                    },\n                    {\n                        text: '5 (18pt)',\n                        value: 'large'\n                    },\n                    {\n                        text: '6 (24pt)',\n                        value: 'x-large'\n                    },\n                    {\n                        text: '7 (36pt)',\n                        value: 'xx-large'\n                    }\n                ],\n                formatBlock: [\n                    {\n                        text: 'Paragraph',\n                        value: 'p'\n                    },\n                    {\n                        text: 'Quotation',\n                        value: 'blockquote'\n                    },\n                    {\n                        text: 'Heading 1',\n                        value: 'h1'\n                    },\n                    {\n                        text: 'Heading 2',\n                        value: 'h2'\n                    },\n                    {\n                        text: 'Heading 3',\n                        value: 'h3'\n                    },\n                    {\n                        text: 'Heading 4',\n                        value: 'h4'\n                    },\n                    {\n                        text: 'Heading 5',\n                        value: 'h5'\n                    },\n                    {\n                        text: 'Heading 6',\n                        value: 'h6'\n                    }\n                ],\n                tools: [].concat.call(['formatting'], toolGroups.basic, toolGroups.alignment, toolGroups.lists, toolGroups.indenting, toolGroups.links, ['insertImage'], toolGroups.tables)\n            },\n            destroy: function () {\n                var editor = this;\n                Widget.fn.destroy.call(this);\n                this._endTyping(true);\n                this._deregisterHandlers();\n                clearTimeout(this._spellCorrectTimeout);\n                this._focusOutside();\n                this.toolbar.destroy();\n                editor._destroyUploadWidget();\n                editor._destroyResizings();\n                kendo.destroy(this.wrapper);\n            },\n            _destroyResizings: function () {\n                var editor = this;\n                editor._destroyTableResizing();\n                kendo.ui.editor.TableResizing.dispose(editor);\n                editor._destroyRowResizing();\n                kendo.ui.editor.RowResizing.dispose(editor);\n                editor._destroyColumnResizing();\n                kendo.ui.editor.ColumnResizing.dispose(editor);\n            },\n            _focusOutside: function () {\n                if (kendo.support.browser.msie && this.textarea) {\n                    var tempInput = $('<input style=\\'position:fixed;left:1px;top:1px;width:1px;height:1px;font-size:0;border:0;opacity:0\\' />').appendTo(document.body).focus();\n                    tempInput.blur().remove();\n                }\n            },\n            _destroyUploadWidget: function () {\n                var editor = this;\n                if (editor._uploadWidget) {\n                    editor._uploadWidget.destroy();\n                    editor._uploadWidget = null;\n                }\n            },\n            state: function (toolName) {\n                var tool = Editor.defaultTools[toolName];\n                var finder = tool && (tool.options.finder || tool.finder);\n                var RangeUtils = kendo.ui.editor.RangeUtils;\n                var range, textNodes;\n                if (finder) {\n                    range = this.getRange();\n                    textNodes = RangeUtils.textNodes(range);\n                    if (!textNodes.length && range.collapsed) {\n                        textNodes = [range.startContainer];\n                    }\n                    return finder.getFormat ? finder.getFormat(textNodes) : finder.isFormatted(textNodes);\n                }\n                return false;\n            },\n            value: function (html) {\n                var body = this.body, editorNS = kendo.ui.editor, options = this.options, currentHtml = editorNS.Serializer.domToXhtml(body, options.serialization);\n                if (html === undefined) {\n                    return currentHtml;\n                }\n                if (html == currentHtml) {\n                    return;\n                }\n                editorNS.Serializer.htmlToDom(html, body, options.deserialization);\n                this.selectionRestorePoint = null;\n                this.update();\n                this.toolbar.refreshTools();\n            },\n            saveSelection: function (range) {\n                range = range || this.getRange();\n                var container = range.commonAncestorContainer, body = this.body;\n                if (container == body || $.contains(body, container)) {\n                    this.selectionRestorePoint = new kendo.ui.editor.RestorePoint(range, body);\n                }\n            },\n            _focusBody: function () {\n                var body = this.body;\n                var iframe = this.wrapper && this.wrapper.find('iframe')[0];\n                var documentElement = this.document.documentElement;\n                var activeElement = kendo._activeElement();\n                var scrollTop;\n                if (iframe) {\n                    if (activeElement != body && activeElement != iframe) {\n                        scrollTop = documentElement.scrollTop;\n                        body.focus();\n                        documentElement.scrollTop = scrollTop;\n                    }\n                } else {\n                    scrollTop = body.scrollTop;\n                    body.focus();\n                    body.scrollTop = scrollTop;\n                }\n            },\n            restoreSelection: function () {\n                this._focusBody();\n                if (this.selectionRestorePoint) {\n                    this.selectRange(this.selectionRestorePoint.toRange());\n                }\n            },\n            focus: function () {\n                this.restoreSelection();\n            },\n            update: function (value) {\n                value = value || this.options.encoded ? this.encodedValue() : this.value();\n                if (this.textarea) {\n                    this.textarea.val(value);\n                } else {\n                    this._oldValue = value;\n                }\n            },\n            encodedValue: function () {\n                return kendo.ui.editor.Dom.encode(this.value());\n            },\n            createRange: function (document) {\n                return kendo.ui.editor.RangeUtils.createRange(document || this.document);\n            },\n            getSelection: function () {\n                return kendo.ui.editor.SelectionUtils.selectionFromDocument(this.document);\n            },\n            selectRange: function (range) {\n                this._focusBody();\n                var selection = this.getSelection();\n                selection.removeAllRanges();\n                selection.addRange(range);\n                this.saveSelection(range);\n            },\n            getRange: function () {\n                var selection = this.getSelection(), range = selection && selection.rangeCount > 0 ? selection.getRangeAt(0) : this.createRange(), doc = this.document;\n                if (range.startContainer == doc && range.endContainer == doc && !range.startOffset && !range.endOffset) {\n                    range.setStart(this.body, 0);\n                    range.collapse(true);\n                }\n                return range;\n            },\n            _containsRange: function (range) {\n                var dom = kendo.ui.editor.Dom;\n                var body = this.body;\n                return range && dom.isAncestorOrSelf(body, range.startContainer) && dom.isAncestorOrSelf(body, range.endContainer);\n            },\n            _deleteSavedRange: function () {\n                if ('_range' in this) {\n                    delete this._range;\n                }\n            },\n            selectedHtml: function () {\n                return kendo.ui.editor.Serializer.domToXhtml(this.getRange().cloneContents());\n            },\n            paste: function (html, options) {\n                this.focus();\n                var command = new kendo.ui.editor.InsertHtmlCommand($.extend({\n                    range: this.getRange(),\n                    html: html\n                }, options));\n                command.editor = this;\n                command.exec();\n            },\n            exec: function (name, params) {\n                var that = this;\n                var command = null;\n                var range, tool, prevented;\n                if (!name) {\n                    throw new Error('kendoEditor.exec(): `name` parameter cannot be empty');\n                }\n                if (that.body.getAttribute('contenteditable') !== 'true' && name !== 'print' && name !== 'pdf') {\n                    return false;\n                }\n                name = name.toLowerCase();\n                if (!that.keyboard.isTypingInProgress()) {\n                    that._focusBody();\n                    that.selectRange(that._range || that.getRange());\n                }\n                tool = that.toolbar.toolById(name);\n                if (!tool) {\n                    for (var id in Editor.defaultTools) {\n                        if (id.toLowerCase() == name) {\n                            tool = Editor.defaultTools[id];\n                            break;\n                        }\n                    }\n                }\n                if (tool) {\n                    range = that.getRange();\n                    if (tool.command) {\n                        command = tool.command(extend({\n                            range: range,\n                            body: that.body,\n                            immutables: !!that.immutables\n                        }, params));\n                    }\n                    prevented = that.trigger('execute', {\n                        name: name,\n                        command: command\n                    });\n                    if (prevented) {\n                        return;\n                    }\n                    if (/^(undo|redo)$/i.test(name)) {\n                        that.undoRedoStack[name]();\n                    } else if (command) {\n                        that.execCommand(command);\n                        if (command.async) {\n                            command.change = proxy(that._selectionChange, that);\n                            return;\n                        }\n                    }\n                    that._selectionChange();\n                }\n            },\n            execCommand: function (command) {\n                if (!command.managesUndoRedo) {\n                    this.undoRedoStack.push(command);\n                }\n                command.editor = this;\n                command.exec();\n            }\n        });\n        Editor.defaultTools = {\n            undo: {\n                options: {\n                    key: 'Z',\n                    ctrl: true\n                }\n            },\n            redo: {\n                options: {\n                    key: 'Y',\n                    ctrl: true\n                }\n            }\n        };\n        kendo.ui.plugin(Editor);\n        var Tool = Class.extend({\n            init: function (options) {\n                this.options = options;\n            },\n            initialize: function (ui, options) {\n                ui.attr({\n                    unselectable: 'on',\n                    title: options.title\n                });\n                ui.children('.k-tool-text').html(options.title);\n            },\n            command: function (commandArguments) {\n                return new this.options.command(commandArguments);\n            },\n            update: $.noop\n        });\n        Tool.exec = function (editor, name, value) {\n            editor.exec(name, { value: value });\n        };\n        var FormatTool = Tool.extend({\n            init: function (options) {\n                Tool.fn.init.call(this, options);\n            },\n            command: function (commandArguments) {\n                var that = this;\n                return new kendo.ui.editor.FormatCommand(extend(commandArguments, { formatter: that.options.formatter }));\n            },\n            update: function (ui, nodes) {\n                var isFormatted = this.options.finder.isFormatted(nodes);\n                ui.toggleClass('k-state-selected', isFormatted);\n                ui.attr('aria-pressed', isFormatted);\n            }\n        });\n        EditorUtils.registerTool('separator', new Tool({ template: new ToolTemplate({ template: EditorUtils.separatorTemplate }) }));\n        var bomFill = browser.msie && browser.version < 9 ? '\\uFEFF' : '';\n        var emptyElementContent = '\\uFEFF';\n        var emptyTableCellContent = emptyElementContent;\n        if (browser.msie || browser.edge) {\n            emptyTableCellContent = emptyElementContent = '&nbsp;';\n        }\n        extend(kendo.ui, {\n            editor: {\n                ToolTemplate: ToolTemplate,\n                EditorUtils: EditorUtils,\n                Tool: Tool,\n                FormatTool: FormatTool,\n                _bomFill: bomFill,\n                emptyElementContent: emptyElementContent,\n                emptyTableCellContent: emptyTableCellContent\n            }\n        });\n        if (kendo.PDFMixin) {\n            kendo.PDFMixin.extend(Editor.prototype);\n            Editor.prototype._drawPDF = function () {\n                return kendo.drawing.drawDOM(this.body, this.options.pdf);\n            };\n            Editor.prototype.saveAsPDF = function () {\n                var progress = new $.Deferred();\n                var promise = progress.promise();\n                var args = { promise: promise };\n                if (this.trigger('pdfExport', args)) {\n                    return;\n                }\n                var options = this.options.pdf;\n                this._drawPDF(progress).then(function (root) {\n                    return kendo.drawing.exportPDF(root, options);\n                }).done(function (dataURI) {\n                    kendo.saveAs({\n                        dataURI: dataURI,\n                        fileName: options.fileName,\n                        proxyURL: options.proxyURL,\n                        proxyTarget: options.proxyTarget,\n                        forceProxy: options.forceProxy\n                    });\n                    progress.resolve();\n                }).fail(function (err) {\n                    progress.reject(err);\n                });\n                return promise;\n            };\n        }\n    }(window.kendo.jQuery));\n}, typeof define == 'function' && define.amd ? define : function (a1, a2, a3) {\n    (a3 || a2)();\n}));\n(function (f, define) {\n    define('editor/dom', ['editor/main'], f);\n}(function () {\n    (function ($) {\n        var kendo = window.kendo, map = $.map, extend = $.extend, browser = kendo.support.browser, STYLE = 'style', FLOAT = 'float', CSSFLOAT = 'cssFloat', STYLEFLOAT = 'styleFloat', CLASS = 'class', KMARKER = 'k-marker';\n        function makeMap(items) {\n            var obj = {}, i, len;\n            for (i = 0, len = items.length; i < len; i++) {\n                obj[items[i]] = true;\n            }\n            return obj;\n        }\n        var empty = makeMap('area,base,basefont,br,col,frame,hr,img,input,isindex,link,meta,param,embed'.split(',')), nonListBlockElements = 'div,p,h1,h2,h3,h4,h5,h6,address,applet,blockquote,button,center,dd,dir,dl,dt,fieldset,form,frameset,hr,iframe,isindex,map,menu,noframes,noscript,object,pre,script,table,tbody,td,tfoot,th,thead,tr,header,article,nav,footer,section,aside,main,figure,figcaption'.split(','), blockElements = nonListBlockElements.concat([\n                'ul',\n                'ol',\n                'li'\n            ]), block = makeMap(blockElements), inlineElements = 'span,em,a,abbr,acronym,applet,b,basefont,bdo,big,br,button,cite,code,del,dfn,font,i,iframe,img,input,ins,kbd,label,map,object,q,s,samp,script,select,small,strike,strong,sub,sup,textarea,tt,u,var,data,time,mark,ruby'.split(','), inline = makeMap(inlineElements), fillAttrs = makeMap('checked,compact,declare,defer,disabled,ismap,multiple,nohref,noresize,noshade,nowrap,readonly,selected'.split(','));\n        var normalize = function (node) {\n            if (node.nodeType == 1) {\n                node.normalize();\n            }\n        };\n        if (browser.msie && browser.version >= 8) {\n            normalize = function (parent) {\n                if (parent.nodeType == 1 && parent.firstChild) {\n                    var prev = parent.firstChild, node = prev;\n                    while (true) {\n                        node = node.nextSibling;\n                        if (!node) {\n                            break;\n                        }\n                        if (node.nodeType == 3 && prev.nodeType == 3) {\n                            node.nodeValue = prev.nodeValue + node.nodeValue;\n                            Dom.remove(prev);\n                        }\n                        prev = node;\n                    }\n                }\n            };\n        }\n        var whitespace = /^\\s+$/, emptyspace = /^[\\n\\r\\t]+$/, rgb = /rgb\\s*\\(\\s*(\\d+)\\s*,\\s*(\\d+)\\s*,\\s*(\\d+)\\s*\\)/i, bom = /\\ufeff/g, whitespaceOrBom = /^(\\s+|\\ufeff)$/, persistedScrollTop, cssAttributes = ('color,padding-left,padding-right,padding-top,padding-bottom,' + 'background-color,background-attachment,background-image,background-position,background-repeat,' + 'border-top-style,border-top-width,border-top-color,' + 'border-bottom-style,border-bottom-width,border-bottom-color,' + 'border-left-style,border-left-width,border-left-color,' + 'border-right-style,border-right-width,border-right-color,' + 'font-family,font-size,font-style,font-variant,font-weight,line-height').split(','), htmlRe = /[<>\\&]/g, entityRe = /[\\u00A0-\\u2666<>\\&]/g, entityTable = {\n                34: 'quot',\n                38: 'amp',\n                39: 'apos',\n                60: 'lt',\n                62: 'gt',\n                160: 'nbsp',\n                161: 'iexcl',\n                162: 'cent',\n                163: 'pound',\n                164: 'curren',\n                165: 'yen',\n                166: 'brvbar',\n                167: 'sect',\n                168: 'uml',\n                169: 'copy',\n                170: 'ordf',\n                171: 'laquo',\n                172: 'not',\n                173: 'shy',\n                174: 'reg',\n                175: 'macr',\n                176: 'deg',\n                177: 'plusmn',\n                178: 'sup2',\n                179: 'sup3',\n                180: 'acute',\n                181: 'micro',\n                182: 'para',\n                183: 'middot',\n                184: 'cedil',\n                185: 'sup1',\n                186: 'ordm',\n                187: 'raquo',\n                188: 'frac14',\n                189: 'frac12',\n                190: 'frac34',\n                191: 'iquest',\n                192: 'Agrave',\n                193: 'Aacute',\n                194: 'Acirc',\n                195: 'Atilde',\n                196: 'Auml',\n                197: 'Aring',\n                198: 'AElig',\n                199: 'Ccedil',\n                200: 'Egrave',\n                201: 'Eacute',\n                202: 'Ecirc',\n                203: 'Euml',\n                204: 'Igrave',\n                205: 'Iacute',\n                206: 'Icirc',\n                207: 'Iuml',\n                208: 'ETH',\n                209: 'Ntilde',\n                210: 'Ograve',\n                211: 'Oacute',\n                212: 'Ocirc',\n                213: 'Otilde',\n                214: 'Ouml',\n                215: 'times',\n                216: 'Oslash',\n                217: 'Ugrave',\n                218: 'Uacute',\n                219: 'Ucirc',\n                220: 'Uuml',\n                221: 'Yacute',\n                222: 'THORN',\n                223: 'szlig',\n                224: 'agrave',\n                225: 'aacute',\n                226: 'acirc',\n                227: 'atilde',\n                228: 'auml',\n                229: 'aring',\n                230: 'aelig',\n                231: 'ccedil',\n                232: 'egrave',\n                233: 'eacute',\n                234: 'ecirc',\n                235: 'euml',\n                236: 'igrave',\n                237: 'iacute',\n                238: 'icirc',\n                239: 'iuml',\n                240: 'eth',\n                241: 'ntilde',\n                242: 'ograve',\n                243: 'oacute',\n                244: 'ocirc',\n                245: 'otilde',\n                246: 'ouml',\n                247: 'divide',\n                248: 'oslash',\n                249: 'ugrave',\n                250: 'uacute',\n                251: 'ucirc',\n                252: 'uuml',\n                253: 'yacute',\n                254: 'thorn',\n                255: 'yuml',\n                402: 'fnof',\n                913: 'Alpha',\n                914: 'Beta',\n                915: 'Gamma',\n                916: 'Delta',\n                917: 'Epsilon',\n                918: 'Zeta',\n                919: 'Eta',\n                920: 'Theta',\n                921: 'Iota',\n                922: 'Kappa',\n                923: 'Lambda',\n                924: 'Mu',\n                925: 'Nu',\n                926: 'Xi',\n                927: 'Omicron',\n                928: 'Pi',\n                929: 'Rho',\n                931: 'Sigma',\n                932: 'Tau',\n                933: 'Upsilon',\n                934: 'Phi',\n                935: 'Chi',\n                936: 'Psi',\n                937: 'Omega',\n                945: 'alpha',\n                946: 'beta',\n                947: 'gamma',\n                948: 'delta',\n                949: 'epsilon',\n                950: 'zeta',\n                951: 'eta',\n                952: 'theta',\n                953: 'iota',\n                954: 'kappa',\n                955: 'lambda',\n                956: 'mu',\n                957: 'nu',\n                958: 'xi',\n                959: 'omicron',\n                960: 'pi',\n                961: 'rho',\n                962: 'sigmaf',\n                963: 'sigma',\n                964: 'tau',\n                965: 'upsilon',\n                966: 'phi',\n                967: 'chi',\n                968: 'psi',\n                969: 'omega',\n                977: 'thetasym',\n                978: 'upsih',\n                982: 'piv',\n                8226: 'bull',\n                8230: 'hellip',\n                8242: 'prime',\n                8243: 'Prime',\n                8254: 'oline',\n                8260: 'frasl',\n                8472: 'weierp',\n                8465: 'image',\n                8476: 'real',\n                8482: 'trade',\n                8501: 'alefsym',\n                8592: 'larr',\n                8593: 'uarr',\n                8594: 'rarr',\n                8595: 'darr',\n                8596: 'harr',\n                8629: 'crarr',\n                8656: 'lArr',\n                8657: 'uArr',\n                8658: 'rArr',\n                8659: 'dArr',\n                8660: 'hArr',\n                8704: 'forall',\n                8706: 'part',\n                8707: 'exist',\n                8709: 'empty',\n                8711: 'nabla',\n                8712: 'isin',\n                8713: 'notin',\n                8715: 'ni',\n                8719: 'prod',\n                8721: 'sum',\n                8722: 'minus',\n                8727: 'lowast',\n                8730: 'radic',\n                8733: 'prop',\n                8734: 'infin',\n                8736: 'ang',\n                8743: 'and',\n                8744: 'or',\n                8745: 'cap',\n                8746: 'cup',\n                8747: 'int',\n                8756: 'there4',\n                8764: 'sim',\n                8773: 'cong',\n                8776: 'asymp',\n                8800: 'ne',\n                8801: 'equiv',\n                8804: 'le',\n                8805: 'ge',\n                8834: 'sub',\n                8835: 'sup',\n                8836: 'nsub',\n                8838: 'sube',\n                8839: 'supe',\n                8853: 'oplus',\n                8855: 'otimes',\n                8869: 'perp',\n                8901: 'sdot',\n                8968: 'lceil',\n                8969: 'rceil',\n                8970: 'lfloor',\n                8971: 'rfloor',\n                9001: 'lang',\n                9002: 'rang',\n                9674: 'loz',\n                9824: 'spades',\n                9827: 'clubs',\n                9829: 'hearts',\n                9830: 'diams',\n                338: 'OElig',\n                339: 'oelig',\n                352: 'Scaron',\n                353: 'scaron',\n                376: 'Yuml',\n                710: 'circ',\n                732: 'tilde',\n                8194: 'ensp',\n                8195: 'emsp',\n                8201: 'thinsp',\n                8204: 'zwnj',\n                8205: 'zwj',\n                8206: 'lrm',\n                8207: 'rlm',\n                8211: 'ndash',\n                8212: 'mdash',\n                8216: 'lsquo',\n                8217: 'rsquo',\n                8218: 'sbquo',\n                8220: 'ldquo',\n                8221: 'rdquo',\n                8222: 'bdquo',\n                8224: 'dagger',\n                8225: 'Dagger',\n                8240: 'permil',\n                8249: 'lsaquo',\n                8250: 'rsaquo',\n                8364: 'euro'\n            };\n        var Dom = {\n            block: block,\n            inline: inline,\n            findNodeIndex: function (node, skipText) {\n                var i = 0;\n                if (!node) {\n                    return -1;\n                }\n                while (true) {\n                    node = node.previousSibling;\n                    if (!node) {\n                        break;\n                    }\n                    if (!(skipText && node.nodeType == 3)) {\n                        i++;\n                    }\n                }\n                return i;\n            },\n            isDataNode: function (node) {\n                return node && node.nodeValue !== null && node.data !== null;\n            },\n            isAncestorOf: function (parent, node) {\n                try {\n                    return !Dom.isDataNode(parent) && ($.contains(parent, Dom.isDataNode(node) ? node.parentNode : node) || node.parentNode == parent);\n                } catch (e) {\n                    return false;\n                }\n            },\n            isAncestorOrSelf: function (root, node) {\n                return Dom.isAncestorOf(root, node) || root == node;\n            },\n            findClosestAncestor: function (root, node) {\n                if (Dom.isAncestorOf(root, node)) {\n                    while (node && node.parentNode != root) {\n                        node = node.parentNode;\n                    }\n                }\n                return node;\n            },\n            getNodeLength: function (node) {\n                return Dom.isDataNode(node) ? node.length : node.childNodes.length;\n            },\n            splitDataNode: function (node, offset) {\n                var newNode = node.cloneNode(false);\n                var denormalizedText = '';\n                var iterator = node.nextSibling;\n                var temp;\n                while (iterator && iterator.nodeType == 3 && iterator.nodeValue) {\n                    denormalizedText += iterator.nodeValue;\n                    temp = iterator;\n                    iterator = iterator.nextSibling;\n                    Dom.remove(temp);\n                }\n                node.deleteData(offset, node.length);\n                newNode.deleteData(0, offset);\n                newNode.nodeValue += denormalizedText;\n                Dom.insertAfter(newNode, node);\n            },\n            attrEquals: function (node, attributes) {\n                for (var key in attributes) {\n                    var value = node[key];\n                    if (key == FLOAT) {\n                        value = node[kendo.support.cssFloat ? CSSFLOAT : STYLEFLOAT];\n                    }\n                    if (typeof value == 'object') {\n                        if (!Dom.attrEquals(value, attributes[key])) {\n                            return false;\n                        }\n                    } else if (value != attributes[key]) {\n                        return false;\n                    }\n                }\n                return true;\n            },\n            blockParentOrBody: function (node) {\n                return Dom.parentOfType(node, blockElements) || node.ownerDocument.body;\n            },\n            blockParents: function (nodes) {\n                var blocks = [], i, len;\n                for (i = 0, len = nodes.length; i < len; i++) {\n                    var block = Dom.parentOfType(nodes[i], Dom.blockElements);\n                    if (block && $.inArray(block, blocks) < 0) {\n                        blocks.push(block);\n                    }\n                }\n                return blocks;\n            },\n            windowFromDocument: function (document) {\n                return document.defaultView || document.parentWindow;\n            },\n            normalize: normalize,\n            blockElements: blockElements,\n            nonListBlockElements: nonListBlockElements,\n            inlineElements: inlineElements,\n            empty: empty,\n            fillAttrs: fillAttrs,\n            nodeTypes: {\n                ELEMENT_NODE: 1,\n                ATTRIBUTE_NODE: 2,\n                TEXT_NODE: 3,\n                CDATA_SECTION_NODE: 4,\n                ENTITY_REFERENCE_NODE: 5,\n                ENTITY_NODE: 6,\n                PROCESSING_INSTRUCTION_NODE: 7,\n                COMMENT_NODE: 8,\n                DOCUMENT_NODE: 9,\n                DOCUMENT_TYPE_NODE: 10,\n                DOCUMENT_FRAGMENT_NODE: 11,\n                NOTATION_NODE: 12\n            },\n            toHex: function (color) {\n                var matches = rgb.exec(color);\n                if (!matches) {\n                    return color;\n                }\n                return '#' + map(matches.slice(1), function (x) {\n                    x = parseInt(x, 10).toString(16);\n                    return x.length > 1 ? x : '0' + x;\n                }).join('');\n            },\n            encode: function (value, options) {\n                var encodableChars = !options || options.entities ? entityRe : htmlRe;\n                return value.replace(encodableChars, function (c) {\n                    var charCode = c.charCodeAt(0);\n                    var entity = entityTable[charCode];\n                    return entity ? '&' + entity + ';' : c;\n                });\n            },\n            isBom: function (node) {\n                return node && node.nodeType === 3 && /^[\\ufeff]+$/.test(node.nodeValue);\n            },\n            stripBom: function (text) {\n                return (text || '').replace(bom, '');\n            },\n            stripBomNode: function (node) {\n                if (Dom.isBom(node)) {\n                    node.parentNode.removeChild(node);\n                }\n            },\n            insignificant: function (node) {\n                var attr = node.attributes;\n                return node.className == 'k-marker' || Dom.is(node, 'br') && (node.className == 'k-br' || attr._moz_dirty || attr._moz_editor_bogus_node);\n            },\n            tableCell: function (node) {\n                return Dom.is(node, 'td') || Dom.is(node, 'th');\n            },\n            significantNodes: function (nodes) {\n                return $.grep(nodes, function (child) {\n                    var name = Dom.name(child);\n                    if (name == 'br') {\n                        return false;\n                    } else if (Dom.insignificant(child)) {\n                        return false;\n                    } else if (Dom.emptyTextNode(child)) {\n                        return false;\n                    } else if (child.nodeType == 1 && !empty[name] && Dom.emptyNode(child)) {\n                        return false;\n                    }\n                    return true;\n                });\n            },\n            emptyTextNode: function (node) {\n                return node && node.nodeType == 3 && whitespaceOrBom.test(node.nodeValue);\n            },\n            emptyNode: function (node) {\n                return node.nodeType == 1 && !Dom.significantNodes(node.childNodes).length;\n            },\n            name: function (node) {\n                return node.nodeName.toLowerCase();\n            },\n            significantChildNodes: function (node) {\n                return $.grep(node.childNodes, function (child) {\n                    return child.nodeType != 3 || !Dom.isWhitespace(child);\n                });\n            },\n            lastTextNode: function (node) {\n                var result = null;\n                if (node.nodeType == 3) {\n                    return node;\n                }\n                for (var child = node.lastChild; child; child = child.previousSibling) {\n                    result = Dom.lastTextNode(child);\n                    if (result) {\n                        return result;\n                    }\n                }\n                return result;\n            },\n            is: function (node, nodeName) {\n                return node && Dom.name(node) == nodeName;\n            },\n            isMarker: function (node) {\n                return node.className == KMARKER;\n            },\n            isWhitespace: function (node) {\n                return whitespace.test(node.nodeValue);\n            },\n            allWhitespaceContent: function (node) {\n                var child = node.firstChild;\n                while (child && Dom.isWhitespace(child)) {\n                    child = child.nextSibling;\n                }\n                return !child;\n            },\n            isEmptyspace: function (node) {\n                return emptyspace.test(node.nodeValue);\n            },\n            htmlIndentSpace: function (node) {\n                if (!(Dom.isDataNode(node) && Dom.isWhitespace(node))) {\n                    return false;\n                }\n                if (emptyspace.test(node.nodeValue)) {\n                    return true;\n                }\n                var sibling = function (el, direction) {\n                    while (el[direction]) {\n                        el = el[direction];\n                        if (Dom.significantNodes([el]).length > 0) {\n                            return el;\n                        }\n                    }\n                };\n                var parent = node.parentNode;\n                var prev = sibling(node, 'previousSibling');\n                var next = sibling(node, 'nextSibling');\n                if (bom.test(node.nodeValue)) {\n                    return !!(prev || next);\n                }\n                if ($(parent).is('tr,tbody,thead,tfoot,table,ol,ul')) {\n                    return true;\n                }\n                if (Dom.isBlock(parent) || Dom.is(parent, 'body')) {\n                    var isPrevBlock = prev && Dom.isBlock(prev);\n                    var isNextBlock = next && Dom.isBlock(next);\n                    if (!next && isPrevBlock || !prev && isNextBlock || isPrevBlock && isNextBlock) {\n                        return true;\n                    }\n                }\n                return false;\n            },\n            isBlock: function (node) {\n                return block[Dom.name(node)];\n            },\n            isEmpty: function (node) {\n                return empty[Dom.name(node)];\n            },\n            isInline: function (node) {\n                return inline[Dom.name(node)];\n            },\n            list: function (node) {\n                var name = node ? Dom.name(node) : '';\n                return name == 'ul' || name == 'ol' || name == 'dl';\n            },\n            scrollContainer: function (doc) {\n                var wnd = Dom.windowFromDocument(doc), scrollContainer = (wnd.contentWindow || wnd).document || wnd.ownerDocument || wnd;\n                if (kendo.support.browser.webkit || scrollContainer.compatMode == 'BackCompat') {\n                    scrollContainer = scrollContainer.body;\n                } else {\n                    scrollContainer = scrollContainer.documentElement;\n                }\n                return scrollContainer;\n            },\n            scrollTo: function (node, toStart) {\n                var doc = node.ownerDocument;\n                var wnd = Dom.windowFromDocument(doc);\n                var windowHeight = wnd.innerHeight;\n                var scrollContainer = Dom.scrollContainer(doc);\n                var element, elementTop, elementHeight, marker;\n                if (Dom.isDataNode(node)) {\n                    if (toStart) {\n                        marker = Dom.create(doc, 'span', { 'innerHTML': '&#xfeff;' });\n                        Dom.insertBefore(marker, node);\n                        element = $(marker);\n                    } else {\n                        element = $(node.parentNode);\n                    }\n                } else {\n                    element = $(node);\n                }\n                elementTop = element.offset().top;\n                elementHeight = element[0].offsetHeight;\n                if (toStart || !elementHeight) {\n                    elementHeight = parseInt(element.css('line-height'), 10) || Math.ceil(1.2 * parseInt(element.css('font-size'), 10)) || 15;\n                }\n                if (marker) {\n                    Dom.remove(marker);\n                }\n                if (elementHeight + elementTop > scrollContainer.scrollTop + windowHeight) {\n                    scrollContainer.scrollTop = elementHeight + elementTop - windowHeight;\n                }\n            },\n            persistScrollTop: function (doc) {\n                persistedScrollTop = Dom.scrollContainer(doc).scrollTop;\n            },\n            offset: function (target, offsetParent) {\n                var result = {\n                    top: target.offsetTop,\n                    left: target.offsetLeft\n                };\n                var parent = target.offsetParent;\n                while (parent && (!offsetParent || Dom.isAncestorOf(offsetParent, parent))) {\n                    result.top += parent.offsetTop;\n                    result.left += parent.offsetLeft;\n                    parent = parent.offsetParent;\n                }\n                return result;\n            },\n            restoreScrollTop: function (doc) {\n                if (typeof persistedScrollTop == 'number') {\n                    Dom.scrollContainer(doc).scrollTop = persistedScrollTop;\n                }\n            },\n            insertAt: function (parent, newElement, position) {\n                parent.insertBefore(newElement, parent.childNodes[position] || null);\n            },\n            insertBefore: function (newElement, referenceElement) {\n                if (referenceElement.parentNode) {\n                    return referenceElement.parentNode.insertBefore(newElement, referenceElement);\n                } else {\n                    return referenceElement;\n                }\n            },\n            insertAfter: function (newElement, referenceElement) {\n                return referenceElement.parentNode.insertBefore(newElement, referenceElement.nextSibling);\n            },\n            remove: function (node) {\n                if (node.parentNode) {\n                    node.parentNode.removeChild(node);\n                }\n            },\n            removeChildren: function (node) {\n                while (node.firstChild) {\n                    node.removeChild(node.firstChild);\n                }\n            },\n            removeTextSiblings: function (node) {\n                var parentNode = node.parentNode;\n                while (node.nextSibling && node.nextSibling.nodeType == 3) {\n                    parentNode.removeChild(node.nextSibling);\n                }\n                while (node.previousSibling && node.previousSibling.nodeType == 3) {\n                    parentNode.removeChild(node.previousSibling);\n                }\n            },\n            trim: function (parent) {\n                for (var i = parent.childNodes.length - 1; i >= 0; i--) {\n                    var node = parent.childNodes[i];\n                    if (Dom.isDataNode(node)) {\n                        if (!Dom.stripBom(node.nodeValue).length) {\n                            Dom.remove(node);\n                        }\n                    } else if (node.className != KMARKER) {\n                        Dom.trim(node);\n                        if (node.childNodes.length === 0 || Dom.allWhitespaceContent(node) && Dom.isBlock(node) && !Dom.isEmpty(node)) {\n                            Dom.remove(node);\n                        }\n                    }\n                }\n                return parent;\n            },\n            closest: function (node, tag) {\n                while (node && Dom.name(node) != tag) {\n                    node = node.parentNode;\n                }\n                return node;\n            },\n            closestBy: function (node, condition, rootCondition) {\n                while (node && !condition(node)) {\n                    if (rootCondition && rootCondition(node)) {\n                        return null;\n                    }\n                    node = node.parentNode;\n                }\n                return node;\n            },\n            sibling: function (node, direction) {\n                do {\n                    node = node[direction];\n                } while (node && node.nodeType != 1);\n                return node;\n            },\n            next: function (node) {\n                return Dom.sibling(node, 'nextSibling');\n            },\n            prev: function (node) {\n                return Dom.sibling(node, 'previousSibling');\n            },\n            parentOfType: function (node, tags) {\n                do {\n                    node = node.parentNode;\n                } while (node && !Dom.ofType(node, tags));\n                return node;\n            },\n            ofType: function (node, tags) {\n                return $.inArray(Dom.name(node), tags) >= 0;\n            },\n            changeTag: function (referenceElement, tagName, skipAttributes) {\n                var newElement = Dom.create(referenceElement.ownerDocument, tagName), attributes = referenceElement.attributes, i, len, name, value, attribute;\n                if (!skipAttributes) {\n                    for (i = 0, len = attributes.length; i < len; i++) {\n                        attribute = attributes[i];\n                        if (attribute.specified) {\n                            name = attribute.nodeName;\n                            value = attribute.nodeValue;\n                            if (name == CLASS) {\n                                newElement.className = value;\n                            } else if (name == STYLE) {\n                                newElement.style.cssText = referenceElement.style.cssText;\n                            } else {\n                                newElement.setAttribute(name, value);\n                            }\n                        }\n                    }\n                }\n                while (referenceElement.firstChild) {\n                    newElement.appendChild(referenceElement.firstChild);\n                }\n                Dom.insertBefore(newElement, referenceElement);\n                Dom.remove(referenceElement);\n                return newElement;\n            },\n            editableParent: function (node) {\n                while (node && (node.nodeType == 3 || node.contentEditable !== 'true')) {\n                    node = node.parentNode;\n                }\n                return node;\n            },\n            wrap: function (node, wrapper) {\n                Dom.insertBefore(wrapper, node);\n                wrapper.appendChild(node);\n                return wrapper;\n            },\n            unwrap: function (node) {\n                var parent = node.parentNode;\n                while (node.firstChild) {\n                    parent.insertBefore(node.firstChild, node);\n                }\n                parent.removeChild(node);\n            },\n            wrapper: function (node) {\n                var wrapper = Dom.closestBy(node, function (el) {\n                    return el.parentNode && Dom.significantNodes(el.parentNode.childNodes).length > 1;\n                });\n                return $(wrapper).is('body,.k-editor') ? undefined : wrapper;\n            },\n            create: function (document, tagName, attributes) {\n                return Dom.attr(document.createElement(tagName), attributes);\n            },\n            createEmptyNode: function (document, tagName, attributes) {\n                var node = Dom.attr(document.createElement(tagName), attributes);\n                node.innerHTML = '\\uFEFF';\n                return node;\n            },\n            attr: function (element, attributes) {\n                attributes = extend({}, attributes);\n                if (attributes && STYLE in attributes) {\n                    Dom.style(element, attributes.style);\n                    delete attributes.style;\n                }\n                for (var attr in attributes) {\n                    if (attributes[attr] === null) {\n                        element.removeAttribute(attr);\n                        delete attributes[attr];\n                    } else if (attr == 'className') {\n                        element[attr] = attributes[attr];\n                    }\n                }\n                return extend(element, attributes);\n            },\n            style: function (node, value) {\n                $(node).css(value || {});\n            },\n            unstyle: function (node, value) {\n                for (var key in value) {\n                    if (key == FLOAT) {\n                        key = kendo.support.cssFloat ? CSSFLOAT : STYLEFLOAT;\n                    }\n                    node.style[key] = '';\n                }\n                if (node.style.cssText === '') {\n                    node.removeAttribute(STYLE);\n                }\n            },\n            inlineStyle: function (body, name, attributes) {\n                var span = $(Dom.create(body.ownerDocument, name, attributes)), style;\n                body.appendChild(span[0]);\n                style = map(cssAttributes, function (value) {\n                    if (browser.msie && value == 'line-height' && span.css(value) == '1px') {\n                        return 'line-height:1.5';\n                    } else {\n                        return value + ':' + span.css(value);\n                    }\n                }).join(';');\n                span.remove();\n                return style;\n            },\n            getEffectiveBackground: function (element) {\n                var backgroundStyle = element.css('background-color') || '';\n                if (backgroundStyle.indexOf('rgba(0, 0, 0, 0') < 0 && backgroundStyle !== 'transparent') {\n                    return backgroundStyle;\n                } else if (element[0].tagName.toLowerCase() === 'html') {\n                    return 'Window';\n                } else {\n                    return Dom.getEffectiveBackground(element.parent());\n                }\n            },\n            innerText: function (node) {\n                var text = node.innerHTML;\n                text = text.replace(/<!--(.|\\s)*?-->/gi, '');\n                text = text.replace(/<\\/?[^>]+?\\/?>/gm, '');\n                return text;\n            },\n            removeClass: function (node, classNames) {\n                var className = ' ' + node.className + ' ', classes = classNames.split(' '), i, len;\n                for (i = 0, len = classes.length; i < len; i++) {\n                    className = className.replace(' ' + classes[i] + ' ', ' ');\n                }\n                className = $.trim(className);\n                if (className.length) {\n                    node.className = className;\n                } else {\n                    node.removeAttribute(CLASS);\n                }\n            },\n            commonAncestor: function () {\n                var count = arguments.length, paths = [], minPathLength = Infinity, output = null, i, ancestors, node, first, j;\n                if (!count) {\n                    return null;\n                }\n                if (count == 1) {\n                    return arguments[0];\n                }\n                for (i = 0; i < count; i++) {\n                    ancestors = [];\n                    node = arguments[i];\n                    while (node) {\n                        ancestors.push(node);\n                        node = node.parentNode;\n                    }\n                    paths.push(ancestors.reverse());\n                    minPathLength = Math.min(minPathLength, ancestors.length);\n                }\n                if (count == 1) {\n                    return paths[0][0];\n                }\n                for (i = 0; i < minPathLength; i++) {\n                    first = paths[0][i];\n                    for (j = 1; j < count; j++) {\n                        if (first != paths[j][i]) {\n                            return output;\n                        }\n                    }\n                    output = first;\n                }\n                return output;\n            },\n            closestSplittableParent: function (nodes) {\n                var result;\n                if (nodes.length == 1) {\n                    result = Dom.parentOfType(nodes[0], [\n                        'ul',\n                        'ol'\n                    ]);\n                } else {\n                    result = Dom.commonAncestor.apply(null, nodes);\n                }\n                if (!result) {\n                    result = Dom.parentOfType(nodes[0], [\n                        'p',\n                        'td'\n                    ]) || nodes[0].ownerDocument.body;\n                }\n                if (Dom.isInline(result)) {\n                    result = Dom.blockParentOrBody(result);\n                }\n                var editableParents = map(nodes, Dom.editableParent);\n                var editableAncestor = Dom.commonAncestor(editableParents)[0];\n                if ($.contains(result, editableAncestor)) {\n                    result = editableAncestor;\n                }\n                return result;\n            },\n            closestEditable: function (node, types) {\n                var closest;\n                var editable = Dom.editableParent(node);\n                if (Dom.ofType(node, types)) {\n                    closest = node;\n                } else {\n                    closest = Dom.parentOfType(node, types);\n                }\n                if (closest && editable && $.contains(closest, editable)) {\n                    closest = editable;\n                } else if (!closest && editable) {\n                    closest = editable;\n                }\n                return closest;\n            },\n            closestEditableOfType: function (node, types) {\n                var editable = Dom.closestEditable(node, types);\n                if (editable && Dom.ofType(editable, types)) {\n                    return editable;\n                }\n            },\n            filter: function (tagName, nodes, invert) {\n                var filterFn = function (node) {\n                    return Dom.name(node) == tagName;\n                };\n                return Dom.filterBy(nodes, filterFn, invert);\n            },\n            filterBy: function (nodes, condition, invert) {\n                var i = 0;\n                var len = nodes.length;\n                var result = [];\n                var match;\n                for (; i < len; i++) {\n                    match = condition(nodes[i]);\n                    if (match && !invert || !match && invert) {\n                        result.push(nodes[i]);\n                    }\n                }\n                return result;\n            },\n            ensureTrailingBreaks: function (node) {\n                var elements = $(node).find('p,td,th');\n                var length = elements.length;\n                var i = 0;\n                if (length) {\n                    for (; i < length; i++) {\n                        Dom.ensureTrailingBreak(elements[i]);\n                    }\n                } else {\n                    Dom.ensureTrailingBreak(node);\n                }\n            },\n            removeTrailingBreak: function (node) {\n                $(node).find('br[type=_moz],.k-br').remove();\n            },\n            ensureTrailingBreak: function (node) {\n                Dom.removeTrailingBreak(node);\n                var lastChild = node.lastChild;\n                var name = lastChild && Dom.name(lastChild);\n                var br;\n                if (!name || name != 'br' && name != 'img' || name == 'br' && lastChild.className != 'k-br') {\n                    br = node.ownerDocument.createElement('br');\n                    br.className = 'k-br';\n                    node.appendChild(br);\n                }\n            }\n        };\n        kendo.ui.editor.Dom = Dom;\n    }(window.kendo.jQuery));\n}, typeof define == 'function' && define.amd ? define : function (a1, a2, a3) {\n    (a3 || a2)();\n}));\n(function (f, define) {\n    define('editor/serializer', ['editor/dom'], f);\n}(function () {\n    (function ($, undefined) {\n        var kendo = window.kendo;\n        var Editor = kendo.ui.editor;\n        var dom = Editor.Dom;\n        var extend = $.extend;\n        var fontSizeMappings = 'xx-small,x-small,small,medium,large,x-large,xx-large'.split(',');\n        var quoteRe = /\"/g;\n        var brRe = /<br[^>]*>/i;\n        var pixelRe = /^\\d+(\\.\\d*)?(px)?$/i;\n        var emptyPRe = /<p>(?:&nbsp;)?<\\/p>/i;\n        var cssDeclaration = /(\\*?[-#\\/\\*\\\\\\w]+(?:\\[[0-9a-z_-]+\\])?)\\s*:\\s*((?:'(?:\\\\'|.)*?'|\"(?:\\\\\"|.)*?\"|\\([^\\)]*?\\)|[^};])+)/g;\n        var sizzleAttr = /^sizzle-\\d+/i;\n        var scriptAttr = /^k-script-/i;\n        var onerrorRe = /\\s*onerror\\s*=\\s*(?:'|\")?([^'\">\\s]*)(?:'|\")?/i;\n        var br = '<br class=\"k-br\">';\n        var div = document.createElement('div');\n        div.innerHTML = ' <hr>';\n        var supportsLeadingWhitespace = div.firstChild.nodeType === 3;\n        div = null;\n        var isFunction = $.isFunction;\n        var TD = 'td';\n        var Serializer = {\n            toEditableHtml: function (html) {\n                return (html || '').replace(/<!\\[CDATA\\[(.*)?\\]\\]>/g, '<!--[CDATA[$1]]-->').replace(/<(\\/?)script([^>]*)>/gi, '<$1k:script$2>').replace(/<img([^>]*)>/gi, function (match) {\n                    return match.replace(onerrorRe, '');\n                }).replace(/(<\\/?img[^>]*>)[\\r\\n\\v\\f\\t ]+/gi, '$1').replace(/^<(table|blockquote)/i, br + '<$1').replace(/^[\\s]*(&nbsp;|\\u00a0)/i, '$1').replace(/<\\/(table|blockquote)>$/i, '</$1>' + br);\n            },\n            _toEditableImmutables: function (body) {\n                var immutable = Editor.Immutables.immutable, emptyTextNode = dom.emptyTextNode, first = body.firstChild, last = body.lastChild;\n                while (emptyTextNode(first)) {\n                    first = first.nextSibling;\n                }\n                while (emptyTextNode(last)) {\n                    last = last.previousSibling;\n                }\n                if (first && immutable(first)) {\n                    $(br).prependTo(body);\n                }\n                if (last && immutable(last)) {\n                    $(br).appendTo(body);\n                }\n            },\n            _fillEmptyElements: function (body) {\n                $(body).find('p,td').each(function () {\n                    var p = $(this);\n                    if (/^\\s*$/g.test(p.text()) && !p.find('img,input').length) {\n                        var node = this;\n                        while (node.firstChild && node.firstChild.nodeType != 3) {\n                            node = node.firstChild;\n                        }\n                        if (node.nodeType == 1 && !dom.empty[dom.name(node)]) {\n                            if (dom.is(node, 'td')) {\n                                node.innerHTML = kendo.ui.editor.emptyTableCellContent;\n                            } else {\n                                node.innerHTML = kendo.ui.editor.emptyElementContent;\n                            }\n                        }\n                    }\n                });\n            },\n            _removeSystemElements: function (body) {\n                $('.k-paste-container', body).remove();\n            },\n            _resetOrderedLists: function (root) {\n                var ols = root.getElementsByTagName('ol'), i, ol, originalStart;\n                for (i = 0; i < ols.length; i++) {\n                    ol = ols[i];\n                    originalStart = ol.getAttribute('start');\n                    ol.setAttribute('start', 1);\n                    if (originalStart) {\n                        ol.setAttribute('start', originalStart);\n                    } else {\n                        ol.removeAttribute(originalStart);\n                    }\n                }\n            },\n            _preventScriptExecution: function (root) {\n                $(root).find('*').each(function () {\n                    var attributes = this.attributes;\n                    var attribute, i, l, name;\n                    for (i = 0, l = attributes.length; i < l; i++) {\n                        attribute = attributes[i];\n                        name = attribute.nodeName;\n                        if (attribute.specified && /^on/i.test(name)) {\n                            this.setAttribute('k-script-' + name, attribute.value);\n                            this.removeAttribute(name);\n                        }\n                    }\n                });\n            },\n            htmlToDom: function (html, root, options) {\n                var browser = kendo.support.browser;\n                var msie = browser.msie;\n                var legacyIE = msie && browser.version < 9;\n                var originalSrc = 'originalsrc';\n                var originalHref = 'originalhref';\n                var o = options || {};\n                var immutables = o.immutables;\n                html = Serializer.toEditableHtml(html);\n                if (legacyIE) {\n                    html = '<br/>' + html;\n                    html = html.replace(/href\\s*=\\s*(?:'|\")?([^'\">\\s]*)(?:'|\")?/, originalHref + '=\"$1\"');\n                    html = html.replace(/src\\s*=\\s*(?:'|\")?([^'\">\\s]*)(?:'|\")?/, originalSrc + '=\"$1\"');\n                }\n                if (isFunction(o.custom)) {\n                    html = o.custom(html) || html;\n                }\n                root.innerHTML = html;\n                if (immutables) {\n                    immutables.deserialize(root);\n                }\n                if (legacyIE) {\n                    dom.remove(root.firstChild);\n                    $(root).find('k\\\\:script,script,link,img,a').each(function () {\n                        var node = this;\n                        if (node[originalHref]) {\n                            node.setAttribute('href', node[originalHref]);\n                            node.removeAttribute(originalHref);\n                        }\n                        if (node[originalSrc]) {\n                            node.setAttribute('src', node[originalSrc]);\n                            node.removeAttribute(originalSrc);\n                        }\n                    });\n                } else if (msie) {\n                    dom.normalize(root);\n                    Serializer._resetOrderedLists(root);\n                }\n                Serializer._preventScriptExecution(root);\n                Serializer._fillEmptyElements(root);\n                Serializer._removeSystemElements(root);\n                Serializer._toEditableImmutables(root);\n                $('table', root).addClass('k-table');\n                return root;\n            },\n            domToXhtml: function (root, options) {\n                var result = [];\n                var immutables = options && options.immutables;\n                function semanticFilter(attributes) {\n                    return $.grep(attributes, function (attr) {\n                        return attr.name != 'style';\n                    });\n                }\n                function mapStart(node, tag) {\n                    result.push('<' + tag);\n                    attr(node);\n                    result.push('>');\n                }\n                var tagMap = {\n                    iframe: {\n                        start: function (node) {\n                            mapStart(node, 'iframe');\n                        },\n                        end: function () {\n                            result.push('</iframe>');\n                        }\n                    },\n                    'k:script': {\n                        start: function (node) {\n                            mapStart(node, 'script');\n                        },\n                        end: function () {\n                            result.push('</script>');\n                        },\n                        skipEncoding: true\n                    },\n                    span: {\n                        semantic: true,\n                        start: function (node) {\n                            var style = node.style;\n                            var attributes = specifiedAttributes(node);\n                            var semanticAttributes = semanticFilter(attributes);\n                            if (semanticAttributes.length) {\n                                result.push('<span');\n                                attr(node, semanticAttributes);\n                                result.push('>');\n                            }\n                            if (style.textDecoration == 'underline') {\n                                result.push('<u>');\n                            }\n                            var font = [];\n                            if (style.color) {\n                                font.push('color=\"' + dom.toHex(style.color) + '\"');\n                            }\n                            if (style.fontFamily) {\n                                font.push('face=\"' + style.fontFamily + '\"');\n                            }\n                            if (style.fontSize) {\n                                var size = $.inArray(style.fontSize, fontSizeMappings);\n                                font.push('size=\"' + size + '\"');\n                            }\n                            if (font.length) {\n                                result.push('<font ' + font.join(' ') + '>');\n                            }\n                        },\n                        end: function (node) {\n                            var style = node.style;\n                            if (style.color || style.fontFamily || style.fontSize) {\n                                result.push('</font>');\n                            }\n                            if (style.textDecoration == 'underline') {\n                                result.push('</u>');\n                            }\n                            if (semanticFilter(specifiedAttributes(node)).length) {\n                                result.push('</span>');\n                            }\n                        }\n                    },\n                    strong: {\n                        semantic: true,\n                        start: function (node) {\n                            mapStart(node, 'b');\n                        },\n                        end: function () {\n                            result.push('</b>');\n                        }\n                    },\n                    em: {\n                        semantic: true,\n                        start: function (node) {\n                            mapStart(node, 'i');\n                        },\n                        end: function () {\n                            result.push('</i>');\n                        }\n                    },\n                    b: {\n                        semantic: false,\n                        start: function (node) {\n                            mapStart(node, 'strong');\n                        },\n                        end: function () {\n                            result.push('</strong>');\n                        }\n                    },\n                    i: {\n                        semantic: false,\n                        start: function (node) {\n                            mapStart(node, 'em');\n                        },\n                        end: function () {\n                            result.push('</em>');\n                        }\n                    },\n                    u: {\n                        semantic: false,\n                        start: function (node) {\n                            result.push('<span');\n                            var attributes = specifiedAttributes(node);\n                            var style = $(attributes).filter(function (i, item) {\n                                return item.name == 'style';\n                            })[0];\n                            var styleObj = {\n                                nodeName: 'style',\n                                value: 'text-decoration:underline;'\n                            };\n                            if (style) {\n                                styleObj.value = style.value;\n                                if (!/text-decoration/i.test(styleObj.value)) {\n                                    styleObj.value = 'text-decoration:underline;' + styleObj.value;\n                                }\n                                attributes.splice($.inArray(style, attributes), 1);\n                            }\n                            attributes.push(styleObj);\n                            attr(node, attributes);\n                            result.push('>');\n                        },\n                        end: function () {\n                            result.push('</span>');\n                        }\n                    },\n                    font: {\n                        semantic: false,\n                        start: function (node) {\n                            result.push('<span style=\"');\n                            var color = node.getAttribute('color');\n                            var size = fontSizeMappings[node.getAttribute('size')];\n                            var face = node.getAttribute('face');\n                            if (color) {\n                                result.push('color:');\n                                result.push(dom.toHex(color));\n                                result.push(';');\n                            }\n                            if (face) {\n                                result.push('font-family:');\n                                result.push(face);\n                                result.push(';');\n                            }\n                            if (size) {\n                                result.push('font-size:');\n                                result.push(size);\n                                result.push(';');\n                            }\n                            result.push('\">');\n                        },\n                        end: function () {\n                            result.push('</span>');\n                        }\n                    }\n                };\n                tagMap.script = tagMap['k:script'];\n                options = options || {};\n                if (typeof options.semantic == 'undefined') {\n                    options.semantic = true;\n                }\n                function cssProperties(cssText) {\n                    var trim = $.trim;\n                    var css = trim(cssText);\n                    var match;\n                    var property, value;\n                    var properties = [];\n                    cssDeclaration.lastIndex = 0;\n                    while (true) {\n                        match = cssDeclaration.exec(css);\n                        if (!match) {\n                            break;\n                        }\n                        property = trim(match[1].toLowerCase());\n                        value = trim(match[2]);\n                        if (property == 'font-size-adjust' || property == 'font-stretch') {\n                            continue;\n                        }\n                        if (property.indexOf('color') >= 0) {\n                            value = dom.toHex(value);\n                        } else if (property.indexOf('font') >= 0) {\n                            value = value.replace(quoteRe, '\\'');\n                        } else if (/\\burl\\(/g.test(value)) {\n                            value = value.replace(quoteRe, '');\n                        }\n                        properties.push({\n                            property: property,\n                            value: value\n                        });\n                    }\n                    return properties;\n                }\n                function styleAttr(cssText) {\n                    var properties = cssProperties(cssText);\n                    var i;\n                    for (i = 0; i < properties.length; i++) {\n                        result.push(properties[i].property);\n                        result.push(':');\n                        result.push(properties[i].value);\n                        result.push(';');\n                    }\n                }\n                function specifiedAttributes(node) {\n                    var result = [];\n                    var attributes = node.attributes;\n                    var attribute, i, l;\n                    var name, value, specified;\n                    for (i = 0, l = attributes.length; i < l; i++) {\n                        attribute = attributes[i];\n                        name = attribute.nodeName;\n                        value = attribute.value;\n                        specified = attribute.specified;\n                        if (name == 'value' && 'value' in node && node.value) {\n                            specified = true;\n                        } else if (name == 'type' && value == 'text') {\n                            specified = true;\n                        } else if (name == 'class' && !value) {\n                            specified = false;\n                        } else if (sizzleAttr.test(name)) {\n                            specified = false;\n                        } else if (name == 'complete') {\n                            specified = false;\n                        } else if (name == 'altHtml') {\n                            specified = false;\n                        } else if (name == 'start' && dom.is(node, 'ul')) {\n                            specified = false;\n                        } else if (name == 'start' && dom.is(node, 'ol') && value == '1') {\n                            specified = false;\n                        } else if (name.indexOf('_moz') >= 0) {\n                            specified = false;\n                        } else if (scriptAttr.test(name)) {\n                            specified = !!options.scripts;\n                        } else if (name == 'data-role' && value == 'resizable' && (dom.is(node, 'tr') || dom.is(node, 'td'))) {\n                            specified = false;\n                        }\n                        if (specified) {\n                            result.push(attribute);\n                        }\n                    }\n                    return result;\n                }\n                function attr(node, attributes) {\n                    var i, l, attribute, name, value;\n                    attributes = attributes || specifiedAttributes(node);\n                    if (dom.is(node, 'img')) {\n                        var width = node.style.width, height = node.style.height, $node = $(node);\n                        if (width && pixelRe.test(width)) {\n                            $node.attr('width', parseInt(width, 10));\n                            dom.unstyle(node, { width: undefined });\n                        }\n                        if (height && pixelRe.test(height)) {\n                            $node.attr('height', parseInt(height, 10));\n                            dom.unstyle(node, { height: undefined });\n                        }\n                    }\n                    if (!attributes.length) {\n                        return;\n                    }\n                    for (i = 0, l = attributes.length; i < l; i++) {\n                        attribute = attributes[i];\n                        name = attribute.nodeName;\n                        value = attribute.value;\n                        if (name == 'class' && value == 'k-table') {\n                            continue;\n                        }\n                        name = name.replace(scriptAttr, '');\n                        result.push(' ');\n                        result.push(name);\n                        result.push('=\"');\n                        if (name == 'style') {\n                            styleAttr(value || node.style.cssText);\n                        } else if (name == 'src' || name == 'href') {\n                            result.push(kendo.htmlEncode(node.getAttribute(name, 2)));\n                        } else {\n                            result.push(dom.fillAttrs[name] ? name : value);\n                        }\n                        result.push('\"');\n                    }\n                }\n                function children(node, skip, skipEncoding) {\n                    for (var childNode = node.firstChild; childNode; childNode = childNode.nextSibling) {\n                        child(childNode, skip, skipEncoding);\n                    }\n                }\n                function text(node) {\n                    return node.nodeValue.replace(/\\ufeff/g, '');\n                }\n                function isEmptyBomNode(node) {\n                    if (dom.isBom(node)) {\n                        do {\n                            node = node.parentNode;\n                            if (dom.is(node, TD) && node.childNodes.length === 1) {\n                                return true;\n                            }\n                            if (node.childNodes.length !== 1) {\n                                return false;\n                            }\n                        } while (!dom.isBlock(node));\n                        return true;\n                    }\n                    return false;\n                }\n                function child(node, skip, skipEncoding) {\n                    var nodeType = node.nodeType, tagName, mapper, parent, value, previous, jqNode;\n                    if (immutables && Editor.Immutables.immutable(node)) {\n                        result.push(immutables.serialize(node));\n                    } else if (nodeType == 1) {\n                        tagName = dom.name(node);\n                        jqNode = $(node);\n                        if (jqNode.hasClass('k-table-resize-handle-wrapper') || jqNode.hasClass('k-column-resize-handle-wrapper') || jqNode.hasClass('k-row-resize-handle-wrapper')) {\n                            return;\n                        }\n                        if (!tagName || dom.insignificant(node)) {\n                            return;\n                        }\n                        if (!options.scripts && (tagName == 'script' || tagName == 'k:script')) {\n                            return;\n                        }\n                        mapper = tagMap[tagName];\n                        if (mapper) {\n                            if (typeof mapper.semantic == 'undefined' || options.semantic ^ mapper.semantic) {\n                                mapper.start(node);\n                                children(node, false, mapper.skipEncoding);\n                                mapper.end(node);\n                                return;\n                            }\n                        }\n                        result.push('<');\n                        result.push(tagName);\n                        attr(node);\n                        if (dom.empty[tagName]) {\n                            result.push(' />');\n                        } else {\n                            result.push('>');\n                            children(node, skip || dom.is(node, 'pre'));\n                            result.push('</');\n                            result.push(tagName);\n                            result.push('>');\n                        }\n                    } else if (nodeType == 3) {\n                        if (isEmptyBomNode(node)) {\n                            result.push('&nbsp;');\n                            return;\n                        }\n                        value = text(node);\n                        if (!skip && supportsLeadingWhitespace) {\n                            parent = node.parentNode;\n                            previous = node.previousSibling;\n                            if (!previous) {\n                                previous = (dom.isInline(parent) ? parent : node).previousSibling;\n                            }\n                            if (!previous || previous.innerHTML === '' || dom.isBlock(previous)) {\n                                value = value.replace(/^[\\r\\n\\v\\f\\t ]+/, '');\n                            }\n                            value = value.replace(/ +/, ' ');\n                        }\n                        result.push(skipEncoding ? value : dom.encode(value, options));\n                    } else if (nodeType == 4) {\n                        result.push('<![CDATA[');\n                        result.push(node.data);\n                        result.push(']]>');\n                    } else if (nodeType == 8) {\n                        if (node.data.indexOf('[CDATA[') < 0) {\n                            result.push('<!--');\n                            result.push(node.data);\n                            result.push('-->');\n                        } else {\n                            result.push('<!');\n                            result.push(node.data);\n                            result.push('>');\n                        }\n                    }\n                }\n                function textOnly(root) {\n                    var childrenCount = root.childNodes.length;\n                    var textChild = childrenCount && root.firstChild.nodeType == 3;\n                    return textChild && (childrenCount == 1 || childrenCount == 2 && dom.insignificant(root.lastChild));\n                }\n                function runCustom() {\n                    if ($.isFunction(options.custom)) {\n                        result = options.custom(result) || result;\n                    }\n                }\n                if (textOnly(root)) {\n                    result = dom.encode(text(root.firstChild).replace(/[\\r\\n\\v\\f\\t ]+/, ' '), options);\n                    runCustom();\n                    return result;\n                }\n                children(root);\n                result = result.join('');\n                runCustom();\n                if (result.replace(brRe, '').replace(emptyPRe, '') === '') {\n                    return '';\n                }\n                return result;\n            }\n        };\n        extend(Editor, { Serializer: Serializer });\n    }(window.kendo.jQuery));\n}, typeof define == 'function' && define.amd ? define : function (a1, a2, a3) {\n    (a3 || a2)();\n}));\n(function (f, define) {\n    define('editor/range', ['editor/serializer'], f);\n}(function () {\n    (function ($) {\n        var kendo = window.kendo, Class = kendo.Class, extend = $.extend, Editor = kendo.ui.editor, browser = kendo.support.browser, dom = Editor.Dom, findNodeIndex = dom.findNodeIndex, isDataNode = dom.isDataNode, findClosestAncestor = dom.findClosestAncestor, getNodeLength = dom.getNodeLength, normalize = dom.normalize;\n        var SelectionUtils = {\n            selectionFromWindow: function (window) {\n                if (!('getSelection' in window)) {\n                    return new W3CSelection(window.document);\n                }\n                return window.getSelection();\n            },\n            selectionFromRange: function (range) {\n                var rangeDocument = RangeUtils.documentFromRange(range);\n                return SelectionUtils.selectionFromDocument(rangeDocument);\n            },\n            selectionFromDocument: function (document) {\n                return SelectionUtils.selectionFromWindow(dom.windowFromDocument(document));\n            }\n        };\n        var W3CRange = Class.extend({\n            init: function (doc) {\n                $.extend(this, {\n                    ownerDocument: doc,\n                    startContainer: doc,\n                    endContainer: doc,\n                    commonAncestorContainer: doc,\n                    startOffset: 0,\n                    endOffset: 0,\n                    collapsed: true\n                });\n            },\n            setStart: function (node, offset) {\n                this.startContainer = node;\n                this.startOffset = offset;\n                updateRangeProperties(this);\n                fixIvalidRange(this, true);\n            },\n            setEnd: function (node, offset) {\n                this.endContainer = node;\n                this.endOffset = offset;\n                updateRangeProperties(this);\n                fixIvalidRange(this, false);\n            },\n            setStartBefore: function (node) {\n                this.setStart(node.parentNode, findNodeIndex(node));\n            },\n            setStartAfter: function (node) {\n                this.setStart(node.parentNode, findNodeIndex(node) + 1);\n            },\n            setEndBefore: function (node) {\n                this.setEnd(node.parentNode, findNodeIndex(node));\n            },\n            setEndAfter: function (node) {\n                this.setEnd(node.parentNode, findNodeIndex(node) + 1);\n            },\n            selectNode: function (node) {\n                this.setStartBefore(node);\n                this.setEndAfter(node);\n            },\n            selectNodeContents: function (node) {\n                this.setStart(node, 0);\n                this.setEnd(node, node[node.nodeType === 1 ? 'childNodes' : 'nodeValue'].length);\n            },\n            collapse: function (toStart) {\n                var that = this;\n                if (toStart) {\n                    that.setEnd(that.startContainer, that.startOffset);\n                } else {\n                    that.setStart(that.endContainer, that.endOffset);\n                }\n            },\n            deleteContents: function () {\n                var that = this, range = that.cloneRange();\n                if (that.startContainer != that.commonAncestorContainer) {\n                    that.setStartAfter(findClosestAncestor(that.commonAncestorContainer, that.startContainer));\n                }\n                that.collapse(true);\n                (function deleteSubtree(iterator) {\n                    while (iterator.next()) {\n                        if (iterator.hasPartialSubtree()) {\n                            deleteSubtree(iterator.getSubtreeIterator());\n                        } else {\n                            iterator.remove();\n                        }\n                    }\n                }(new RangeIterator(range)));\n            },\n            cloneContents: function () {\n                var document = RangeUtils.documentFromRange(this);\n                return function cloneSubtree(iterator) {\n                    var node, frag = document.createDocumentFragment();\n                    while (node = iterator.next()) {\n                        node = node.cloneNode(!iterator.hasPartialSubtree());\n                        if (iterator.hasPartialSubtree()) {\n                            node.appendChild(cloneSubtree(iterator.getSubtreeIterator()));\n                        }\n                        frag.appendChild(node);\n                    }\n                    return frag;\n                }(new RangeIterator(this));\n            },\n            extractContents: function () {\n                var that = this, range = that.cloneRange();\n                if (that.startContainer != that.commonAncestorContainer) {\n                    that.setStartAfter(findClosestAncestor(that.commonAncestorContainer, that.startContainer));\n                }\n                that.collapse(true);\n                var document = RangeUtils.documentFromRange(that);\n                return function extractSubtree(iterator) {\n                    var node, frag = document.createDocumentFragment();\n                    while (node = iterator.next()) {\n                        if (iterator.hasPartialSubtree()) {\n                            node = node.cloneNode(false);\n                            node.appendChild(extractSubtree(iterator.getSubtreeIterator()));\n                        } else {\n                            iterator.remove(that.originalRange);\n                        }\n                        frag.appendChild(node);\n                    }\n                    return frag;\n                }(new RangeIterator(range));\n            },\n            insertNode: function (node) {\n                var that = this;\n                if (isDataNode(that.startContainer)) {\n                    if (that.startOffset != that.startContainer.nodeValue.length) {\n                        dom.splitDataNode(that.startContainer, that.startOffset);\n                    }\n                    dom.insertAfter(node, that.startContainer);\n                } else {\n                    dom.insertAt(that.startContainer, node, that.startOffset);\n                }\n                that.setStart(that.startContainer, that.startOffset);\n            },\n            cloneRange: function () {\n                return $.extend(new W3CRange(this.ownerDocument), {\n                    startContainer: this.startContainer,\n                    endContainer: this.endContainer,\n                    commonAncestorContainer: this.commonAncestorContainer,\n                    startOffset: this.startOffset,\n                    endOffset: this.endOffset,\n                    collapsed: this.collapsed,\n                    originalRange: this\n                });\n            },\n            toString: function () {\n                var startNodeName = this.startContainer.nodeName, endNodeName = this.endContainer.nodeName;\n                return [\n                    startNodeName == '#text' ? this.startContainer.nodeValue : startNodeName,\n                    '(',\n                    this.startOffset,\n                    ') : ',\n                    endNodeName == '#text' ? this.endContainer.nodeValue : endNodeName,\n                    '(',\n                    this.endOffset,\n                    ')'\n                ].join('');\n            }\n        });\n        W3CRange.fromNode = function (node) {\n            return new W3CRange(node.ownerDocument);\n        };\n        function compareBoundaries(start, end, startOffset, endOffset) {\n            if (start == end) {\n                return endOffset - startOffset;\n            }\n            var container = end;\n            while (container && container.parentNode != start) {\n                container = container.parentNode;\n            }\n            if (container) {\n                return findNodeIndex(container) - startOffset;\n            }\n            container = start;\n            while (container && container.parentNode != end) {\n                container = container.parentNode;\n            }\n            if (container) {\n                return endOffset - findNodeIndex(container) - 1;\n            }\n            var root = dom.commonAncestor(start, end);\n            var startAncestor = start;\n            while (startAncestor && startAncestor.parentNode != root) {\n                startAncestor = startAncestor.parentNode;\n            }\n            if (!startAncestor) {\n                startAncestor = root;\n            }\n            var endAncestor = end;\n            while (endAncestor && endAncestor.parentNode != root) {\n                endAncestor = endAncestor.parentNode;\n            }\n            if (!endAncestor) {\n                endAncestor = root;\n            }\n            if (startAncestor == endAncestor) {\n                return 0;\n            }\n            return findNodeIndex(endAncestor) - findNodeIndex(startAncestor);\n        }\n        function fixIvalidRange(range, toStart) {\n            function isInvalidRange(range) {\n                try {\n                    return compareBoundaries(range.startContainer, range.endContainer, range.startOffset, range.endOffset) < 0;\n                } catch (ex) {\n                    return true;\n                }\n            }\n            if (isInvalidRange(range)) {\n                if (toStart) {\n                    range.commonAncestorContainer = range.endContainer = range.startContainer;\n                    range.endOffset = range.startOffset;\n                } else {\n                    range.commonAncestorContainer = range.startContainer = range.endContainer;\n                    range.startOffset = range.endOffset;\n                }\n                range.collapsed = true;\n            }\n        }\n        function updateRangeProperties(range) {\n            range.collapsed = range.startContainer == range.endContainer && range.startOffset == range.endOffset;\n            var node = range.startContainer;\n            while (node && node != range.endContainer && !dom.isAncestorOf(node, range.endContainer)) {\n                node = node.parentNode;\n            }\n            range.commonAncestorContainer = node;\n        }\n        var RangeIterator = Class.extend({\n            init: function (range) {\n                $.extend(this, {\n                    range: range,\n                    _current: null,\n                    _next: null,\n                    _end: null\n                });\n                if (range.collapsed) {\n                    return;\n                }\n                var root = range.commonAncestorContainer;\n                this._next = range.startContainer == root && !isDataNode(range.startContainer) ? range.startContainer.childNodes[range.startOffset] : findClosestAncestor(root, range.startContainer);\n                this._end = range.endContainer == root && !isDataNode(range.endContainer) ? range.endContainer.childNodes[range.endOffset] : findClosestAncestor(root, range.endContainer).nextSibling;\n            },\n            hasNext: function () {\n                return !!this._next;\n            },\n            next: function () {\n                var that = this, current = that._current = that._next;\n                that._next = that._current && that._current.nextSibling != that._end ? that._current.nextSibling : null;\n                if (isDataNode(that._current)) {\n                    if (that.range.endContainer == that._current) {\n                        current = current.cloneNode(true);\n                        current.deleteData(that.range.endOffset, current.length - that.range.endOffset);\n                    }\n                    if (that.range.startContainer == that._current) {\n                        current = current.cloneNode(true);\n                        current.deleteData(0, that.range.startOffset);\n                    }\n                }\n                return current;\n            },\n            traverse: function (callback) {\n                var that = this, current;\n                function next() {\n                    that._current = that._next;\n                    that._next = that._current && that._current.nextSibling != that._end ? that._current.nextSibling : null;\n                    return that._current;\n                }\n                while (current = next()) {\n                    if (that.hasPartialSubtree()) {\n                        that.getSubtreeIterator().traverse(callback);\n                    } else {\n                        callback(current);\n                    }\n                }\n                return current;\n            },\n            remove: function (originalRange) {\n                var that = this, inStartContainer = that.range.startContainer == that._current, inEndContainer = that.range.endContainer == that._current, start, end, delta;\n                if (isDataNode(that._current) && (inStartContainer || inEndContainer)) {\n                    start = inStartContainer ? that.range.startOffset : 0;\n                    end = inEndContainer ? that.range.endOffset : that._current.length;\n                    delta = end - start;\n                    if (originalRange && (inStartContainer || inEndContainer)) {\n                        if (that._current == originalRange.startContainer && start <= originalRange.startOffset) {\n                            originalRange.startOffset -= delta;\n                        }\n                        if (that._current == originalRange.endContainer && end <= originalRange.endOffset) {\n                            originalRange.endOffset -= delta;\n                        }\n                    }\n                    that._current.deleteData(start, delta);\n                } else {\n                    var parent = that._current.parentNode;\n                    if (originalRange && (that.range.startContainer == parent || that.range.endContainer == parent)) {\n                        var nodeIndex = findNodeIndex(that._current);\n                        if (parent == originalRange.startContainer && nodeIndex <= originalRange.startOffset) {\n                            originalRange.startOffset -= 1;\n                        }\n                        if (parent == originalRange.endContainer && nodeIndex < originalRange.endOffset) {\n                            originalRange.endOffset -= 1;\n                        }\n                    }\n                    dom.remove(that._current);\n                }\n            },\n            hasPartialSubtree: function () {\n                return !isDataNode(this._current) && (dom.isAncestorOrSelf(this._current, this.range.startContainer) || dom.isAncestorOrSelf(this._current, this.range.endContainer));\n            },\n            getSubtreeIterator: function () {\n                return new RangeIterator(this.getSubRange());\n            },\n            getSubRange: function () {\n                var that = this, subRange = that.range.cloneRange();\n                subRange.selectNodeContents(that._current);\n                if (dom.isAncestorOrSelf(that._current, that.range.startContainer)) {\n                    subRange.setStart(that.range.startContainer, that.range.startOffset);\n                }\n                if (dom.isAncestorOrSelf(that._current, that.range.endContainer)) {\n                    subRange.setEnd(that.range.endContainer, that.range.endOffset);\n                }\n                return subRange;\n            }\n        });\n        var W3CSelection = Class.extend({\n            init: function (doc) {\n                this.ownerDocument = doc;\n                this.rangeCount = 1;\n            },\n            addRange: function (range) {\n                var textRange = this.ownerDocument.body.createTextRange();\n                adoptContainer(textRange, range, false);\n                adoptContainer(textRange, range, true);\n                textRange.select();\n            },\n            removeAllRanges: function () {\n                var selection = this.ownerDocument.selection;\n                if (selection.type != 'None') {\n                    selection.empty();\n                }\n            },\n            getRangeAt: function () {\n                var textRange, range = new W3CRange(this.ownerDocument), selection = this.ownerDocument.selection, element, commonAncestor;\n                try {\n                    textRange = selection.createRange();\n                    element = textRange.item ? textRange.item(0) : textRange.parentElement();\n                    if (element.ownerDocument != this.ownerDocument) {\n                        return range;\n                    }\n                } catch (ex) {\n                    return range;\n                }\n                if (selection.type == 'Control') {\n                    range.selectNode(textRange.item(0));\n                } else {\n                    commonAncestor = textRangeContainer(textRange);\n                    adoptEndPoint(textRange, range, commonAncestor, true);\n                    adoptEndPoint(textRange, range, commonAncestor, false);\n                    if (range.startContainer.nodeType == 9) {\n                        range.setStart(range.endContainer, range.startOffset);\n                    }\n                    if (range.endContainer.nodeType == 9) {\n                        range.setEnd(range.startContainer, range.endOffset);\n                    }\n                    if (textRange.compareEndPoints('StartToEnd', textRange) === 0) {\n                        range.collapse(false);\n                    }\n                    var startContainer = range.startContainer, endContainer = range.endContainer, body = this.ownerDocument.body;\n                    if (!range.collapsed && range.startOffset === 0 && range.endOffset == getNodeLength(range.endContainer) && !(startContainer == endContainer && isDataNode(startContainer) && startContainer.parentNode == body)) {\n                        var movedStart = false, movedEnd = false;\n                        while (findNodeIndex(startContainer) === 0 && startContainer == startContainer.parentNode.firstChild && startContainer != body) {\n                            startContainer = startContainer.parentNode;\n                            movedStart = true;\n                        }\n                        while (findNodeIndex(endContainer) == getNodeLength(endContainer.parentNode) - 1 && endContainer == endContainer.parentNode.lastChild && endContainer != body) {\n                            endContainer = endContainer.parentNode;\n                            movedEnd = true;\n                        }\n                        if (startContainer == body && endContainer == body && movedStart && movedEnd) {\n                            range.setStart(startContainer, 0);\n                            range.setEnd(endContainer, getNodeLength(body));\n                        }\n                    }\n                }\n                return range;\n            }\n        });\n        function textRangeContainer(textRange) {\n            var left = textRange.duplicate(), right = textRange.duplicate();\n            left.collapse(true);\n            right.collapse(false);\n            return dom.commonAncestor(textRange.parentElement(), left.parentElement(), right.parentElement());\n        }\n        function adoptContainer(textRange, range, start) {\n            var container = range[start ? 'startContainer' : 'endContainer'], offset = range[start ? 'startOffset' : 'endOffset'], textOffset = 0, isData = isDataNode(container), anchorNode = isData ? container : container.childNodes[offset] || null, anchorParent = isData ? container.parentNode : container, doc = range.ownerDocument, cursor = doc.body.createTextRange(), cursorNode;\n            if (container.nodeType == 3 || container.nodeType == 4) {\n                textOffset = offset;\n            }\n            if (!anchorParent) {\n                anchorParent = doc.body;\n            }\n            if (anchorParent.nodeName.toLowerCase() == 'img') {\n                cursor.moveToElementText(anchorParent);\n                cursor.collapse(false);\n                textRange.setEndPoint(start ? 'StartToStart' : 'EndToStart', cursor);\n            } else {\n                cursorNode = anchorParent.insertBefore(dom.create(doc, 'a'), anchorNode);\n                cursor.moveToElementText(cursorNode);\n                dom.remove(cursorNode);\n                cursor[start ? 'moveStart' : 'moveEnd']('character', textOffset);\n                cursor.collapse(false);\n                textRange.setEndPoint(start ? 'StartToStart' : 'EndToStart', cursor);\n            }\n        }\n        function adoptEndPoint(textRange, range, commonAncestor, start) {\n            var cursorNode = dom.create(range.ownerDocument, 'a'), cursor = textRange.duplicate(), comparison = start ? 'StartToStart' : 'StartToEnd', result, parent, target, previous, next, args, index, appended = false;\n            cursorNode.innerHTML = '\\uFEFF';\n            cursor.collapse(start);\n            parent = cursor.parentElement();\n            if (!dom.isAncestorOrSelf(commonAncestor, parent)) {\n                parent = commonAncestor;\n            }\n            do {\n                if (appended) {\n                    parent.insertBefore(cursorNode, cursorNode.previousSibling);\n                } else {\n                    parent.appendChild(cursorNode);\n                    appended = true;\n                }\n                cursor.moveToElementText(cursorNode);\n            } while ((result = cursor.compareEndPoints(comparison, textRange)) > 0 && cursorNode.previousSibling);\n            target = cursorNode.nextSibling;\n            if (result == -1 && isDataNode(target)) {\n                cursor.setEndPoint(start ? 'EndToStart' : 'EndToEnd', textRange);\n                dom.remove(cursorNode);\n                args = [\n                    target,\n                    cursor.text.length\n                ];\n            } else {\n                previous = !start && cursorNode.previousSibling;\n                next = start && cursorNode.nextSibling;\n                if (isDataNode(next)) {\n                    args = [\n                        next,\n                        0\n                    ];\n                } else if (isDataNode(previous)) {\n                    args = [\n                        previous,\n                        previous.length\n                    ];\n                } else {\n                    index = findNodeIndex(cursorNode);\n                    if (parent.nextSibling && index == parent.childNodes.length - 1) {\n                        args = [\n                            parent.nextSibling,\n                            0\n                        ];\n                    } else {\n                        args = [\n                            parent,\n                            index\n                        ];\n                    }\n                }\n                dom.remove(cursorNode);\n            }\n            range[start ? 'setStart' : 'setEnd'].apply(range, args);\n        }\n        var RangeEnumerator = Class.extend({\n            init: function (range) {\n                this.enumerate = function () {\n                    var nodes = [];\n                    function visit(node) {\n                        if (dom.is(node, 'img') || node.nodeType == 3 && (!dom.isEmptyspace(node) || node.nodeValue == '\\uFEFF')) {\n                            nodes.push(node);\n                        } else {\n                            node = node.firstChild;\n                            while (node) {\n                                visit(node);\n                                node = node.nextSibling;\n                            }\n                        }\n                    }\n                    new RangeIterator(range).traverse(visit);\n                    return nodes;\n                };\n            }\n        });\n        var ImmutablesRangeIterator = RangeIterator.extend({\n            hasPartialSubtree: function () {\n                var immutable = Editor.Immutables && Editor.Immutables.immutable;\n                return immutable && !immutable(this._current) && RangeIterator.fn.hasPartialSubtree.call(this);\n            },\n            getSubtreeIterator: function () {\n                return new ImmutablesRangeIterator(this.getSubRange());\n            }\n        });\n        var ImmutablesRangeEnumerator = Class.extend({\n            init: function (range) {\n                this.enumerate = function () {\n                    var nodes = [];\n                    var immutable = Editor.Immutables && Editor.Immutables.immutable;\n                    function visit(node) {\n                        if (immutable && !immutable(node)) {\n                            if (dom.is(node, 'img') || node.nodeType == 3 && (!dom.isEmptyspace(node) || node.nodeValue == '\\uFEFF')) {\n                                nodes.push(node);\n                            } else {\n                                node = node.firstChild;\n                                while (node) {\n                                    visit(node);\n                                    node = node.nextSibling;\n                                }\n                            }\n                        }\n                    }\n                    new ImmutablesRangeIterator(range).traverse(visit);\n                    return nodes;\n                };\n            }\n        });\n        var RestorePoint = Class.extend({\n            init: function (range, body, options) {\n                var that = this;\n                that.range = range;\n                that.rootNode = RangeUtils.documentFromRange(range);\n                that.body = body || that.getEditable(range);\n                if (dom.name(that.body) != 'body') {\n                    that.rootNode = that.body;\n                }\n                that.startContainer = that.nodeToPath(range.startContainer);\n                that.endContainer = that.nodeToPath(range.endContainer);\n                that.startOffset = that.offset(range.startContainer, range.startOffset);\n                that.endOffset = that.offset(range.endContainer, range.endOffset);\n                that.immutables = options && options.immutables;\n                if (that.immutables) {\n                    that.serializedImmutables = Editor.Immutables.removeImmutables(that.body);\n                }\n                that.html = that.body.innerHTML;\n                if (that.immutables && !that.serializedImmutables.empty) {\n                    Editor.Immutables.restoreImmutables(that.body, that.serializedImmutables);\n                }\n            },\n            index: function (node) {\n                var result = 0, lastType = node.nodeType;\n                while (node = node.previousSibling) {\n                    var nodeType = node.nodeType;\n                    if (nodeType != 3 || lastType != nodeType) {\n                        result++;\n                    }\n                    lastType = nodeType;\n                }\n                return result;\n            },\n            getEditable: function (range) {\n                var root = range.commonAncestorContainer;\n                while (root && (root.nodeType == 3 || root.attributes && (!root.attributes.contentEditable || root.attributes.contentEditable.nodeValue.toLowerCase() == 'false'))) {\n                    root = root.parentNode;\n                }\n                return root;\n            },\n            restoreHtml: function () {\n                var that = this;\n                dom.removeChildren(that.body);\n                that.body.innerHTML = that.html;\n                if (that.immutables && !that.serializedImmutables.empty) {\n                    Editor.Immutables.restoreImmutables(that.body, that.serializedImmutables);\n                }\n            },\n            offset: function (node, value) {\n                if (node.nodeType == 3) {\n                    while ((node = node.previousSibling) && node.nodeType == 3) {\n                        value += node.nodeValue.length;\n                    }\n                }\n                return value;\n            },\n            nodeToPath: function (node) {\n                var path = [];\n                while (node != this.rootNode) {\n                    path.push(this.index(node));\n                    node = node.parentNode;\n                }\n                return path;\n            },\n            toRangePoint: function (range, start, path, denormalizedOffset) {\n                var node = this.rootNode, length = path.length, offset = denormalizedOffset;\n                while (length--) {\n                    node = node.childNodes[path[length]];\n                }\n                while (node && node.nodeType == 3 && node.nodeValue.length < offset) {\n                    offset -= node.nodeValue.length;\n                    node = node.nextSibling;\n                }\n                if (node && offset >= 0) {\n                    range[start ? 'setStart' : 'setEnd'](node, offset);\n                }\n            },\n            toRange: function () {\n                var that = this, result = that.range.cloneRange();\n                that.toRangePoint(result, true, that.startContainer, that.startOffset);\n                that.toRangePoint(result, false, that.endContainer, that.endOffset);\n                return result;\n            }\n        });\n        var Marker = Class.extend({\n            init: function () {\n                this.caret = null;\n            },\n            addCaret: function (range) {\n                var that = this;\n                var caret = that.caret = dom.create(RangeUtils.documentFromRange(range), 'span', { className: 'k-marker' });\n                range.insertNode(caret);\n                dom.stripBomNode(caret.previousSibling);\n                dom.stripBomNode(caret.nextSibling);\n                range.selectNode(caret);\n                return caret;\n            },\n            removeCaret: function (range) {\n                var that = this, previous = that.caret.previousSibling, startOffset = 0;\n                if (previous) {\n                    startOffset = isDataNode(previous) ? previous.nodeValue.length : findNodeIndex(previous);\n                }\n                var container = that.caret.parentNode;\n                var containerIndex = previous ? findNodeIndex(previous) : 0;\n                dom.remove(that.caret);\n                normalize(container);\n                var node = container.childNodes[containerIndex];\n                if (isDataNode(node)) {\n                    range.setStart(node, startOffset);\n                } else if (node) {\n                    var textNode = dom.lastTextNode(node);\n                    if (textNode) {\n                        range.setStart(textNode, textNode.nodeValue.length);\n                    } else {\n                        range[previous ? 'setStartAfter' : 'setStartBefore'](node);\n                    }\n                } else {\n                    if (!browser.msie && !container.innerHTML) {\n                        container.innerHTML = '<br _moz_dirty=\"\" />';\n                    }\n                    range.selectNodeContents(container);\n                }\n                range.collapse(true);\n            },\n            add: function (range, expand) {\n                var that = this;\n                var collapsed = range.collapsed && !RangeUtils.isExpandable(range);\n                var doc = RangeUtils.documentFromRange(range);\n                if (expand && range.collapsed) {\n                    that.addCaret(range);\n                    range = RangeUtils.expand(range);\n                }\n                var rangeBoundary = range.cloneRange();\n                rangeBoundary.collapse(false);\n                that.end = dom.create(doc, 'span', { className: 'k-marker' });\n                rangeBoundary.insertNode(that.end);\n                rangeBoundary = range.cloneRange();\n                rangeBoundary.collapse(true);\n                that.start = that.end.cloneNode(true);\n                rangeBoundary.insertNode(that.start);\n                that._removeDeadMarkers(that.start, that.end);\n                if (collapsed) {\n                    var bom = doc.createTextNode('\\uFEFF');\n                    dom.insertAfter(bom.cloneNode(), that.start);\n                    dom.insertBefore(bom, that.end);\n                }\n                normalize(range.commonAncestorContainer);\n                range.setStartBefore(that.start);\n                range.setEndAfter(that.end);\n                return range;\n            },\n            _removeDeadMarkers: function (start, end) {\n                if (start.previousSibling && start.previousSibling.nodeValue == '\\uFEFF') {\n                    dom.remove(start.previousSibling);\n                }\n                if (end.nextSibling && end.nextSibling.nodeValue == '\\uFEFF') {\n                    dom.remove(end.nextSibling);\n                }\n            },\n            _normalizedIndex: function (node) {\n                var index = findNodeIndex(node);\n                var pointer = node;\n                while (pointer.previousSibling) {\n                    if (pointer.nodeType == 3 && pointer.previousSibling.nodeType == 3) {\n                        index--;\n                    }\n                    pointer = pointer.previousSibling;\n                }\n                return index;\n            },\n            remove: function (range) {\n                var that = this, start = that.start, end = that.end, shouldNormalizeStart, shouldNormalizeEnd, shouldNormalize;\n                normalize(range.commonAncestorContainer);\n                while (!start.nextSibling && start.parentNode) {\n                    start = start.parentNode;\n                }\n                while (!end.previousSibling && end.parentNode) {\n                    end = end.parentNode;\n                }\n                shouldNormalizeStart = start.previousSibling && start.previousSibling.nodeType == 3 && (start.nextSibling && start.nextSibling.nodeType == 3);\n                shouldNormalizeEnd = end.previousSibling && end.previousSibling.nodeType == 3 && (end.nextSibling && end.nextSibling.nodeType == 3);\n                shouldNormalize = shouldNormalizeStart && shouldNormalizeEnd;\n                start = start.nextSibling;\n                end = end.previousSibling;\n                var isBomSelected = start === end && dom.isBom(start);\n                if (isBomSelected && start.length > 1) {\n                    start.nodeValue = start.nodeValue.charAt(0);\n                }\n                var collapsed = isBomSelected;\n                var collapsedToStart = false;\n                if (start == that.end) {\n                    collapsedToStart = !!that.start.previousSibling;\n                    start = end = that.start.previousSibling || that.end.nextSibling;\n                    collapsed = true;\n                }\n                dom.remove(that.start);\n                dom.remove(that.end);\n                if (!start || !end) {\n                    range.selectNodeContents(range.commonAncestorContainer);\n                    range.collapse(true);\n                    return;\n                }\n                var startOffset = collapsed ? isDataNode(start) ? start.nodeValue.length : start.childNodes.length : 0;\n                var endOffset = isDataNode(end) ? end.nodeValue.length : end.childNodes.length;\n                if (start.nodeType == 3) {\n                    while (start.previousSibling && start.previousSibling.nodeType == 3) {\n                        start = start.previousSibling;\n                        startOffset += start.nodeValue.length;\n                    }\n                }\n                if (end.nodeType == 3) {\n                    while (end.previousSibling && end.previousSibling.nodeType == 3) {\n                        end = end.previousSibling;\n                        endOffset += end.nodeValue.length;\n                    }\n                }\n                var startParent = start.parentNode;\n                var endParent = end.parentNode;\n                var startIndex = this._normalizedIndex(start);\n                var endIndex = this._normalizedIndex(end);\n                normalize(startParent);\n                if (start.nodeType == 3) {\n                    start = startParent.childNodes[startIndex];\n                }\n                normalize(endParent);\n                if (end.nodeType == 3) {\n                    end = endParent.childNodes[endIndex];\n                }\n                if (collapsed) {\n                    if (start.nodeType == 3) {\n                        range.setStart(start, startOffset);\n                    } else {\n                        range[collapsedToStart ? 'setStartAfter' : 'setStartBefore'](start);\n                    }\n                    range.collapse(true);\n                } else {\n                    if (start.nodeType == 3) {\n                        range.setStart(start, startOffset);\n                    } else {\n                        range.setStartBefore(start);\n                    }\n                    if (end.nodeType == 3) {\n                        range.setEnd(end, endOffset);\n                    } else {\n                        range.setEndAfter(end);\n                    }\n                }\n                if (that.caret) {\n                    that.removeCaret(range);\n                }\n            }\n        });\n        var boundary = /[\\u0009-\\u000d]|\\u0020|\\u00a0|\\ufeff|\\.|,|;|:|!|\\(|\\)|\\?/;\n        var RangeUtils = {\n            nodes: function (range) {\n                var nodes = RangeUtils.textNodes(range);\n                if (!nodes.length) {\n                    range.selectNodeContents(range.commonAncestorContainer);\n                    nodes = RangeUtils.textNodes(range);\n                    if (!nodes.length) {\n                        nodes = dom.significantChildNodes(range.commonAncestorContainer);\n                    }\n                }\n                return nodes;\n            },\n            textNodes: function (range) {\n                return new RangeEnumerator(range).enumerate();\n            },\n            editableTextNodes: function (range) {\n                var nodes = [], immutableParent = Editor.Immutables && Editor.Immutables.immutableParent;\n                if (immutableParent && !immutableParent(range.commonAncestorContainer)) {\n                    nodes = new ImmutablesRangeEnumerator(range).enumerate();\n                }\n                return nodes;\n            },\n            documentFromRange: function (range) {\n                var startContainer = range.startContainer;\n                return startContainer.nodeType == 9 ? startContainer : startContainer.ownerDocument;\n            },\n            createRange: function (document) {\n                if (browser.msie && browser.version < 9) {\n                    return new W3CRange(document);\n                }\n                return document.createRange();\n            },\n            selectRange: function (range) {\n                var image = RangeUtils.image(range);\n                if (image) {\n                    range.setStartAfter(image);\n                    range.setEndAfter(image);\n                }\n                var selection = SelectionUtils.selectionFromRange(range);\n                selection.removeAllRanges();\n                selection.addRange(range);\n            },\n            stringify: function (range) {\n                return kendo.format('{0}:{1} - {2}:{3}', dom.name(range.startContainer), range.startOffset, dom.name(range.endContainer), range.endOffset);\n            },\n            split: function (range, node, trim) {\n                function partition(start) {\n                    var partitionRange = range.cloneRange();\n                    partitionRange.collapse(start);\n                    partitionRange[start ? 'setStartBefore' : 'setEndAfter'](node);\n                    var contents = partitionRange.extractContents();\n                    if (trim) {\n                        contents = dom.trim(contents);\n                    }\n                    dom[start ? 'insertBefore' : 'insertAfter'](contents, node);\n                }\n                partition(true);\n                partition(false);\n            },\n            mapAll: function (range, map) {\n                var nodes = [];\n                new RangeIterator(range).traverse(function (node) {\n                    var mapped = map(node);\n                    if (mapped && $.inArray(mapped, nodes) < 0) {\n                        nodes.push(mapped);\n                    }\n                });\n                return nodes;\n            },\n            getAll: function (range, predicate) {\n                var selector = predicate;\n                if (typeof predicate == 'string') {\n                    predicate = function (node) {\n                        return dom.is(node, selector);\n                    };\n                }\n                return RangeUtils.mapAll(range, function (node) {\n                    if (predicate(node)) {\n                        return node;\n                    }\n                });\n            },\n            getMarkers: function (range) {\n                return RangeUtils.getAll(range, function (node) {\n                    return node.className == 'k-marker';\n                });\n            },\n            image: function (range) {\n                var nodes = RangeUtils.getAll(range, 'img');\n                if (nodes.length == 1) {\n                    return nodes[0];\n                }\n            },\n            isStartOf: function (originalRange, node) {\n                if (originalRange.startOffset !== 0) {\n                    return false;\n                }\n                var range = originalRange.cloneRange();\n                while (range.startOffset === 0 && range.startContainer != node) {\n                    var index = dom.findNodeIndex(range.startContainer);\n                    var parent = range.startContainer.parentNode;\n                    while (index > 0 && parent[index - 1] && dom.insignificant(parent[index - 1])) {\n                        index--;\n                    }\n                    range.setStart(parent, index);\n                }\n                return range.startOffset === 0 && range.startContainer == node;\n            },\n            isEndOf: function (originalRange, node) {\n                var range = originalRange.cloneRange();\n                range.collapse(false);\n                var start = range.startContainer;\n                if (dom.isDataNode(start) && range.startOffset == dom.getNodeLength(start)) {\n                    range.setStart(start.parentNode, dom.findNodeIndex(start) + 1);\n                    range.collapse(true);\n                }\n                range.setEnd(node, dom.getNodeLength(node));\n                var nodes = [];\n                function visit(node) {\n                    if (!dom.insignificant(node) && !(dom.isDataNode(node) && /^[\\ufeff]*$/.test(node.nodeValue))) {\n                        nodes.push(node);\n                    }\n                }\n                new RangeIterator(range).traverse(visit);\n                return !nodes.length;\n            },\n            wrapSelectedElements: function (range) {\n                var startEditable = dom.editableParent(range.startContainer);\n                var endEditable = dom.editableParent(range.endContainer);\n                while (range.startOffset === 0 && range.startContainer != startEditable) {\n                    range.setStart(range.startContainer.parentNode, dom.findNodeIndex(range.startContainer));\n                }\n                function isEnd(offset, container) {\n                    var length = dom.getNodeLength(container);\n                    if (offset == length) {\n                        return true;\n                    }\n                    for (var i = offset; i < length; i++) {\n                        if (!dom.insignificant(container.childNodes[i])) {\n                            return false;\n                        }\n                    }\n                    return true;\n                }\n                while (isEnd(range.endOffset, range.endContainer) && range.endContainer != endEditable) {\n                    range.setEnd(range.endContainer.parentNode, dom.findNodeIndex(range.endContainer) + 1);\n                }\n                return range;\n            },\n            expand: function (range) {\n                var result = range.cloneRange();\n                var startContainer = result.startContainer.childNodes[result.startOffset === 0 ? 0 : result.startOffset - 1];\n                var endContainer = result.endContainer.childNodes[result.endOffset];\n                if (!isDataNode(startContainer) || !isDataNode(endContainer)) {\n                    return result;\n                }\n                var beforeCaret = startContainer.nodeValue;\n                var afterCaret = endContainer.nodeValue;\n                if (!beforeCaret || !afterCaret) {\n                    return result;\n                }\n                var startOffset = beforeCaret.split('').reverse().join('').search(boundary);\n                var endOffset = afterCaret.search(boundary);\n                if (!startOffset || !endOffset) {\n                    return result;\n                }\n                endOffset = endOffset == -1 ? afterCaret.length : endOffset;\n                startOffset = startOffset == -1 ? 0 : beforeCaret.length - startOffset;\n                result.setStart(startContainer, startOffset);\n                result.setEnd(endContainer, endOffset);\n                return result;\n            },\n            isExpandable: function (range) {\n                var node = range.startContainer;\n                var rangeDocument = RangeUtils.documentFromRange(range);\n                if (node == rangeDocument || node == rangeDocument.body) {\n                    return false;\n                }\n                var result = range.cloneRange();\n                var value = node.nodeValue;\n                if (!value) {\n                    return false;\n                }\n                var beforeCaret = value.substring(0, result.startOffset);\n                var afterCaret = value.substring(result.startOffset);\n                var startOffset = 0, endOffset = 0;\n                if (beforeCaret) {\n                    startOffset = beforeCaret.split('').reverse().join('').search(boundary);\n                }\n                if (afterCaret) {\n                    endOffset = afterCaret.search(boundary);\n                }\n                return startOffset && endOffset;\n            }\n        };\n        extend(Editor, {\n            SelectionUtils: SelectionUtils,\n            W3CRange: W3CRange,\n            RangeIterator: RangeIterator,\n            W3CSelection: W3CSelection,\n            RangeEnumerator: RangeEnumerator,\n            RestorePoint: RestorePoint,\n            Marker: Marker,\n            RangeUtils: RangeUtils\n        });\n    }(window.kendo.jQuery));\n}, typeof define == 'function' && define.amd ? define : function (a1, a2, a3) {\n    (a3 || a2)();\n}));\n(function (f, define) {\n    define('editor/system', ['editor/range'], f);\n}(function () {\n    (function ($) {\n        var kendo = window.kendo, Class = kendo.Class, editorNS = kendo.ui.editor, EditorUtils = editorNS.EditorUtils, RangeUtils = editorNS.RangeUtils, registerTool = EditorUtils.registerTool, dom = editorNS.Dom, Tool = editorNS.Tool, ToolTemplate = editorNS.ToolTemplate, RestorePoint = editorNS.RestorePoint, Marker = editorNS.Marker, browser = kendo.support.browser, br = '<br class=\"k-br\">', extend = $.extend;\n        var nodeTypes = dom.nodeTypes;\n        var PREVIOUS_SIBLING = 'previousSibling';\n        function finishUpdate(editor, startRestorePoint) {\n            var endRestorePoint = editor.selectionRestorePoint = new RestorePoint(editor.getRange(), editor.body);\n            var command = new GenericCommand(startRestorePoint, endRestorePoint);\n            command.editor = editor;\n            editor.undoRedoStack.push(command);\n            return endRestorePoint;\n        }\n        function selected(node, range) {\n            return range.startContainer === node && range.endContainer === node && range.startOffset === 0 && range.endOffset == node.childNodes.length;\n        }\n        function getSibling(node, direction, condition) {\n            var sibling = node ? node[direction] : null;\n            while (sibling && !condition(sibling)) {\n                sibling = sibling[direction];\n            }\n            return sibling;\n        }\n        var Command = Class.extend({\n            init: function (options) {\n                this.options = options;\n                this.restorePoint = new RestorePoint(options.range, options.body, { immutables: options.immutables });\n                this.marker = new Marker();\n                this.formatter = options.formatter;\n            },\n            getRange: function () {\n                return this.restorePoint.toRange();\n            },\n            lockRange: function (expand) {\n                return this.marker.add(this.getRange(), expand);\n            },\n            releaseRange: function (range) {\n                this.marker.remove(range);\n                this.editor.selectRange(range);\n            },\n            undo: function () {\n                var point = this.restorePoint;\n                point.restoreHtml();\n                this.editor.selectRange(point.toRange());\n            },\n            redo: function () {\n                this.exec();\n            },\n            createDialog: function (content, options) {\n                var editor = this.editor;\n                return $(content).appendTo(document.body).kendoWindow(extend({}, editor.options.dialogOptions, options)).closest('.k-window').toggleClass('k-rtl', kendo.support.isRtl(editor.wrapper)).end();\n            },\n            exec: function () {\n                var range = this.lockRange(true);\n                this.formatter.editor = this.editor;\n                this.formatter.toggle(range);\n                this.releaseRange(range);\n            },\n            immutables: function () {\n                return this.editor && this.editor.options.immutables;\n            },\n            expandImmutablesIn: function (range) {\n                if (this.immutables()) {\n                    kendo.ui.editor.Immutables.expandImmutablesIn(range);\n                    this.restorePoint = new RestorePoint(range, this.editor.body);\n                }\n            }\n        });\n        var GenericCommand = Class.extend({\n            init: function (startRestorePoint, endRestorePoint) {\n                this.body = startRestorePoint.body;\n                this.startRestorePoint = startRestorePoint;\n                this.endRestorePoint = endRestorePoint;\n            },\n            redo: function () {\n                dom.removeChildren(this.body);\n                this.body.innerHTML = this.endRestorePoint.html;\n                this.editor.selectRange(this.endRestorePoint.toRange());\n            },\n            undo: function () {\n                dom.removeChildren(this.body);\n                this.body.innerHTML = this.startRestorePoint.html;\n                this.editor.selectRange(this.startRestorePoint.toRange());\n            }\n        });\n        var InsertHtmlCommand = Command.extend({\n            init: function (options) {\n                Command.fn.init.call(this, options);\n                this.managesUndoRedo = true;\n            },\n            exec: function () {\n                var editor = this.editor;\n                var options = this.options;\n                var range = options.range;\n                var body = editor.body;\n                var startRestorePoint = new RestorePoint(range, body);\n                var html = options.html || options.value || '';\n                editor.selectRange(range);\n                editor.clipboard.paste(html, options);\n                if (options.postProcess) {\n                    options.postProcess(editor, editor.getRange());\n                }\n                var genericCommand = new GenericCommand(startRestorePoint, new RestorePoint(editor.getRange(), body));\n                genericCommand.editor = editor;\n                editor.undoRedoStack.push(genericCommand);\n                editor.focus();\n            }\n        });\n        var InsertHtmlTool = Tool.extend({\n            initialize: function (ui, initOptions) {\n                var editor = initOptions.editor, options = this.options, dataSource = options.items ? options.items : editor.options.insertHtml;\n                this._selectBox = new editorNS.SelectBox(ui, {\n                    dataSource: dataSource,\n                    dataTextField: 'text',\n                    dataValueField: 'value',\n                    change: function () {\n                        Tool.exec(editor, 'insertHtml', this.value());\n                    },\n                    title: editor.options.messages.insertHtml,\n                    highlightFirst: false\n                });\n            },\n            command: function (commandArguments) {\n                return new InsertHtmlCommand(commandArguments);\n            },\n            update: function (ui) {\n                var selectbox = ui.data('kendoSelectBox') || ui.find('select').data('kendoSelectBox');\n                selectbox.close();\n                selectbox.value(selectbox.options.title);\n            }\n        });\n        var tableCells = 'td,th,caption';\n        var tableCellsWrappers = 'table,tbody,thead,tfoot,tr';\n        var tableElements = tableCellsWrappers + ',' + tableCells;\n        var inTable = function (range) {\n            return !range.collapsed && $(range.commonAncestorContainer).is(tableCellsWrappers);\n        };\n        var RemoveTableContent = Class.extend({\n            remove: function (range) {\n                var that = this;\n                var marker = new Marker();\n                marker.add(range, false);\n                var nodes = RangeUtils.getAll(range, function (node) {\n                    return $(node).is(tableElements);\n                });\n                var doc = RangeUtils.documentFromRange(range);\n                var start = marker.start;\n                var end = marker.end;\n                var cellsTypes = tableCells.split(',');\n                var startCell = dom.parentOfType(start, cellsTypes);\n                var endCell = dom.parentOfType(end, cellsTypes);\n                that._removeContent(start, startCell, true);\n                that._removeContent(end, endCell, false);\n                $(nodes).each(function (i, node) {\n                    node = $(node);\n                    (node.is(tableCells) ? node : node.find(tableCells)).each(function (j, cell) {\n                        cell.innerHTML = '&#65279;';\n                    });\n                });\n                if (startCell && !start.previousSibling) {\n                    dom.insertBefore(doc.createTextNode('\\uFEFF'), start);\n                }\n                if (endCell && !end.nextSibling) {\n                    dom.insertAfter(doc.createTextNode('\\uFEFF'), end);\n                }\n                if (startCell) {\n                    range.setStartBefore(start);\n                } else if (nodes[0]) {\n                    startCell = $(nodes[0]);\n                    startCell = startCell.is(tableCells) ? startCell : startCell.find(tableCells).first();\n                    if (startCell.length) {\n                        range.setStart(startCell.get(0), 0);\n                    }\n                }\n                range.collapse(true);\n                dom.remove(start);\n                dom.remove(end);\n            },\n            _removeContent: function (start, top, forwards) {\n                if (top) {\n                    var sibling = forwards ? 'nextSibling' : 'previousSibling', next, getNext = function (node) {\n                            while (node && !node[sibling]) {\n                                node = node.parentNode;\n                            }\n                            return node && $.contains(top, node) ? node[sibling] : null;\n                        };\n                    start = getNext(start);\n                    while (start) {\n                        next = getNext(start);\n                        dom.remove(start);\n                        start = next;\n                    }\n                }\n            }\n        });\n        var TypingHandler = Class.extend({\n            init: function (editor) {\n                this.editor = editor;\n            },\n            keydown: function (e) {\n                var that = this, editor = that.editor, keyboard = editor.keyboard, isTypingKey = keyboard.isTypingKey(e), evt = extend($.Event(), e);\n                that.editor.trigger('keydown', evt);\n                if (evt.isDefaultPrevented()) {\n                    e.preventDefault();\n                    return true;\n                }\n                if (!evt.isDefaultPrevented() && isTypingKey && !keyboard.isTypingInProgress()) {\n                    var range = editor.getRange();\n                    var body = editor.body;\n                    that.startRestorePoint = new RestorePoint(range, body);\n                    if (inTable(range)) {\n                        var removeTableContent = new RemoveTableContent(editor);\n                        removeTableContent.remove(range);\n                        editor.selectRange(range);\n                    }\n                    if (browser.webkit && !range.collapsed && selected(body, range)) {\n                        body.innerHTML = '';\n                    }\n                    if (editor.immutables && editorNS.Immutables.immutablesContext(range)) {\n                        var backspaceHandler = new editorNS.BackspaceHandler(editor);\n                        backspaceHandler.deleteSelection(range);\n                    }\n                    keyboard.startTyping(function () {\n                        that.endRestorePoint = finishUpdate(editor, that.startRestorePoint);\n                    });\n                    return true;\n                }\n                return false;\n            },\n            keyup: function (e) {\n                var keyboard = this.editor.keyboard;\n                this.editor.trigger('keyup', e);\n                if (keyboard.isTypingInProgress()) {\n                    keyboard.endTyping();\n                    return true;\n                }\n                return false;\n            }\n        });\n        var BackspaceHandler = Class.extend({\n            init: function (editor) {\n                this.editor = editor;\n            },\n            _addCaret: function (container) {\n                var caret = dom.create(this.editor.document, 'a');\n                dom.insertAt(container, caret, 0);\n                dom.stripBomNode(caret.previousSibling);\n                dom.stripBomNode(caret.nextSibling);\n                return caret;\n            },\n            _restoreCaret: function (caret) {\n                var range = this.editor.createRange();\n                if (!caret.nextSibling && dom.isDataNode(caret.previousSibling)) {\n                    range.setStart(caret.previousSibling, caret.previousSibling.length);\n                } else {\n                    range.setStartAfter(caret);\n                }\n                range.collapse(true);\n                this.editor.selectRange(range);\n                dom.remove(caret);\n            },\n            _handleDelete: function (range) {\n                var node = range.endContainer;\n                var block = dom.closestEditableOfType(node, dom.blockElements);\n                if (block && editorNS.RangeUtils.isEndOf(range, block)) {\n                    var next = dom.next(block);\n                    if (!next || dom.name(next) != 'p') {\n                        return false;\n                    }\n                    var caret = this._addCaret(next);\n                    this._merge(block, next);\n                    this._restoreCaret(caret);\n                    return true;\n                }\n                return false;\n            },\n            _cleanBomBefore: function (range) {\n                var offset = range.startOffset;\n                var node = range.startContainer;\n                var text = node.nodeValue;\n                var count = 0;\n                while (offset - count >= 0 && text[offset - count - 1] == '\\uFEFF') {\n                    count++;\n                }\n                if (count > 0) {\n                    node.deleteData(offset - count, count);\n                    range.setStart(node, Math.max(0, offset - count));\n                    range.collapse(true);\n                    this.editor.selectRange(range);\n                }\n            },\n            _handleBackspace: function (range) {\n                var node = range.startContainer;\n                var li = dom.closestEditableOfType(node, ['li']);\n                var block = dom.closestEditableOfType(node, 'p,h1,h2,h3,h4,h5,h6'.split(','));\n                var editor = this.editor;\n                var previousSibling;\n                if (dom.isDataNode(node)) {\n                    if (range.collapsed && /^\\s[\\ufeff]+$/.test(node.nodeValue)) {\n                        range.setStart(node, 0);\n                        range.setEnd(node, node.length);\n                        editor.selectRange(range);\n                        return false;\n                    }\n                    this._cleanBomBefore(range);\n                }\n                previousSibling = getSibling(block, PREVIOUS_SIBLING, function (sibling) {\n                    return !dom.htmlIndentSpace(sibling);\n                });\n                if (range.collapsed && range.startOffset !== range.endOffset && range.startOffset < 0) {\n                    range.startOffset = 0;\n                    range.endOffset = 0;\n                    editor.selectRange(range);\n                }\n                var startAtLi = li && editorNS.RangeUtils.isStartOf(range, li);\n                var liIndex = li && $(li).index();\n                var startAtNonFirstLi = startAtLi && liIndex > 0;\n                if (startAtNonFirstLi) {\n                    block = li;\n                    previousSibling = dom.prev(li);\n                }\n                if (block && previousSibling && dom.is(previousSibling, 'table') && editorNS.RangeUtils.isStartOf(range, block)) {\n                    if (block.innerText === '') {\n                        block.innerHTML = '\\uFEFF';\n                    }\n                    return true;\n                }\n                if (block && previousSibling && editorNS.RangeUtils.isStartOf(range, block) || startAtNonFirstLi) {\n                    var caret = this._addCaret(block);\n                    this._merge(previousSibling, block);\n                    this._restoreCaret(caret);\n                    return true;\n                }\n                if (startAtLi && liIndex === 0) {\n                    var child = li.firstChild;\n                    if (!child) {\n                        li.innerHTML = editorNS.emptyElementContent;\n                        child = li.firstChild;\n                    }\n                    var formatter = new editorNS.ListFormatter(dom.name(li.parentNode), 'p');\n                    range.selectNodeContents(li);\n                    formatter.toggle(range);\n                    if (dom.insignificant(child)) {\n                        range.setStartBefore(child);\n                    } else {\n                        range.setStart(child, 0);\n                    }\n                    editor.selectRange(range);\n                    return true;\n                }\n                var rangeStartNode = node.childNodes[range.startOffset - 1];\n                var linkRange = range;\n                var anchor = rangeStartNode && dom.closestEditableOfType(rangeStartNode, ['a']);\n                var previousNode = getSibling(rangeStartNode || node, PREVIOUS_SIBLING, function (sibling) {\n                    return !dom.isDataNode(sibling) || !dom.isBom(sibling) && sibling.length > 0;\n                });\n                if (anchor || (range.startOffset === 0 || rangeStartNode) && dom.is(previousNode, 'a')) {\n                    anchor = anchor || previousNode;\n                    linkRange = editor.createRange();\n                    linkRange.setStart(anchor, anchor.childNodes.length);\n                    linkRange.collapse(true);\n                }\n                anchor = anchor || dom.closestEditableOfType(rangeStartNode || linkRange.startContainer, ['a']);\n                var isEndOfLink = anchor && editorNS.RangeUtils.isEndOf(linkRange, anchor);\n                if (isEndOfLink) {\n                    var command = new editorNS.UnlinkCommand({\n                        range: linkRange,\n                        body: editor.body,\n                        immutables: !!editor.immutables\n                    });\n                    editor.execCommand(command);\n                    editor._selectionChange();\n                }\n                return false;\n            },\n            _handleSelection: function (range) {\n                var ancestor = range.commonAncestorContainer;\n                var table = dom.closest(ancestor, 'table');\n                var emptyParagraphContent = editorNS.emptyElementContent;\n                var editor = this.editor;\n                if (inTable(range)) {\n                    var removeTableContent = new RemoveTableContent(editor);\n                    removeTableContent.remove(range);\n                    editor.selectRange(range);\n                    return true;\n                }\n                var marker = new Marker();\n                marker.add(range, false);\n                if (editor.immutables) {\n                    this._handleImmutables(marker);\n                }\n                this._surroundFullySelectedAnchor(marker, range);\n                range.setStartAfter(marker.start);\n                range.setEndBefore(marker.end);\n                var start = range.startContainer;\n                var end = range.endContainer;\n                range.deleteContents();\n                if (table && $(table).text() === '') {\n                    range.selectNode(table);\n                    range.deleteContents();\n                }\n                ancestor = range.commonAncestorContainer;\n                if (dom.name(ancestor) === 'p' && ancestor.innerHTML === '') {\n                    ancestor.innerHTML = emptyParagraphContent;\n                    range.setStart(ancestor, 0);\n                }\n                this._join(start, end);\n                dom.insertAfter(editor.document.createTextNode('\\uFEFF'), marker.start);\n                marker.remove(range);\n                start = range.startContainer;\n                if (dom.name(start) == 'tr') {\n                    start = start.childNodes[Math.max(0, range.startOffset - 1)];\n                    range.setStart(start, dom.getNodeLength(start));\n                }\n                range.collapse(true);\n                editor.selectRange(range);\n                return true;\n            },\n            _handleImmutables: function (marker) {\n                var immutableParent = editorNS.Immutables.immutableParent;\n                var startImmutable = immutableParent(marker.start);\n                var endImmutable = immutableParent(marker.start);\n                if (startImmutable) {\n                    dom.insertBefore(marker.start, startImmutable);\n                }\n                if (endImmutable) {\n                    dom.insertAfter(marker.end, endImmutable);\n                }\n                if (startImmutable) {\n                    dom.remove(startImmutable);\n                }\n                if (endImmutable && endImmutable.parentNode) {\n                    dom.remove(endImmutable);\n                }\n            },\n            _surroundFullySelectedAnchor: function (marker, range) {\n                var start = marker.start, startParent = $(start).closest('a').get(0), end = marker.end, endParent = $(end).closest('a').get(0);\n                if (startParent && RangeUtils.isStartOf(range, startParent)) {\n                    dom.insertBefore(start, startParent);\n                }\n                if (endParent && RangeUtils.isEndOf(range, endParent)) {\n                    dom.insertAfter(end, endParent);\n                }\n            },\n            _root: function (node) {\n                while (node && dom.name(node) != 'body' && node.parentNode && dom.name(node.parentNode) != 'body') {\n                    node = node.parentNode;\n                }\n                return node;\n            },\n            _join: function (start, end) {\n                start = this._root(start);\n                end = this._root(end);\n                if (start != end && dom.is(end, 'p')) {\n                    this._merge(start, end);\n                }\n            },\n            _merge: function (dest, src) {\n                dom.removeTrailingBreak(dest);\n                while (dest && src.firstChild) {\n                    if (dest.nodeType == 1) {\n                        dest = dom.list(dest) ? dest.children[dest.children.length - 1] : dest;\n                        if (dest) {\n                            dest.appendChild(src.firstChild);\n                        }\n                    } else if (dest.nodeType === nodeTypes.TEXT_NODE) {\n                        this._mergeWithTextNode(dest, src.firstChild);\n                    } else {\n                        dest.parentNode.appendChild(src.firstChild);\n                    }\n                }\n                dom.remove(src);\n            },\n            _mergeWithTextNode: function (textNode, appendedNode) {\n                if (textNode && textNode.nodeType === nodeTypes.TEXT_NODE) {\n                    if (textNode.nextSibling && this._isCaret(textNode.nextSibling)) {\n                        dom.insertAfter(appendedNode, textNode.nextSibling);\n                    } else {\n                        dom.insertAfter(appendedNode, textNode);\n                    }\n                }\n            },\n            _isCaret: function (element) {\n                return $(element).is('a');\n            },\n            keydown: function (e) {\n                var method, startRestorePoint;\n                var editor = this.editor;\n                var range = editor.getRange();\n                var keyCode = e.keyCode;\n                var keys = kendo.keys;\n                var backspace = keyCode === keys.BACKSPACE;\n                var del = keyCode == keys.DELETE;\n                if (editor.immutables && editor.immutables.keydown(e, range)) {\n                    return;\n                }\n                if ((backspace || del) && !range.collapsed) {\n                    method = '_handleSelection';\n                } else if (backspace) {\n                    method = '_handleBackspace';\n                } else if (del) {\n                    method = '_handleDelete';\n                }\n                if (!method) {\n                    return;\n                }\n                startRestorePoint = new RestorePoint(range, editor.body);\n                if (this[method](range)) {\n                    e.preventDefault();\n                    finishUpdate(editor, startRestorePoint);\n                }\n            },\n            deleteSelection: function (range) {\n                this._handleSelection(range);\n            },\n            keyup: $.noop\n        });\n        var SystemHandler = Class.extend({\n            init: function (editor) {\n                this.editor = editor;\n                this.systemCommandIsInProgress = false;\n            },\n            createUndoCommand: function () {\n                this.startRestorePoint = this.endRestorePoint = finishUpdate(this.editor, this.startRestorePoint);\n            },\n            changed: function () {\n                if (this.startRestorePoint) {\n                    return this.startRestorePoint.html != this.editor.body.innerHTML;\n                }\n                return false;\n            },\n            keydown: function (e) {\n                var that = this, editor = that.editor, keyboard = editor.keyboard;\n                if (keyboard.isModifierKey(e)) {\n                    if (keyboard.isTypingInProgress()) {\n                        keyboard.endTyping(true);\n                    }\n                    that.startRestorePoint = new RestorePoint(editor.getRange(), editor.body);\n                    return true;\n                }\n                if (keyboard.isSystem(e)) {\n                    that.systemCommandIsInProgress = true;\n                    if (that.changed()) {\n                        that.systemCommandIsInProgress = false;\n                        that.createUndoCommand();\n                    }\n                    return true;\n                }\n                return false;\n            },\n            keyup: function () {\n                var that = this;\n                if (that.systemCommandIsInProgress && that.changed()) {\n                    that.systemCommandIsInProgress = false;\n                    that.createUndoCommand();\n                    return true;\n                }\n                return false;\n            }\n        });\n        var SelectAllHandler = Class.extend({\n            init: function (editor) {\n                this.editor = editor;\n            },\n            keydown: function (e) {\n                if (!browser.webkit || e.isDefaultPrevented() || !(e.ctrlKey && e.keyCode == 65 && !e.altKey && !e.shiftKey)) {\n                    return;\n                }\n                if (this.editor.options.immutables) {\n                    this._toSelectableImmutables();\n                }\n                this._selectEditorBody();\n            },\n            _selectEditorBody: function () {\n                var editor = this.editor;\n                var range = editor.getRange();\n                range.selectNodeContents(editor.body);\n                editor.selectRange(range);\n            },\n            _toSelectableImmutables: function () {\n                var editor = this.editor, body = editor.body, immutable = editorNS.Immutables.immutable, emptyTextNode = dom.emptyTextNode, first = body.firstChild, last = body.lastChild;\n                while (emptyTextNode(first)) {\n                    first = first.nextSibling;\n                }\n                while (emptyTextNode(last)) {\n                    last = last.previousSibling;\n                }\n                if (first && immutable(first)) {\n                    $(br).prependTo(body);\n                }\n                if (last && immutable(last)) {\n                    $(br).appendTo(body);\n                }\n            },\n            keyup: $.noop\n        });\n        var Keyboard = Class.extend({\n            init: function (handlers) {\n                this.handlers = handlers;\n                this.typingInProgress = false;\n            },\n            isCharacter: function (keyCode) {\n                return keyCode >= 48 && keyCode <= 90 || keyCode >= 96 && keyCode <= 111 || keyCode >= 186 && keyCode <= 192 || keyCode >= 219 && keyCode <= 222 || keyCode == 229;\n            },\n            toolFromShortcut: function (tools, e) {\n                var key = String.fromCharCode(e.keyCode), toolName, toolOptions, modifier = this._getShortcutModifier(e, navigator.platform);\n                for (toolName in tools) {\n                    toolOptions = $.extend({\n                        ctrl: false,\n                        alt: false,\n                        shift: false\n                    }, tools[toolName].options);\n                    if ((toolOptions.key == key || toolOptions.key == e.keyCode) && toolOptions.ctrl == modifier && toolOptions.alt == e.altKey && toolOptions.shift == e.shiftKey) {\n                        return toolName;\n                    }\n                }\n            },\n            _getShortcutModifier: function (e, platform) {\n                var mac = platform.toUpperCase().indexOf('MAC') >= 0;\n                return mac ? e.metaKey : e.ctrlKey;\n            },\n            toolsFromShortcut: function (tools, e) {\n                var key = String.fromCharCode(e.keyCode), toolName, o, matchesKey, found = [];\n                var matchKey = function (toolKey) {\n                    return toolKey == key || toolKey == e.keyCode || toolKey == e.charCode;\n                };\n                for (toolName in tools) {\n                    o = $.extend({\n                        ctrl: false,\n                        alt: false,\n                        shift: false\n                    }, tools[toolName].options);\n                    matchesKey = $.isArray(o.key) ? $.grep(o.key, matchKey).length > 0 : matchKey(o.key);\n                    if (matchesKey && o.ctrl == e.ctrlKey && o.alt == e.altKey && o.shift == e.shiftKey) {\n                        found.push(tools[toolName]);\n                    }\n                }\n                return found;\n            },\n            isTypingKey: function (e) {\n                var keyCode = e.keyCode;\n                return this.isCharacter(keyCode) && !e.ctrlKey && !e.altKey || keyCode == 32 || keyCode == 13 || keyCode == 8 || keyCode == 46 && !e.shiftKey && !e.ctrlKey && !e.altKey;\n            },\n            isModifierKey: function (e) {\n                var keyCode = e.keyCode;\n                return keyCode == 17 && !e.shiftKey && !e.altKey || keyCode == 16 && !e.ctrlKey && !e.altKey || keyCode == 18 && !e.ctrlKey && !e.shiftKey;\n            },\n            isSystem: function (e) {\n                return e.keyCode == 46 && e.ctrlKey && !e.altKey && !e.shiftKey;\n            },\n            startTyping: function (callback) {\n                this.onEndTyping = callback;\n                this.typingInProgress = true;\n            },\n            stopTyping: function () {\n                if (this.typingInProgress && this.onEndTyping) {\n                    this.onEndTyping();\n                }\n                this.typingInProgress = false;\n            },\n            endTyping: function (force) {\n                var that = this;\n                that.clearTimeout();\n                if (force) {\n                    that.stopTyping();\n                } else {\n                    that.timeout = window.setTimeout($.proxy(that.stopTyping, that), 1000);\n                }\n            },\n            isTypingInProgress: function () {\n                return this.typingInProgress;\n            },\n            clearTimeout: function () {\n                window.clearTimeout(this.timeout);\n            },\n            notify: function (e, what) {\n                var i, handlers = this.handlers;\n                for (i = 0; i < handlers.length; i++) {\n                    if (handlers[i][what](e)) {\n                        break;\n                    }\n                }\n            },\n            keydown: function (e) {\n                this.notify(e, 'keydown');\n            },\n            keyup: function (e) {\n                this.notify(e, 'keyup');\n            }\n        });\n        var Clipboard = Class.extend({\n            init: function (editor) {\n                this.editor = editor;\n                var pasteCleanup = editor.options.pasteCleanup;\n                this.cleaners = [\n                    new ScriptCleaner(pasteCleanup),\n                    new TabCleaner(pasteCleanup),\n                    new MSWordFormatCleaner(pasteCleanup),\n                    new WebkitFormatCleaner(pasteCleanup),\n                    new HtmlTagsCleaner(pasteCleanup),\n                    new HtmlAttrCleaner(pasteCleanup),\n                    new HtmlContentCleaner(pasteCleanup),\n                    new CustomCleaner(pasteCleanup)\n                ];\n            },\n            htmlToFragment: function (html) {\n                var editor = this.editor, doc = editor.document, container = dom.create(doc, 'div'), fragment = doc.createDocumentFragment();\n                container.innerHTML = html;\n                while (container.firstChild) {\n                    fragment.appendChild(container.firstChild);\n                }\n                return fragment;\n            },\n            isBlock: function (html) {\n                return /<(div|p|ul|ol|table|h[1-6])/i.test(html);\n            },\n            _startModification: function () {\n                var range;\n                var restorePoint;\n                var editor = this.editor;\n                if (this._inProgress) {\n                    return;\n                }\n                this._inProgress = true;\n                range = editor.getRange();\n                restorePoint = new RestorePoint(range, editor.body);\n                dom.persistScrollTop(editor.document);\n                return {\n                    range: range,\n                    restorePoint: restorePoint\n                };\n            },\n            _endModification: function (modificationInfo) {\n                finishUpdate(this.editor, modificationInfo.restorePoint);\n                this.editor._selectionChange();\n                this._inProgress = false;\n            },\n            _contentModification: function (before, after) {\n                var that = this;\n                var editor = that.editor;\n                var modificationInfo = that._startModification();\n                if (!modificationInfo) {\n                    return;\n                }\n                before.call(that, editor, modificationInfo.range);\n                setTimeout(function () {\n                    after.call(that, editor, modificationInfo.range);\n                    that._endModification(modificationInfo);\n                });\n            },\n            _removeBomNodes: function (range) {\n                var nodes = editorNS.RangeUtils.textNodes(range);\n                for (var i = 0; i < nodes.length; i++) {\n                    nodes[i].nodeValue = dom.stripBom(nodes[i].nodeValue) || nodes[i].nodeValue;\n                }\n            },\n            _onBeforeCopy: function (range) {\n                var marker = new Marker();\n                marker.add(range);\n                this._removeBomNodes(range);\n                marker.remove(range);\n                this.editor.selectRange(range);\n            },\n            oncopy: function () {\n                this._onBeforeCopy(this.editor.getRange());\n            },\n            oncut: function () {\n                this._onBeforeCopy(this.editor.getRange());\n                this._contentModification($.noop, $.noop);\n            },\n            _fileToDataURL: function (blob) {\n                var deferred = $.Deferred();\n                var reader = new FileReader();\n                if (!(blob instanceof window.File) && blob.getAsFile) {\n                    blob = blob.getAsFile();\n                }\n                reader.onload = $.proxy(deferred.resolve, deferred);\n                reader.readAsDataURL(blob);\n                return deferred.promise();\n            },\n            _triggerPaste: function (html, options) {\n                var args = { html: html || '' };\n                args.html = args.html.replace(/\\ufeff/g, '');\n                this.editor.trigger('paste', args);\n                this.paste(args.html, options || {});\n            },\n            _handleImagePaste: function (e) {\n                if (!('FileReader' in window) || browser.msie && browser.version > 10) {\n                    return;\n                }\n                var clipboardData = e.clipboardData || e.originalEvent.clipboardData || window.clipboardData || {};\n                var items = clipboardData.items || clipboardData.files;\n                return this._insertImages(items);\n            },\n            _insertImages: function (items) {\n                if (!items) {\n                    return;\n                }\n                var images = $.grep(items, function (item) {\n                    return /^image\\//i.test(item.type);\n                });\n                var html = $.grep(items, function (item) {\n                    return /^text\\/html/i.test(item.type);\n                });\n                if (html.length || !images.length) {\n                    return;\n                }\n                var modificationInfo = this._startModification();\n                if (!modificationInfo) {\n                    return;\n                }\n                $.when.apply($, $.map(images, this._fileToDataURL)).done($.proxy(function () {\n                    var results = Array.prototype.slice.call(arguments);\n                    var html = $.map(results, function (e) {\n                        return '<img src=\"' + e.target.result + '\" />';\n                    }).join('');\n                    this._triggerPaste(html);\n                    this._endModification(modificationInfo);\n                }, this));\n                return true;\n            },\n            onpaste: function (e) {\n                if (this._handleImagePaste(e)) {\n                    e.preventDefault();\n                    return;\n                }\n                this.expandImmutablesIn();\n                this._contentModification(function beforePaste(editor, range) {\n                    var clipboardNode = dom.create(editor.document, 'div', {\n                        className: 'k-paste-container',\n                        innerHTML: '\\uFEFF'\n                    });\n                    var browser = kendo.support.browser;\n                    var body = editor.body;\n                    this._decoreateClipboardNode(clipboardNode, body);\n                    body.appendChild(clipboardNode);\n                    if (browser.webkit) {\n                        this._moveToCaretPosition(clipboardNode, range);\n                    }\n                    if (browser.msie && browser.version < 11) {\n                        e.preventDefault();\n                        var r = editor.createRange();\n                        r.selectNodeContents(clipboardNode);\n                        editor.selectRange(r);\n                        var textRange = editor.document.body.createTextRange();\n                        textRange.moveToElementText(clipboardNode);\n                        $(body).unbind('paste');\n                        textRange.execCommand('Paste');\n                        $(body).bind('paste', $.proxy(this.onpaste, this));\n                    } else {\n                        var clipboardRange = editor.createRange();\n                        clipboardRange.selectNodeContents(clipboardNode);\n                        editor.selectRange(clipboardRange);\n                    }\n                    range.deleteContents();\n                }, function afterPaste(editor, range) {\n                    var html = '', containers;\n                    editor.selectRange(range);\n                    containers = $(editor.body).children('.k-paste-container');\n                    containers.each(function () {\n                        var lastChild = this.lastChild;\n                        if (lastChild && dom.is(lastChild, 'br')) {\n                            dom.remove(lastChild);\n                        }\n                        html += this.innerHTML;\n                    });\n                    containers.remove();\n                    this._triggerPaste(html, { clean: true });\n                });\n            },\n            ondragover: function (e) {\n                if (browser.msie || browser.edge) {\n                    e.stopPropagation();\n                    e.preventDefault();\n                }\n            },\n            ondrop: function (e) {\n                if (!('FileReader' in window)) {\n                    return;\n                }\n                var dataTransfer = (e.originalEvent || e).dataTransfer || {};\n                var items = dataTransfer.items || dataTransfer.files;\n                if (this._insertImages(items)) {\n                    e.preventDefault();\n                }\n            },\n            _decoreateClipboardNode: function (node, body) {\n                if (!browser.msie && !browser.webkit) {\n                    return;\n                }\n                node = $(node);\n                node.css({\n                    borderWidth: '0px',\n                    width: '0px',\n                    height: '0px',\n                    overflow: 'hidden',\n                    margin: '0',\n                    padding: '0'\n                });\n                if (browser.msie) {\n                    var documentElement = $(body.ownerDocument.documentElement);\n                    node.css({\n                        fontVariant: 'normal',\n                        fontWeight: 'normal',\n                        lineSpacing: 'normal',\n                        lineHeight: 'normal',\n                        textDecoration: 'none'\n                    });\n                    var color = documentElement.css('color');\n                    if (color) {\n                        node.css('color', color);\n                    }\n                    var fontFamily = documentElement.css('fontFamily');\n                    if (fontFamily) {\n                        node.css('fontFamily', fontFamily);\n                    }\n                    var fontSize = documentElement.css('fontSize');\n                    if (fontSize) {\n                        node.css('fontSize', fontSize);\n                    }\n                }\n            },\n            _moveToCaretPosition: function (node, range) {\n                var that = this;\n                var body = that.editor.body;\n                var nodeOffset = dom.offset(node, body);\n                var caretOffset = that._caretOffset(range, body);\n                var translateX = caretOffset.left - nodeOffset.left;\n                var translateY = caretOffset.top - nodeOffset.top;\n                var translate = 'translate(' + translateX + 'px,' + translateY + 'px)';\n                $(node).css({\n                    '-webkit-transform': translate,\n                    'transform': translate\n                });\n            },\n            _caretOffset: function (range, body) {\n                var editor = this.editor;\n                var caret = dom.create(editor.document, 'span', { innerHTML: '\\uFEFF' });\n                var startContainer = range.startContainer;\n                var rangeChanged;\n                if (range.collapsed) {\n                    var isStartTextNode = dom.isDataNode(startContainer);\n                    if (isStartTextNode && (dom.isBom(startContainer) || range.startOffset === 0)) {\n                        dom.insertBefore(caret, startContainer);\n                    } else if (isStartTextNode && range.startOffset === startContainer.length) {\n                        dom.insertAfter(caret, startContainer);\n                    } else {\n                        range.insertNode(caret);\n                        rangeChanged = true;\n                    }\n                } else {\n                    startContainer = startContainer === body ? startContainer.childNodes[range.startOffset] : startContainer;\n                    dom.insertBefore(caret, startContainer);\n                }\n                var offset = dom.offset(caret, body);\n                var prev = caret.previousSibling;\n                var next = caret.nextSibling;\n                dom.remove(caret);\n                if (rangeChanged && dom.isDataNode(prev) && dom.isDataNode(next) && !dom.isBom(prev) && !dom.isBom(next)) {\n                    var prevLength = prev.length;\n                    next.data = prev.data + next.data;\n                    range.setStart(next, prevLength);\n                    dom.remove(prev);\n                    range.collapse(true);\n                    editor.selectRange(range);\n                }\n                return offset;\n            },\n            expandImmutablesIn: function (range) {\n                var editor = this.editor;\n                if (editor && editor.options.immutables) {\n                    var body = editor.body;\n                    range = range || editor.getRange();\n                    kendo.ui.editor.Immutables.expandImmutablesIn(range);\n                    if (range.startContainer === body && range.startOffset === 0) {\n                        var doc = body.ownerDocument;\n                        var bomNode = doc.createTextNode('\\uFEFF');\n                        body.insertBefore(bomNode, body.childNodes[0]);\n                        range.setStartBefore(bomNode);\n                    }\n                    editor.selectRange(range);\n                }\n            },\n            splittableParent: function (block, node) {\n                var parentNode, body;\n                if (block) {\n                    return dom.closestEditableOfType(node, [\n                        'p',\n                        'ul',\n                        'ol'\n                    ]) || node.parentNode;\n                }\n                parentNode = node.parentNode;\n                body = node.ownerDocument.body;\n                if (dom.isInline(parentNode)) {\n                    while (parentNode.parentNode != body && !dom.isBlock(parentNode.parentNode)) {\n                        parentNode = parentNode.parentNode;\n                    }\n                }\n                return parentNode;\n            },\n            paste: function (html, options) {\n                var editor = this.editor, i, l, childNodes;\n                this.expandImmutablesIn();\n                options = extend({\n                    clean: false,\n                    split: true\n                }, options);\n                if (!options.skipCleaners) {\n                    for (i = 0, l = this.cleaners.length; i < l; i++) {\n                        if (this.cleaners[i].applicable(html)) {\n                            html = this.cleaners[i].clean(html);\n                        }\n                    }\n                }\n                if (options.clean) {\n                    html = html.replace(/(<br>(\\s|&nbsp;)*)+(<\\/?(div|p|li|col|t))/gi, '$3');\n                    html = html.replace(/<(a|span)[^>]*><\\/\\1>/gi, '');\n                }\n                html = html.replace(/^<li/i, '<ul><li').replace(/li>$/g, 'li></ul>');\n                var block = this.isBlock(html);\n                editor.focus();\n                var range = editor.getRange();\n                range.deleteContents();\n                if (range.startContainer == editor.document) {\n                    range.selectNodeContents(editor.body);\n                }\n                var marker = new Marker();\n                var caret = marker.addCaret(range);\n                var parent = this.splittableParent(block, caret);\n                var unwrap = false;\n                var splittable = parent != editor.body && !dom.is(parent, 'td');\n                if (options.split && splittable && (block || dom.isInline(parent))) {\n                    range.selectNode(caret);\n                    editorNS.RangeUtils.split(range, parent, true);\n                    unwrap = true;\n                }\n                var fragment = this.htmlToFragment(html);\n                if (fragment.firstChild && fragment.firstChild.className === 'k-paste-container') {\n                    var fragmentsHtml = [];\n                    for (i = 0, l = fragment.childNodes.length; i < l; i++) {\n                        fragmentsHtml.push(fragment.childNodes[i].innerHTML);\n                    }\n                    fragment = this.htmlToFragment(fragmentsHtml.join('<br />'));\n                }\n                childNodes = fragment.childNodes;\n                $(childNodes).filter('table').addClass('k-table').end().find('table').addClass('k-table');\n                $(childNodes).each(function (index, elm) {\n                    if (dom.isBlock(elm) && elm.innerHTML === '') {\n                        elm.appendChild(editor.document.createTextNode('\\uFEFF'));\n                    }\n                });\n                range.insertNode(fragment);\n                parent = this.splittableParent(block, caret);\n                if (unwrap) {\n                    while (caret.parentNode != parent) {\n                        dom.unwrap(caret.parentNode);\n                    }\n                    dom.unwrap(caret.parentNode);\n                }\n                dom.normalize(range.commonAncestorContainer);\n                caret.style.display = 'inline';\n                dom.restoreScrollTop(editor.document);\n                dom.scrollTo(caret);\n                marker.removeCaret(range);\n                var rangeEnd = range.commonAncestorContainer.parentNode;\n                if (range.collapsed && dom.name(rangeEnd) == 'tbody') {\n                    range.setStartAfter($(rangeEnd).closest('table')[0]);\n                    range.collapse(true);\n                }\n                var focusedTable = $(range.commonAncestorContainer.parentNode).closest('table');\n                if (focusedTable.get(0)) {\n                    var siblingNodes = focusedTable.parent().contents();\n                    var lastSiblingIndex = siblingNodes.length - 1;\n                    var lastSibling = siblingNodes.get(lastSiblingIndex);\n                    while (lastSibling.nodeValue !== null && (lastSibling.nodeValue === ' ' || lastSibling.nodeValue === '')) {\n                        lastSiblingIndex -= 1;\n                        lastSibling = siblingNodes.get(lastSiblingIndex);\n                    }\n                    if (lastSibling === focusedTable.get(0)) {\n                        dom.insertAfter(dom.createEmptyNode(editor.document, 'p'), focusedTable[0]);\n                    }\n                }\n                editor.selectRange(range);\n            }\n        });\n        var Cleaner = Class.extend({\n            init: function (options) {\n                this.options = options || {};\n                this.replacements = [];\n            },\n            clean: function (html, customReplacements) {\n                var that = this, replacements = customReplacements || that.replacements, i, l;\n                for (i = 0, l = replacements.length; i < l; i += 2) {\n                    html = html.replace(replacements[i], replacements[i + 1]);\n                }\n                return html;\n            }\n        });\n        var ScriptCleaner = Cleaner.extend({\n            init: function (options) {\n                Cleaner.fn.init.call(this, options);\n                this.replacements = [\n                    /<(\\/?)script([^>]*)>/i,\n                    '<$1telerik:script$2>'\n                ];\n            },\n            applicable: function (html) {\n                return !this.options.none && /<script[^>]*>/i.test(html);\n            }\n        });\n        var TabCleaner = Cleaner.extend({\n            init: function (options) {\n                Cleaner.fn.init.call(this, options);\n                var replacement = ' ';\n                this.replacements = [\n                    /<span\\s+class=\"Apple-tab-span\"[^>]*>\\s*<\\/span>/gi,\n                    replacement,\n                    /\\t/gi,\n                    replacement,\n                    /&nbsp;&nbsp; &nbsp;/gi,\n                    replacement\n                ];\n            },\n            applicable: function (html) {\n                return /&nbsp;&nbsp; &nbsp;|class=\"?Apple-tab-span/i.test(html);\n            }\n        });\n        var MSWordFormatCleaner = Cleaner.extend({\n            init: function (options) {\n                Cleaner.fn.init.call(this, options);\n                this.junkReplacements = [\n                    /<\\?xml[^>]*>/gi,\n                    '',\n                    /<!--(.|\\n)*?-->/g,\n                    '',\n                    /&quot;/g,\n                    '\\'',\n                    /<o:p>&nbsp;<\\/o:p>/gi,\n                    '&nbsp;',\n                    /<\\/?(meta|link|style|o:|v:|x:)[^>]*>((?:.|\\n)*?<\\/(meta|link|style|o:|v:|x:)[^>]*>)?/gi,\n                    '',\n                    /<\\/o>/g,\n                    ''\n                ];\n                this.replacements = this.junkReplacements.concat([\n                    /(?:<br>&nbsp;[\\s\\r\\n]+|<br>)*(<\\/?(h[1-6]|hr|p|div|table|tbody|thead|tfoot|th|tr|td|li|ol|ul|caption|address|pre|form|blockquote|dl|dt|dd|dir|fieldset)[^>]*>)(?:<br>&nbsp;[\\s\\r\\n]+|<br>)*/g,\n                    '$1',\n                    /<br><br>/g,\n                    '<BR><BR>',\n                    /<br>(?!\\n)/g,\n                    ' ',\n                    /<table([^>]*)>(\\s|&nbsp;)+<t/gi,\n                    '<table$1><t',\n                    /<tr[^>]*>(\\s|&nbsp;)*<\\/tr>/gi,\n                    '',\n                    /<tbody[^>]*>(\\s|&nbsp;)*<\\/tbody>/gi,\n                    '',\n                    /<table[^>]*>(\\s|&nbsp;)*<\\/table>/gi,\n                    '',\n                    /<BR><BR>/g,\n                    '<br>',\n                    /^\\s*(&nbsp;)+/gi,\n                    '',\n                    /(&nbsp;|<br[^>]*>)+\\s*$/gi,\n                    '',\n                    /mso-[^;\"]*;?/gi,\n                    '',\n                    /<(\\/?)b(\\s[^>]*)?>/gi,\n                    '<$1strong$2>',\n                    /<(\\/?)font(\\s[^>]*)?>/gi,\n                    this.convertFontMatch,\n                    /<(\\/?)i(\\s[^>]*)?>/gi,\n                    '<$1em$2>',\n                    /style=([\"|'])\\s*\\1/g,\n                    '',\n                    /(<br[^>]*>)?\\n/g,\n                    function ($0, $1) {\n                        return $1 ? $0 : ' ';\n                    }\n                ]);\n            },\n            convertFontMatch: function (match, closing, args) {\n                var faceRe = /face=['\"]([^'\"]+)['\"]/i;\n                var face = faceRe.exec(args);\n                var family = args && face && face[1];\n                if (closing) {\n                    return '</span>';\n                } else if (family) {\n                    return '<span style=\"font-family:' + family + '\">';\n                } else {\n                    return '<span>';\n                }\n            },\n            applicable: function (html) {\n                return /class=\"?Mso/i.test(html) || /style=\"[^\"]*mso-/i.test(html) || /urn:schemas-microsoft-com:office/.test(html);\n            },\n            stripEmptyAnchors: function (html) {\n                return html.replace(/<a([^>]*)>\\s*<\\/a>/gi, function (a, attributes) {\n                    if (!attributes || attributes.indexOf('href') < 0) {\n                        return '';\n                    }\n                    return a;\n                });\n            },\n            listType: function (p, listData) {\n                var html = p.innerHTML;\n                var text = dom.innerText(p);\n                var startingSymbol;\n                var matchSymbol = html.match(/^(?:<span [^>]*texhtml[^>]*>)?<span [^>]*(?:Symbol|Wingdings)[^>]*>([^<]+)/i);\n                var symbol = matchSymbol && matchSymbol[1];\n                var isNumber = /^[a-z\\d]/i.test(symbol);\n                var trimStartText = function (text) {\n                    return text.replace(/^(?:&nbsp;|[\\u00a0\\n\\r\\s])+/, '');\n                };\n                if (matchSymbol) {\n                    startingSymbol = true;\n                }\n                html = html.replace(/<\\/?\\w+[^>]*>/g, '').replace(/&nbsp;/g, '\\xA0');\n                if (!startingSymbol && /^[\\u2022\\u00b7\\u00a7\\u00d8o]\\u00a0+/.test(html) || startingSymbol && /^.\\u00a0+/.test(html) || symbol && !isNumber && listData) {\n                    return {\n                        tag: 'ul',\n                        style: this._guessUnorderedListStyle(trimStartText(text))\n                    };\n                }\n                if (/^\\s*\\w+[\\.\\)][\\u00a0 ]{2,}/.test(html)) {\n                    return {\n                        tag: 'ol',\n                        style: this._guessOrderedListStyle(trimStartText(text))\n                    };\n                }\n            },\n            _convertToLi: function (p) {\n                var content, name = dom.name(p);\n                if (p.childNodes.length == 1) {\n                    content = p.firstChild.innerHTML.replace(/^\\w+[\\.\\)](&nbsp;)+ /, '');\n                } else {\n                    dom.remove(p.firstChild);\n                    if (p.firstChild.nodeType == 3) {\n                        if (/^[ivxlcdm]+\\.$/i.test(p.firstChild.nodeValue)) {\n                            dom.remove(p.firstChild);\n                        }\n                    }\n                    if (/^(&nbsp;|\\s)+$/i.test(p.firstChild.innerHTML)) {\n                        dom.remove(p.firstChild);\n                    }\n                    if (name != 'p') {\n                        content = '<' + name + '>' + p.innerHTML + '</' + name + '>';\n                    } else {\n                        content = p.innerHTML;\n                    }\n                }\n                dom.remove(p);\n                return dom.create(document, 'li', { innerHTML: content });\n            },\n            _guessUnorderedListStyle: function (symbol) {\n                if (/^[\\u2022\\u00b7\\u00FC\\u00D8\\u002dv-]/.test(symbol)) {\n                    return null;\n                } else if (/^o/.test(symbol)) {\n                    return 'circle';\n                } else {\n                    return 'square';\n                }\n            },\n            _guessOrderedListStyle: function (symbol) {\n                var listType = null;\n                if (!/^\\d/.test(symbol)) {\n                    listType = (/^[a-z]/.test(symbol) ? 'lower-' : 'upper-') + (/^[ivxlcdm]/i.test(symbol) ? 'roman' : 'alpha');\n                }\n                return listType;\n            },\n            extractListLevels: function (html) {\n                var msoListRegExp = /style=['\"]?[^'\"]*?mso-list:\\s?[a-zA-Z]+(\\d+)\\s[a-zA-Z]+(\\d+)\\s(\\w+)/gi;\n                html = html.replace(msoListRegExp, function (match, list, level) {\n                    return kendo.format('data-list=\"{0}\" data-level=\"{1}\" {2}', list, level, match);\n                });\n                return html;\n            },\n            _createList: function (type, styleType) {\n                return dom.create(document, type, { style: { listStyleType: styleType } });\n            },\n            lists: function (placeholder) {\n                var blockChildren = $(placeholder).find(dom.blockElements.join(',')), lastMargin = -1, name, levels = {}, li, rootMargin, rootIndex, lastRootLi, isLastRootLi, rootList, i, p, type, margin, list, listData, acceptedNameTags = [\n                        'p',\n                        'h1',\n                        'h2',\n                        'h3',\n                        'h4',\n                        'h5',\n                        'h6'\n                    ];\n                for (i = 0; i < blockChildren.length; i++) {\n                    p = blockChildren[i];\n                    listData = $(p).data();\n                    var listIndex = listData.list;\n                    name = dom.name(p);\n                    if (name == 'td') {\n                        continue;\n                    }\n                    var listType = this.listType(p, listData);\n                    type = listType && listType.tag;\n                    if (!type || acceptedNameTags.indexOf(name) < 0) {\n                        if (!p.innerHTML) {\n                            dom.remove(p);\n                        } else if (li && !isLastRootLi) {\n                            li.append(p);\n                        }\n                        continue;\n                    }\n                    margin = listData.level || parseFloat(p.style.marginLeft || 0);\n                    var levelType = type + listIndex;\n                    if (!levels[margin]) {\n                        levels[margin] = {};\n                    }\n                    if (!rootMargin || rootMargin < 0) {\n                        rootMargin = margin;\n                        rootIndex = listIndex;\n                        lastRootLi = $(placeholder).find('[data-list=\\'' + rootIndex + '\\']:last')[0];\n                        rootList = this._createList(type, listType.style);\n                        dom.insertBefore(rootList, p);\n                        lastMargin = margin;\n                        levels[margin][levelType] = rootList;\n                    }\n                    isLastRootLi = lastRootLi === p;\n                    list = levels[margin][levelType];\n                    if (margin > lastMargin || !list) {\n                        list = this._createList(type, listType.style);\n                        levels[margin][levelType] = list;\n                        li.appendChild(list);\n                    }\n                    li = this._convertToLi(p);\n                    list.appendChild(li);\n                    if (isLastRootLi) {\n                        rootMargin = lastMargin = -1;\n                    } else {\n                        lastMargin = margin;\n                    }\n                }\n            },\n            removeAttributes: function (element) {\n                var attributes = element.attributes, i = attributes.length;\n                while (i--) {\n                    if (dom.name(attributes[i]) != 'colspan') {\n                        element.removeAttributeNode(attributes[i]);\n                    }\n                }\n            },\n            createColGroup: function (row) {\n                var cells = row.cells;\n                var table = $(row).closest('table');\n                var colgroup = table.children('colgroup');\n                if (cells.length < 2) {\n                    return;\n                } else if (colgroup.length) {\n                    cells = colgroup.children();\n                    colgroup[0].parentNode.removeChild(colgroup[0]);\n                }\n                colgroup = $($.map(cells, function (cell) {\n                    var width = cell.width;\n                    if (width && parseInt(width, 10) !== 0) {\n                        return kendo.format('<col style=\"width:{0}px;\"/>', width);\n                    }\n                    return '<col />';\n                }).join(''));\n                if (!colgroup.is('colgroup')) {\n                    colgroup = $('<colgroup/>').append(colgroup);\n                }\n                colgroup.prependTo(table);\n            },\n            convertHeaders: function (row) {\n                var cells = row.cells, i, boldedCells = $.map(cells, function (cell) {\n                        var child = $(cell).children('p').children('strong')[0];\n                        if (child && dom.name(child) == 'strong') {\n                            return child;\n                        }\n                    });\n                if (boldedCells.length == cells.length) {\n                    for (i = 0; i < boldedCells.length; i++) {\n                        dom.unwrap(boldedCells[i]);\n                    }\n                    $(row).closest('table').find('colgroup').after('<thead></thead>').end().find('thead').append(row);\n                    for (i = 0; i < cells.length; i++) {\n                        dom.changeTag(cells[i], 'th');\n                    }\n                }\n            },\n            removeParagraphs: function (cells) {\n                var i, j, len, cell, paragraphs;\n                for (i = 0; i < cells.length; i++) {\n                    this.removeAttributes(cells[i]);\n                    cell = $(cells[i]);\n                    paragraphs = cell.children('p');\n                    for (j = 0, len = paragraphs.length; j < len; j++) {\n                        if (j < len - 1) {\n                            dom.insertAfter(dom.create(document, 'br'), paragraphs[j]);\n                        }\n                        dom.unwrap(paragraphs[j]);\n                    }\n                }\n            },\n            removeDefaultColors: function (spans) {\n                for (var i = 0; i < spans.length; i++) {\n                    if (/^\\s*color:\\s*[^;]*;?$/i.test(spans[i].style.cssText)) {\n                        dom.unwrap(spans[i]);\n                    }\n                }\n            },\n            tables: function (placeholder) {\n                var tables = $(placeholder).find('table'), that = this, rows, firstRow, longestRow, i, j;\n                for (i = 0; i < tables.length; i++) {\n                    rows = tables[i].rows;\n                    longestRow = firstRow = rows[0];\n                    for (j = 1; j < rows.length; j++) {\n                        if (rows[j].cells.length > longestRow.cells.length) {\n                            longestRow = rows[j];\n                        }\n                    }\n                    that.createColGroup(longestRow);\n                    that.convertHeaders(firstRow);\n                    that.removeAttributes(tables[i]);\n                    that.removeParagraphs(tables.eq(i).find('td,th'));\n                    that.removeDefaultColors(tables.eq(i).find('span'));\n                }\n            },\n            headers: function (placeholder) {\n                var titles = $(placeholder).find('p.MsoTitle');\n                for (var i = 0; i < titles.length; i++) {\n                    dom.changeTag(titles[i], 'h1');\n                }\n            },\n            removeFormatting: function (placeholder) {\n                $(placeholder).find('*').each(function () {\n                    $(this).css({\n                        fontSize: '',\n                        fontFamily: ''\n                    });\n                    if (!this.getAttribute('style') && !this.style.cssText) {\n                        this.removeAttribute('style');\n                    }\n                });\n            },\n            clean: function (html) {\n                var that = this, placeholder;\n                var filters = this.options;\n                if (filters.none) {\n                    html = Cleaner.fn.clean.call(that, html, this.junkReplacements);\n                    html = that.stripEmptyAnchors(html);\n                } else {\n                    html = this.extractListLevels(html);\n                    html = Cleaner.fn.clean.call(that, html);\n                    html = that.stripEmptyAnchors(html);\n                    placeholder = dom.create(document, 'div', { innerHTML: html });\n                    that.headers(placeholder);\n                    if (filters.msConvertLists) {\n                        that.lists(placeholder);\n                    }\n                    that.tables(placeholder);\n                    if (filters.msAllFormatting) {\n                        that.removeFormatting(placeholder);\n                    }\n                    html = placeholder.innerHTML.replace(/(<[^>]*)\\s+class=\"?[^\"\\s>]*\"?/gi, '$1');\n                }\n                return html;\n            }\n        });\n        var WebkitFormatCleaner = Cleaner.extend({\n            init: function (options) {\n                Cleaner.fn.init.call(this, options);\n                this.replacements = [\n                    /\\s+class=\"Apple-style-span[^\"]*\"/gi,\n                    '',\n                    /<(div|p|h[1-6])\\s+style=\"[^\"]*\"/gi,\n                    '<$1',\n                    /^<div>(.*)<\\/div>$/,\n                    '$1'\n                ];\n            },\n            applicable: function (html) {\n                return /class=\"?Apple-style-span|style=\"[^\"]*-webkit-nbsp-mode/i.test(html);\n            }\n        });\n        var DomCleaner = Cleaner.extend({\n            clean: function (html) {\n                var container = dom.create(document, 'div', { innerHTML: html });\n                container = this.cleanDom(container);\n                return container.innerHTML;\n            },\n            cleanDom: function (container) {\n                return container;\n            }\n        });\n        var HtmlTagsCleaner = DomCleaner.extend({\n            cleanDom: function (container) {\n                var tags = this.collectTags();\n                $(container).find(tags).each(function () {\n                    dom.unwrap(this);\n                });\n                return container;\n            },\n            collectTags: function () {\n                if (this.options.span) {\n                    return 'span';\n                }\n            },\n            applicable: function () {\n                return this.options.span;\n            }\n        });\n        var HtmlAttrCleaner = DomCleaner.extend({\n            cleanDom: function (container) {\n                var attributes = this.collectAttr();\n                var nodes = $(container).find('[' + attributes.join('],[') + ']');\n                nodes.removeAttr(attributes.join(' '));\n                return container;\n            },\n            collectAttr: function () {\n                if (this.options.css) {\n                    return [\n                        'class',\n                        'style'\n                    ];\n                }\n                return [];\n            },\n            applicable: function () {\n                return this.options.css;\n            }\n        });\n        var TextContainer = function () {\n            this.text = '';\n            this.add = function (text) {\n                this.text += text;\n            };\n        };\n        var HtmlTextLines = Class.extend({\n            init: function (separators) {\n                this.separators = separators || {\n                    text: ' ',\n                    line: '<br/>'\n                };\n                this.lines = [];\n                this.inlineBlockText = [];\n                this.resetLine();\n            },\n            appendText: function (text) {\n                if (text.nodeType === 3) {\n                    text = text.nodeValue;\n                }\n                this.textContainer.add(text);\n            },\n            appendInlineBlockText: function (text) {\n                this.inlineBlockText.push(text);\n            },\n            flashInlineBlockText: function () {\n                if (this.inlineBlockText.length) {\n                    this.appendText(this.inlineBlockText.join(' '));\n                    this.inlineBlockText = [];\n                }\n            },\n            endLine: function () {\n                this.flashInlineBlockText();\n                this.resetLine();\n            },\n            html: function () {\n                var separators = this.separators;\n                var result = '';\n                var lines = this.lines;\n                this.flashInlineBlockText();\n                for (var i = 0, il = lines.length, il1 = il - 1; i < il; i++) {\n                    var line = lines[i];\n                    for (var j = 0, jl = line.length, jl1 = jl - 1; j < jl; j++) {\n                        var text = line[j].text;\n                        result += text;\n                        if (j !== jl1) {\n                            result += separators.text;\n                        }\n                    }\n                    if (i !== il1) {\n                        result += separators.line;\n                    }\n                }\n                return result;\n            },\n            resetLine: function () {\n                this.textContainer = new TextContainer();\n                this.line = [];\n                this.line.push(this.textContainer);\n                this.lines.push(this.line);\n            }\n        });\n        var DomEnumerator = Class.extend({\n            init: function (callback) {\n                this.callback = callback;\n            },\n            enumerate: function (node) {\n                if (!node) {\n                    return;\n                }\n                var preventDown = this.callback(node);\n                var child = node.firstChild;\n                if (!preventDown && child) {\n                    this.enumerate(child);\n                }\n                this.enumerate(node.nextSibling);\n            }\n        });\n        var HtmlContentCleaner = Cleaner.extend({\n            init: function (options) {\n                Cleaner.fn.init.call(this, options);\n                this.hasText = false;\n                this.enumerator = new DomEnumerator($.proxy(this.buildText, this));\n            },\n            clean: function (html) {\n                var container = dom.create(document, 'div', { innerHTML: html });\n                return this.cleanDom(container);\n            },\n            cleanDom: function (container) {\n                this.separators = this.getDefaultSeparators();\n                this.htmlLines = new HtmlTextLines(this.separators);\n                this.enumerator.enumerate(container.firstChild);\n                this.hasText = false;\n                return this.htmlLines.html();\n            },\n            buildText: function (node) {\n                if (dom.isDataNode(node)) {\n                    if (dom.isEmptyspace(node)) {\n                        return;\n                    }\n                    this.htmlLines.appendText(node.nodeValue.replace('\\n', this.separators.line));\n                    this.hasText = true;\n                } else if (dom.isBlock(node) && this.hasText) {\n                    var action = this.actions[dom.name(node)] || this.actions.block;\n                    return action(this, node);\n                }\n            },\n            applicable: function () {\n                var o = this.options;\n                return o.all || o.keepNewLines;\n            },\n            getDefaultSeparators: function () {\n                if (this.options.all) {\n                    return {\n                        text: ' ',\n                        line: ' '\n                    };\n                } else {\n                    return {\n                        text: ' ',\n                        line: '<br/>'\n                    };\n                }\n            },\n            actions: {\n                ul: $.noop,\n                ol: $.noop,\n                table: $.noop,\n                thead: $.noop,\n                tbody: $.noop,\n                td: function (cleaner, node) {\n                    var tdCleaner = new HtmlContentCleaner({ all: true });\n                    var cellText = tdCleaner.cleanDom(node);\n                    cleaner.htmlLines.appendInlineBlockText(cellText);\n                    return true;\n                },\n                block: function (cleaner) {\n                    cleaner.htmlLines.endLine();\n                }\n            }\n        });\n        var CustomCleaner = Cleaner.extend({\n            clean: function (html) {\n                return this.options.custom(html);\n            },\n            applicable: function () {\n                return typeof this.options.custom === 'function';\n            }\n        });\n        var PrintCommand = Command.extend({\n            init: function (options) {\n                Command.fn.init.call(this, options);\n                this.managesUndoRedo = true;\n            },\n            exec: function () {\n                var editor = this.editor;\n                if (kendo.support.browser.msie) {\n                    editor.document.execCommand('print', false, null);\n                } else if (editor.window.print) {\n                    editor.window.print();\n                }\n            }\n        });\n        var ExportPdfCommand = Command.extend({\n            init: function (options) {\n                this.async = true;\n                Command.fn.init.call(this, options);\n            },\n            exec: function () {\n                var that = this;\n                var range = that.lockRange(true);\n                var editor = that.editor;\n                editor._destroyResizings();\n                editor.saveAsPDF().then(function () {\n                    that.releaseRange(range);\n                    editor._initializeColumnResizing();\n                    editor._initializeRowResizing();\n                    editor._initializeTableResizing();\n                });\n            }\n        });\n        extend(editorNS, {\n            _finishUpdate: finishUpdate,\n            Command: Command,\n            GenericCommand: GenericCommand,\n            InsertHtmlCommand: InsertHtmlCommand,\n            InsertHtmlTool: InsertHtmlTool,\n            TypingHandler: TypingHandler,\n            SystemHandler: SystemHandler,\n            BackspaceHandler: BackspaceHandler,\n            SelectAllHandler: SelectAllHandler,\n            Keyboard: Keyboard,\n            Clipboard: Clipboard,\n            Cleaner: Cleaner,\n            ScriptCleaner: ScriptCleaner,\n            TabCleaner: TabCleaner,\n            MSWordFormatCleaner: MSWordFormatCleaner,\n            WebkitFormatCleaner: WebkitFormatCleaner,\n            HtmlTagsCleaner: HtmlTagsCleaner,\n            HtmlAttrCleaner: HtmlAttrCleaner,\n            HtmlContentCleaner: HtmlContentCleaner,\n            HtmlTextLines: HtmlTextLines,\n            CustomCleaner: CustomCleaner,\n            PrintCommand: PrintCommand,\n            ExportPdfCommand: ExportPdfCommand\n        });\n        registerTool('insertHtml', new InsertHtmlTool({\n            template: new ToolTemplate({\n                template: EditorUtils.dropDownListTemplate,\n                title: 'Insert HTML',\n                initialValue: 'Insert HTML'\n            })\n        }));\n        registerTool('print', new Tool({\n            command: PrintCommand,\n            template: new ToolTemplate({\n                template: EditorUtils.buttonTemplate,\n                title: 'Print'\n            })\n        }));\n        registerTool('pdf', new Tool({\n            command: ExportPdfCommand,\n            template: new ToolTemplate({\n                template: EditorUtils.buttonTemplate,\n                title: 'Export PDF'\n            })\n        }));\n    }(window.kendo.jQuery));\n}, typeof define == 'function' && define.amd ? define : function (a1, a2, a3) {\n    (a3 || a2)();\n}));\n(function (f, define) {\n    define('editor/inlineformat', ['editor/system'], f);\n}(function () {\n    (function ($) {\n        var kendo = window.kendo, Class = kendo.Class, Editor = kendo.ui.editor, formats = kendo.ui.Editor.fn.options.formats, EditorUtils = Editor.EditorUtils, Tool = Editor.Tool, ToolTemplate = Editor.ToolTemplate, FormatTool = Editor.FormatTool, dom = Editor.Dom, RangeUtils = Editor.RangeUtils, extend = $.extend, registerTool = Editor.EditorUtils.registerTool, registerFormat = Editor.EditorUtils.registerFormat, preventDefault = function (ev) {\n                ev.preventDefault();\n            }, MOUSEDOWN_NS = 'mousedown.kendoEditor', KEYDOWN_NS = 'keydown.kendoEditor', KMARKER = 'k-marker';\n        var InlineFormatFinder = Class.extend({\n            init: function (format) {\n                this.format = format;\n            },\n            numberOfSiblings: function (referenceNode) {\n                var textNodesCount = 0, elementNodesCount = 0, markerCount = 0, parentNode = referenceNode.parentNode, node;\n                for (node = parentNode.firstChild; node; node = node.nextSibling) {\n                    if (node != referenceNode) {\n                        if (node.className == KMARKER) {\n                            markerCount++;\n                        } else if (node.nodeType == 3) {\n                            textNodesCount++;\n                        } else {\n                            elementNodesCount++;\n                        }\n                    }\n                }\n                if (markerCount > 1 && parentNode.firstChild.className == KMARKER && parentNode.lastChild.className == KMARKER) {\n                    return 0;\n                } else {\n                    return elementNodesCount + textNodesCount;\n                }\n            },\n            findSuitable: function (sourceNode, skip) {\n                if (!skip && this.numberOfSiblings(sourceNode) > 0) {\n                    return null;\n                }\n                var node = sourceNode.parentNode;\n                var tags = this.format[0].tags;\n                while (!dom.ofType(node, tags)) {\n                    if (this.numberOfSiblings(node) > 0) {\n                        return null;\n                    }\n                    node = node.parentNode;\n                }\n                return node;\n            },\n            findFormat: function (sourceNode) {\n                var format = this.format, attrEquals = dom.attrEquals, i, len, node, tags, attributes;\n                for (i = 0, len = format.length; i < len; i++) {\n                    node = sourceNode;\n                    tags = format[i].tags;\n                    attributes = format[i].attr;\n                    if (node && dom.ofType(node, tags) && attrEquals(node, attributes)) {\n                        return node;\n                    }\n                    while (node) {\n                        node = dom.parentOfType(node, tags);\n                        if (node && attrEquals(node, attributes)) {\n                            return node;\n                        }\n                    }\n                }\n                return null;\n            },\n            isFormatted: function (nodes) {\n                var i, len;\n                for (i = 0, len = nodes.length; i < len; i++) {\n                    if (this.findFormat(nodes[i])) {\n                        return true;\n                    }\n                }\n                return false;\n            }\n        });\n        var InlineFormatter = Class.extend({\n            init: function (format, values) {\n                this.finder = new InlineFormatFinder(format);\n                this.attributes = extend({}, format[0].attr, values);\n                this.tag = format[0].tags[0];\n            },\n            wrap: function (node) {\n                return dom.wrap(node, dom.create(node.ownerDocument, this.tag, this.attributes));\n            },\n            activate: function (range, nodes) {\n                if (this.finder.isFormatted(nodes)) {\n                    this.split(range);\n                    this.remove(nodes);\n                } else {\n                    this.apply(nodes);\n                }\n            },\n            toggle: function (range) {\n                var textNodes = this.immutables() ? RangeUtils.editableTextNodes : RangeUtils.textNodes;\n                var nodes = textNodes(range);\n                if (nodes.length > 0) {\n                    this.activate(range, nodes);\n                }\n            },\n            immutables: function () {\n                return this.editor && this.editor.options.immutables;\n            },\n            apply: function (nodes) {\n                var formatNodes = [];\n                var i, l, node, formatNode;\n                var attributes = this.attributes;\n                var styleAttr = attributes ? attributes.style || {} : {};\n                for (i = 0, l = nodes.length; i < l; i++) {\n                    node = nodes[i];\n                    formatNode = this.finder.findSuitable(node);\n                    if (formatNode) {\n                        if (dom.is(formatNode, 'font')) {\n                            if (styleAttr.color) {\n                                formatNode.removeAttribute('color');\n                            }\n                            if (styleAttr.fontName) {\n                                formatNode.removeAttribute('face');\n                            }\n                            if (styleAttr.fontSize) {\n                                formatNode.removeAttribute('size');\n                            }\n                        }\n                        dom.attr(formatNode, attributes);\n                    } else {\n                        while (!dom.isBlock(node.parentNode) && node.parentNode.childNodes.length == 1 && node.parentNode.contentEditable !== 'true') {\n                            node = node.parentNode;\n                        }\n                        formatNode = this.wrap(node);\n                    }\n                    formatNodes.push(formatNode);\n                }\n                this.consolidate(formatNodes);\n            },\n            remove: function (nodes) {\n                var i, l, formatNode;\n                for (i = 0, l = nodes.length; i < l; i++) {\n                    formatNode = this.finder.findFormat(nodes[i]);\n                    if (formatNode) {\n                        if (this.attributes && this.attributes.style) {\n                            dom.unstyle(formatNode, this.attributes.style);\n                            if (!formatNode.style.cssText && !formatNode.attributes['class']) {\n                                dom.unwrap(formatNode);\n                            }\n                        } else {\n                            dom.unwrap(formatNode);\n                        }\n                    }\n                }\n            },\n            split: function (range) {\n                var nodes = RangeUtils.textNodes(range);\n                var l = nodes.length;\n                var i, formatNode;\n                if (l > 0) {\n                    for (i = 0; i < l; i++) {\n                        formatNode = this.finder.findFormat(nodes[i]);\n                        if (formatNode) {\n                            RangeUtils.split(range, formatNode, true);\n                        }\n                    }\n                }\n            },\n            consolidate: function (nodes) {\n                var node, last;\n                while (nodes.length > 1) {\n                    node = nodes.pop();\n                    last = nodes[nodes.length - 1];\n                    if (node.previousSibling && node.previousSibling.className == KMARKER) {\n                        last.appendChild(node.previousSibling);\n                    }\n                    if (node.tagName == last.tagName && node.previousSibling == last && node.style.cssText == last.style.cssText) {\n                        while (node.firstChild) {\n                            last.appendChild(node.firstChild);\n                        }\n                        dom.remove(node);\n                    }\n                }\n            }\n        });\n        var GreedyInlineFormatFinder = InlineFormatFinder.extend({\n            init: function (format, greedyProperty) {\n                this.format = format;\n                this.greedyProperty = greedyProperty;\n                InlineFormatFinder.fn.init.call(this, format);\n            },\n            getInlineCssValue: function (node) {\n                var attributes = node.attributes;\n                var trim = $.trim;\n                var i, l, attribute, name, attributeValue, css, pair, cssIndex, len;\n                var propertyAndValue, property, value;\n                if (!attributes) {\n                    return;\n                }\n                for (i = 0, l = attributes.length; i < l; i++) {\n                    attribute = attributes[i];\n                    name = attribute.nodeName;\n                    attributeValue = attribute.nodeValue;\n                    if (attribute.specified && name == 'style') {\n                        css = trim(attributeValue || node.style.cssText).split(';');\n                        for (cssIndex = 0, len = css.length; cssIndex < len; cssIndex++) {\n                            pair = css[cssIndex];\n                            if (pair.length) {\n                                propertyAndValue = pair.split(':');\n                                property = trim(propertyAndValue[0].toLowerCase());\n                                value = trim(propertyAndValue[1]);\n                                if (property != this.greedyProperty) {\n                                    continue;\n                                }\n                                return property.indexOf('color') >= 0 ? dom.toHex(value) : value;\n                            }\n                        }\n                    }\n                }\n            },\n            getFormatInner: function (node) {\n                var $node = $(dom.isDataNode(node) ? node.parentNode : node);\n                var parents = $node.parentsUntil('[contentEditable]').addBack().toArray().reverse();\n                var i, len, value;\n                for (i = 0, len = parents.length; i < len; i++) {\n                    value = this.greedyProperty == 'className' ? parents[i].className : this.getInlineCssValue(parents[i]);\n                    if (value) {\n                        return value;\n                    }\n                }\n                return 'inherit';\n            },\n            getFormat: function (nodes) {\n                var result = this.getFormatInner(nodes[0]), i, len;\n                for (i = 1, len = nodes.length; i < len; i++) {\n                    if (result != this.getFormatInner(nodes[i])) {\n                        return '';\n                    }\n                }\n                return result;\n            },\n            isFormatted: function (nodes) {\n                return this.getFormat(nodes) !== '';\n            }\n        });\n        var GreedyInlineFormatter = InlineFormatter.extend({\n            init: function (format, values, greedyProperty) {\n                InlineFormatter.fn.init.call(this, format, values);\n                this.values = values;\n                this.finder = new GreedyInlineFormatFinder(format, greedyProperty);\n                if (greedyProperty) {\n                    this.greedyProperty = kendo.toCamelCase(greedyProperty);\n                }\n            },\n            activate: function (range, nodes) {\n                var greedyProperty = this.greedyProperty;\n                var action = 'apply';\n                this.split(range);\n                if (greedyProperty && this.values.style[greedyProperty] == 'inherit') {\n                    action = 'remove';\n                }\n                this[action](nodes);\n            }\n        });\n        var InlineFormatTool = FormatTool.extend({\n            init: function (options) {\n                FormatTool.fn.init.call(this, extend(options, {\n                    finder: new InlineFormatFinder(options.format),\n                    formatter: function () {\n                        return new InlineFormatter(options.format);\n                    }\n                }));\n            }\n        });\n        var DelayedExecutionTool = Tool.extend({\n            update: function (ui, nodes) {\n                var list = ui.data(this.type);\n                list.close();\n                list.value(this.finder.getFormat(nodes));\n            }\n        });\n        var FontTool = DelayedExecutionTool.extend({\n            init: function (options) {\n                Tool.fn.init.call(this, options);\n                this.type = kendo.support.browser.msie || kendo.support.touch ? 'kendoDropDownList' : 'kendoComboBox';\n                this.format = [{\n                        tags: [\n                            'span',\n                            'font'\n                        ]\n                    }];\n                this.finder = new GreedyInlineFormatFinder(this.format, options.cssAttr);\n            },\n            command: function (commandArguments) {\n                var options = this.options, format = this.format, style = {};\n                return new Editor.FormatCommand(extend(commandArguments, {\n                    formatter: function () {\n                        style[options.domAttr] = commandArguments.value;\n                        return new GreedyInlineFormatter(format, { style: style }, options.cssAttr);\n                    }\n                }));\n            },\n            initialize: function (ui, initOptions) {\n                var editor = initOptions.editor, options = this.options, toolName = options.name, dataSource, range, defaultValue = [];\n                if (options.defaultValue) {\n                    defaultValue = [{\n                            text: editor.options.messages[options.defaultValue[0].text],\n                            value: options.defaultValue[0].value\n                        }];\n                }\n                dataSource = defaultValue.concat(options.items ? options.items : editor.options[toolName] || []);\n                ui.attr({ title: initOptions.title });\n                ui[this.type]({\n                    dataTextField: 'text',\n                    dataValueField: 'value',\n                    dataSource: dataSource,\n                    change: function () {\n                        editor._range = range;\n                        Tool.exec(editor, toolName, this.value());\n                    },\n                    close: function () {\n                        setTimeout(function () {\n                            editor._deleteSavedRange();\n                        }, 0);\n                    },\n                    highlightFirst: false\n                });\n                ui.closest('.k-widget').removeClass('k-' + toolName).find('*').addBack().attr('unselectable', 'on');\n                var widget = ui.data(this.type);\n                widget.value('inherit');\n                widget.wrapper.on(MOUSEDOWN_NS, '.k-select,.k-input', function () {\n                    var newRange = editor.getRange();\n                    range = editor._containsRange(newRange) ? newRange : range;\n                }).on(KEYDOWN_NS, function (e) {\n                    if (e.keyCode === kendo.keys.ENTER) {\n                        editor._deleteSavedRange();\n                        e.preventDefault();\n                    }\n                });\n            }\n        });\n        var ColorTool = Tool.extend({\n            init: function (options) {\n                Tool.fn.init.call(this, options);\n                this.format = [{\n                        tags: [\n                            'span',\n                            'font'\n                        ]\n                    }];\n                this.finder = new GreedyInlineFormatFinder(this.format, options.cssAttr);\n            },\n            options: { palette: 'websafe' },\n            update: function () {\n                this._widget.close();\n            },\n            command: function (commandArguments) {\n                var options = this.options, format = this.format, style = {};\n                return new Editor.FormatCommand(extend(commandArguments, {\n                    formatter: function () {\n                        style[options.domAttr] = commandArguments.value;\n                        return new GreedyInlineFormatter(format, { style: style }, options.cssAttr);\n                    }\n                }));\n            },\n            initialize: function (ui, initOptions) {\n                var editor = initOptions.editor, toolName = this.name, options = extend({}, ColorTool.fn.options, this.options), palette = options.palette, columns = options.columns;\n                ui = this._widget = new kendo.ui.ColorPicker(ui, {\n                    toolIcon: 'k-icon k-i-' + EditorUtils.getToolCssClass(options.name),\n                    palette: palette,\n                    columns: columns,\n                    change: function () {\n                        var color = ui.value();\n                        if (color) {\n                            Tool.exec(editor, toolName, color);\n                        }\n                        editor.focus();\n                    },\n                    open: function (e) {\n                        var picker = e.sender;\n                        picker.value(null);\n                        picker._popup.element.on(MOUSEDOWN_NS, preventDefault);\n                        if (!picker._popup.element.is('[unselectable=\\'on\\']')) {\n                            picker._popup.element.attr({ unselectable: 'on' }).find('*').attr('unselectable', 'on');\n                        }\n                    },\n                    close: function (e) {\n                        e.sender._popup.element.off(MOUSEDOWN_NS);\n                    },\n                    activate: function (e) {\n                        e.preventDefault();\n                        ui.trigger('change');\n                    }\n                });\n                ui.wrapper.attr({\n                    title: initOptions.title,\n                    unselectable: 'on'\n                }).find('*').attr('unselectable', 'on');\n            }\n        });\n        extend(Editor, {\n            InlineFormatFinder: InlineFormatFinder,\n            InlineFormatter: InlineFormatter,\n            DelayedExecutionTool: DelayedExecutionTool,\n            GreedyInlineFormatFinder: GreedyInlineFormatFinder,\n            GreedyInlineFormatter: GreedyInlineFormatter,\n            InlineFormatTool: InlineFormatTool,\n            FontTool: FontTool,\n            ColorTool: ColorTool\n        });\n        registerFormat('bold', [\n            {\n                tags: [\n                    'strong',\n                    'b'\n                ]\n            },\n            {\n                tags: ['span'],\n                attr: { style: { fontWeight: 'bold' } }\n            }\n        ]);\n        registerTool('bold', new InlineFormatTool({\n            key: 'B',\n            ctrl: true,\n            format: formats.bold,\n            template: new ToolTemplate({\n                template: EditorUtils.buttonTemplate,\n                title: 'Bold'\n            })\n        }));\n        registerFormat('italic', [\n            {\n                tags: [\n                    'em',\n                    'i'\n                ]\n            },\n            {\n                tags: ['span'],\n                attr: { style: { fontStyle: 'italic' } }\n            }\n        ]);\n        registerTool('italic', new InlineFormatTool({\n            key: 'I',\n            ctrl: true,\n            format: formats.italic,\n            template: new ToolTemplate({\n                template: EditorUtils.buttonTemplate,\n                title: 'Italic'\n            })\n        }));\n        registerFormat('underline', [\n            {\n                tags: ['span'],\n                attr: { style: { textDecoration: 'underline' } }\n            },\n            { tags: ['u'] }\n        ]);\n        registerTool('underline', new InlineFormatTool({\n            key: 'U',\n            ctrl: true,\n            format: formats.underline,\n            template: new ToolTemplate({\n                template: EditorUtils.buttonTemplate,\n                title: 'Underline'\n            })\n        }));\n        registerFormat('strikethrough', [\n            {\n                tags: [\n                    'del',\n                    'strike'\n                ]\n            },\n            {\n                tags: ['span'],\n                attr: { style: { textDecoration: 'line-through' } }\n            }\n        ]);\n        registerTool('strikethrough', new InlineFormatTool({\n            format: formats.strikethrough,\n            template: new ToolTemplate({\n                template: EditorUtils.buttonTemplate,\n                title: 'Strikethrough'\n            })\n        }));\n        registerFormat('superscript', [{ tags: ['sup'] }]);\n        registerTool('superscript', new InlineFormatTool({\n            format: formats.superscript,\n            template: new ToolTemplate({\n                template: EditorUtils.buttonTemplate,\n                title: 'Superscript'\n            })\n        }));\n        registerFormat('subscript', [{ tags: ['sub'] }]);\n        registerTool('subscript', new InlineFormatTool({\n            format: formats.subscript,\n            template: new ToolTemplate({\n                template: EditorUtils.buttonTemplate,\n                title: 'Subscript'\n            })\n        }));\n        registerTool('foreColor', new ColorTool({\n            cssAttr: 'color',\n            domAttr: 'color',\n            name: 'foreColor',\n            template: new ToolTemplate({\n                template: EditorUtils.colorPickerTemplate,\n                title: 'Color'\n            })\n        }));\n        registerTool('backColor', new ColorTool({\n            cssAttr: 'background-color',\n            domAttr: 'backgroundColor',\n            name: 'backColor',\n            template: new ToolTemplate({\n                template: EditorUtils.colorPickerTemplate,\n                title: 'Background Color'\n            })\n        }));\n        registerTool('fontName', new FontTool({\n            cssAttr: 'font-family',\n            domAttr: 'fontFamily',\n            name: 'fontName',\n            defaultValue: [{\n                    text: 'fontNameInherit',\n                    value: 'inherit'\n                }],\n            template: new ToolTemplate({\n                template: EditorUtils.comboBoxTemplate,\n                title: 'Font Name'\n            })\n        }));\n        registerTool('fontSize', new FontTool({\n            cssAttr: 'font-size',\n            domAttr: 'fontSize',\n            name: 'fontSize',\n            defaultValue: [{\n                    text: 'fontSizeInherit',\n                    value: 'inherit'\n                }],\n            template: new ToolTemplate({\n                template: EditorUtils.comboBoxTemplate,\n                title: 'Font Size'\n            })\n        }));\n    }(window.kendo.jQuery));\n}, typeof define == 'function' && define.amd ? define : function (a1, a2, a3) {\n    (a3 || a2)();\n}));\n(function (f, define) {\n    define('editor/formatblock', ['editor/inlineformat'], f);\n}(function () {\n    (function ($) {\n        var kendo = window.kendo, Class = kendo.Class, extend = $.extend, Editor = kendo.ui.editor, formats = kendo.ui.Editor.fn.options.formats, dom = Editor.Dom, Command = Editor.Command, ToolTemplate = Editor.ToolTemplate, FormatTool = Editor.FormatTool, EditorUtils = Editor.EditorUtils, registerTool = EditorUtils.registerTool, registerFormat = EditorUtils.registerFormat, RangeUtils = Editor.RangeUtils;\n        var BlockFormatFinder = Class.extend({\n            init: function (format) {\n                this.format = format;\n            },\n            contains: function (node, children) {\n                var i, len, child;\n                for (i = 0, len = children.length; i < len; i++) {\n                    child = children[i];\n                    if (!child || !dom.isAncestorOrSelf(node, child)) {\n                        return false;\n                    }\n                }\n                return true;\n            },\n            findSuitable: function (nodes) {\n                var format = this.format, suitable = [], i, len, candidate;\n                for (i = 0, len = nodes.length; i < len; i++) {\n                    for (var f = format.length - 1; f >= 0; f--) {\n                        candidate = dom.ofType(nodes[i], format[f].tags) ? nodes[i] : dom.closestEditableOfType(nodes[i], format[f].tags);\n                        if (candidate) {\n                            break;\n                        }\n                    }\n                    if (!candidate || candidate.contentEditable === 'true') {\n                        return [];\n                    }\n                    if ($.inArray(candidate, suitable) < 0) {\n                        suitable.push(candidate);\n                    }\n                }\n                this._resolveListsItems(suitable);\n                for (i = 0, len = suitable.length; i < len; i++) {\n                    if (this.contains(suitable[i], suitable)) {\n                        return [suitable[i]];\n                    }\n                }\n                return suitable;\n            },\n            _resolveListsItems: function (nodes) {\n                var i, node, wrapper;\n                for (i = 0; i < nodes.length; i++) {\n                    node = nodes[i];\n                    wrapper = dom.is(node, 'li') ? node : dom.wrapper(node);\n                    wrapper = wrapper && dom.list(wrapper) ? wrapper.children[0] : wrapper;\n                    if (dom.is(wrapper, 'li')) {\n                        node = nodes[i] = wrapper;\n                    }\n                }\n            },\n            findFormat: function (sourceNode) {\n                var format = this.format, i, len, node, tags, attributes;\n                var editableParent = dom.editableParent(sourceNode);\n                var immutables = this.options && this.options.immutables;\n                var ImmutablesNS = Editor.Immutables;\n                for (i = 0, len = format.length; i < len; i++) {\n                    node = sourceNode;\n                    tags = format[i].tags;\n                    attributes = format[i].attr;\n                    if (immutables && tags && tags[0] == 'immutable') {\n                        var immutable = ImmutablesNS.immutableParent(node);\n                        if (immutable && dom.attrEquals(immutable, attributes)) {\n                            return node;\n                        }\n                    }\n                    while (node && dom.isAncestorOf(editableParent, node)) {\n                        if (dom.ofType(node, tags) && dom.attrEquals(node, attributes)) {\n                            return node;\n                        }\n                        node = node.parentNode;\n                    }\n                }\n                return null;\n            },\n            getFormat: function (nodes) {\n                var that = this, findFormat = function (node) {\n                        return that.findFormat(dom.isDataNode(node) ? node.parentNode : node);\n                    }, result = findFormat(nodes[0]), i, len;\n                if (!result) {\n                    return '';\n                }\n                for (i = 1, len = nodes.length; i < len; i++) {\n                    if (result != findFormat(nodes[i])) {\n                        return '';\n                    }\n                }\n                return result.nodeName.toLowerCase();\n            },\n            isFormatted: function (nodes) {\n                for (var i = 0, len = nodes.length; i < len; i++) {\n                    if (!this.findFormat(nodes[i])) {\n                        return false;\n                    }\n                }\n                return true;\n            }\n        });\n        var BlockFormatter = Class.extend({\n            init: function (format, values) {\n                this.format = format;\n                this.values = values;\n                this.finder = new BlockFormatFinder(format);\n            },\n            wrap: function (tag, attributes, nodes) {\n                var commonAncestor = nodes.length == 1 ? dom.blockParentOrBody(nodes[0]) : dom.commonAncestor.apply(null, nodes);\n                if (dom.isInline(commonAncestor)) {\n                    commonAncestor = dom.blockParentOrBody(commonAncestor);\n                }\n                var ancestors = dom.significantChildNodes(commonAncestor), position = dom.findNodeIndex(ancestors[0]), wrapper = dom.create(commonAncestor.ownerDocument, tag, attributes), i, ancestor;\n                for (i = 0; i < ancestors.length; i++) {\n                    ancestor = ancestors[i];\n                    if (dom.isBlock(ancestor)) {\n                        dom.attr(ancestor, attributes);\n                        if (wrapper.childNodes.length) {\n                            dom.insertBefore(wrapper, ancestor);\n                            wrapper = wrapper.cloneNode(false);\n                        }\n                        position = dom.findNodeIndex(ancestor) + 1;\n                        continue;\n                    }\n                    wrapper.appendChild(ancestor);\n                }\n                if (wrapper.firstChild) {\n                    dom.insertAt(commonAncestor, wrapper, position);\n                }\n            },\n            apply: function (nodes) {\n                var format, values = this.values;\n                function attributes(format) {\n                    return extend({}, format && format.attr, values);\n                }\n                this._handleImmutables(nodes, true);\n                var images = dom.filter('img', nodes);\n                var imageFormat = EditorUtils.formatByName('img', this.format);\n                var imageAttributes = attributes(imageFormat);\n                $.each(images, function () {\n                    dom.attr(this, imageAttributes);\n                });\n                if (images.length == nodes.length) {\n                    return;\n                }\n                var nonImages = dom.filter('img', nodes, true);\n                var formatNodes = this.finder.findSuitable(nonImages);\n                if (formatNodes.length) {\n                    for (var i = 0, len = formatNodes.length; i < len; i++) {\n                        format = EditorUtils.formatByName(dom.name(formatNodes[i]), this.format);\n                        dom.attr(formatNodes[i], attributes(format));\n                    }\n                } else {\n                    format = this.format[0];\n                    this.wrap(format.tags[0], attributes(format), nonImages);\n                }\n            },\n            _handleImmutables: function (nodes, applyFormatting) {\n                if (!this.immutables()) {\n                    return;\n                }\n                var immutableFormat = EditorUtils.formatByName('immutable', this.format);\n                if (!immutableFormat) {\n                    return;\n                }\n                var ImmutablesNS = Editor.Immutables;\n                var l = nodes.length - 1;\n                for (var i = l; i >= 0; i--) {\n                    var immutableParent = ImmutablesNS.immutableParent(nodes[i]);\n                    if (!immutableParent) {\n                        continue;\n                    }\n                    if (immutableParent !== nodes[i + 1]) {\n                        if (applyFormatting) {\n                            dom.attr(immutableParent, immutableFormat.attr);\n                        } else {\n                            dom.unstyle(immutableParent, immutableFormat.attr.style);\n                        }\n                    }\n                    nodes.splice(i, 1);\n                }\n            },\n            immutables: function () {\n                return this.editor && this.editor.options.immutables;\n            },\n            remove: function (nodes) {\n                var i, l, formatNode, namedFormat, name;\n                this._handleImmutables(nodes, false);\n                for (i = 0, l = nodes.length; i < l; i++) {\n                    formatNode = this.finder.findFormat(nodes[i]);\n                    if (formatNode) {\n                        name = dom.name(formatNode);\n                        if (name == 'div' && !formatNode.getAttribute('class')) {\n                            dom.unwrap(formatNode);\n                        } else {\n                            namedFormat = EditorUtils.formatByName(name, this.format);\n                            if (namedFormat.attr.style) {\n                                dom.unstyle(formatNode, namedFormat.attr.style);\n                            }\n                            if (namedFormat.attr.className) {\n                                dom.removeClass(formatNode, namedFormat.attr.className);\n                            }\n                        }\n                    }\n                }\n            },\n            toggle: function (range) {\n                var that = this, nodes = dom.filterBy(RangeUtils.nodes(range), dom.htmlIndentSpace, true);\n                if (that.finder.isFormatted(nodes)) {\n                    that.remove(nodes);\n                } else {\n                    that.apply(nodes);\n                }\n            }\n        });\n        var GreedyBlockFormatter = Class.extend({\n            init: function (format, values) {\n                var that = this;\n                that.format = format;\n                that.values = values;\n                that.finder = new BlockFormatFinder(format);\n            },\n            apply: function (nodes) {\n                var format = this.format;\n                var blocks = dom.blockParents(nodes);\n                var formatTag = format[0].tags[0];\n                var i, len, list, formatter, range;\n                var element;\n                var tagName;\n                var block;\n                var immutalbeParent;\n                if (blocks.length) {\n                    for (i = 0, len = blocks.length; i < len; i++) {\n                        block = blocks[i];\n                        immutalbeParent = this.immutables() && Editor.Immutables.immutableParent(block);\n                        if (!immutalbeParent) {\n                            tagName = dom.name(block);\n                            if (tagName == 'li') {\n                                list = block.parentNode;\n                                formatter = new Editor.ListFormatter(list.nodeName.toLowerCase(), formatTag);\n                                range = this.editor.createRange();\n                                range.selectNode(blocks[i]);\n                                formatter.toggle(range);\n                            } else if (formatTag && (tagName == 'td' || block.attributes.contentEditable)) {\n                                new BlockFormatter(format, this.values).apply(block.childNodes);\n                            } else {\n                                element = dom.changeTag(block, formatTag);\n                                dom.attr(element, format[0].attr);\n                            }\n                        }\n                    }\n                } else {\n                    var blockFormatter = new BlockFormatter(format, this.values);\n                    blockFormatter.editor = this.editor;\n                    blockFormatter.apply(nodes);\n                }\n            },\n            toggle: function (range) {\n                var nodes = RangeUtils.textNodes(range);\n                if (!nodes.length) {\n                    range.selectNodeContents(range.commonAncestorContainer);\n                    nodes = RangeUtils.textNodes(range);\n                    if (!nodes.length) {\n                        nodes = dom.significantChildNodes(range.commonAncestorContainer);\n                    }\n                }\n                this.apply(nodes);\n            },\n            immutables: function () {\n                return this.editor && this.editor.options.immutables;\n            }\n        });\n        var FormatCommand = Command.extend({\n            init: function (options) {\n                options.formatter = options.formatter();\n                var finder = options.formatter.finder;\n                if (finder && EditorUtils.formatByName('immutable', finder.format)) {\n                    finder._initOptions({ immutables: options.immutables });\n                }\n                Command.fn.init.call(this, options);\n            }\n        });\n        var BlockFormatTool = FormatTool.extend({\n            init: function (options) {\n                FormatTool.fn.init.call(this, extend(options, {\n                    finder: new BlockFormatFinder(options.format),\n                    formatter: function () {\n                        return new BlockFormatter(options.format);\n                    }\n                }));\n            }\n        });\n        extend(Editor, {\n            BlockFormatFinder: BlockFormatFinder,\n            BlockFormatter: BlockFormatter,\n            GreedyBlockFormatter: GreedyBlockFormatter,\n            FormatCommand: FormatCommand,\n            BlockFormatTool: BlockFormatTool\n        });\n        var listElements = [\n            'ul',\n            'ol',\n            'li'\n        ];\n        registerFormat('justifyLeft', [\n            {\n                tags: dom.nonListBlockElements,\n                attr: { style: { textAlign: 'left' } }\n            },\n            {\n                tags: ['img'],\n                attr: {\n                    style: {\n                        'float': 'left',\n                        display: '',\n                        marginLeft: '',\n                        marginRight: ''\n                    }\n                }\n            },\n            {\n                tags: ['immutable'],\n                attr: {\n                    style: {\n                        'float': 'left',\n                        display: '',\n                        marginLeft: '',\n                        marginRight: ''\n                    }\n                }\n            },\n            {\n                tags: listElements,\n                attr: {\n                    style: {\n                        textAlign: 'left',\n                        listStylePosition: ''\n                    }\n                }\n            }\n        ]);\n        registerTool('justifyLeft', new BlockFormatTool({\n            format: formats.justifyLeft,\n            template: new ToolTemplate({\n                template: EditorUtils.buttonTemplate,\n                title: 'Justify Left'\n            })\n        }));\n        registerFormat('justifyCenter', [\n            {\n                tags: dom.nonListBlockElements,\n                attr: { style: { textAlign: 'center' } }\n            },\n            {\n                tags: ['img'],\n                attr: {\n                    style: {\n                        display: 'block',\n                        marginLeft: 'auto',\n                        marginRight: 'auto',\n                        'float': ''\n                    }\n                }\n            },\n            {\n                tags: ['immutable'],\n                attr: {\n                    style: {\n                        display: 'block',\n                        marginLeft: 'auto',\n                        marginRight: 'auto',\n                        'float': ''\n                    }\n                }\n            },\n            {\n                tags: listElements,\n                attr: {\n                    style: {\n                        textAlign: 'center',\n                        listStylePosition: 'inside'\n                    }\n                }\n            }\n        ]);\n        registerTool('justifyCenter', new BlockFormatTool({\n            format: formats.justifyCenter,\n            template: new ToolTemplate({\n                template: EditorUtils.buttonTemplate,\n                title: 'Justify Center'\n            })\n        }));\n        registerFormat('justifyRight', [\n            {\n                tags: dom.nonListBlockElements,\n                attr: { style: { textAlign: 'right' } }\n            },\n            {\n                tags: ['img'],\n                attr: {\n                    style: {\n                        'float': 'right',\n                        display: '',\n                        marginLeft: '',\n                        marginRight: ''\n                    }\n                }\n            },\n            {\n                tags: ['immutable'],\n                attr: {\n                    style: {\n                        'float': 'right',\n                        display: '',\n                        marginLeft: '',\n                        marginRight: ''\n                    }\n                }\n            },\n            {\n                tags: listElements,\n                attr: {\n                    style: {\n                        textAlign: 'right',\n                        listStylePosition: 'inside'\n                    }\n                }\n            }\n        ]);\n        registerTool('justifyRight', new BlockFormatTool({\n            format: formats.justifyRight,\n            template: new ToolTemplate({\n                template: EditorUtils.buttonTemplate,\n                title: 'Justify Right'\n            })\n        }));\n        registerFormat('justifyFull', [\n            {\n                tags: dom.nonListBlockElements,\n                attr: { style: { textAlign: 'justify' } }\n            },\n            {\n                tags: ['img'],\n                attr: {\n                    style: {\n                        display: 'block',\n                        marginLeft: 'auto',\n                        marginRight: 'auto',\n                        'float': ''\n                    }\n                }\n            },\n            {\n                tags: ['immutable'],\n                attr: {\n                    style: {\n                        display: 'block',\n                        marginLeft: 'auto',\n                        marginRight: 'auto',\n                        'float': ''\n                    }\n                }\n            },\n            {\n                tags: listElements,\n                attr: {\n                    style: {\n                        textAlign: 'justify',\n                        listStylePosition: ''\n                    }\n                }\n            }\n        ]);\n        registerTool('justifyFull', new BlockFormatTool({\n            format: formats.justifyFull,\n            template: new ToolTemplate({\n                template: EditorUtils.buttonTemplate,\n                title: 'Justify Full'\n            })\n        }));\n    }(window.kendo.jQuery));\n}, typeof define == 'function' && define.amd ? define : function (a1, a2, a3) {\n    (a3 || a2)();\n}));\n(function (f, define) {\n    define('editor/linebreak', ['editor/formatblock'], f);\n}(function () {\n    (function ($) {\n        var kendo = window.kendo, extend = $.extend, editorNS = kendo.ui.editor, dom = editorNS.Dom, Command = editorNS.Command, Tool = editorNS.Tool, BlockFormatter = editorNS.BlockFormatter, normalize = dom.normalize, RangeUtils = editorNS.RangeUtils, registerTool = editorNS.EditorUtils.registerTool;\n        var ParagraphCommand = Command.extend({\n            init: function (options) {\n                this.options = options;\n                Command.fn.init.call(this, options);\n            },\n            _insertMarker: function (doc, range) {\n                var marker = dom.create(doc, 'a'), container;\n                marker.className = 'k-marker';\n                range.insertNode(marker);\n                if (!marker.parentNode) {\n                    container = range.commonAncestorContainer;\n                    container.innerHTML = '';\n                    container.appendChild(marker);\n                }\n                normalize(marker.parentNode);\n                return marker;\n            },\n            _moveFocus: function (range, candidate) {\n                if (dom.isEmpty(candidate)) {\n                    range.setStartBefore(candidate);\n                } else {\n                    range.selectNodeContents(candidate);\n                    var focusNode = RangeUtils.textNodes(range)[0];\n                    if (!focusNode) {\n                        while (candidate.childNodes.length && !dom.is(candidate.firstChild, 'br')) {\n                            candidate = candidate.firstChild;\n                        }\n                        focusNode = candidate;\n                    }\n                    if (dom.isEmpty(focusNode)) {\n                        range.setStartBefore(focusNode);\n                    } else {\n                        if (dom.emptyNode(focusNode)) {\n                            focusNode.innerHTML = '\\uFEFF';\n                        }\n                        var startNode = focusNode.firstChild || focusNode;\n                        if (dom.isDataNode(startNode)) {\n                            range.setStart(startNode, 0);\n                        } else {\n                            range.setStartBefore(startNode);\n                        }\n                    }\n                }\n            },\n            shouldTrim: function (range) {\n                var blocks = 'p,h1,h2,h3,h4,h5,h6'.split(','), startInBlock = dom.parentOfType(range.startContainer, blocks), endInBlock = dom.parentOfType(range.endContainer, blocks);\n                return startInBlock && !endInBlock || !startInBlock && endInBlock;\n            },\n            _blankAfter: function (node) {\n                while (node && (dom.isMarker(node) || dom.stripBom(node.nodeValue) === '')) {\n                    node = node.nextSibling;\n                }\n                return !node;\n            },\n            exec: function () {\n                var range = this.getRange(), doc = RangeUtils.documentFromRange(range), parent, previous, next, emptyParagraphContent = editorNS.emptyElementContent, paragraph, marker, li, heading, tableNode, rng, shouldTrim;\n                this.expandImmutablesIn(range);\n                shouldTrim = this.shouldTrim(range);\n                range.deleteContents();\n                marker = this._insertMarker(doc, range);\n                dom.stripBomNode(marker.previousSibling);\n                dom.stripBomNode(marker.nextSibling);\n                li = dom.closestEditableOfType(marker, ['li']);\n                heading = dom.closestEditableOfType(marker, 'h1,h2,h3,h4,h5,h6'.split(','));\n                tableNode = dom.is(marker.parentNode, 'table') && marker.parentNode;\n                if (li) {\n                    if (dom.emptyNode(li)) {\n                        paragraph = dom.create(doc, 'p');\n                        if (dom.next(li)) {\n                            rng = range.cloneRange();\n                            rng.selectNode(li);\n                            RangeUtils.split(rng, li.parentNode);\n                        }\n                        var br = $('br', li);\n                        if (br.length == 1) {\n                            br.remove();\n                        }\n                        var parentNode = li.parentNode;\n                        var parentChildrenLength = li.parentNode.children.length;\n                        var firstChild = parentChildrenLength > 1 && li.childNodes.length == 1 && li.children[0];\n                        dom.insertAfter(paragraph, parentNode);\n                        dom.remove(parentChildrenLength == 1 ? li.parentNode : li);\n                        if (firstChild && firstChild !== marker) {\n                            paragraph.appendChild(firstChild);\n                            paragraph.appendChild(marker);\n                        } else {\n                            paragraph.innerHTML = emptyParagraphContent;\n                        }\n                        next = paragraph;\n                    }\n                } else if (heading && this._blankAfter(marker)) {\n                    paragraph = this._insertParagraphAfter(heading);\n                    dom.remove(marker);\n                    next = paragraph;\n                } else if (tableNode) {\n                    paragraph = this._insertParagraphAfter(tableNode);\n                    dom.remove(marker);\n                    next = paragraph;\n                }\n                if (!next) {\n                    if (!(li || heading)) {\n                        new BlockFormatter([{ tags: ['p'] }]).apply([marker]);\n                    }\n                    range.selectNode(marker);\n                    parent = dom.parentOfType(marker, [li ? 'li' : heading ? dom.name(heading) : 'p']);\n                    RangeUtils.split(range, parent, shouldTrim);\n                    previous = parent.previousSibling;\n                    if (dom.is(previous, 'li') && previous.firstChild && !dom.is(previous.firstChild, 'br')) {\n                        previous = previous.firstChild;\n                    }\n                    next = parent.nextSibling;\n                    this.clean(previous);\n                    this.clean(next, { links: true });\n                    if (dom.is(next, 'li') && next.firstChild && !dom.is(next.firstChild, 'br')) {\n                        next = next.firstChild;\n                    }\n                    dom.remove(parent);\n                    normalize(previous);\n                }\n                normalize(next);\n                this._moveFocus(range, next);\n                range.collapse(true);\n                dom.scrollTo(next, true);\n                RangeUtils.selectRange(range);\n            },\n            _insertParagraphAfter: function (node) {\n                var range = this.getRange();\n                var doc = RangeUtils.documentFromRange(range);\n                var emptyElementContent = editorNS.emptyElementContent;\n                var paragraph = dom.create(doc, 'p');\n                dom.insertAfter(paragraph, node);\n                paragraph.innerHTML = emptyElementContent;\n                return paragraph;\n            },\n            clean: function (node, options) {\n                var root = node;\n                if (node.firstChild && dom.is(node.firstChild, 'br')) {\n                    dom.remove(node.firstChild);\n                }\n                if (dom.isDataNode(node) && !node.nodeValue) {\n                    node = node.parentNode;\n                }\n                if (node) {\n                    var siblings = false;\n                    while (node.firstChild && node.firstChild.nodeType == 1) {\n                        siblings = siblings || dom.significantNodes(node.childNodes).length > 1;\n                        node = node.firstChild;\n                    }\n                    if (!dom.isEmpty(node) && /^\\s*$/.test(node.innerHTML) && !siblings) {\n                        $(root).find('.k-br').remove();\n                        node.innerHTML = editorNS.emptyElementContent;\n                    }\n                    if (options && options.links) {\n                        while (node != root) {\n                            if (dom.is(node, 'a') && dom.emptyNode(node)) {\n                                dom.unwrap(node);\n                                break;\n                            }\n                            node = node.parentNode;\n                        }\n                    }\n                }\n            }\n        });\n        var NewLineCommand = Command.extend({\n            init: function (options) {\n                this.options = options;\n                Command.fn.init.call(this, options);\n            },\n            exec: function () {\n                var range = this.getRange();\n                this.expandImmutablesIn(range);\n                var br = dom.create(RangeUtils.documentFromRange(range), 'br');\n                var node = range.startContainer;\n                var filler;\n                var browser = kendo.support.browser;\n                var oldIE = browser.msie && browser.version < 11;\n                var tableNode = dom.is(node, 'table') && node;\n                range.deleteContents();\n                if (tableNode) {\n                    dom.insertAfter(br, tableNode);\n                } else {\n                    range.insertNode(br);\n                }\n                normalize(br.parentNode);\n                if (!oldIE && (!br.nextSibling || dom.isWhitespace(br.nextSibling))) {\n                    filler = br.cloneNode(true);\n                    filler.className = 'k-br';\n                    dom.insertAfter(filler, br);\n                }\n                range.setStartAfter(br);\n                range.collapse(true);\n                dom.scrollTo(br.nextSibling || br, true);\n                RangeUtils.selectRange(range);\n            }\n        });\n        extend(editorNS, {\n            ParagraphCommand: ParagraphCommand,\n            NewLineCommand: NewLineCommand\n        });\n        registerTool('insertLineBreak', new Tool({\n            key: 13,\n            shift: true,\n            command: NewLineCommand\n        }));\n        registerTool('insertParagraph', new Tool({\n            key: 13,\n            command: ParagraphCommand\n        }));\n    }(window.kendo.jQuery));\n}, typeof define == 'function' && define.amd ? define : function (a1, a2, a3) {\n    (a3 || a2)();\n}));\n(function (f, define) {\n    define('editor/lists', ['editor/linebreak'], f);\n}(function () {\n    (function ($) {\n        var kendo = window.kendo, Class = kendo.Class, extend = $.extend, Editor = kendo.ui.editor, dom = Editor.Dom, RangeUtils = Editor.RangeUtils, EditorUtils = Editor.EditorUtils, Command = Editor.Command, ToolTemplate = Editor.ToolTemplate, FormatTool = Editor.FormatTool, BlockFormatFinder = Editor.BlockFormatFinder, textNodes = RangeUtils.textNodes, registerTool = Editor.EditorUtils.registerTool;\n        var ListFormatFinder = BlockFormatFinder.extend({\n            init: function (tag) {\n                this.tag = tag;\n                var tags = this.tags = [\n                    tag == 'ul' ? 'ol' : 'ul',\n                    tag\n                ];\n                BlockFormatFinder.fn.init.call(this, [{ tags: tags }]);\n            },\n            isFormatted: function (nodes) {\n                var formatNodes = [];\n                var formatNode, i;\n                for (i = 0; i < nodes.length; i++) {\n                    formatNode = this.findFormat(nodes[i]);\n                    if (formatNode && dom.name(formatNode) == this.tag) {\n                        formatNodes.push(formatNode);\n                    }\n                }\n                if (formatNodes.length < 1) {\n                    return false;\n                }\n                if (formatNodes.length != nodes.length) {\n                    return false;\n                }\n                for (i = 0; i < formatNodes.length; i++) {\n                    if (formatNodes[i].parentNode != formatNode.parentNode) {\n                        break;\n                    }\n                    if (formatNodes[i] != formatNode) {\n                        return false;\n                    }\n                }\n                return true;\n            },\n            findSuitable: function (nodes) {\n                var candidate = this.findFormat(nodes[0]);\n                if (candidate && dom.name(candidate) == this.tag) {\n                    return candidate;\n                }\n                return null;\n            }\n        });\n        var ListFormatter = Class.extend({\n            init: function (tag, unwrapTag) {\n                var that = this;\n                that.finder = new ListFormatFinder(tag);\n                that.tag = tag;\n                that.unwrapTag = unwrapTag;\n            },\n            isList: function (node) {\n                return dom.list(node);\n            },\n            immutables: function () {\n                return this.editor && !!this.editor.options.immutables;\n            },\n            wrap: function (list, nodes) {\n                var li = dom.create(list.ownerDocument, 'li'), i, node, isImmutable = this.immutables() ? Editor.Immutables.immutable : $.noop;\n                for (i = 0; i < nodes.length; i++) {\n                    node = nodes[i];\n                    if (dom.is(node, 'li')) {\n                        list.appendChild(node);\n                        continue;\n                    }\n                    if (this.isList(node)) {\n                        while (node.firstChild) {\n                            list.appendChild(node.firstChild);\n                        }\n                        continue;\n                    }\n                    if (dom.is(node, 'td')) {\n                        while (node.firstChild) {\n                            li.appendChild(node.firstChild);\n                        }\n                        list.appendChild(li);\n                        node.appendChild(list);\n                        list = list.cloneNode(false);\n                        li = li.cloneNode(false);\n                        continue;\n                    }\n                    li.appendChild(node);\n                    if (dom.isBlock(node)) {\n                        list.appendChild(li);\n                        if (!isImmutable(node)) {\n                            dom.unwrap(node);\n                        }\n                        li = li.cloneNode(false);\n                    }\n                }\n                if (li.firstChild) {\n                    list.appendChild(li);\n                }\n            },\n            containsAny: function (parent, nodes) {\n                for (var i = 0; i < nodes.length; i++) {\n                    if (dom.isAncestorOrSelf(parent, nodes[i])) {\n                        return true;\n                    }\n                }\n                return false;\n            },\n            suitable: function (candidate, nodes) {\n                if (candidate.className == 'k-marker') {\n                    var sibling = candidate.nextSibling;\n                    if (sibling && dom.isBlock(sibling)) {\n                        return false;\n                    }\n                    sibling = candidate.previousSibling;\n                    if (sibling && dom.isBlock(sibling)) {\n                        return false;\n                    }\n                }\n                return this.containsAny(candidate, nodes) || dom.isInline(candidate) || candidate.nodeType == 3;\n            },\n            _parentLists: function (node) {\n                var editable = dom.closestEditable(node);\n                return $(node).parentsUntil(editable, 'ul,ol');\n            },\n            split: function (range) {\n                var nodes = textNodes(range);\n                var start, end, parents;\n                if (nodes.length) {\n                    start = dom.parentOfType(nodes[0], ['li']);\n                    end = dom.parentOfType(nodes[nodes.length - 1], ['li']);\n                    range.setStartBefore(start);\n                    range.setEndAfter(end);\n                    for (var i = 0, l = nodes.length; i < l; i++) {\n                        var formatNode = this.finder.findFormat(nodes[i]);\n                        if (formatNode) {\n                            parents = this._parentLists(formatNode);\n                            if (parents.length) {\n                                RangeUtils.split(range, parents.last()[0], true);\n                            } else {\n                                RangeUtils.split(range, formatNode, true);\n                            }\n                        }\n                    }\n                }\n            },\n            merge: function (tag, formatNode) {\n                var prev = formatNode.previousSibling, next;\n                while (prev && (prev.className == 'k-marker' || prev.nodeType == 3 && dom.isWhitespace(prev))) {\n                    prev = prev.previousSibling;\n                }\n                if (prev && dom.name(prev) == tag) {\n                    while (formatNode.firstChild) {\n                        prev.appendChild(formatNode.firstChild);\n                    }\n                    dom.remove(formatNode);\n                    formatNode = prev;\n                }\n                next = formatNode.nextSibling;\n                while (next && (next.className == 'k-marker' || next.nodeType == 3 && dom.isWhitespace(next))) {\n                    next = next.nextSibling;\n                }\n                if (next && dom.name(next) == tag) {\n                    while (formatNode.lastChild) {\n                        next.insertBefore(formatNode.lastChild, next.firstChild);\n                    }\n                    dom.remove(formatNode);\n                }\n            },\n            breakable: function (node) {\n                return node != node.ownerDocument.body && !/table|tbody|tr|td/.test(dom.name(node)) && !node.attributes.contentEditable;\n            },\n            applyOnSection: function (section, nodes) {\n                var tag = this.tag;\n                var commonAncestor = dom.closestSplittableParent(nodes);\n                var ancestors = [];\n                var formatNode = this.finder.findSuitable(nodes);\n                if (!formatNode) {\n                    formatNode = new ListFormatFinder(tag == 'ul' ? 'ol' : 'ul').findSuitable(nodes);\n                }\n                var childNodes;\n                if (/table|tbody/.test(dom.name(commonAncestor))) {\n                    childNodes = $.map(nodes, function (node) {\n                        return dom.parentOfType(node, ['td']);\n                    });\n                } else {\n                    childNodes = dom.significantChildNodes(commonAncestor);\n                    if ($.grep(childNodes, dom.isBlock).length) {\n                        childNodes = $.grep(childNodes, $.proxy(function (node) {\n                            return this.containsAny(node, nodes);\n                        }, this));\n                    }\n                    if (!childNodes.length) {\n                        childNodes = nodes;\n                    }\n                }\n                function pushAncestor() {\n                    ancestors.push(this);\n                }\n                for (var i = 0; i < childNodes.length; i++) {\n                    var child = childNodes[i];\n                    var suitable = (!formatNode || !dom.isAncestorOrSelf(formatNode, child)) && this.suitable(child, nodes);\n                    if (!suitable) {\n                        continue;\n                    }\n                    if (formatNode && this.isList(child)) {\n                        $.each(child.children, pushAncestor);\n                        dom.remove(child);\n                    } else {\n                        ancestors.push(child);\n                    }\n                }\n                if (ancestors.length == childNodes.length && this.breakable(commonAncestor)) {\n                    ancestors = [commonAncestor];\n                }\n                if (!formatNode) {\n                    formatNode = dom.create(commonAncestor.ownerDocument, tag);\n                    dom.insertBefore(formatNode, ancestors[0]);\n                }\n                this.wrap(formatNode, ancestors);\n                while (dom.isBom(formatNode.nextSibling)) {\n                    dom.remove(formatNode.nextSibling);\n                }\n                if (!dom.is(formatNode, tag)) {\n                    dom.changeTag(formatNode, tag);\n                }\n                this.merge(tag, formatNode);\n            },\n            apply: function (nodes) {\n                var i = 0, sections = [], lastSection, lastNodes, section, node, l = nodes.length, immutableParent = this.immutables() ? Editor.Immutables.immutableParent : $.noop;\n                function addLastSection() {\n                    if (lastSection) {\n                        sections.push({\n                            section: lastSection,\n                            nodes: lastNodes\n                        });\n                    }\n                }\n                for (i = 0; i < l; i++) {\n                    node = immutableParent(nodes[i]) || nodes[i];\n                    section = dom.closestEditable(node, [\n                        'td',\n                        'body'\n                    ]);\n                    if (!lastSection || section != lastSection) {\n                        addLastSection();\n                        lastNodes = [node];\n                        lastSection = section;\n                    } else {\n                        lastNodes.push(node);\n                    }\n                }\n                addLastSection();\n                for (i = 0; i < sections.length; i++) {\n                    this.applyOnSection(sections[i].section, sections[i].nodes);\n                }\n            },\n            unwrap: function (ul) {\n                var fragment = ul.ownerDocument.createDocumentFragment(), unwrapTag = this.unwrapTag, parents, li, p, child;\n                for (li = ul.firstChild; li; li = li.nextSibling) {\n                    p = dom.create(ul.ownerDocument, unwrapTag || 'p');\n                    while (li.firstChild) {\n                        child = li.firstChild;\n                        if (dom.isBlock(child)) {\n                            if (p.firstChild) {\n                                fragment.appendChild(p);\n                                p = dom.create(ul.ownerDocument, unwrapTag || 'p');\n                            }\n                            fragment.appendChild(child);\n                        } else {\n                            p.appendChild(child);\n                        }\n                    }\n                    if (p.firstChild) {\n                        fragment.appendChild(p);\n                    }\n                }\n                parents = this._parentLists(ul);\n                if (parents[0]) {\n                    dom.insertAfter(fragment, parents.last()[0]);\n                    parents.last().remove();\n                } else {\n                    dom.insertAfter(fragment, ul);\n                }\n                dom.remove(ul);\n            },\n            remove: function (nodes) {\n                var formatNode;\n                for (var i = 0, l = nodes.length; i < l; i++) {\n                    formatNode = this.finder.findFormat(nodes[i]);\n                    if (formatNode) {\n                        this.unwrap(formatNode);\n                    }\n                }\n            },\n            toggle: function (range) {\n                var that = this, nodes = textNodes(range), ancestor = range.commonAncestorContainer;\n                if (!nodes.length) {\n                    range.selectNodeContents(ancestor);\n                    nodes = textNodes(range);\n                    if (!nodes.length) {\n                        var text = ancestor.ownerDocument.createTextNode('');\n                        range.startContainer.appendChild(text);\n                        nodes = [text];\n                        range.selectNode(text.parentNode);\n                    }\n                }\n                nodes = dom.filterBy(nodes, dom.htmlIndentSpace, true);\n                if (that.finder.isFormatted(nodes)) {\n                    that.split(range);\n                    that.remove(nodes);\n                } else {\n                    that.apply(nodes);\n                }\n            }\n        });\n        var ListCommand = Command.extend({\n            init: function (options) {\n                options.formatter = new ListFormatter(options.tag);\n                Command.fn.init.call(this, options);\n            }\n        });\n        var ListTool = FormatTool.extend({\n            init: function (options) {\n                this.options = options;\n                FormatTool.fn.init.call(this, extend(options, { finder: new ListFormatFinder(options.tag) }));\n            },\n            command: function (commandArguments) {\n                return new ListCommand(extend(commandArguments, { tag: this.options.tag }));\n            }\n        });\n        extend(Editor, {\n            ListFormatFinder: ListFormatFinder,\n            ListFormatter: ListFormatter,\n            ListCommand: ListCommand,\n            ListTool: ListTool\n        });\n        registerTool('insertUnorderedList', new ListTool({\n            tag: 'ul',\n            template: new ToolTemplate({\n                template: EditorUtils.buttonTemplate,\n                title: 'Insert unordered list'\n            })\n        }));\n        registerTool('insertOrderedList', new ListTool({\n            tag: 'ol',\n            template: new ToolTemplate({\n                template: EditorUtils.buttonTemplate,\n                title: 'Insert ordered list'\n            })\n        }));\n    }(window.kendo.jQuery));\n}, typeof define == 'function' && define.amd ? define : function (a1, a2, a3) {\n    (a3 || a2)();\n}));\n(function (f, define) {\n    define('editor/link', ['editor/lists'], f);\n}(function () {\n    (function ($, undefined) {\n        var kendo = window.kendo, Class = kendo.Class, extend = $.extend, proxy = $.proxy, Editor = kendo.ui.editor, dom = Editor.Dom, RangeUtils = Editor.RangeUtils, EditorUtils = Editor.EditorUtils, Command = Editor.Command, Tool = Editor.Tool, ToolTemplate = Editor.ToolTemplate, InlineFormatter = Editor.InlineFormatter, InlineFormatFinder = Editor.InlineFormatFinder, textNodes = RangeUtils.textNodes, editableTextNodes = RangeUtils.editableTextNodes, registerTool = Editor.EditorUtils.registerTool, keys = kendo.keys;\n        var HTTP_PROTOCOL = 'http://';\n        var protocolRegExp = /^\\w*:\\/\\//;\n        var endLinkCharsRegExp = /[\\w\\/\\$\\-_\\*\\?]/i;\n        var LinkFormatFinder = Class.extend({\n            findSuitable: function (sourceNode) {\n                return dom.parentOfType(sourceNode, ['a']);\n            }\n        });\n        var LinkFormatter = Class.extend({\n            init: function () {\n                this.finder = new LinkFormatFinder();\n            },\n            apply: function (range, attributes) {\n                var nodes = this.immutables ? editableTextNodes(range) : textNodes(range);\n                var markers, doc, formatter, a, parent;\n                if (attributes.innerHTML) {\n                    doc = RangeUtils.documentFromRange(range);\n                    markers = RangeUtils.getMarkers(range);\n                    range.deleteContents();\n                    a = dom.create(doc, 'a', attributes);\n                    range.insertNode(a);\n                    parent = a.parentNode;\n                    if (dom.name(parent) == 'a') {\n                        dom.insertAfter(a, parent);\n                    }\n                    if (dom.emptyNode(parent)) {\n                        dom.remove(parent);\n                    }\n                    var ref = a;\n                    for (var i = 0; i < markers.length; i++) {\n                        dom.insertAfter(markers[i], ref);\n                        ref = markers[i];\n                    }\n                    if (markers.length) {\n                        dom.insertBefore(doc.createTextNode('\\uFEFF'), markers[1]);\n                        dom.insertAfter(doc.createTextNode('\\uFEFF'), markers[1]);\n                        range.setStartBefore(markers[0]);\n                        range.setEndAfter(markers[markers.length - 1]);\n                    }\n                } else {\n                    formatter = new InlineFormatter([{ tags: ['a'] }], attributes);\n                    formatter.finder = this.finder;\n                    formatter.apply(nodes);\n                }\n            }\n        });\n        var UnlinkCommand = Command.extend({\n            init: function (options) {\n                var that = this;\n                options.formatter = {\n                    toggle: function (range) {\n                        var nodes = that.immutables() ? editableTextNodes(range) : textNodes(range);\n                        new InlineFormatter([{ tags: ['a'] }]).remove(nodes);\n                    }\n                };\n                this.options = options;\n                Command.fn.init.call(this, options);\n            }\n        });\n        var LinkCommand = Command.extend({\n            init: function (options) {\n                var that;\n                this.options = options;\n                Command.fn.init.call(this, options);\n                this.formatter = new LinkFormatter();\n                if (!options.url) {\n                    this.attributes = null;\n                    this.async = true;\n                } else {\n                    this.exec = function () {\n                        this.formatter.immutables = that && that.immutables();\n                        this.formatter.apply(options.range, {\n                            href: options.url,\n                            innerHTML: options.text || options.url,\n                            target: options.target\n                        });\n                    };\n                }\n            },\n            _dialogTemplate: function () {\n                return kendo.template('<div class=\"k-editor-dialog k-popup-edit-form\">' + '<div class=\"k-edit-form-container\">' + '<div class=\\'k-edit-label\\'>' + '<label for=\\'k-editor-link-url\\'>#: messages.linkWebAddress #</label>' + '</div>' + '<div class=\\'k-edit-field\\'>' + '<input type=\\'text\\' class=\\'k-input k-textbox\\' id=\\'k-editor-link-url\\'>' + '</div>' + '<div class=\\'k-edit-label k-editor-link-text-row\\'>' + '<label for=\\'k-editor-link-text\\'>#: messages.linkText #</label>' + '</div>' + '<div class=\\'k-edit-field k-editor-link-text-row\\'>' + '<input type=\\'text\\' class=\\'k-input k-textbox\\' id=\\'k-editor-link-text\\'>' + '</div>' + '<div class=\\'k-edit-label\\'>' + '<label for=\\'k-editor-link-title\\'>#: messages.linkToolTip #</label>' + '</div>' + '<div class=\\'k-edit-field\\'>' + '<input type=\\'text\\' class=\\'k-input k-textbox\\' id=\\'k-editor-link-title\\'>' + '</div>' + '<div class=\\'k-edit-label\\'></div>' + '<div class=\\'k-edit-field\\'>' + '<input type=\\'checkbox\\' class=\\'k-checkbox\\' id=\\'k-editor-link-target\\'>' + '<label for=\\'k-editor-link-target\\' class=\\'k-checkbox-label\\'>#: messages.linkOpenInNewWindow #</label>' + '</div>' + '<div class=\\'k-edit-buttons k-state-default\\'>' + '<button class=\"k-dialog-insert k-button k-primary\">#: messages.dialogInsert #</button>' + '<button class=\"k-dialog-close k-button\">#: messages.dialogCancel #</button>' + '</div>' + '</div>' + '</div>')({ messages: this.editor.options.messages });\n            },\n            exec: function () {\n                var messages = this.editor.options.messages;\n                this._initialText = '';\n                this._range = this.lockRange(true);\n                this.formatter.immutables = this.immutables();\n                var nodes = textNodes(this._range);\n                var a = nodes.length ? this.formatter.finder.findSuitable(nodes[0]) : null;\n                var img = nodes.length && dom.name(nodes[0]) == 'img';\n                var dialog = this.createDialog(this._dialogTemplate(), {\n                    title: messages.createLink,\n                    close: proxy(this._close, this),\n                    visible: false\n                });\n                if (a) {\n                    this._range.selectNodeContents(a);\n                    nodes = textNodes(this._range);\n                }\n                this._initialText = this.linkText(nodes);\n                dialog.find('.k-dialog-insert').click(proxy(this._apply, this)).end().find('.k-dialog-close').click(proxy(this._close, this)).end().find('.k-edit-field input').keydown(proxy(this._keydown, this)).end().find('#k-editor-link-url').val(this.linkUrl(a)).end().find('#k-editor-link-text').val(this._initialText).end().find('#k-editor-link-title').val(a ? a.title : '').end().find('#k-editor-link-target').attr('checked', a ? a.target == '_blank' : false).end().find('.k-editor-link-text-row').toggle(!img);\n                this._dialog = dialog.data('kendoWindow').center().open();\n                $('#k-editor-link-url', dialog).focus().select();\n            },\n            _keydown: function (e) {\n                var keys = kendo.keys;\n                if (e.keyCode == keys.ENTER) {\n                    this._apply(e);\n                } else if (e.keyCode == keys.ESC) {\n                    this._close(e);\n                }\n            },\n            _apply: function (e) {\n                var element = this._dialog.element;\n                var href = $('#k-editor-link-url', element).val();\n                var title, text, target;\n                var textInput = $('#k-editor-link-text', element);\n                if (href && href != HTTP_PROTOCOL) {\n                    if (href.indexOf('@') > 0 && !/^(\\w+:)|(\\/\\/)/i.test(href)) {\n                        href = 'mailto:' + href;\n                    }\n                    this.attributes = { href: href };\n                    title = $('#k-editor-link-title', element).val();\n                    if (title) {\n                        this.attributes.title = title;\n                    }\n                    if (textInput.is(':visible')) {\n                        text = textInput.val();\n                        if (!text && !this._initialText) {\n                            this.attributes.innerHTML = href;\n                        } else if (text && text !== this._initialText) {\n                            this.attributes.innerHTML = dom.stripBom(text);\n                        }\n                    }\n                    target = $('#k-editor-link-target', element).is(':checked');\n                    this.attributes.target = target ? '_blank' : null;\n                    this.formatter.apply(this._range, this.attributes);\n                }\n                this._close(e);\n                if (this.change) {\n                    this.change();\n                }\n            },\n            _close: function (e) {\n                e.preventDefault();\n                this._dialog.destroy();\n                dom.windowFromDocument(RangeUtils.documentFromRange(this._range)).focus();\n                this.releaseRange(this._range);\n            },\n            linkUrl: function (anchor) {\n                if (anchor) {\n                    return anchor.getAttribute('href', 2);\n                }\n                return HTTP_PROTOCOL;\n            },\n            linkText: function (nodes) {\n                var text = '';\n                var i;\n                for (i = 0; i < nodes.length; i++) {\n                    text += nodes[i].nodeValue;\n                }\n                return dom.stripBom(text || '');\n            },\n            redo: function () {\n                var range = this.lockRange(true);\n                this.formatter.apply(range, this.attributes);\n                this.releaseRange(range);\n            }\n        });\n        var AutoLinkCommand = Command.extend({\n            init: function (options) {\n                Command.fn.init.call(this, options);\n                this.formatter = new LinkFormatter();\n            },\n            exec: function () {\n                var detectedLink = this.detectLink();\n                if (!detectedLink) {\n                    return;\n                }\n                var range = this.getRange();\n                var linkMarker = new kendo.ui.editor.Marker();\n                var linkRange = range.cloneRange();\n                linkRange.setStart(detectedLink.start.node, detectedLink.start.offset);\n                linkRange.setEnd(detectedLink.end.node, detectedLink.end.offset);\n                range = this.lockRange();\n                linkMarker.add(linkRange);\n                this.formatter.apply(linkRange, { href: this._ensureWebProtocol(detectedLink.text) });\n                linkMarker.remove(linkRange);\n                this.releaseRange(range);\n            },\n            detectLink: function () {\n                var range = this.getRange();\n                var startNode = range.startContainer;\n                var startOffset = range.startOffset;\n                var prev = startNode.previousSibling;\n                if (!prev && (dom.isBom(startNode) && !startNode.nextSibling || !startOffset && dom.isDataNode(startNode))) {\n                    startNode = startNode.parentNode;\n                    startOffset = 0;\n                }\n                var traverser = new LeftDomTextTraverser({\n                    node: startNode,\n                    offset: startOffset,\n                    cancelAtNode: function (node) {\n                        return node && dom.name(node) === 'a';\n                    }\n                });\n                var detection = new DomTextLinkDetection(traverser);\n                return detection.detectLink();\n            },\n            changesContent: function () {\n                return !!this.detectLink();\n            },\n            _ensureWebProtocol: function (linkText) {\n                var hasProtocol = this._hasProtocolPrefix(linkText);\n                return hasProtocol ? linkText : this._prefixWithWebProtocol(linkText);\n            },\n            _hasProtocolPrefix: function (linkText) {\n                return protocolRegExp.test(linkText);\n            },\n            _prefixWithWebProtocol: function (linkText) {\n                return HTTP_PROTOCOL + linkText;\n            }\n        });\n        var UnlinkTool = Tool.extend({\n            init: function (options) {\n                this.options = options;\n                this.finder = new InlineFormatFinder([{ tags: ['a'] }]);\n                Tool.fn.init.call(this, $.extend(options, { command: UnlinkCommand }));\n            },\n            initialize: function (ui, options) {\n                Tool.fn.initialize.call(this, ui, options);\n                ui.addClass('k-state-disabled');\n            },\n            update: function (ui, nodes) {\n                ui.toggleClass('k-state-disabled', !this.finder.isFormatted(nodes)).removeClass('k-state-hover');\n            }\n        });\n        var DomTextLinkDetection = Class.extend({\n            init: function (traverser) {\n                this.traverser = traverser;\n                this.start = DomPos();\n                this.end = DomPos();\n                this.text = '';\n            },\n            detectLink: function () {\n                var node = this.traverser.node;\n                var offset = this.traverser.offset;\n                if (dom.isDataNode(node)) {\n                    var text = node.data.substring(0, offset);\n                    if (/\\s{2}$/.test(dom.stripBom(text))) {\n                        return;\n                    }\n                } else if (offset === 0) {\n                    var p = dom.closestEditableOfType(node, dom.blockElements);\n                    if (p && p.previousSibling) {\n                        this.traverser.init({ node: p.previousSibling });\n                    }\n                }\n                this.traverser.traverse($.proxy(this._detectEnd, this));\n                if (!this.end.blank()) {\n                    this.traverser = this.traverser.clone(this.end);\n                    this.traverser.traverse($.proxy(this._detectStart, this));\n                    if (!this._isLinkDetected()) {\n                        var puntuationOptions = this.traverser.extendOptions(this.start);\n                        var puntuationTraverser = new RightDomTextTraverser(puntuationOptions);\n                        puntuationTraverser.traverse($.proxy(this._skipStartPuntuation, this));\n                        if (!this._isLinkDetected()) {\n                            this.start = DomPos();\n                        }\n                    }\n                }\n                if (this.start.blank()) {\n                    return null;\n                } else {\n                    return {\n                        start: this.start,\n                        end: this.end,\n                        text: this.text\n                    };\n                }\n            },\n            _isLinkDetected: function () {\n                return protocolRegExp.test(this.text) || /^w{3}\\./i.test(this.text);\n            },\n            _detectEnd: function (text, node) {\n                var i = lastIndexOfRegExp(text, endLinkCharsRegExp);\n                if (i > -1) {\n                    this.end.node = node;\n                    this.end.offset = i + 1;\n                    return false;\n                }\n            },\n            _detectStart: function (text, node) {\n                var i = lastIndexOfRegExp(text, /\\s/);\n                var ii = i + 1;\n                this.text = text.substring(ii) + this.text;\n                this.start.node = node;\n                this.start.offset = ii;\n                if (i > -1) {\n                    return false;\n                }\n            },\n            _skipStartPuntuation: function (text, node, offset) {\n                var i = indexOfRegExp(text, /\\w/);\n                var ii = i;\n                if (i === -1) {\n                    ii = text.length;\n                }\n                this.text = this.text.substring(ii);\n                this.start.node = node;\n                this.start.offset = ii + (offset | 0);\n                if (i > -1) {\n                    return false;\n                }\n            }\n        });\n        function lastIndexOfRegExp(str, search) {\n            var i = str.length;\n            while (i-- && !search.test(str[i])) {\n            }\n            return i;\n        }\n        function indexOfRegExp(str, search) {\n            var r = search.exec(str);\n            return r ? r.index : -1;\n        }\n        var DomPos = function () {\n            return {\n                node: null,\n                offset: null,\n                blank: function () {\n                    return this.node === null && this.offset === null;\n                }\n            };\n        };\n        var DomTextTraverser = Class.extend({\n            init: function (options) {\n                this.node = options.node;\n                this.offset = options.offset === undefined ? dom.isDataNode(this.node) && this.node.length || 0 : options.offset;\n                this.cancelAtNode = options.cancelAtNode || this.cancelAtNode || $.noop;\n            },\n            traverse: function (callback) {\n                if (!callback) {\n                    return;\n                }\n                this.cancel = false;\n                this._traverse(callback, this.node, this.offset);\n            },\n            _traverse: function (callback, node, offset) {\n                if (!node || this.cancel) {\n                    return;\n                }\n                if (node.nodeType === 3) {\n                    var text = node.data;\n                    if (offset !== undefined) {\n                        text = this.subText(text, offset);\n                    }\n                    this.cancel = callback(text, node, offset) === false;\n                } else {\n                    var edgeNode = this.edgeNode(node);\n                    this.cancel = this.cancel || this.cancelAtNode(edgeNode);\n                    return this._traverse(callback, edgeNode);\n                }\n                var next = this.next(node);\n                if (!next) {\n                    var parent = node.parentNode;\n                    while (!next && dom.isInline(parent)) {\n                        next = this.next(parent);\n                        parent = parent.parentNode;\n                    }\n                }\n                this.cancel = this.cancel || this.cancelAtNode(next);\n                this._traverse(callback, next);\n            },\n            extendOptions: function (o) {\n                return $.extend({\n                    node: this.node,\n                    offset: this.offset,\n                    cancelAtNode: this.cancelAtNode\n                }, o || {});\n            },\n            edgeNode: function (node) {\n            },\n            next: function (node) {\n            },\n            subText: function (text, offset) {\n            }\n        });\n        var LeftDomTextTraverser = DomTextTraverser.extend({\n            subText: function (text, splitIndex) {\n                return text.substring(0, splitIndex);\n            },\n            next: function (node) {\n                return node.previousSibling;\n            },\n            edgeNode: function (node) {\n                return node.lastChild;\n            },\n            clone: function (options) {\n                var o = this.extendOptions(options);\n                return new LeftDomTextTraverser(o);\n            }\n        });\n        var RightDomTextTraverser = DomTextTraverser.extend({\n            subText: function (text, splitIndex) {\n                return text.substring(splitIndex);\n            },\n            next: function (node) {\n                return node.nextSibling;\n            },\n            edgeNode: function (node) {\n                return node.firstChild;\n            },\n            clone: function (options) {\n                var o = this.extendOptions(options);\n                return new RightDomTextTraverser(o);\n            }\n        });\n        extend(kendo.ui.editor, {\n            LinkFormatFinder: LinkFormatFinder,\n            LinkFormatter: LinkFormatter,\n            UnlinkCommand: UnlinkCommand,\n            LinkCommand: LinkCommand,\n            AutoLinkCommand: AutoLinkCommand,\n            UnlinkTool: UnlinkTool,\n            DomTextLinkDetection: DomTextLinkDetection,\n            LeftDomTextTraverser: LeftDomTextTraverser,\n            RightDomTextTraverser: RightDomTextTraverser\n        });\n        registerTool('createLink', new Tool({\n            key: 'K',\n            ctrl: true,\n            command: LinkCommand,\n            template: new ToolTemplate({\n                template: EditorUtils.buttonTemplate,\n                title: 'Create Link'\n            })\n        }));\n        registerTool('unlink', new UnlinkTool({\n            key: 'K',\n            ctrl: true,\n            shift: true,\n            template: new ToolTemplate({\n                template: EditorUtils.buttonTemplate,\n                title: 'Remove Link'\n            })\n        }));\n        registerTool('autoLink', new Tool({\n            key: [\n                keys.ENTER,\n                keys.SPACEBAR\n            ],\n            keyPressCommand: true,\n            command: AutoLinkCommand\n        }));\n    }(window.kendo.jQuery));\n}, typeof define == 'function' && define.amd ? define : function (a1, a2, a3) {\n    (a3 || a2)();\n}));\n(function (f, define) {\n    define('editor/file', [\n        'kendo.filebrowser',\n        'editor/link'\n    ], f);\n}(function () {\n    (function ($, undefined) {\n        var kendo = window.kendo, extend = $.extend, Editor = kendo.ui.editor, EditorUtils = Editor.EditorUtils, dom = Editor.Dom, registerTool = EditorUtils.registerTool, ToolTemplate = Editor.ToolTemplate, RangeUtils = Editor.RangeUtils, Command = Editor.Command, LinkFormatter = Editor.LinkFormatter, textNodes = RangeUtils.textNodes, keys = kendo.keys, KEDITORFILEURL = '#k-editor-file-url', KEDITORFILETEXT = '#k-editor-file-text', KEDITORFILETITLE = '#k-editor-file-title';\n        var FileCommand = Command.extend({\n            init: function (options) {\n                var that = this;\n                Command.fn.init.call(that, options);\n                that.formatter = new LinkFormatter();\n                that.async = true;\n                that.attributes = {};\n            },\n            insertFile: function (file, range) {\n                var attributes = this.attributes;\n                var doc = RangeUtils.documentFromRange(range);\n                if (attributes.href && attributes.href != 'http://') {\n                    if (!file) {\n                        file = dom.create(doc, 'a', { href: attributes.href });\n                        file.innerHTML = attributes.innerHTML;\n                        file.title = attributes.title;\n                        range.deleteContents();\n                        range.insertNode(file);\n                        if (!file.nextSibling) {\n                            dom.insertAfter(doc.createTextNode('\\uFEFF'), file);\n                        }\n                        range.setStartAfter(file);\n                        range.setEndAfter(file);\n                        RangeUtils.selectRange(range);\n                        return true;\n                    } else {\n                        dom.attr(file, attributes);\n                    }\n                }\n                return false;\n            },\n            _dialogTemplate: function (showBrowser) {\n                return kendo.template('<div class=\"k-editor-dialog k-popup-edit-form\">' + '<div class=\"k-edit-form-container\">' + '<div class=\"k-edit-form-content\">' + '# if (showBrowser) { #' + '<div class=\"k-filebrowser\"></div>' + '# } #' + '<div class=\\'k-edit-label\\'>' + '<label for=\"k-editor-file-url\">#: messages.fileWebAddress #</label>' + '</div>' + '<div class=\\'k-edit-field\\'>' + '<input type=\"text\" class=\"k-input k-textbox\" id=\"k-editor-file-url\">' + '</div>' + '<div class=\\'k-edit-label\\'>' + '<label for=\"k-editor-file-text\">#: messages.fileText #</label>' + '</div>' + '<div class=\\'k-edit-field\\'>' + '<input type=\"text\" class=\"k-input k-textbox\" id=\"k-editor-file-text\">' + '</div>' + '<div class=\\'k-edit-label\\'>' + '<label for=\"k-editor-file-title\">#: messages.fileTitle #</label>' + '</div>' + '<div class=\\'k-edit-field\\'>' + '<input type=\"text\" class=\"k-input k-textbox\" id=\"k-editor-file-title\">' + '</div>' + '</div>' + '<div class=\"k-edit-buttons k-state-default\">' + '<button class=\"k-dialog-insert k-button k-primary\">#: messages.dialogInsert #</button>' + '<button class=\"k-dialog-close k-button\">#: messages.dialogCancel #</button>' + '</div>' + '</div>' + '</div>')({\n                    messages: this.editor.options.messages,\n                    showBrowser: showBrowser\n                });\n            },\n            redo: function () {\n                var that = this, range = that.lockRange();\n                this.formatter.apply(range, this.attributes);\n                that.releaseRange(range);\n            },\n            exec: function () {\n                var that = this, range = that.lockRange(), nodes = textNodes(range), applied = false, file = nodes.length ? this.formatter.finder.findSuitable(nodes[0]) : null, dialog, isIE = kendo.support.browser.msie, options = that.editor.options, messages = options.messages, fileBrowser = options.fileBrowser, showBrowser = !!(kendo.ui.FileBrowser && fileBrowser && fileBrowser.transport && fileBrowser.transport.read !== undefined), dialogOptions = {\n                        title: messages.insertFile,\n                        visible: false,\n                        resizable: showBrowser\n                    };\n                this.expandImmutablesIn(range);\n                function apply(e) {\n                    var element = dialog.element, href = element.find(KEDITORFILEURL).val().replace(/ /g, '%20'), innerHTML = element.find(KEDITORFILETEXT).val(), title = element.find(KEDITORFILETITLE).val();\n                    that.attributes = {\n                        href: href,\n                        innerHTML: innerHTML !== '' ? innerHTML : href,\n                        title: title\n                    };\n                    applied = that.insertFile(file, range);\n                    close(e);\n                    if (that.change) {\n                        that.change();\n                    }\n                }\n                function close(e) {\n                    e.preventDefault();\n                    dialog.destroy();\n                    dom.windowFromDocument(RangeUtils.documentFromRange(range)).focus();\n                    if (!applied) {\n                        that.releaseRange(range);\n                    }\n                }\n                function keyDown(e) {\n                    if (e.keyCode == keys.ENTER) {\n                        apply(e);\n                    } else if (e.keyCode == keys.ESC) {\n                        close(e);\n                    }\n                }\n                dialogOptions.close = close;\n                if (showBrowser) {\n                    dialogOptions.width = 750;\n                }\n                dialog = this.createDialog(that._dialogTemplate(showBrowser), dialogOptions).toggleClass('k-filebrowser-dialog', showBrowser).find('.k-dialog-insert').click(apply).end().find('.k-dialog-close').click(close).end().find('.k-edit-field input').keydown(keyDown).end().find(KEDITORFILEURL).val(file ? file.getAttribute('href', 2) : 'http://').end().find(KEDITORFILETEXT).val(file ? file.innerText : '').end().find(KEDITORFILETITLE).val(file ? file.title : '').end().data('kendoWindow');\n                var element = dialog.element;\n                if (showBrowser) {\n                    that._fileBrowser = new kendo.ui.FileBrowser(element.find('.k-filebrowser'), extend({}, fileBrowser));\n                    that._fileBrowser.bind('change', function (ev) {\n                        if (ev.selected.get('type') === 'f') {\n                            element.find(KEDITORFILEURL).val(this.value());\n                        }\n                    });\n                    that._fileBrowser.bind('apply', apply);\n                }\n                if (isIE) {\n                    var dialogHeight = element.closest('.k-window').height();\n                    element.css('max-height', dialogHeight);\n                }\n                dialog.center().open();\n                element.find(KEDITORFILEURL).focus().select();\n            }\n        });\n        kendo.ui.editor.FileCommand = FileCommand;\n        registerTool('insertFile', new Editor.Tool({\n            command: FileCommand,\n            template: new ToolTemplate({\n                template: EditorUtils.buttonTemplate,\n                title: 'Insert File'\n            })\n        }));\n    }(window.kendo.jQuery));\n}, typeof define == 'function' && define.amd ? define : function (a1, a2, a3) {\n    (a3 || a2)();\n}));\n(function (f, define) {\n    define('editor/image', [\n        'kendo.imagebrowser',\n        'editor/link'\n    ], f);\n}(function () {\n    (function ($, undefined) {\n        var kendo = window.kendo, extend = $.extend, Editor = kendo.ui.editor, EditorUtils = Editor.EditorUtils, dom = Editor.Dom, registerTool = EditorUtils.registerTool, ToolTemplate = Editor.ToolTemplate, RangeUtils = Editor.RangeUtils, Command = Editor.Command, keys = kendo.keys, KEDITORIMAGEURL = '#k-editor-image-url', KEDITORIMAGETITLE = '#k-editor-image-title', KEDITORIMAGEWIDTH = '#k-editor-image-width', KEDITORIMAGEHEIGHT = '#k-editor-image-height';\n        var ImageCommand = Command.extend({\n            init: function (options) {\n                var that = this;\n                Command.fn.init.call(that, options);\n                that.async = true;\n                that.attributes = {};\n            },\n            insertImage: function (img, range) {\n                var attributes = this.attributes;\n                var doc = RangeUtils.documentFromRange(range);\n                if (attributes.src && attributes.src != 'http://') {\n                    var removeIEAttributes = function () {\n                        setTimeout(function () {\n                            if (!attributes.width) {\n                                img.removeAttribute('width');\n                            }\n                            if (!attributes.height) {\n                                img.removeAttribute('height');\n                            }\n                            img.removeAttribute('complete');\n                        });\n                    };\n                    if (!img) {\n                        img = dom.create(doc, 'img', attributes);\n                        img.onload = img.onerror = removeIEAttributes;\n                        range.deleteContents();\n                        range.insertNode(img);\n                        if (!img.nextSibling) {\n                            dom.insertAfter(doc.createTextNode('\\uFEFF'), img);\n                        }\n                        removeIEAttributes();\n                        range.setStartAfter(img);\n                        range.setEndAfter(img);\n                        RangeUtils.selectRange(range);\n                        return true;\n                    } else {\n                        img.onload = img.onerror = removeIEAttributes;\n                        dom.attr(img, attributes);\n                        removeIEAttributes();\n                    }\n                }\n                return false;\n            },\n            _dialogTemplate: function (showBrowser) {\n                return kendo.template('<div class=\"k-editor-dialog k-popup-edit-form\">' + '<div class=\"k-edit-form-container\">' + '<div class=\"k-edit-form-content\">' + '# if (showBrowser) { #' + '<div class=\"k-filebrowser k-imagebrowser\"></div>' + '# } #' + '<div class=\\'k-edit-label\\'>' + '<label for=\"k-editor-image-url\">#: messages.imageWebAddress #</label>' + '</div>' + '<div class=\\'k-edit-field\\'>' + '<input type=\"text\" class=\"k-input k-textbox\" id=\"k-editor-image-url\">' + '</div>' + '<div class=\\'k-edit-label\\'>' + '<label for=\"k-editor-image-title\">#: messages.imageAltText #</label>' + '</div>' + '<div class=\\'k-edit-field\\'>' + '<input type=\"text\" class=\"k-input k-textbox\" id=\"k-editor-image-title\">' + '</div>' + '<div class=\\'k-edit-label\\'>' + '<label for=\"k-editor-image-width\">#: messages.imageWidth #</label>' + '</div>' + '<div class=\\'k-edit-field\\'>' + '<input type=\"text\" class=\"k-input k-textbox\" id=\"k-editor-image-width\">' + '</div>' + '<div class=\\'k-edit-label\\'>' + '<label for=\"k-editor-image-height\">#: messages.imageHeight #</label>' + '</div>' + '<div class=\\'k-edit-field\\'>' + '<input type=\"text\" class=\"k-input k-textbox\" id=\"k-editor-image-height\">' + '</div>' + '</div>' + '<div class=\"k-edit-buttons k-state-default\">' + '<button class=\"k-dialog-insert k-button k-primary\">#: messages.dialogInsert #</button>' + '<button class=\"k-dialog-close k-button\">#: messages.dialogCancel #</button>' + '</div>' + '</div>' + '</div>')({\n                    messages: this.editor.options.messages,\n                    showBrowser: showBrowser\n                });\n            },\n            redo: function () {\n                var that = this, range = that.lockRange();\n                if (!that.insertImage(RangeUtils.image(range), range)) {\n                    that.releaseRange(range);\n                }\n            },\n            exec: function () {\n                var that = this, range = that.lockRange(), applied = false, img = RangeUtils.image(range), imageWidth = img && img.getAttribute('width') || '', imageHeight = img && img.getAttribute('height') || '', dialog, isIE = kendo.support.browser.msie, options = that.editor.options, messages = options.messages, imageBrowser = options.imageBrowser, showBrowser = !!(kendo.ui.ImageBrowser && imageBrowser && imageBrowser.transport && imageBrowser.transport.read !== undefined), dialogOptions = {\n                        title: messages.insertImage,\n                        visible: false,\n                        resizable: showBrowser\n                    };\n                this.expandImmutablesIn(range);\n                function apply(e) {\n                    var element = dialog.element, w = parseInt(element.find(KEDITORIMAGEWIDTH).val(), 10), h = parseInt(element.find(KEDITORIMAGEHEIGHT).val(), 10);\n                    that.attributes = {\n                        src: element.find(KEDITORIMAGEURL).val().replace(/ /g, '%20'),\n                        alt: element.find(KEDITORIMAGETITLE).val()\n                    };\n                    that.attributes.width = null;\n                    that.attributes.height = null;\n                    if (!isNaN(w) && w > 0) {\n                        that.attributes.width = w;\n                    }\n                    if (!isNaN(h) && h > 0) {\n                        that.attributes.height = h;\n                    }\n                    applied = that.insertImage(img, range);\n                    close(e);\n                    if (that.change) {\n                        that.change();\n                    }\n                }\n                function close(e) {\n                    e.preventDefault();\n                    dialog.destroy();\n                    dom.windowFromDocument(RangeUtils.documentFromRange(range)).focus();\n                    if (!applied) {\n                        that.releaseRange(range);\n                    }\n                }\n                function keyDown(e) {\n                    if (e.keyCode == keys.ENTER) {\n                        apply(e);\n                    } else if (e.keyCode == keys.ESC) {\n                        close(e);\n                    }\n                }\n                dialogOptions.close = close;\n                if (showBrowser) {\n                    dialogOptions.width = 750;\n                }\n                dialog = this.createDialog(that._dialogTemplate(showBrowser), dialogOptions).toggleClass('k-filebrowser-dialog', showBrowser).find('.k-dialog-insert').click(apply).end().find('.k-dialog-close').click(close).end().find('.k-edit-field input').keydown(keyDown).end().find(KEDITORIMAGEURL).val(img ? img.getAttribute('src', 2) : 'http://').end().find(KEDITORIMAGETITLE).val(img ? img.alt : '').end().find(KEDITORIMAGEWIDTH).val(imageWidth).end().find(KEDITORIMAGEHEIGHT).val(imageHeight).end().data('kendoWindow');\n                var element = dialog.element;\n                if (showBrowser) {\n                    this._imageBrowser = new kendo.ui.ImageBrowser(element.find('.k-imagebrowser'), extend({}, imageBrowser));\n                    this._imageBrowser.bind('change', function (ev) {\n                        if (ev.selected.get('type') === 'f') {\n                            element.find(KEDITORIMAGEURL).val(this.value());\n                        }\n                    });\n                    this._imageBrowser.bind('apply', apply);\n                }\n                if (isIE) {\n                    var dialogHeight = element.closest('.k-window').height();\n                    element.css('max-height', dialogHeight);\n                }\n                dialog.center().open();\n                element.find(KEDITORIMAGEURL).focus().select();\n            }\n        });\n        kendo.ui.editor.ImageCommand = ImageCommand;\n        registerTool('insertImage', new Editor.Tool({\n            command: ImageCommand,\n            template: new ToolTemplate({\n                template: EditorUtils.buttonTemplate,\n                title: 'Insert Image'\n            })\n        }));\n    }(window.kendo.jQuery));\n}, typeof define == 'function' && define.amd ? define : function (a1, a2, a3) {\n    (a3 || a2)();\n}));\n(function (f, define) {\n    define('editor/components', ['editor/image'], f);\n}(function () {\n    (function ($, undefined) {\n        var kendo = window.kendo, DropDownList = kendo.ui.DropDownList, dom = kendo.ui.editor.Dom;\n        var SelectBox = DropDownList.extend({\n            init: function (element, options) {\n                var that = this;\n                DropDownList.fn.init.call(that, element, options);\n                if (kendo.support.mobileOS.ios) {\n                    this._initSelectOverlay();\n                    this.bind('dataBound', $.proxy(this._initSelectOverlay, this));\n                }\n                that.text(that.options.title);\n                that.bind('open', function () {\n                    if (that.options.autoSize) {\n                        var list = that.list, listWidth;\n                        list.css({\n                            whiteSpace: 'nowrap',\n                            width: 'auto'\n                        });\n                        listWidth = list.width();\n                        if (listWidth) {\n                            listWidth += 20;\n                        } else {\n                            listWidth = that._listWidth;\n                        }\n                        list.css('width', listWidth + kendo.support.scrollbar());\n                        that._listWidth = listWidth;\n                    }\n                });\n            },\n            options: {\n                name: 'SelectBox',\n                index: -1\n            },\n            _initSelectOverlay: function () {\n                var selectBox = this;\n                var value = selectBox.value();\n                var view = this.dataSource.view();\n                var item;\n                var html = '';\n                var encode = kendo.htmlEncode;\n                for (var i = 0; i < view.length; i++) {\n                    item = view[i];\n                    html += '<option value=\\'' + encode(item.value) + '\\'';\n                    if (item.value == value) {\n                        html += ' selected';\n                    }\n                    html += '>' + encode(item.text) + '</option>';\n                }\n                var select = $('<select class=\\'k-select-overlay\\'>' + html + '</select>');\n                var wrapper = $(this.element).closest('.k-widget');\n                wrapper.next('.k-select-overlay').remove();\n                select.insertAfter(wrapper);\n                select.on('change', function () {\n                    selectBox.value(this.value);\n                    selectBox.trigger('change');\n                });\n            },\n            value: function (value) {\n                var that = this, result = DropDownList.fn.value.call(that, value);\n                if (value === undefined) {\n                    return result;\n                }\n                if (!DropDownList.fn.value.call(that)) {\n                    that.text(that.options.title);\n                }\n            },\n            decorate: function (body) {\n                var that = this, dataSource = that.dataSource, items = dataSource.data(), i, tag, className, style;\n                if (body) {\n                    that.list.css('background-color', dom.getEffectiveBackground($(body)));\n                }\n                for (i = 0; i < items.length; i++) {\n                    tag = items[i].tag || 'span';\n                    className = items[i].className;\n                    style = dom.inlineStyle(body, tag, { className: className });\n                    style = style.replace(/\"/g, '\\'');\n                    items[i].style = style + ';display:inline-block';\n                }\n                dataSource.trigger('change');\n            }\n        });\n        kendo.ui.plugin(SelectBox);\n        kendo.ui.editor.SelectBox = SelectBox;\n    }(window.kendo.jQuery));\n}, typeof define == 'function' && define.amd ? define : function (a1, a2, a3) {\n    (a3 || a2)();\n}));\n(function (f, define) {\n    define('editor/indent', ['editor/components'], f);\n}(function () {\n    (function ($, undefined) {\n        var kendo = window.kendo, Class = kendo.Class, extend = $.extend, Editor = kendo.ui.editor, dom = Editor.Dom, EditorUtils = Editor.EditorUtils, registerTool = EditorUtils.registerTool, Command = Editor.Command, Tool = Editor.Tool, ToolTemplate = Editor.ToolTemplate, RangeUtils = Editor.RangeUtils, blockElements = dom.blockElements, BlockFormatFinder = Editor.BlockFormatFinder, BlockFormatter = Editor.BlockFormatter;\n        function indent(node, value) {\n            var isRtl = $(node).css('direction') == 'rtl', indentDirection = isRtl ? 'Right' : 'Left', property = dom.name(node) != 'td' ? 'margin' + indentDirection : 'padding' + indentDirection;\n            if (value === undefined) {\n                return node.style[property] || 0;\n            } else {\n                if (value > 0) {\n                    node.style[property] = value + 'px';\n                } else {\n                    node.style[property] = '';\n                    if (!node.style.cssText) {\n                        node.removeAttribute('style');\n                    }\n                }\n            }\n        }\n        var IndentFormatter = Class.extend({\n            init: function () {\n                this.finder = new BlockFormatFinder([{ tags: dom.blockElements }]);\n            },\n            apply: function (nodes) {\n                nodes = dom.filterBy(nodes, dom.htmlIndentSpace, true);\n                var formatNodes = this.finder.findSuitable(nodes), targets = [], i, len, formatNode, parentList, sibling;\n                formatNodes = this.mapImmutables(formatNodes);\n                if (formatNodes.length) {\n                    for (i = 0, len = formatNodes.length; i < len; i++) {\n                        if (dom.is(formatNodes[i], 'li')) {\n                            if (!$(formatNodes[i]).index()) {\n                                targets.push(formatNodes[i].parentNode);\n                            } else if ($.inArray(formatNodes[i].parentNode, targets) < 0) {\n                                targets.push(formatNodes[i]);\n                            }\n                        } else {\n                            targets.push(formatNodes[i]);\n                        }\n                    }\n                    while (targets.length) {\n                        formatNode = targets.shift();\n                        if (dom.is(formatNode, 'li')) {\n                            parentList = formatNode.parentNode;\n                            sibling = $(formatNode).prev('li');\n                            var siblingList = sibling.find('ul,ol').last();\n                            var nestedList = $(formatNode).children('ul,ol')[0];\n                            if (nestedList && sibling[0]) {\n                                if (siblingList[0]) {\n                                    siblingList.append(formatNode);\n                                    siblingList.append($(nestedList).children());\n                                    dom.remove(nestedList);\n                                } else {\n                                    sibling.append(nestedList);\n                                    nestedList.insertBefore(formatNode, nestedList.firstChild);\n                                }\n                            } else {\n                                nestedList = sibling.children('ul,ol')[0];\n                                if (!nestedList) {\n                                    nestedList = dom.create(formatNode.ownerDocument, dom.name(parentList));\n                                    sibling.append(nestedList);\n                                }\n                                while (formatNode && formatNode.parentNode == parentList) {\n                                    nestedList.appendChild(formatNode);\n                                    formatNode = targets.shift();\n                                }\n                            }\n                        } else {\n                            var marginLeft = parseInt(indent(formatNode), 10) + 30;\n                            indent(formatNode, marginLeft);\n                            for (var targetIndex = 0; targetIndex < targets.length; targetIndex++) {\n                                if ($.contains(formatNode, targets[targetIndex])) {\n                                    targets.splice(targetIndex, 1);\n                                }\n                            }\n                        }\n                    }\n                } else {\n                    var formatter = new BlockFormatter([{ tags: ['p'] }], { style: { marginLeft: 30 } });\n                    formatter.apply(nodes);\n                }\n            },\n            mapImmutables: function (nodes) {\n                if (!this.immutables) {\n                    return nodes;\n                } else {\n                    var immutables = [];\n                    return $.map(nodes, function (node) {\n                        var immutable = Editor.Immutables.immutableParent(node);\n                        if (immutable) {\n                            if ($.inArray(immutable, immutables) === -1) {\n                                immutables.push(immutable);\n                            } else {\n                                return null;\n                            }\n                        }\n                        return immutable || node;\n                    });\n                }\n            },\n            remove: function (nodes) {\n                nodes = dom.filterBy(nodes, dom.htmlIndentSpace, true);\n                var formatNodes = this.finder.findSuitable(nodes), targetNode, i, len, list, listParent, siblings, formatNode, marginLeft;\n                formatNodes = this.mapImmutables(formatNodes);\n                for (i = 0, len = formatNodes.length; i < len; i++) {\n                    formatNode = $(formatNodes[i]);\n                    if (formatNode.is('li')) {\n                        list = formatNode.parent();\n                        listParent = list.parent();\n                        if (listParent.is('li,ul,ol') && !indent(list[0])) {\n                            if (targetNode && $.contains(targetNode, listParent[0])) {\n                                continue;\n                            }\n                            siblings = formatNode.nextAll('li');\n                            if (siblings.length) {\n                                $(list[0].cloneNode(false)).appendTo(formatNode).append(siblings);\n                            }\n                            if (listParent.is('li')) {\n                                formatNode.insertAfter(listParent);\n                            } else {\n                                formatNode.appendTo(listParent);\n                            }\n                            if (!list.children('li').length) {\n                                list.remove();\n                            }\n                            continue;\n                        } else {\n                            if (targetNode == list[0]) {\n                                continue;\n                            }\n                            targetNode = list[0];\n                        }\n                    } else {\n                        targetNode = formatNodes[i];\n                    }\n                    marginLeft = parseInt(indent(targetNode), 10) - 30;\n                    indent(targetNode, marginLeft);\n                }\n            }\n        });\n        var IndentCommand = Command.extend({\n            init: function (options) {\n                var that = this;\n                options.formatter = {\n                    toggle: $.proxy(function (range) {\n                        var indentFormatter = new IndentFormatter();\n                        indentFormatter.immutables = this.editor && this.editor.options.immutables;\n                        indentFormatter.apply(RangeUtils.nodes(range));\n                    }, that)\n                };\n                Command.fn.init.call(this, options);\n            }\n        });\n        var OutdentCommand = Command.extend({\n            init: function (options) {\n                var that = this;\n                options.formatter = {\n                    toggle: $.proxy(function (range) {\n                        var indentFormatter = new IndentFormatter();\n                        indentFormatter.immutables = this.editor && this.editor.options.immutables;\n                        indentFormatter.remove(RangeUtils.nodes(range));\n                    }, that)\n                };\n                Command.fn.init.call(this, options);\n            }\n        });\n        var OutdentTool = Tool.extend({\n            init: function (options) {\n                Tool.fn.init.call(this, options);\n                this.finder = new BlockFormatFinder([{ tags: blockElements }]);\n            },\n            initialize: function (ui, options) {\n                Tool.fn.initialize.call(this, ui, options);\n                $.extend(this.options, { immutables: options.editor && options.editor.options.immutables });\n                ui.addClass('k-state-disabled');\n            },\n            update: function (ui, nodes) {\n                var suitableNodes = this.finder.findSuitable(nodes), isOutdentable, listParentsCount, i, len, suitable, immutableParent;\n                for (i = 0, len = suitableNodes.length; i < len; i++) {\n                    suitable = suitableNodes[i];\n                    if (this.options.immutables) {\n                        immutableParent = Editor.Immutables.immutableParent(suitable);\n                        if (immutableParent) {\n                            suitable = immutableParent;\n                        }\n                    }\n                    isOutdentable = indent(suitable);\n                    if (!isOutdentable) {\n                        listParentsCount = $(suitable).parents('ul,ol').length;\n                        isOutdentable = dom.is(suitable, 'li') && (listParentsCount > 1 || indent(suitable.parentNode)) || dom.ofType(suitable, [\n                            'ul',\n                            'ol'\n                        ]) && listParentsCount > 0;\n                    }\n                    if (isOutdentable) {\n                        ui.removeClass('k-state-disabled');\n                        return;\n                    }\n                }\n                ui.addClass('k-state-disabled').removeClass('k-state-hover');\n            }\n        });\n        extend(Editor, {\n            IndentFormatter: IndentFormatter,\n            IndentCommand: IndentCommand,\n            OutdentCommand: OutdentCommand,\n            OutdentTool: OutdentTool\n        });\n        registerTool('indent', new Tool({\n            command: IndentCommand,\n            template: new ToolTemplate({\n                template: EditorUtils.buttonTemplate,\n                title: 'Indent'\n            })\n        }));\n        registerTool('outdent', new OutdentTool({\n            command: OutdentCommand,\n            template: new ToolTemplate({\n                template: EditorUtils.buttonTemplate,\n                title: 'Outdent'\n            })\n        }));\n    }(window.kendo.jQuery));\n}, typeof define == 'function' && define.amd ? define : function (a1, a2, a3) {\n    (a3 || a2)();\n}));\n(function (f, define) {\n    define('editor/viewhtml', ['editor/indent'], f);\n}(function () {\n    (function ($, undefined) {\n        var kendo = window.kendo, extend = $.extend, Editor = kendo.ui.editor, EditorUtils = Editor.EditorUtils, Command = Editor.Command, Tool = Editor.Tool, ToolTemplate = Editor.ToolTemplate;\n        var ViewHtmlCommand = Command.extend({\n            init: function (options) {\n                var cmd = this;\n                cmd.options = options;\n                Command.fn.init.call(cmd, options);\n                cmd.attributes = null;\n                cmd.async = true;\n            },\n            exec: function () {\n                var that = this, editor = that.editor, options = editor.options, messages = editor.options.messages, dialog = $(kendo.template(ViewHtmlCommand.template)(messages)).appendTo(document.body), textarea = '.k-editor-textarea', content;\n                options.serialization.immutables = editor.immutables;\n                content = ViewHtmlCommand.indent(editor.value());\n                options.serialization.immutables = undefined;\n                function apply(e) {\n                    options.deserialization.immutables = editor.immutables;\n                    editor.value(dialog.find(textarea).val());\n                    options.deserialization.immutables = undefined;\n                    close(e);\n                    if (that.change) {\n                        that.change();\n                    }\n                    editor.trigger('change');\n                }\n                function close(e) {\n                    e.preventDefault();\n                    dialog.data('kendoWindow').destroy();\n                    if (editor.immutables) {\n                        editor.immutables.serializedImmutables = {};\n                    }\n                    editor.focus();\n                }\n                this.createDialog(dialog, {\n                    title: messages.viewHtml,\n                    close: close,\n                    visible: false\n                }).find(textarea).val(content).end().find('.k-dialog-update').click(apply).end().find('.k-dialog-close').click(close).end().data('kendoWindow').center().open();\n                dialog.find(textarea).focus();\n            }\n        });\n        extend(ViewHtmlCommand, {\n            template: '<div class=\\'k-editor-dialog k-popup-edit-form k-viewhtml-dialog\\'>' + '<div class=\\'k-edit-form-container\\'></div>' + '<textarea class=\\'k-editor-textarea k-input\\'></textarea>' + '<div class=\\'k-edit-buttons k-state-default\\'>' + '<button class=\\'k-dialog-update k-button k-primary\\'>#: dialogUpdate #</button>' + '<button class=\\'k-dialog-close k-button\\'>#: dialogCancel #</button>' + '</div>' + '</div>' + '</div>',\n            indent: function (content) {\n                return content.replace(/<\\/(p|li|ul|ol|h[1-6]|table|tr|td|th)>/gi, '</$1>\\n').replace(/<(ul|ol)([^>]*)><li/gi, '<$1$2>\\n<li').replace(/<br \\/>/gi, '<br />\\n').replace(/\\n$/, '');\n            }\n        });\n        kendo.ui.editor.ViewHtmlCommand = ViewHtmlCommand;\n        Editor.EditorUtils.registerTool('viewHtml', new Tool({\n            command: ViewHtmlCommand,\n            template: new ToolTemplate({\n                template: EditorUtils.buttonTemplate,\n                title: 'View HTML'\n            })\n        }));\n    }(window.kendo.jQuery));\n}, typeof define == 'function' && define.amd ? define : function (a1, a2, a3) {\n    (a3 || a2)();\n}));\n(function (f, define) {\n    define('editor/formatting', ['editor/viewhtml'], f);\n}(function () {\n    (function ($) {\n        var kendo = window.kendo, Editor = kendo.ui.editor, Tool = Editor.Tool, ToolTemplate = Editor.ToolTemplate, DelayedExecutionTool = Editor.DelayedExecutionTool, Command = Editor.Command, dom = Editor.Dom, EditorUtils = Editor.EditorUtils, RangeUtils = Editor.RangeUtils, registerTool = EditorUtils.registerTool;\n        var FormattingTool = DelayedExecutionTool.extend({\n            init: function (options) {\n                var that = this;\n                Tool.fn.init.call(that, kendo.deepExtend({}, that.options, options));\n                that.type = 'kendoSelectBox';\n                that.finder = {\n                    getFormat: function () {\n                        return '';\n                    }\n                };\n            },\n            options: {\n                items: [\n                    {\n                        text: 'Paragraph',\n                        value: 'p'\n                    },\n                    {\n                        text: 'Quotation',\n                        value: 'blockquote'\n                    },\n                    {\n                        text: 'Heading 1',\n                        value: 'h1'\n                    },\n                    {\n                        text: 'Heading 2',\n                        value: 'h2'\n                    },\n                    {\n                        text: 'Heading 3',\n                        value: 'h3'\n                    },\n                    {\n                        text: 'Heading 4',\n                        value: 'h4'\n                    },\n                    {\n                        text: 'Heading 5',\n                        value: 'h5'\n                    },\n                    {\n                        text: 'Heading 6',\n                        value: 'h6'\n                    }\n                ],\n                width: 110\n            },\n            toFormattingItem: function (item) {\n                var value = item.value;\n                if (!value) {\n                    return item;\n                }\n                if (item.tag || item.className) {\n                    return item;\n                }\n                var dot = value.indexOf('.');\n                if (dot === 0) {\n                    item.className = value.substring(1);\n                } else if (dot == -1) {\n                    item.tag = value;\n                } else {\n                    item.tag = value.substring(0, dot);\n                    item.className = value.substring(dot + 1);\n                }\n                return item;\n            },\n            command: function (args) {\n                var that = this;\n                var item = args.value;\n                item = this.toFormattingItem(item);\n                return new Editor.FormatCommand({\n                    range: args.range,\n                    formatter: function () {\n                        var formatter, tags = (item.tag || item.context || 'span').split(','), format = [{\n                                    tags: tags,\n                                    attr: { className: item.className || '' }\n                                }];\n                        if ($.inArray(tags[0], dom.inlineElements) >= 0) {\n                            formatter = new Editor.GreedyInlineFormatter(format);\n                        } else {\n                            formatter = new Editor.GreedyBlockFormatter(format);\n                        }\n                        formatter.editor = that.editor;\n                        return formatter;\n                    }\n                });\n            },\n            initialize: function (ui, initOptions) {\n                var editor = initOptions.editor;\n                var options = this.options;\n                var toolName = options.name;\n                var that = this;\n                that.editor = editor;\n                ui.width(options.width);\n                ui.kendoSelectBox({\n                    dataTextField: 'text',\n                    dataValueField: 'value',\n                    dataSource: options.items || editor.options[toolName],\n                    title: editor.options.messages[toolName],\n                    autoSize: true,\n                    change: function () {\n                        var dataItem = this.dataItem();\n                        if (dataItem) {\n                            Tool.exec(editor, toolName, dataItem.toJSON());\n                        }\n                    },\n                    dataBound: function () {\n                        var i, items = this.dataSource.data();\n                        for (i = 0; i < items.length; i++) {\n                            items[i] = that.toFormattingItem(items[i]);\n                        }\n                    },\n                    highlightFirst: false,\n                    template: kendo.template('<span unselectable=\"on\" style=\"display:block;#=(data.style||\"\")#\">#:data.text#</span>')\n                });\n                ui.addClass('k-decorated').closest('.k-widget').removeClass('k-' + toolName).find('*').addBack().attr('unselectable', 'on');\n            },\n            getFormattingValue: function (items, nodes) {\n                for (var i = 0; i < items.length; i++) {\n                    var item = items[i];\n                    var tag = item.tag || item.context || '';\n                    var className = item.className ? '.' + item.className : '';\n                    var selector = tag + className;\n                    var element = $(nodes[0]).closest(selector)[0];\n                    if (!element) {\n                        continue;\n                    }\n                    if (nodes.length == 1) {\n                        return item.value;\n                    }\n                    for (var n = 1; n < nodes.length; n++) {\n                        if (!$(nodes[n]).closest(selector)[0]) {\n                            break;\n                        } else if (n == nodes.length - 1) {\n                            return item.value;\n                        }\n                    }\n                }\n                return '';\n            },\n            update: function (ui, nodes) {\n                var selectBox = $(ui).data(this.type);\n                if (!selectBox) {\n                    return;\n                }\n                var dataSource = selectBox.dataSource, items = dataSource.data(), i, context, ancestor = dom.commonAncestor.apply(null, nodes);\n                if (ancestor != dom.closestEditable(ancestor) && this._ancestor == ancestor) {\n                    return;\n                } else {\n                    this._ancestor = ancestor;\n                }\n                for (i = 0; i < items.length; i++) {\n                    context = items[i].context;\n                    items[i].visible = !context || !!$(ancestor).closest(context).length;\n                }\n                dataSource.filter([{\n                        field: 'visible',\n                        operator: 'eq',\n                        value: true\n                    }]);\n                DelayedExecutionTool.fn.update.call(this, ui, nodes);\n                selectBox.value(this.getFormattingValue(dataSource.view(), nodes));\n                selectBox.wrapper.toggleClass('k-state-disabled', !dataSource.view().length);\n            },\n            destroy: function () {\n                this._ancestor = null;\n            }\n        });\n        var CleanFormatCommand = Command.extend({\n            exec: function () {\n                var range = this.lockRange(true);\n                this.tagsToClean = this.options.remove || 'strong,em,span,sup,sub,del,b,i,u,font'.split(',');\n                RangeUtils.wrapSelectedElements(range);\n                var nodes = RangeUtils.mapAll(range, function (node) {\n                    return node;\n                });\n                for (var c = nodes.length - 1; c >= 0; c--) {\n                    var node = nodes[c];\n                    if (!this.immutableParent(node)) {\n                        this.clean(node);\n                    }\n                }\n                this.releaseRange(range);\n            },\n            clean: function (node) {\n                if (!node || dom.isMarker(node)) {\n                    return;\n                }\n                var name = dom.name(node);\n                if (name == 'ul' || name == 'ol') {\n                    var listFormatter = new Editor.ListFormatter(name);\n                    var prev = node.previousSibling;\n                    var next = node.nextSibling;\n                    listFormatter.unwrap(node);\n                    for (; prev && prev != next; prev = prev.nextSibling) {\n                        this.clean(prev);\n                    }\n                } else if (name == 'blockquote') {\n                    dom.changeTag(node, 'p');\n                } else if (node.nodeType == 1 && !dom.insignificant(node)) {\n                    for (var i = node.childNodes.length - 1; i >= 0; i--) {\n                        this.clean(node.childNodes[i]);\n                    }\n                    node.removeAttribute('style');\n                    node.removeAttribute('class');\n                } else {\n                    unwrapListItem(node);\n                }\n                if ($.inArray(name, this.tagsToClean) > -1) {\n                    dom.unwrap(node);\n                }\n            },\n            immutableParent: function (node) {\n                return this.immutables() && Editor.Immutables.immutableParent(node);\n            }\n        });\n        function unwrapListItem(node) {\n            var li = dom.closestEditableOfType(node, ['li']);\n            if (li) {\n                var listFormatter = new Editor.ListFormatter(dom.name(li.parentNode));\n                var range = kendo.ui.editor.W3CRange.fromNode(node);\n                range.selectNode(li);\n                listFormatter.toggle(range);\n            }\n        }\n        $.extend(Editor, {\n            FormattingTool: FormattingTool,\n            CleanFormatCommand: CleanFormatCommand\n        });\n        registerTool('formatting', new FormattingTool({\n            template: new ToolTemplate({\n                template: EditorUtils.dropDownListTemplate,\n                title: 'Format'\n            })\n        }));\n        registerTool('cleanFormatting', new Tool({\n            command: CleanFormatCommand,\n            template: new ToolTemplate({\n                template: EditorUtils.buttonTemplate,\n                title: 'Clean formatting'\n            })\n        }));\n    }(window.kendo.jQuery));\n}, typeof define == 'function' && define.amd ? define : function (a1, a2, a3) {\n    (a3 || a2)();\n}));\n(function (f, define) {\n    define('editor/toolbar', ['editor/formatting'], f);\n}(function () {\n    (function ($, undefined) {\n        var kendo = window.kendo;\n        var ui = kendo.ui;\n        var editorNS = ui.editor;\n        var Widget = ui.Widget;\n        var extend = $.extend;\n        var proxy = $.proxy;\n        var keys = kendo.keys;\n        var NS = '.kendoEditor';\n        var EditorUtils = kendo.ui.editor.EditorUtils;\n        var ToolTemplate = kendo.ui.editor.ToolTemplate;\n        var Tool = kendo.ui.editor.Tool;\n        var outerWidth = kendo._outerWidth;\n        var outerHeight = kendo._outerHeight;\n        var OVERFLOWANCHOR = 'overflowAnchor';\n        var focusable = '.k-tool-group:visible a.k-tool:not(.k-state-disabled),' + '.k-tool.k-overflow-anchor:visible,' + '.k-tool-group:visible .k-widget.k-colorpicker,' + '.k-tool-group:visible .k-selectbox,' + '.k-tool-group:visible .k-dropdown,' + '.k-tool-group:visible .k-combobox .k-input';\n        var toolNamesByCssClass = {\n            'k-i-sup-script': 'superscript',\n            'k-i-sub-script': 'subscript',\n            'k-i-align-left': 'justifyLeft',\n            'k-i-align-center': 'justifyCenter',\n            'k-i-align-right': 'justifyRight',\n            'k-i-align-justify': 'justifyFull',\n            'k-i-list-unordered': 'insertUnorderedList',\n            'k-i-list-ordered': 'insertOrderedList',\n            'k-i-login': 'import',\n            'k-i-indent-increase': 'indent',\n            'k-i-indent-decrease': 'outdent',\n            'k-i-link-horizontal': 'createLink',\n            'k-i-unlink-horizontal': 'unlink',\n            'k-i-image': 'insertImage',\n            'k-i-file-add': 'insertFile',\n            'k-i-html': 'viewHtml',\n            'k-i-foreground-color': 'foreColor',\n            'k-i-paint': 'backColor',\n            'k-i-table-insert': 'createTable',\n            'k-i-table-column-insert-left': 'addColumnLeft',\n            'k-i-table-column-insert-right': 'addColumnRight',\n            'k-i-table-row-insert-above': 'addRowAbove',\n            'k-i-table-row-insert-below': 'addRowBelow',\n            'k-i-table-row-delete': 'deleteRow',\n            'k-i-table-column-delete': 'deleteColumn',\n            'k-i-table-properties': 'tableWizard',\n            'k-i-table-wizard': 'tableWizardInsert',\n            'k-i-clear-css': 'cleanFormatting'\n        };\n        var OverflowAnchorTool = Tool.extend({\n            initialize: function (ui, options) {\n                ui.attr({ unselectable: 'on' });\n                var toolbar = options.editor.toolbar;\n                ui.attr('aria-controls', options.editor.element.attr('id')).on('click', $.proxy(function () {\n                    this.overflowPopup.toggle();\n                }, toolbar));\n            },\n            options: { name: OVERFLOWANCHOR },\n            command: $.noop,\n            update: $.noop,\n            destroy: $.noop\n        });\n        EditorUtils.registerTool(OVERFLOWANCHOR, new OverflowAnchorTool({\n            key: '',\n            ctrl: true,\n            template: new ToolTemplate({ template: EditorUtils.overflowAnchorTemplate })\n        }));\n        var Toolbar = Widget.extend({\n            init: function (element, options) {\n                var that = this;\n                options = extend({}, options, { name: 'EditorToolbar' });\n                Widget.fn.init.call(that, element, options);\n                if (options.popup) {\n                    that._initPopup();\n                }\n                if (options.resizable && options.resizable.toolbar) {\n                    that._resizeHandler = kendo.onResize(function () {\n                        that.resize();\n                    });\n                    that.element.addClass('k-toolbar-resizable');\n                }\n            },\n            events: ['execute'],\n            groups: {\n                basic: [\n                    'bold',\n                    'italic',\n                    'underline',\n                    'strikethrough'\n                ],\n                scripts: [\n                    'subscript',\n                    'superscript'\n                ],\n                alignment: [\n                    'justifyLeft',\n                    'justifyCenter',\n                    'justifyRight',\n                    'justifyFull'\n                ],\n                links: [\n                    'insertImage',\n                    'insertFile',\n                    'createLink',\n                    'unlink'\n                ],\n                lists: [\n                    'insertUnorderedList',\n                    'insertOrderedList',\n                    'indent',\n                    'outdent'\n                ],\n                tables: [\n                    'createTable',\n                    'addColumnLeft',\n                    'addColumnRight',\n                    'addRowAbove',\n                    'addRowBelow',\n                    'deleteRow',\n                    'deleteColumn'\n                ],\n                advanced: [\n                    'viewHtml',\n                    'cleanFormatting',\n                    'print',\n                    'pdf',\n                    'exportAs',\n                    'import'\n                ],\n                fonts: [\n                    'fontName',\n                    'fontSize'\n                ],\n                colors: [\n                    'foreColor',\n                    'backColor'\n                ]\n            },\n            overflowFlaseTools: [\n                'formatting',\n                'fontName',\n                'fontSize',\n                'foreColor',\n                'backColor',\n                'insertHtml'\n            ],\n            _initPopup: function () {\n                var that = this;\n                this.window = $(this.element).wrap('<div class=\\'editorToolbarWindow k-header\\' />').parent().prepend('<button class=\\'k-button k-bare k-editortoolbar-dragHandle\\'><span class=\\'k-icon k-i-handler-drag\\' /></button>').kendoWindow({\n                    title: false,\n                    resizable: false,\n                    draggable: { dragHandle: '.k-editortoolbar-dragHandle' },\n                    animation: {\n                        open: { effects: 'fade:in' },\n                        close: { effects: 'fade:out' }\n                    },\n                    minHeight: 42,\n                    visible: false,\n                    autoFocus: false,\n                    actions: [],\n                    dragend: function () {\n                        this._moved = true;\n                    }\n                }).on('mousedown', function (e) {\n                    if (!$(e.target).is('.k-icon')) {\n                        that.preventPopupHide = true;\n                    }\n                }).on('focusout', function () {\n                    that.options.editor.element.focusout();\n                }).data('kendoWindow');\n            },\n            _toggleOverflowStyles: function (element, show) {\n                element.find('li').toggleClass('k-item k-state-default', show).find('.k-tool:not(.k-state-disabled),.k-overflow-button').toggleClass('k-overflow-button k-button', show);\n            },\n            _initOverflowPopup: function (ui) {\n                var that = this;\n                var popupTemplate = '<ul class=\\'k-editor-overflow-popup k-overflow-container k-list-container\\'></ul>';\n                that.overflowPopup = $(popupTemplate).appendTo('body').kendoPopup({\n                    anchor: ui,\n                    origin: 'bottom right',\n                    position: 'top right',\n                    copyAnchorStyles: false,\n                    open: function (e) {\n                        if (this.element.is(':empty')) {\n                            e.preventDefault();\n                        }\n                        that._toggleOverflowStyles(this.element, true);\n                        ui.attr('aria-expanded', true);\n                    },\n                    close: function () {\n                        ui.attr('aria-expanded', false);\n                    },\n                    activate: proxy(that.focusOverflowPopup, that)\n                }).data('kendoPopup');\n            },\n            items: function () {\n                var isResizable = this.options.resizable && this.options.resizable.toolbar, popup, result;\n                result = this.element.children().find('> *, select');\n                if (isResizable) {\n                    popup = this.overflowPopup;\n                    result = result.add(popup.element.children().find('> *'));\n                }\n                return result;\n            },\n            focused: function () {\n                return this.element.find('.k-state-focused').length > 0 || this.preventPopupHide || this.overflowPopup && this.overflowPopup.visible();\n            },\n            toolById: function (name) {\n                var id, tools = this.tools;\n                for (id in tools) {\n                    if (id.toLowerCase() == name) {\n                        return tools[id];\n                    }\n                }\n            },\n            toolGroupFor: function (toolName) {\n                var i, groups = this.groups;\n                if (this.isCustomTool(toolName)) {\n                    return 'custom';\n                }\n                for (i in groups) {\n                    if ($.inArray(toolName, groups[i]) >= 0) {\n                        return i;\n                    }\n                }\n            },\n            bindTo: function (editor) {\n                var that = this, window = that.window;\n                if (that._editor) {\n                    that._editor.unbind('select', proxy(that.resize, that));\n                }\n                that._editor = editor;\n                if (that.options.resizable && that.options.resizable.toolbar) {\n                    editor.options.tools.push(OVERFLOWANCHOR);\n                }\n                that.tools = that.expandTools(editor.options.tools);\n                that.render();\n                that.element.find('.k-combobox .k-input').keydown(function (e) {\n                    var combobox = $(this).closest('.k-combobox').data('kendoComboBox'), key = e.keyCode;\n                    if (key == keys.RIGHT || key == keys.LEFT) {\n                        combobox.close();\n                    } else if (key == keys.DOWN) {\n                        if (!combobox.dropDown.isOpened()) {\n                            e.stopImmediatePropagation();\n                            combobox.open();\n                        }\n                    }\n                });\n                that._attachEvents();\n                that.items().each(function initializeTool() {\n                    var toolName = that._toolName(this), tool = toolName !== 'moreVertical' ? that.tools[toolName] : that.tools.overflowAnchor, options = tool && tool.options, messages = editor.options.messages, description = options && options.tooltip || messages[toolName], ui = $(this);\n                    if (!tool || !tool.initialize) {\n                        return;\n                    }\n                    if (toolName == 'fontSize' || toolName == 'fontName') {\n                        var inheritText = messages[toolName + 'Inherit'];\n                        ui.find('input').val(inheritText).end().find('span.k-input').text(inheritText).end();\n                    }\n                    tool.initialize(ui, {\n                        title: that._appendShortcutSequence(description, tool),\n                        editor: that._editor\n                    });\n                    ui.closest('.k-widget', that.element).addClass('k-editor-widget');\n                    ui.closest('.k-colorpicker', that.element).next('.k-colorpicker').addClass('k-editor-widget');\n                });\n                editor.bind('select', proxy(that.resize, that));\n                that.update();\n                if (window) {\n                    window.wrapper.css({\n                        top: '',\n                        left: '',\n                        width: ''\n                    });\n                }\n            },\n            show: function () {\n                var that = this, window = that.window, editorOptions = that.options.editor, wrapper, editorElement, editorOffset, browser = kendo.support.browser;\n                if (window) {\n                    wrapper = window.wrapper;\n                    editorElement = editorOptions.element;\n                    if (!wrapper.is(':visible') || !that.window.options.visible) {\n                        if (!wrapper[0].style.width) {\n                            wrapper.width(outerWidth(editorElement) - parseInt(wrapper.css('border-left-width'), 10) - parseInt(wrapper.css('border-right-width'), 10));\n                        }\n                        if (!window._moved) {\n                            editorOffset = editorElement.offset();\n                            wrapper.css({\n                                top: Math.max(0, parseInt(editorOffset.top, 10) - outerHeight(wrapper) - parseInt(that.window.element.css('padding-bottom'), 10)),\n                                left: Math.max(0, parseInt(editorOffset.left, 10))\n                            });\n                        }\n                        if ((browser.msie || browser.edge) && that._overlaps(editorElement)) {\n                            setTimeout(function () {\n                                window.open();\n                            }, 0);\n                        } else {\n                            window.open();\n                        }\n                    }\n                }\n            },\n            _overlaps: function (box) {\n                var toolbarWrapper = this.window.wrapper, toolbarWrapperOffset = toolbarWrapper.offset(), toolbarWrapperLeft = toolbarWrapperOffset.left, toolbarWrapperTop = toolbarWrapperOffset.top, boxOffset = box.offset(), boxOffsetLeft = boxOffset.left, boxOffsetTop = boxOffset.top;\n                return !(boxOffsetLeft + box.width() < toolbarWrapperLeft || boxOffsetLeft > toolbarWrapperLeft + toolbarWrapper.width() || boxOffsetTop + box.height() < toolbarWrapperTop || boxOffsetTop > toolbarWrapperTop + toolbarWrapper.height());\n            },\n            hide: function () {\n                if (this.window) {\n                    this.window.close();\n                }\n            },\n            focus: function () {\n                var TABINDEX = 'tabIndex';\n                var element = this.element;\n                var tabIndex = this._editor.element.attr(TABINDEX);\n                element.attr(TABINDEX, tabIndex || 0).focus().find(focusable).first().focus();\n                if (!tabIndex && tabIndex !== 0) {\n                    element.removeAttr(TABINDEX);\n                }\n            },\n            focusOverflowPopup: function () {\n                var TABINDEX = 'tabIndex';\n                var element = this.overflowPopup.element;\n                var tabIndex = this._editor.element.attr(TABINDEX);\n                element.closest('.k-animation-container').addClass('k-overflow-wrapper');\n                element.attr(TABINDEX, tabIndex || 0).find(focusable).first().focus();\n                if (!tabIndex && tabIndex !== 0) {\n                    element.removeAttr(TABINDEX);\n                }\n            },\n            _appendShortcutSequence: function (localizedText, tool) {\n                if (!tool.key) {\n                    return localizedText;\n                }\n                var res = localizedText + ' (';\n                if (tool.ctrl) {\n                    res += 'Ctrl + ';\n                }\n                if (tool.shift) {\n                    res += 'Shift + ';\n                }\n                if (tool.alt) {\n                    res += 'Alt + ';\n                }\n                res += tool.key + ')';\n                return res;\n            },\n            _nativeTools: [\n                'insertLineBreak',\n                'insertParagraph',\n                'redo',\n                'undo',\n                'autoLink'\n            ],\n            tools: {},\n            isCustomTool: function (toolName) {\n                return !(toolName in kendo.ui.Editor.defaultTools);\n            },\n            expandTools: function (tools) {\n                var currentTool, i, nativeTools = this._nativeTools, options, defaultTools = kendo.deepExtend({}, kendo.ui.Editor.defaultTools), result = {}, name;\n                for (i = 0; i < tools.length; i++) {\n                    currentTool = tools[i];\n                    name = currentTool.name;\n                    if ($.isPlainObject(currentTool)) {\n                        if (name && defaultTools[name]) {\n                            result[name] = extend({}, defaultTools[name]);\n                            extend(result[name].options, currentTool);\n                        } else {\n                            options = extend({\n                                cssClass: 'k-i-gear',\n                                type: 'button',\n                                title: ''\n                            }, currentTool);\n                            if (!options.name) {\n                                options.name = 'custom';\n                            }\n                            options.cssClass = 'k-' + options.name;\n                            if (!options.template && options.type == 'button') {\n                                options.template = editorNS.EditorUtils.buttonTemplate;\n                                options.title = options.title || options.tooltip;\n                            }\n                            result[name] = { options: options };\n                        }\n                    } else if (defaultTools[currentTool]) {\n                        result[currentTool] = defaultTools[currentTool];\n                    }\n                }\n                for (i = 0; i < nativeTools.length; i++) {\n                    if (!result[nativeTools[i]]) {\n                        result[nativeTools[i]] = defaultTools[nativeTools[i]];\n                    }\n                }\n                return result;\n            },\n            render: function () {\n                var that = this, tools = that.tools, options, template, toolElement, toolName, editorElement = that._editor.element, element = that.element.empty(), groupName, newGroupName, toolConfig = that._editor.options.tools, browser = kendo.support.browser, group, i, groupPosition = 0, resizable = that.options.resizable && that.options.resizable.toolbar, overflowFlaseTools = this.overflowFlaseTools;\n                function stringify(template) {\n                    var result;\n                    if (template.getHtml) {\n                        result = template.getHtml();\n                    } else {\n                        if (!$.isFunction(template)) {\n                            template = kendo.template(template);\n                        }\n                        result = template(options);\n                    }\n                    return $.trim(result);\n                }\n                function endGroup() {\n                    if (group.children().length) {\n                        if (resizable) {\n                            group.data('position', groupPosition);\n                            groupPosition++;\n                        }\n                        group.appendTo(element);\n                    }\n                }\n                function startGroup(toolName) {\n                    if (toolName !== OVERFLOWANCHOR) {\n                        group = $('<li class=\\'k-tool-group\\' role=\\'presentation\\' />');\n                        group.data('overflow', $.inArray(toolName, overflowFlaseTools) === -1 ? true : false);\n                    } else {\n                        group = $('<li class=\\'k-overflow-tools\\' />');\n                    }\n                }\n                element.empty();\n                if (toolConfig.length) {\n                    toolName = toolConfig[0].name || toolConfig[0];\n                }\n                startGroup(toolName, overflowFlaseTools);\n                for (i = 0; i < toolConfig.length; i++) {\n                    toolName = toolConfig[i].name || toolConfig[i];\n                    options = tools[toolName] && tools[toolName].options;\n                    if (!options && $.isPlainObject(toolName)) {\n                        options = toolName;\n                    }\n                    template = options && options.template;\n                    if (toolName == 'break') {\n                        endGroup();\n                        $('<li class=\\'k-row-break\\' />').appendTo(that.element);\n                        startGroup(toolName, overflowFlaseTools);\n                    }\n                    if (!template) {\n                        continue;\n                    }\n                    newGroupName = that.toolGroupFor(toolName);\n                    if (groupName != newGroupName || toolName == OVERFLOWANCHOR) {\n                        endGroup();\n                        startGroup(toolName, overflowFlaseTools);\n                        groupName = newGroupName;\n                    }\n                    if (toolName == OVERFLOWANCHOR) {\n                        template.options.title = that.options.messages.overflowAnchor;\n                    }\n                    template = stringify(template);\n                    toolElement = $(template).appendTo(group);\n                    if (newGroupName == 'custom') {\n                        endGroup();\n                        startGroup(toolName, overflowFlaseTools);\n                    }\n                    if (options.exec && toolElement.hasClass('k-tool')) {\n                        toolElement.click(proxy(options.exec, editorElement[0]));\n                    }\n                }\n                endGroup();\n                $(that.element).children(':has(> .k-tool)').addClass('k-button-group');\n                if (that.options.popup && browser.msie && browser.version < 9) {\n                    that.window.wrapper.find('*').attr('unselectable', 'on');\n                }\n                that.updateGroups();\n                if (resizable) {\n                    that._initOverflowPopup(that.element.find('.k-overflow-anchor'));\n                }\n                that.angular('compile', function () {\n                    return { elements: that.element };\n                });\n            },\n            updateGroups: function () {\n                $(this.element).children().each(function () {\n                    $(this).children().filter(function () {\n                        return !$(this).hasClass('k-state-disabled');\n                    }).removeClass('k-group-end').first().addClass('k-group-start').end().last().addClass('k-group-end').end();\n                });\n            },\n            decorateFrom: function (body) {\n                this.items().filter('.k-decorated').each(function () {\n                    var selectBox = $(this).data('kendoSelectBox');\n                    if (selectBox) {\n                        selectBox.decorate(body);\n                    }\n                });\n            },\n            destroy: function () {\n                Widget.fn.destroy.call(this);\n                var id, tools = this.tools;\n                for (id in tools) {\n                    if (tools[id].destroy) {\n                        tools[id].destroy();\n                    }\n                }\n                if (this.window) {\n                    this.window.destroy();\n                }\n                if (this._resizeHandler) {\n                    kendo.unbindResize(this._resizeHandler);\n                }\n                if (this.overflowPopup) {\n                    this.overflowPopup.destroy();\n                }\n            },\n            _attachEvents: function () {\n                var that = this, popupElement = that.overflowPopup ? that.overflowPopup.element : $([]);\n                that.attachToolsEvents(that.element.add(popupElement));\n            },\n            attachToolsEvents: function (element) {\n                var that = this, buttons = '[role=button].k-tool', enabledButtons = buttons + ':not(.k-state-disabled)', disabledButtons = buttons + '.k-state-disabled', dropdown = '.k-dropdown', colorpicker = '.k-colorpicker', editorTools = [\n                        buttons,\n                        dropdown,\n                        colorpicker\n                    ].join(',');\n                element.off(NS).on('mouseenter' + NS, enabledButtons, function () {\n                    $(this).addClass('k-state-hover');\n                }).on('mouseleave' + NS, enabledButtons, function () {\n                    $(this).removeClass('k-state-hover');\n                }).on('mousedown' + NS, editorTools, function (e) {\n                    e.preventDefault();\n                }).on('keydown' + NS, focusable, function (e) {\n                    var current = this;\n                    var resizable = that.options.resizable && that.options.resizable.toolbar;\n                    var direction = kendo.support.isRtl(that.element) ? -1 : 1;\n                    var focusableItems;\n                    var focusElement, currentContainer, keyCode = e.keyCode;\n                    function move(direction, container, constrain) {\n                        var tools = container.find(focusable);\n                        var index = tools.index(current) + direction;\n                        if (constrain) {\n                            index = Math.max(0, Math.min(tools.length - 1, index));\n                        }\n                        return tools[index];\n                    }\n                    if (keyCode == keys.RIGHT || keyCode == keys.LEFT) {\n                        if (!$(current).is('.k-dropdown')) {\n                            focusElement = move(keyCode == keys.RIGHT ? 1 * direction : -1 * direction, that.element, true);\n                        } else {\n                            focusElement = $(current);\n                        }\n                    } else if (resizable && (keyCode == keys.UP || keyCode == keys.DOWN)) {\n                        focusElement = move(keyCode == keys.DOWN ? 1 : -1, that.overflowPopup.element, true);\n                    } else if (keyCode == keys.HOME) {\n                        focusElement = that.element.find(focusable)[0];\n                        e.preventDefault();\n                    } else if (keyCode == keys.END) {\n                        focusableItems = that.element.find(focusable).filter(function () {\n                            return $(this).css('visibility') !== 'hidden';\n                        });\n                        focusElement = focusableItems[focusableItems.length - 1];\n                        e.preventDefault();\n                    } else if (keyCode == keys.ESC) {\n                        if (that.overflowPopup && that.overflowPopup.visible()) {\n                            that.overflowPopup.close();\n                        }\n                        focusElement = that._editor;\n                    } else if (keyCode == keys.TAB && !(e.ctrlKey || e.altKey)) {\n                        if (resizable) {\n                            currentContainer = $(current.parentElement).hasClass('k-overflow-tool-group') ? that.overflowPopup.element : that.element;\n                        } else {\n                            currentContainer = that.element;\n                        }\n                        if (e.shiftKey) {\n                            focusElement = move(-1, currentContainer);\n                        } else {\n                            focusElement = move(1, currentContainer);\n                            if (!focusElement || $(focusElement).closest('.k-overflow-tools').css('visibility') === 'hidden') {\n                                focusElement = that._editor;\n                            }\n                        }\n                    }\n                    if (focusElement) {\n                        e.preventDefault();\n                        focusElement.focus();\n                    }\n                    if ((keyCode === keys.ENTER || keyCode === keys.SPACEBAR) && $(current).is('a') && !$(current).attr('href')) {\n                        that._executeToolCommand(current, e);\n                    }\n                }).on('click' + NS, enabledButtons, function (e) {\n                    that._executeToolCommand(this, e);\n                }).on('click' + NS, disabledButtons, function (e) {\n                    e.preventDefault();\n                });\n            },\n            _executeToolCommand: function (toolElement, e) {\n                var that = this;\n                var button = $(toolElement);\n                e.preventDefault();\n                e.stopPropagation();\n                button.removeClass('k-state-hover');\n                if (!button.is('[data-popup]')) {\n                    that._editor.exec(that._toolName(toolElement));\n                }\n            },\n            _toolName: function (element) {\n                if (!element) {\n                    return;\n                }\n                var className = element.className;\n                if (/k-tool\\b/i.test(className)) {\n                    className = element.firstChild.className;\n                }\n                var tool = $.grep(className.split(' '), function (x) {\n                    return !/^k-(widget|tool|tool-icon|icon|state-hover|header|combobox|dropdown|selectbox|colorpicker)$/i.test(x);\n                });\n                if (tool[0]) {\n                    var toolname = tool[0];\n                    if (toolNamesByCssClass[toolname]) {\n                        toolname = toolNamesByCssClass[toolname];\n                    }\n                    if (toolname.indexOf('k-i-') >= 0) {\n                        return kendo.toCamelCase(toolname.substring(toolname.indexOf('k-i-') + 4));\n                    } else {\n                        return toolname.substring(toolname.lastIndexOf('-') + 1);\n                    }\n                }\n                return 'custom';\n            },\n            refreshTools: function () {\n                var that = this, editorNS = kendo.ui.editor, editor = that._editor, range = editor.getRange(), nodes = editorNS.RangeUtils.textNodes(range), immutables = editor.options.immutables, immutablesContext = that._immutablesContext(range);\n                nodes = editorNS.Dom.filterBy(nodes, editorNS.Dom.htmlIndentSpace, true);\n                if (!nodes.length) {\n                    nodes = [range.startContainer];\n                }\n                that.items().each(function () {\n                    var tool = that.tools[that._toolName(this)];\n                    if (tool) {\n                        var ui = $(this);\n                        if (tool.update) {\n                            tool.update(ui, nodes);\n                        }\n                        if (immutables) {\n                            that._updateImmutablesState(tool, ui, immutablesContext);\n                        }\n                    }\n                });\n                this.update();\n            },\n            _immutablesContext: function (range) {\n                if (this._editor.options.immutables) {\n                    var editorNS = kendo.ui.editor;\n                    if (range.collapsed) {\n                        return editorNS.Immutables.immutablesContext(range);\n                    } else {\n                        return editorNS.RangeUtils.editableTextNodes(range).length === 0;\n                    }\n                }\n            },\n            _updateImmutablesState: function (tool, ui, immutablesContext) {\n                var name = tool.name;\n                var uiElement = ui;\n                var trackImmutables = tool.options.trackImmutables;\n                if (trackImmutables === undefined) {\n                    trackImmutables = $.inArray(name, editorNS.Immutables.toolsToBeUpdated) > -1;\n                }\n                if (trackImmutables) {\n                    var display = immutablesContext ? 'none' : '';\n                    if (!ui.is('.k-tool')) {\n                        var uiData = ui.data();\n                        for (var key in uiData) {\n                            if (key.match(/^kendo[A-Z][a-zA-Z]*/)) {\n                                var widget = uiData[key];\n                                uiElement = widget.wrapper;\n                                break;\n                            }\n                        }\n                    }\n                    uiElement.css('display', display);\n                    var groupUi = uiElement.closest('li');\n                    if (groupUi.children(':visible').length === 0) {\n                        groupUi.css('display', display);\n                    }\n                }\n            },\n            update: function () {\n                this.updateGroups();\n            },\n            _resize: function (e) {\n                var containerWidth = e.width;\n                var resizable = this.options.resizable && this.options.resizable.toolbar;\n                var popup = this.overflowPopup;\n                this.refreshTools();\n                if (!resizable) {\n                    return;\n                }\n                if (popup.visible()) {\n                    popup.close(true);\n                }\n                this._refreshWidths();\n                this._shrink(containerWidth);\n                this._stretch(containerWidth);\n                this._toggleOverflowStyles(this.element, false);\n                this._toggleOverflowStyles(this.overflowPopup.element, true);\n                this.element.children('li.k-overflow-tools').css('visibility', popup.element.is(':empty') ? 'hidden' : 'visible');\n            },\n            _refreshWidths: function () {\n                this.element.children('li').each(function (idx, element) {\n                    var group = $(element);\n                    group.data('outerWidth', outerWidth(group, true));\n                });\n            },\n            _shrink: function (width) {\n                var group, visibleGroups;\n                if (width < this._groupsWidth()) {\n                    visibleGroups = this._visibleGroups().filter(':not(.k-overflow-tools)');\n                    for (var i = visibleGroups.length - 1; i >= 0; i--) {\n                        group = visibleGroups.eq(i);\n                        if (width > this._groupsWidth()) {\n                            break;\n                        } else {\n                            this._hideGroup(group);\n                        }\n                    }\n                }\n            },\n            _stretch: function (width) {\n                var group, hiddenGroups;\n                if (width > this._groupsWidth()) {\n                    hiddenGroups = this._hiddenGroups();\n                    for (var i = 0; i < hiddenGroups.length; i++) {\n                        group = hiddenGroups.eq(i);\n                        if (width < this._groupsWidth() || !this._showGroup(group, width)) {\n                            break;\n                        }\n                    }\n                }\n            },\n            _hiddenGroups: function () {\n                var popup = this.overflowPopup;\n                var hiddenGroups = this.element.children('li.k-tool-group').filter(':hidden');\n                hiddenGroups = hiddenGroups.add(popup.element.children('li'));\n                hiddenGroups.sort(function (a, b) {\n                    return $(a).data('position') > $(b).data('position') ? 1 : -1;\n                });\n                return hiddenGroups;\n            },\n            _visibleGroups: function () {\n                return this.element.children('li.k-tool-group, li.k-overflow-tools').filter(':visible');\n            },\n            _groupsWidth: function () {\n                var width = 0;\n                this._visibleGroups().each(function () {\n                    width += $(this).data('outerWidth');\n                });\n                return Math.ceil(width);\n            },\n            _hideGroup: function (group) {\n                if (group.data('overflow')) {\n                    var popup = this.overflowPopup;\n                    group.detach().prependTo(popup.element).addClass('k-overflow-tool-group');\n                } else {\n                    group.hide();\n                }\n            },\n            _showGroup: function (group, width) {\n                var position, previous;\n                if (group.length && width > this._groupsWidth() + group.data('outerWidth')) {\n                    if (group.hasClass('k-overflow-tool-group')) {\n                        position = group.data('position');\n                        if (position === 0) {\n                            group.detach().prependTo(this.element);\n                        } else {\n                            previous = this.element.children().filter(function (idx, element) {\n                                return $(element).data('position') === position - 1;\n                            });\n                            group.detach().insertAfter(previous);\n                        }\n                        group.removeClass('k-overflow-tool-group');\n                    } else {\n                        group.show();\n                    }\n                    return true;\n                }\n                return false;\n            }\n        });\n        $.extend(editorNS, { Toolbar: Toolbar });\n    }(window.jQuery || window.kendo.jQuery));\n}, typeof define == 'function' && define.amd ? define : function (a1, a2, a3) {\n    (a3 || a2)();\n}));\n(function (f, define) {\n    define('editor/tables', ['editor/toolbar'], f);\n}(function () {\n    (function ($, undefined) {\n        var kendo = window.kendo, extend = $.extend, proxy = $.proxy, Editor = kendo.ui.editor, dom = Editor.Dom, EditorUtils = Editor.EditorUtils, RangeUtils = Editor.RangeUtils, Command = Editor.Command, NS = 'kendoEditor', ACTIVESTATE = 'k-state-active', SELECTEDSTATE = 'k-state-selected', Tool = Editor.Tool, ToolTemplate = Editor.ToolTemplate, InsertHtmlCommand = Editor.InsertHtmlCommand, BlockFormatFinder = Editor.BlockFormatFinder, registerTool = Editor.EditorUtils.registerTool, getTouches = kendo.getTouches;\n        var template = kendo.template;\n        var columnTemplate = '<td style=\\'width:#=width#%;\\'>#=content#</td>';\n        var tableFormatFinder = new BlockFormatFinder([{ tags: ['table'] }]);\n        var TableCommand = InsertHtmlCommand.extend({\n            init: function (options) {\n                var o = $.extend({\n                    postProcess: this.postProcess,\n                    skipCleaners: true\n                }, options || {});\n                InsertHtmlCommand.fn.init.call(this, o);\n            },\n            _tableHtml: function (rows, columns) {\n                rows = rows || 1;\n                columns = columns || 1;\n                var columnHtml = template(columnTemplate)({\n                    width: 100 / columns,\n                    content: Editor.emptyTableCellContent\n                });\n                var rowHeight = 100 / rows;\n                return '<table class=\\'k-table\\' data-last>' + new Array(rows + 1).join('<tr style=\\'height:' + rowHeight + '%;\\'>' + new Array(columns + 1).join(columnHtml) + '</tr>') + '</table>';\n            },\n            postProcess: function (editor, range) {\n                var insertedTable = $('table[data-last]', editor.document).removeAttr('data-last');\n                range.setStart(insertedTable.find('td')[0], 0);\n                range.collapse(true);\n                editor.selectRange(range);\n            },\n            exec: function () {\n                var options = this.options;\n                options.html = this._tableHtml(options.rows, options.columns);\n                InsertHtmlCommand.fn.exec.call(this);\n            }\n        });\n        var PopupTool = Tool.extend({\n            initialize: function (ui, options) {\n                Tool.fn.initialize.call(this, ui, options);\n                var popup = $(this.options.popupTemplate).appendTo('body').kendoPopup({\n                    anchor: ui,\n                    copyAnchorStyles: false,\n                    open: proxy(this._open, this),\n                    activate: proxy(this._activate, this),\n                    close: proxy(this._close, this)\n                }).data('kendoPopup');\n                ui.click(proxy(this._toggle, this)).keydown(proxy(this._keydown, this));\n                var editor = this._editor = options.editor;\n                this._popup = popup;\n                var tableWizard = new Editor.TableWizardTool({\n                    template: new ToolTemplate({\n                        template: EditorUtils.buttonTemplate,\n                        title: editor.options.messages.tableWizard\n                    }),\n                    command: Editor.TableWizardCommand,\n                    insertNewTable: true\n                });\n                registerTool('tableWizardInsert', tableWizard);\n                var twTool = $('<div class=\\'k-editor-toolbar\\'>' + tableWizard.options.template.getHtml() + '</div>');\n                twTool.appendTo(popup.element);\n                if (editor.toolbar) {\n                    editor.toolbar.attachToolsEvents(twTool);\n                }\n            },\n            popup: function () {\n                return this._popup;\n            },\n            _activate: $.noop,\n            _open: function () {\n                this._popup.options.anchor.addClass(ACTIVESTATE);\n            },\n            _close: function () {\n                this._popup.options.anchor.removeClass(ACTIVESTATE);\n            },\n            _keydown: function (e) {\n                var keys = kendo.keys;\n                var key = e.keyCode;\n                if (key == keys.DOWN && e.altKey) {\n                    this._popup.open();\n                } else if (key == keys.ESC) {\n                    this._popup.close();\n                }\n            },\n            _toggle: function (e) {\n                var button = $(e.target).closest('.k-tool');\n                if (!button.hasClass('k-state-disabled')) {\n                    this.popup().toggle();\n                }\n            },\n            update: function (ui) {\n                var popup = this.popup();\n                if (popup.wrapper && popup.wrapper.css('display') == 'block') {\n                    popup.close();\n                }\n                ui.removeClass('k-state-hover');\n            },\n            destroy: function () {\n                this._popup.destroy();\n            }\n        });\n        var InsertTableTool = PopupTool.extend({\n            init: function (options) {\n                this.cols = 8;\n                this.rows = 6;\n                PopupTool.fn.init.call(this, $.extend(options, {\n                    command: TableCommand,\n                    popupTemplate: '<div class=\\'k-ct-popup\\'>' + new Array(this.cols * this.rows + 1).join('<span class=\\'k-ct-cell k-state-disabled\\' />') + '<div class=\\'k-status\\'></div>' + '</div>'\n                }));\n            },\n            _activate: function () {\n                var that = this, element = that._popup.element, cells = element.find('.k-ct-cell'), firstCell = cells.eq(0), lastCell = cells.eq(cells.length - 1), start = kendo.getOffset(firstCell), end = kendo.getOffset(lastCell), cols = that.cols, rows = that.rows, cellWidth, cellHeight;\n                element.find('*').addBack().attr('unselectable', 'on');\n                end.left += lastCell[0].offsetWidth;\n                end.top += lastCell[0].offsetHeight;\n                cellWidth = (end.left - start.left) / cols;\n                cellHeight = (end.top - start.top) / rows;\n                function tableFromLocation(e) {\n                    var w = $(window);\n                    return {\n                        row: Math.floor((e.clientY + w.scrollTop() - start.top) / cellHeight) + 1,\n                        col: Math.floor((e.clientX + w.scrollLeft() - start.left) / cellWidth) + 1\n                    };\n                }\n                element.autoApplyNS(NS).on('mousemove', function (e) {\n                    that._setTableSize(tableFromLocation(e));\n                }).on('mouseleave', function () {\n                    that._setTableSize();\n                }).on('down', function (e) {\n                    e.preventDefault();\n                    var touch = getTouches(e)[0];\n                    that._exec(tableFromLocation(touch.location));\n                });\n            },\n            _valid: function (size) {\n                return size && size.row > 0 && size.col > 0 && size.row <= this.rows && size.col <= this.cols;\n            },\n            _exec: function (size) {\n                if (this._valid(size)) {\n                    this._editor.exec('createTable', {\n                        rows: size.row,\n                        columns: size.col\n                    });\n                    this._popup.close();\n                }\n            },\n            _setTableSize: function (size) {\n                var element = this._popup.element;\n                var status = element.find('.k-status');\n                var cells = element.find('.k-ct-cell');\n                var cols = this.cols;\n                var messages = this._editor.options.messages;\n                if (this._valid(size)) {\n                    status.text(kendo.format(messages.createTableHint, size.row, size.col));\n                    cells.each(function (i) {\n                        $(this).toggleClass(SELECTEDSTATE, i % cols < size.col && i / cols < size.row);\n                    });\n                } else {\n                    status.text(messages.createTable);\n                    cells.removeClass(SELECTEDSTATE);\n                }\n            },\n            _keydown: function (e) {\n                PopupTool.fn._keydown.call(this, e);\n                if (!this._popup.visible()) {\n                    return;\n                }\n                var keys = kendo.keys;\n                var key = e.keyCode;\n                var cells = this._popup.element.find('.k-ct-cell');\n                var focus = Math.max(cells.filter('.k-state-selected').last().index(), 0);\n                var selectedRows = Math.floor(focus / this.cols);\n                var selectedColumns = focus % this.cols;\n                var changed = false;\n                if (key == keys.DOWN && !e.altKey) {\n                    changed = true;\n                    selectedRows++;\n                } else if (key == keys.UP) {\n                    changed = true;\n                    selectedRows--;\n                } else if (key == keys.RIGHT) {\n                    changed = true;\n                    selectedColumns++;\n                } else if (key == keys.LEFT) {\n                    changed = true;\n                    selectedColumns--;\n                }\n                var tableSize = {\n                    row: Math.max(1, Math.min(this.rows, selectedRows + 1)),\n                    col: Math.max(1, Math.min(this.cols, selectedColumns + 1))\n                };\n                if (key == keys.ENTER) {\n                    this._exec(tableSize);\n                } else {\n                    this._setTableSize(tableSize);\n                }\n                if (changed) {\n                    e.preventDefault();\n                    e.stopImmediatePropagation();\n                }\n            },\n            _open: function () {\n                var messages = this._editor.options.messages;\n                PopupTool.fn._open.call(this);\n                this.popup().element.find('.k-status').text(messages.createTable).end().find('.k-ct-cell').removeClass(SELECTEDSTATE);\n            },\n            _close: function () {\n                PopupTool.fn._close.call(this);\n                this.popup().element.off('.' + NS);\n            }\n        });\n        var InsertRowCommand = Command.extend({\n            exec: function () {\n                var range = this.lockRange(true), td = range.endContainer, cellCount, row, newRow;\n                while (dom.name(td) != 'td') {\n                    td = td.parentNode;\n                }\n                if (this.immutables() && Editor.Immutables.immutableParent(td)) {\n                    return;\n                }\n                row = td.parentNode;\n                cellCount = row.children.length;\n                newRow = row.cloneNode(true);\n                for (var i = 0; i < row.cells.length; i++) {\n                    newRow.cells[i].innerHTML = Editor.emptyTableCellContent;\n                }\n                if (this.options.position == 'before') {\n                    dom.insertBefore(newRow, row);\n                } else {\n                    dom.insertAfter(newRow, row);\n                }\n                this.releaseRange(range);\n            }\n        });\n        var InsertColumnCommand = Command.extend({\n            exec: function () {\n                var range = this.lockRange(true), td = dom.closest(range.endContainer, 'td'), table = dom.closest(td, 'table'), columnIndex, i, rows = table.rows, cell, newCell, position = this.options.position;\n                if (this.immutables() && Editor.Immutables.immutableParent(td)) {\n                    return;\n                }\n                columnIndex = dom.findNodeIndex(td, true);\n                for (i = 0; i < rows.length; i++) {\n                    cell = rows[i].cells[columnIndex];\n                    newCell = cell.cloneNode();\n                    newCell.innerHTML = Editor.emptyTableCellContent;\n                    if (position == 'before') {\n                        dom.insertBefore(newCell, cell);\n                    } else {\n                        dom.insertAfter(newCell, cell);\n                    }\n                }\n                this.releaseRange(range);\n            }\n        });\n        var DeleteRowCommand = Command.extend({\n            exec: function () {\n                var range = this.lockRange();\n                var rows = RangeUtils.mapAll(range, function (node) {\n                    return $(node).closest('tr')[0];\n                });\n                var row = rows[0];\n                if (this.immutables() && Editor.Immutables.immutableParent(row)) {\n                    return;\n                }\n                var table = dom.closest(row, 'table');\n                var focusElement;\n                if (table.rows.length <= rows.length) {\n                    focusElement = dom.next(table);\n                    if (!focusElement || dom.insignificant(focusElement)) {\n                        focusElement = dom.prev(table);\n                    }\n                    dom.remove(table);\n                } else {\n                    for (var i = 0; i < rows.length; i++) {\n                        row = rows[i];\n                        dom.removeTextSiblings(row);\n                        focusElement = dom.next(row) || dom.prev(row);\n                        focusElement = focusElement.cells[0];\n                        dom.remove(row);\n                    }\n                }\n                if (focusElement) {\n                    range.setStart(focusElement, 0);\n                    range.collapse(true);\n                    this.editor.selectRange(range);\n                }\n            }\n        });\n        var DeleteColumnCommand = Command.extend({\n            exec: function () {\n                var range = this.lockRange(), td = dom.closest(range.endContainer, 'td'), table = dom.closest(td, 'table'), rows = table.rows, columnIndex = dom.findNodeIndex(td, true), columnCount = rows[0].cells.length, focusElement, i;\n                if (this.immutables() && Editor.Immutables.immutableParent(td)) {\n                    return;\n                }\n                if (columnCount == 1) {\n                    focusElement = dom.next(table);\n                    if (!focusElement || dom.insignificant(focusElement)) {\n                        focusElement = dom.prev(table);\n                    }\n                    dom.remove(table);\n                } else {\n                    dom.removeTextSiblings(td);\n                    focusElement = dom.next(td) || dom.prev(td);\n                    for (i = 0; i < rows.length; i++) {\n                        dom.remove(rows[i].cells[columnIndex]);\n                    }\n                }\n                if (focusElement) {\n                    range.setStart(focusElement, 0);\n                    range.collapse(true);\n                    this.editor.selectRange(range);\n                }\n            }\n        });\n        var TableModificationTool = Tool.extend({\n            command: function (options) {\n                options = extend(options, this.options);\n                if (options.action == 'delete') {\n                    if (options.type == 'row') {\n                        return new DeleteRowCommand(options);\n                    } else {\n                        return new DeleteColumnCommand(options);\n                    }\n                } else {\n                    if (options.type == 'row') {\n                        return new InsertRowCommand(options);\n                    } else {\n                        return new InsertColumnCommand(options);\n                    }\n                }\n            },\n            initialize: function (ui, options) {\n                Tool.fn.initialize.call(this, ui, options);\n                ui.addClass('k-state-disabled');\n            },\n            update: function (ui, nodes) {\n                var isFormatted = !tableFormatFinder.isFormatted(nodes);\n                ui.toggleClass('k-state-disabled', isFormatted);\n            }\n        });\n        extend(kendo.ui.editor, {\n            PopupTool: PopupTool,\n            TableCommand: TableCommand,\n            InsertTableTool: InsertTableTool,\n            TableModificationTool: TableModificationTool,\n            InsertRowCommand: InsertRowCommand,\n            InsertColumnCommand: InsertColumnCommand,\n            DeleteRowCommand: DeleteRowCommand,\n            DeleteColumnCommand: DeleteColumnCommand\n        });\n        registerTool('createTable', new InsertTableTool({\n            template: new ToolTemplate({\n                template: EditorUtils.buttonTemplate,\n                popup: true,\n                title: 'Create table'\n            })\n        }));\n        registerTool('addColumnLeft', new TableModificationTool({\n            type: 'column',\n            position: 'before',\n            template: new ToolTemplate({\n                template: EditorUtils.buttonTemplate,\n                title: 'Add column on the left'\n            })\n        }));\n        registerTool('addColumnRight', new TableModificationTool({\n            type: 'column',\n            template: new ToolTemplate({\n                template: EditorUtils.buttonTemplate,\n                title: 'Add column on the right'\n            })\n        }));\n        registerTool('addRowAbove', new TableModificationTool({\n            type: 'row',\n            position: 'before',\n            template: new ToolTemplate({\n                template: EditorUtils.buttonTemplate,\n                title: 'Add row above'\n            })\n        }));\n        registerTool('addRowBelow', new TableModificationTool({\n            type: 'row',\n            template: new ToolTemplate({\n                template: EditorUtils.buttonTemplate,\n                title: 'Add row below'\n            })\n        }));\n        registerTool('deleteRow', new TableModificationTool({\n            type: 'row',\n            action: 'delete',\n            template: new ToolTemplate({\n                template: EditorUtils.buttonTemplate,\n                title: 'Delete row'\n            })\n        }));\n        registerTool('deleteColumn', new TableModificationTool({\n            type: 'column',\n            action: 'delete',\n            template: new ToolTemplate({\n                template: EditorUtils.buttonTemplate,\n                title: 'Delete column'\n            })\n        }));\n    }(window.kendo.jQuery));\n}, typeof define == 'function' && define.amd ? define : function (a1, a2, a3) {\n    (a3 || a2)();\n}));\n(function (f, define) {\n    define('editor/export', ['editor/main'], f);\n}(function () {\n    (function ($, undefined) {\n        var kendo = window.kendo, extend = $.extend, proxy = $.proxy, Editor = kendo.ui.editor, EditorUtils = Editor.EditorUtils, Command = Editor.Command, Tool = Editor.Tool, registerTool = EditorUtils.registerTool, ToolTemplate = Editor.ToolTemplate, defaultExportAsItems = [\n                {\n                    text: 'Docx',\n                    value: 'docx'\n                },\n                {\n                    text: 'Rtf',\n                    value: 'rtf'\n                },\n                {\n                    text: 'Pdf',\n                    value: 'pdf'\n                },\n                {\n                    text: 'Html',\n                    value: 'html'\n                },\n                {\n                    text: 'Plain Text',\n                    value: 'txt'\n                }\n            ];\n        var ExportAsCommand = Command.extend({\n            init: function (options) {\n                var cmd = this;\n                cmd.options = options;\n                Command.fn.init.call(cmd, options);\n                cmd.attributes = null;\n                cmd.exportType = options.exportType;\n            },\n            exec: function () {\n                var cmd = this;\n                var range = this.lockRange(true);\n                cmd.postToProxy();\n                cmd.releaseRange(range);\n            },\n            postToProxy: function () {\n                this.generateForm().appendTo('body').submit().remove();\n            },\n            generateForm: function () {\n                var cmd = this;\n                var exportAsOptions = cmd.editor.options.exportAs;\n                var form = $('<form>').attr({\n                    action: exportAsOptions && exportAsOptions.proxyURL || '',\n                    method: 'POST'\n                });\n                form.append([\n                    cmd.valueInput(),\n                    cmd.exportTypeInput(),\n                    cmd.fileNameInput()\n                ]);\n                return form;\n            },\n            valueInput: function () {\n                var editor = this.editor;\n                return $('<input>').attr({\n                    value: editor.encodedValue(),\n                    name: 'value',\n                    type: 'hidden'\n                });\n            },\n            exportTypeInput: function () {\n                var cmd = this;\n                return $('<input>').attr({\n                    value: cmd.exportType,\n                    name: 'exportType',\n                    type: 'hidden'\n                });\n            },\n            fileNameInput: function () {\n                var editor = this.editor;\n                var exportAsOptions = editor.options.exportAs;\n                var fileName = exportAsOptions && exportAsOptions.fileName || editor.element.attr('id') || 'editor';\n                return $('<input>').attr({\n                    value: fileName,\n                    name: 'fileName',\n                    type: 'hidden'\n                });\n            }\n        });\n        var ExportAsTool = Tool.extend({\n            init: function (options) {\n                var tool = this;\n                Tool.fn.init.call(tool, kendo.deepExtend({}, tool.options, options));\n                tool.type = 'kendoSelectBox';\n            },\n            options: {\n                items: defaultExportAsItems,\n                width: 115\n            },\n            command: function (args) {\n                var value = args.value;\n                return new Editor.ExportAsCommand({\n                    range: args.range,\n                    exportType: value.exportType\n                });\n            },\n            initialize: function (ui, initOptions) {\n                var tool = this;\n                var editor = initOptions.editor;\n                var options = tool.options;\n                var toolName = options.name;\n                var changeHandler = proxy(tool.changeHandler, tool);\n                var dataSource = options.items || editor.options[toolName];\n                dataSource.unshift({\n                    text: editor.options.messages[toolName],\n                    value: ''\n                });\n                tool.editor = editor;\n                ui.width(options.width);\n                ui.kendoSelectBox({\n                    dataTextField: 'text',\n                    dataValueField: 'value',\n                    dataSource: dataSource,\n                    autoSize: true,\n                    change: changeHandler,\n                    open: function (e) {\n                        var sender = e.sender;\n                        sender.items()[0].style.display = 'none';\n                        sender.unbind('open');\n                    },\n                    highlightFirst: false,\n                    template: kendo.template('<span unselectable=\"on\" style=\"display:block;#=(data.style||\"\")#\">#:data.text#</span>')\n                });\n                ui.addClass('k-decorated').closest('.k-widget').removeClass('k-' + toolName).find('*').addBack().attr('unselectable', 'on');\n            },\n            changeHandler: function (e) {\n                var sender = e.sender;\n                var dataItem = sender.dataItem();\n                var value = dataItem && dataItem.value;\n                this._exec(value);\n                sender.value('');\n            },\n            _exec: function (value) {\n                if (value) {\n                    Tool.exec(this.editor, this.options.name, { exportType: value });\n                }\n            },\n            destroy: function () {\n                this._ancestor = null;\n            }\n        });\n        extend(Editor, {\n            ExportAsTool: ExportAsTool,\n            ExportAsCommand: ExportAsCommand\n        });\n        registerTool('exportAs', new ExportAsTool({\n            template: new ToolTemplate({\n                template: EditorUtils.dropDownListTemplate,\n                title: 'Export As'\n            })\n        }));\n    }(window.kendo.jQuery));\n}, typeof define == 'function' && define.amd ? define : function (a1, a2, a3) {\n    (a3 || a2)();\n}));\n(function (f, define) {\n    define('editor/import', ['editor/main'], f);\n}(function () {\n    (function ($, undefined) {\n        var kendo = window.kendo, extend = $.extend, proxy = $.proxy, Editor = kendo.ui.editor, EditorUtils = Editor.EditorUtils, Command = Editor.Command, Tool = Editor.Tool, registerTool = EditorUtils.registerTool, ToolTemplate = Editor.ToolTemplate, loadingOverlay = '<div contenteditable=\"false\" class=\"k-loading-mask\" style=\"width: 100%; height: 100%; position: absolute; top: 0px; left: 0px;\"><div class=\"k-loading-image\"></div><div class=\"k-loading-color\"></div></div>';\n        var ImportCommand = Command.extend({\n            exec: function () {\n                (this.editor._uploadWidget || this._initializeUploadWidget()).element.click();\n            },\n            _initializeUploadWidget: function () {\n                var cmd = this;\n                var editor = cmd.editor;\n                var importOptions = editor.options['import'];\n                var upload = $('<input id=\"editorImport\" name=\"files\" type=\"file\" />').kendoUpload({\n                    success: proxy(cmd._onUploadSuccess, cmd),\n                    progress: proxy(cmd._onUploadProgress, cmd),\n                    select: proxy(cmd._onUploadSelect, cmd),\n                    error: proxy(cmd._onUploadError, cmd),\n                    complete: proxy(cmd._onUploadComplete, cmd),\n                    showFileList: false,\n                    multiple: false,\n                    async: {\n                        saveUrl: importOptions.proxyUrl,\n                        autoUpload: true,\n                        saveField: 'file'\n                    },\n                    validation: {\n                        allowedExtensions: importOptions.allowedExtensions,\n                        maxFileSize: importOptions.maxFileSize\n                    }\n                }).getKendoUpload();\n                editor._uploadWidget = upload;\n                return upload;\n            },\n            _onUploadComplete: function (ev) {\n                this._trigger('complete', ev);\n                ev.sender.clearAllFiles();\n                this._removeLoadingOverlay();\n            },\n            _onUploadSuccess: function (ev) {\n                this.editor.value(ev.response.html.replace(/<\\/?body>/gi, ''));\n                this._trigger('success', ev);\n            },\n            _onUploadProgress: function (ev) {\n                this._trigger('progress', ev);\n            },\n            _onUploadSelect: function (ev) {\n                this._trigger('select', ev);\n                if (!ev.files[0].validationErrors) {\n                    this._initLoadingOverlay();\n                }\n            },\n            _onUploadError: function (ev) {\n                this._trigger('error', ev);\n            },\n            _trigger: function (eventType, uploadEvent) {\n                var editor = this.editor;\n                var importOptions = editor.options['import'];\n                if (typeof importOptions[eventType] === 'function') {\n                    importOptions[eventType].call(editor, uploadEvent);\n                }\n            },\n            _initLoadingOverlay: function () {\n                var editable = this.editor.body;\n                if (Editor.Dom.is(editable, 'body')) {\n                    this._iframeWrapper = this._container = this.editor.wrapper.find('iframe').parent().css({ position: 'relative' }).append(loadingOverlay);\n                } else {\n                    this._container = $(editable).append(loadingOverlay);\n                }\n                kendo.ui.progress(this._container, true);\n            },\n            _removeLoadingOverlay: function () {\n                kendo.ui.progress(this._container, false);\n                $(this._iframeWrapper).css({ position: '' });\n                delete this._container;\n                delete this._iframeWrapper;\n            }\n        });\n        extend(Editor, { ImportCommand: ImportCommand });\n        registerTool('import', new Tool({\n            command: ImportCommand,\n            template: new ToolTemplate({\n                template: EditorUtils.buttonTemplate,\n                title: 'Import'\n            })\n        }));\n    }(window.kendo.jQuery));\n}, typeof define == 'function' && define.amd ? define : function (a1, a2, a3) {\n    (a3 || a2)();\n}));\n(function (f, define) {\n    define('editor/resizing/resizing-utils', ['editor/main'], f);\n}(function () {\n    (function (kendo, undefined) {\n        var global = window;\n        var math = global.Math;\n        var min = math.min;\n        var max = math.max;\n        var parseFloat = global.parseFloat;\n        var $ = kendo.jQuery;\n        var extend = $.extend;\n        var Editor = kendo.ui.editor;\n        var PERCENTAGE = '%';\n        var PIXEL = 'px';\n        var REGEX_NUMBER_IN_PERCENTAGES = /(\\d+)(\\.?)(\\d*)%/;\n        var REGEX_NUMBER_IN_PIXELS = /(\\d+)(\\.?)(\\d*)px/;\n        var STRING = 'string';\n        function constrain(options) {\n            var value = options.value;\n            var lowerBound = options.min;\n            var upperBound = options.max;\n            return max(min(parseFloat(value), parseFloat(upperBound)), parseFloat(lowerBound));\n        }\n        function getScrollBarWidth(element) {\n            if (element && !$(element).is('body') && element.scrollHeight > element.clientHeight) {\n                return kendo.support.scrollbar();\n            }\n            return 0;\n        }\n        function calculatePercentageRatio(value, total) {\n            if (inPercentages(value)) {\n                return parseFloat(value);\n            } else {\n                return parseFloat(value) / total * 100;\n            }\n        }\n        function inPercentages(value) {\n            return typeof value === STRING && REGEX_NUMBER_IN_PERCENTAGES.test(value);\n        }\n        function inPixels(value) {\n            return typeof value === STRING && REGEX_NUMBER_IN_PIXELS.test(value);\n        }\n        function toPercentages(value) {\n            return parseFloat(value) + PERCENTAGE;\n        }\n        function toPixels(value) {\n            return parseFloat(value) + PIXEL;\n        }\n        var ResizingUtils = {\n            constrain: constrain,\n            getScrollBarWidth: getScrollBarWidth,\n            calculatePercentageRatio: calculatePercentageRatio,\n            inPercentages: inPercentages,\n            inPixels: inPixels,\n            toPercentages: toPercentages,\n            toPixels: toPixels\n        };\n        extend(Editor, { ResizingUtils: ResizingUtils });\n    }(window.kendo));\n}, typeof define == 'function' && define.amd ? define : function (a1, a2, a3) {\n    (a3 || a2)();\n}));\n(function (f, define) {\n    define('editor/resizing/table-element-resizing', [\n        'editor/main',\n        'kendo.resizable',\n        'editor/resizing/resizing-utils'\n    ], f);\n}(function () {\n    (function (kendo, undefined) {\n        var $ = kendo.jQuery;\n        var extend = $.extend;\n        var noop = $.noop;\n        var proxy = $.proxy;\n        var Editor = kendo.ui.editor;\n        var Class = kendo.Class;\n        var KEY_DOWN = 'keydown';\n        var MOUSE_DOWN = 'mousedown';\n        var MOUSE_ENTER = 'mouseenter';\n        var MOUSE_LEAVE = 'mouseleave';\n        var MOUSE_MOVE = 'mousemove';\n        var MOUSE_UP = 'mouseup';\n        var COMMA = ',';\n        var DOT = '.';\n        var LAST_CHILD = ':last-child';\n        var TABLE = 'table';\n        var TableElementResizing = Class.extend({\n            init: function (element, options) {\n                var that = this;\n                that.options = extend({}, that.options, options);\n                that.options.tags = $.isArray(that.options.tags) ? that.options.tags : [that.options.tags];\n                if ($(element).is(TABLE)) {\n                    that.element = element;\n                    that._attachEventHandlers();\n                }\n            },\n            destroy: function () {\n                var that = this;\n                var eventNamespace = that.options.eventNamespace;\n                if (that.element) {\n                    $(that.element).off(eventNamespace);\n                    that.element = null;\n                }\n                $(that.options.rootElement).off(KEY_DOWN + eventNamespace);\n                that._destroyResizeHandle();\n            },\n            options: {\n                tags: [],\n                min: 0,\n                rootElement: null,\n                eventNamespace: '',\n                rtl: false,\n                handle: {\n                    dataAttribute: '',\n                    height: 0,\n                    width: 0,\n                    classNames: {},\n                    template: ''\n                }\n            },\n            _attachEventHandlers: function () {\n                var that = this;\n                var options = that.options;\n                $(that.element).on(MOUSE_MOVE + options.eventNamespace, options.tags.join(COMMA), proxy(that.detectElementBorderHovering, that));\n            },\n            resizingInProgress: function () {\n                var that = this;\n                var resizable = that._resizable;\n                if (resizable) {\n                    return !!resizable.resizing;\n                }\n                return false;\n            },\n            resize: noop,\n            detectElementBorderHovering: function (e) {\n                var that = this;\n                var options = that.options;\n                var handleOptions = options.handle;\n                var tableElement = $(e.currentTarget);\n                var resizeHandle = that.resizeHandle;\n                var dataAttribute = handleOptions.dataAttribute;\n                if (!that.resizingInProgress()) {\n                    if (!tableElement.is(LAST_CHILD) && that.elementBorderHovered(tableElement, e)) {\n                        if (resizeHandle) {\n                            if (resizeHandle.data(dataAttribute) && resizeHandle.data(dataAttribute) !== tableElement[0]) {\n                                that.showResizeHandle(tableElement, e);\n                            }\n                        } else {\n                            that.showResizeHandle(tableElement, e);\n                        }\n                    } else {\n                        if (resizeHandle) {\n                            that._destroyResizeHandle();\n                        }\n                    }\n                }\n            },\n            elementBorderHovered: noop,\n            showResizeHandle: function (tableElement, e) {\n                var that = this;\n                if (e.buttons !== 0) {\n                    return;\n                }\n                that._initResizeHandle();\n                that.setResizeHandlePosition(tableElement);\n                that.setResizeHandleDimensions();\n                that.setResizeHandleDataAttributes(tableElement[0]);\n                that._attachResizeHandleEventHandlers();\n                that._initResizable(tableElement);\n                that._hideResizeMarker();\n                that.resizeHandle.show();\n            },\n            _initResizeHandle: function () {\n                var that = this;\n                var options = that.options;\n                that._destroyResizeHandle();\n                that.resizeHandle = $(options.handle.template).appendTo(options.rootElement);\n            },\n            setResizeHandlePosition: noop,\n            setResizeHandleDimensions: noop,\n            setResizeHandleDataAttributes: function (tableElement) {\n                var that = this;\n                that.resizeHandle.data(that.options.handle.dataAttribute, tableElement);\n            },\n            _attachResizeHandleEventHandlers: function () {\n                var that = this;\n                var options = that.options;\n                var eventNamespace = options.eventNamespace;\n                var markerClass = options.handle.classNames.marker;\n                var resizeHandle = that.resizeHandle;\n                that.resizeHandle.on(MOUSE_DOWN + eventNamespace, function () {\n                    resizeHandle.find(DOT + markerClass).show();\n                }).on(MOUSE_UP + eventNamespace, function () {\n                    resizeHandle.find(DOT + markerClass).hide();\n                });\n            },\n            _hideResizeMarker: function () {\n                var that = this;\n                that.resizeHandle.find(DOT + that.options.handle.classNames.marker).hide();\n            },\n            _destroyResizeHandle: function () {\n                var that = this;\n                if (that.resizeHandle) {\n                    that._destroyResizable();\n                    that.resizeHandle.off(that.options.eventNamespace).remove();\n                    that.resizeHandle = null;\n                }\n            },\n            _initResizable: function (tableElement) {\n                var that = this;\n                if (!that.resizeHandle) {\n                    return;\n                }\n                that._destroyResizable();\n                that._resizable = new kendo.ui.Resizable(tableElement, {\n                    draggableElement: that.resizeHandle[0],\n                    start: proxy(that.onResizeStart, that),\n                    resize: proxy(that.onResize, that),\n                    resizeend: proxy(that.onResizeEnd, that)\n                });\n            },\n            _destroyResizable: function () {\n                var that = this;\n                if (that._resizable) {\n                    that._resizable.destroy();\n                    that._resizable = null;\n                }\n            },\n            onResizeStart: function () {\n                this._disableKeyboard();\n            },\n            onResize: function (e) {\n                this.setResizeHandleDragPosition(e);\n            },\n            setResizeHandleDragPosition: noop,\n            onResizeEnd: function (e) {\n                var that = this;\n                that.resize(e);\n                that._destroyResizeHandle();\n                that._enableKeyboard();\n            },\n            _enableKeyboard: function () {\n                var options = this.options;\n                $(options.rootElement).off(KEY_DOWN + options.eventNamespace);\n            },\n            _disableKeyboard: function () {\n                var options = this.options;\n                $(options.rootElement).on(KEY_DOWN + options.eventNamespace, function (e) {\n                    e.preventDefault();\n                });\n            },\n            _forceResizing: function (e) {\n                var resizable = this._resizable;\n                if (resizable && resizable.userEvents) {\n                    resizable.userEvents._end(e);\n                }\n            }\n        });\n        var ResizingFactory = Class.extend({\n            create: function (editor, options) {\n                var that = this;\n                var resizingName = options.name;\n                var NS = options.eventNamespace;\n                $(editor.body).on(MOUSE_ENTER + NS, TABLE, function (e) {\n                    var table = e.currentTarget;\n                    var resizing = editor[resizingName];\n                    e.stopPropagation();\n                    if (resizing) {\n                        if (resizing.element !== table && !resizing.resizingInProgress()) {\n                            that._destroyResizing(editor, options);\n                            that._initResizing(editor, table, options);\n                        }\n                    } else {\n                        that._initResizing(editor, table, options);\n                    }\n                }).on(MOUSE_LEAVE + NS, TABLE, function (e) {\n                    var parentTable;\n                    var resizing = editor[resizingName];\n                    e.stopPropagation();\n                    if (resizing && !resizing.resizingInProgress() && !resizing.resizeHandle) {\n                        parentTable = $(resizing.element).parents(TABLE)[0];\n                        if (parentTable) {\n                            that._destroyResizing(editor, options);\n                            that._initResizing(editor, parentTable, options);\n                        }\n                    }\n                }).on(MOUSE_LEAVE + NS, function () {\n                    var resizing = editor[resizingName];\n                    if (resizing && !resizing.resizingInProgress()) {\n                        that._destroyResizing(editor, options);\n                    }\n                }).on(MOUSE_UP + NS, function (e) {\n                    var resizing = editor[resizingName];\n                    var parentTable;\n                    if (resizing && resizing.resizingInProgress()) {\n                        parentTable = $(e.target).parents(TABLE)[0];\n                        if (parentTable) {\n                            resizing._forceResizing(e);\n                            that._destroyResizing(editor, options);\n                            that._initResizing(editor, parentTable, options);\n                        }\n                    }\n                });\n            },\n            dispose: function (editor, options) {\n                $(editor.body).off(options.eventNamespace);\n            },\n            _initResizing: function (editor, tableElement, options) {\n                var resizingName = options.name;\n                var resizingType = options.type;\n                editor[resizingName] = new resizingType(tableElement, {\n                    rtl: kendo.support.isRtl(editor.element),\n                    rootElement: editor.body\n                });\n            },\n            _destroyResizing: function (editor, options) {\n                var resizingName = options.name;\n                if (editor[resizingName]) {\n                    editor[resizingName].destroy();\n                    editor[resizingName] = null;\n                }\n            }\n        });\n        ResizingFactory.current = new ResizingFactory();\n        TableElementResizing.create = function (editor, options) {\n            ResizingFactory.current.create(editor, options);\n        };\n        TableElementResizing.dispose = function (editor, options) {\n            ResizingFactory.current.dispose(editor, options);\n        };\n        extend(Editor, { TableElementResizing: TableElementResizing });\n    }(window.kendo));\n}, typeof define == 'function' && define.amd ? define : function (a1, a2, a3) {\n    (a3 || a2)();\n}));\n(function (f, define) {\n    define('editor/resizing/column-resizing', [\n        'editor/main',\n        'editor/resizing/resizing-utils',\n        'editor/resizing/table-element-resizing'\n    ], f);\n}(function () {\n    (function (kendo, undefined) {\n        var global = window;\n        var math = global.Math;\n        var abs = math.abs;\n        var $ = kendo.jQuery;\n        var extend = $.extend;\n        var Editor = kendo.ui.editor;\n        var TableElementResizing = Editor.TableElementResizing;\n        var ResizingUtils = Editor.ResizingUtils;\n        var constrain = ResizingUtils.constrain;\n        var calculatePercentageRatio = ResizingUtils.calculatePercentageRatio;\n        var getScrollBarWidth = ResizingUtils.getScrollBarWidth;\n        var inPercentages = ResizingUtils.inPercentages;\n        var toPercentages = ResizingUtils.toPercentages;\n        var toPixels = ResizingUtils.toPixels;\n        var outerWidth = kendo._outerWidth;\n        var NS = '.kendoEditorColumnResizing';\n        var RESIZE_HANDLE_CLASS = 'k-column-resize-handle';\n        var RESIZE_MARKER_CLASS = 'k-column-resize-marker';\n        var BODY = 'body';\n        var TBODY = 'tbody';\n        var TD = 'td';\n        var TH = 'th';\n        var TR = 'tr';\n        var COMMA = ',';\n        var WIDTH = 'width';\n        var ColumnResizing = TableElementResizing.extend({\n            options: {\n                tags: [\n                    TD,\n                    TH\n                ],\n                min: 20,\n                rootElement: null,\n                eventNamespace: NS,\n                rtl: false,\n                handle: {\n                    dataAttribute: 'column',\n                    width: 10,\n                    height: 0,\n                    classNames: {\n                        handle: RESIZE_HANDLE_CLASS,\n                        marker: RESIZE_MARKER_CLASS\n                    },\n                    template: '<div class=\"k-column-resize-handle-wrapper\" unselectable=\"on\" contenteditable=\"false\">' + '<div class=\"' + RESIZE_HANDLE_CLASS + '\">' + '<div class=\"' + RESIZE_MARKER_CLASS + '\"></div>' + '</div>' + '</div>'\n                }\n            },\n            elementBorderHovered: function (column, e) {\n                var that = this;\n                var options = that.options;\n                var handleWidth = options.handle.width;\n                var borderOffset = column.offset().left + (options.rtl ? 0 : outerWidth(column));\n                var mousePosition = e.clientX + $(column[0].ownerDocument).scrollLeft();\n                if (mousePosition > borderOffset - handleWidth && mousePosition < borderOffset + handleWidth) {\n                    return true;\n                } else {\n                    return false;\n                }\n            },\n            setResizeHandlePosition: function (column) {\n                var that = this;\n                var tableBody = $(that.element).children(TBODY);\n                var options = that.options;\n                var rtl = options.rtl;\n                var handleWidth = options.handle.width;\n                var rootElement = $(options.rootElement);\n                var scrollTopOffset = rootElement.is(BODY) ? 0 : rootElement.scrollTop();\n                var scrollLeftOffset = rootElement.is(BODY) ? 0 : rootElement.scrollLeft();\n                var columnWidthOffset = rtl ? 0 : outerWidth(column);\n                var scrollBarWidth = rtl ? getScrollBarWidth(rootElement[0]) : 0;\n                that.resizeHandle.css({\n                    top: tableBody.position().top + scrollTopOffset,\n                    left: column.position().left + columnWidthOffset + (scrollLeftOffset - scrollBarWidth) - handleWidth / 2,\n                    position: 'absolute'\n                });\n            },\n            setResizeHandleDimensions: function () {\n                var that = this;\n                var tableBody = $(that.element).children(TBODY);\n                that.resizeHandle.css({\n                    width: that.options.handle.width,\n                    height: tableBody.height()\n                });\n            },\n            setResizeHandleDragPosition: function (e) {\n                var that = this;\n                var column = $($(e.currentTarget).data(that.options.handle.dataAttribute));\n                var options = that.options;\n                var handleWidth = options.handle ? options.handle.width : 0;\n                var min = options.min;\n                var rtl = options.rtl;\n                var columnWidth = outerWidth(column);\n                var columnLeftOffset = column.position().left;\n                var adjacentColumnWidth = outerWidth(column.next());\n                var resizeHandle = $(that.resizeHandle);\n                var rootElement = $(options.rootElement);\n                var scrollLeftOffset = rootElement.is(BODY) ? 0 : rootElement.scrollLeft();\n                var scrollBarWidth = rtl ? getScrollBarWidth(rootElement[0]) : 0;\n                var handleOffset = constrain({\n                    value: resizeHandle.position().left + (scrollLeftOffset - scrollBarWidth) + e.x.delta,\n                    min: columnLeftOffset + (scrollLeftOffset - scrollBarWidth) - (rtl ? adjacentColumnWidth : 0) + min,\n                    max: columnLeftOffset + columnWidth + (scrollLeftOffset - scrollBarWidth) + (rtl ? 0 : adjacentColumnWidth) - handleWidth - min\n                });\n                resizeHandle.css({ left: handleOffset });\n            },\n            resize: function (e) {\n                var that = this;\n                var column = $($(e.currentTarget).data(that.options.handle.dataAttribute));\n                var options = that.options;\n                var rtlModifier = options.rtl ? -1 : 1;\n                var min = options.min;\n                var initialDeltaX = rtlModifier * e.x.initialDelta;\n                var newWidth;\n                var initialAdjacentColumnWidth;\n                var initialColumnWidth;\n                that._setTableComputedWidth();\n                that._setColumnsComputedWidth();\n                initialColumnWidth = outerWidth(column);\n                initialAdjacentColumnWidth = outerWidth(column.next());\n                newWidth = constrain({\n                    value: initialColumnWidth + initialDeltaX,\n                    min: min,\n                    max: initialColumnWidth + initialAdjacentColumnWidth - min\n                });\n                that._resizeColumn(column[0], newWidth);\n                that._resizeTopAndBottomColumns(column[0], newWidth);\n                that._resizeAdjacentColumns(column.index(), initialAdjacentColumnWidth, initialColumnWidth, initialColumnWidth - newWidth);\n            },\n            _setTableComputedWidth: function () {\n                var element = this.element;\n                if (element.style[WIDTH] === '') {\n                    element.style[WIDTH] = toPixels(outerWidth($(element)));\n                }\n            },\n            _setColumnsComputedWidth: function () {\n                var that = this;\n                var tableBody = $(that.element).children(TBODY);\n                var tableBodyWidth = outerWidth(tableBody);\n                var columns = tableBody.children(TR).children(TD);\n                var length = columns.length;\n                var currentColumnsWidths = columns.map(function () {\n                    return outerWidth($(this));\n                });\n                var i;\n                for (i = 0; i < length; i++) {\n                    if (inPercentages(columns[i].style[WIDTH])) {\n                        columns[i].style[WIDTH] = toPercentages(calculatePercentageRatio(currentColumnsWidths[i], tableBodyWidth));\n                    } else {\n                        columns[i].style[WIDTH] = toPixels(currentColumnsWidths[i]);\n                    }\n                }\n            },\n            _resizeTopAndBottomColumns: function (column, newWidth) {\n                var that = this;\n                var columnIndex = $(column).index();\n                var topAndBottomColumns = $(that.element).children(TBODY).children(TR).children(that.options.tags.join(COMMA)).filter(function () {\n                    var cell = this;\n                    return $(cell).index() === columnIndex && cell !== column;\n                });\n                var length = topAndBottomColumns.length;\n                var i;\n                for (i = 0; i < length; i++) {\n                    that._resizeColumn(topAndBottomColumns[i], newWidth);\n                }\n            },\n            _resizeColumn: function (column, newWidth) {\n                if (inPercentages(column.style[WIDTH])) {\n                    column.style[WIDTH] = toPercentages(calculatePercentageRatio(newWidth, outerWidth($(this.element).children(TBODY))));\n                } else {\n                    column.style[WIDTH] = toPixels(newWidth);\n                }\n            },\n            _resizeAdjacentColumns: function (columnIndex, initialAdjacentColumnWidth, initialColumnWidth, deltaWidth) {\n                var that = this;\n                var adjacentColumns = $(that.element).children(TBODY).children(TR).children(that.options.tags.join(COMMA)).filter(function () {\n                    return $(this).index() === columnIndex + 1;\n                });\n                var length = adjacentColumns.length;\n                var i;\n                for (i = 0; i < length; i++) {\n                    that._resizeAdjacentColumn(adjacentColumns[i], initialAdjacentColumnWidth, initialColumnWidth, deltaWidth);\n                }\n            },\n            _resizeAdjacentColumn: function (adjacentColumn, initialAdjacentColumnWidth, initialColumnWidth, deltaWidth) {\n                var that = this;\n                var min = that.options.min;\n                var newWidth;\n                newWidth = constrain({\n                    value: initialAdjacentColumnWidth + deltaWidth,\n                    min: min,\n                    max: abs(initialColumnWidth + initialAdjacentColumnWidth - min)\n                });\n                that._resizeColumn(adjacentColumn, newWidth);\n            }\n        });\n        ColumnResizing.create = function (editor) {\n            TableElementResizing.create(editor, {\n                name: 'columnResizing',\n                type: ColumnResizing,\n                eventNamespace: NS\n            });\n        };\n        ColumnResizing.dispose = function (editor) {\n            TableElementResizing.dispose(editor, { eventNamespace: NS });\n        };\n        extend(Editor, { ColumnResizing: ColumnResizing });\n    }(window.kendo));\n}, typeof define == 'function' && define.amd ? define : function (a1, a2, a3) {\n    (a3 || a2)();\n}));\n(function (f, define) {\n    define('editor/resizing/row-resizing', [\n        'editor/main',\n        'editor/resizing/resizing-utils',\n        'editor/resizing/table-element-resizing'\n    ], f);\n}(function () {\n    (function (kendo, undefined) {\n        var math = window.Math;\n        var abs = math.abs;\n        var $ = kendo.jQuery;\n        var extend = $.extend;\n        var Editor = kendo.ui.editor;\n        var TableElementResizing = Editor.TableElementResizing;\n        var ResizingUtils = Editor.ResizingUtils;\n        var getScrollBarWidth = ResizingUtils.getScrollBarWidth;\n        var constrain = ResizingUtils.constrain;\n        var calculatePercentageRatio = ResizingUtils.calculatePercentageRatio;\n        var inPercentages = ResizingUtils.inPercentages;\n        var toPercentages = ResizingUtils.toPercentages;\n        var toPixels = ResizingUtils.toPixels;\n        var outerHeight = kendo._outerHeight;\n        var NS = '.kendoEditorRowResizing';\n        var RESIZE_HANDLE_CLASS = 'k-row-resize-handle';\n        var RESIZE_HANDLE_MARKER_WRAPPER_CLASS = 'k-row-resize-marker-wrapper';\n        var RESIZE_MARKER_CLASS = 'k-row-resize-marker';\n        var BODY = 'body';\n        var TR = 'tr';\n        var TBODY = 'tbody';\n        var HEIGHT = 'height';\n        var RowResizing = TableElementResizing.extend({\n            options: {\n                tags: [TR],\n                min: 20,\n                rootElement: null,\n                eventNamespace: NS,\n                rtl: false,\n                handle: {\n                    dataAttribute: 'row',\n                    width: 0,\n                    height: 10,\n                    classNames: {\n                        handle: RESIZE_HANDLE_CLASS,\n                        marker: RESIZE_MARKER_CLASS\n                    },\n                    template: '<div class=\"k-row-resize-handle-wrapper\" unselectable=\"on\" contenteditable=\"false\">' + '<div class=\"' + RESIZE_HANDLE_CLASS + '\">' + '<div class=\"' + RESIZE_HANDLE_MARKER_WRAPPER_CLASS + '\">' + '<div class=\"' + RESIZE_MARKER_CLASS + '\"></div>' + '</div>' + '</div>' + '</div>'\n                }\n            },\n            elementBorderHovered: function (tableElement, e) {\n                var that = this;\n                var handleHeight = that.options.handle[HEIGHT];\n                var borderOffset = tableElement.offset().top + outerHeight(tableElement);\n                var mousePosition = e.clientY + $(tableElement[0].ownerDocument).scrollTop();\n                if (mousePosition > borderOffset - handleHeight && mousePosition < borderOffset + handleHeight) {\n                    return true;\n                } else {\n                    return false;\n                }\n            },\n            setResizeHandlePosition: function (row) {\n                var that = this;\n                var options = that.options;\n                var handleHeight = options.handle[HEIGHT];\n                var rowPosition = row.position();\n                var rootElement = $(options.rootElement);\n                var scrollTopOffset = rootElement.is(BODY) ? 0 : rootElement.scrollTop();\n                var scrollLeftOffset = rootElement.is(BODY) ? 0 : rootElement.scrollLeft();\n                var scrollBarWidth = options.rtl ? getScrollBarWidth(rootElement[0]) : 0;\n                that.resizeHandle.css({\n                    top: rowPosition.top + outerHeight(row) + scrollTopOffset - handleHeight / 2,\n                    left: rowPosition.left + (scrollLeftOffset - scrollBarWidth),\n                    position: 'absolute'\n                });\n            },\n            setResizeHandleDimensions: function () {\n                var that = this;\n                that.resizeHandle.css({\n                    width: $(that.element).children(TBODY).width(),\n                    height: that.options.handle[HEIGHT]\n                });\n            },\n            setResizeHandleDragPosition: function (e) {\n                var that = this;\n                var options = that.options;\n                var min = options.min;\n                var tableBody = $(that.element).children(TBODY);\n                var tableBodyTopOffset = tableBody.position().top;\n                var resizeHandle = $(that.resizeHandle);\n                var row = $(e.currentTarget).data(options.handle.dataAttribute);\n                var rootElement = $(options.rootElement);\n                var scrollTopOffset = rootElement.is(BODY) ? 0 : rootElement.scrollTop();\n                var handleOffset = constrain({\n                    value: resizeHandle.position().top + scrollTopOffset + e.y.delta,\n                    min: $(row).position().top + scrollTopOffset + min,\n                    max: tableBodyTopOffset + outerHeight(tableBody) + scrollTopOffset - options.handle[HEIGHT] - min\n                });\n                resizeHandle.css({ top: handleOffset });\n            },\n            resize: function (e) {\n                var that = this;\n                var options = that.options;\n                var row = $(e.currentTarget).data(options.handle.dataAttribute);\n                var currentRowHeight = outerHeight($(row));\n                var element = $(that.element);\n                var initialTableHeight = outerHeight(element);\n                var tableBody = element.children(TBODY);\n                var tableBodyHeight = tableBody.height();\n                var initialStyleHeight = row.style[HEIGHT];\n                var newRowHeight = constrain({\n                    value: currentRowHeight + e.y.initialDelta,\n                    min: options.min,\n                    max: abs(tableBodyHeight - options.min)\n                });\n                that._setRowsHeightInPixels();\n                row.style[HEIGHT] = toPixels(newRowHeight);\n                that._setTableHeight(initialTableHeight + (newRowHeight - currentRowHeight));\n                if (inPercentages(initialStyleHeight)) {\n                    that._setRowsHeightInPercentages();\n                }\n            },\n            _setRowsHeightInPixels: function () {\n                var that = this;\n                var rows = $(that.element).children(TBODY).children(TR);\n                var length = rows.length;\n                var currentRowsHeights = rows.map(function () {\n                    return outerHeight($(this));\n                });\n                var i;\n                for (i = 0; i < length; i++) {\n                    rows[i].style[HEIGHT] = toPixels(currentRowsHeights[i]);\n                }\n            },\n            _setRowsHeightInPercentages: function () {\n                var that = this;\n                var tableBody = $(that.element).children(TBODY);\n                var tableBodyHeight = tableBody.height();\n                var rows = tableBody.children(TR);\n                var length = rows.length;\n                var currentRowsHeights = rows.map(function () {\n                    return outerHeight($(this));\n                });\n                var i;\n                for (i = 0; i < length; i++) {\n                    rows[i].style[HEIGHT] = toPercentages(calculatePercentageRatio(currentRowsHeights[i], tableBodyHeight));\n                }\n            },\n            _setTableHeight: function (newHeight) {\n                var element = this.element;\n                if (inPercentages(element.style[HEIGHT])) {\n                    element.style[HEIGHT] = toPercentages(calculatePercentageRatio(newHeight, $(element).parent().height()));\n                } else {\n                    element.style[HEIGHT] = toPixels(newHeight);\n                }\n            }\n        });\n        RowResizing.create = function (editor) {\n            TableElementResizing.create(editor, {\n                name: 'rowResizing',\n                type: RowResizing,\n                eventNamespace: NS\n            });\n        };\n        RowResizing.dispose = function (editor) {\n            TableElementResizing.dispose(editor, { eventNamespace: NS });\n        };\n        extend(Editor, { RowResizing: RowResizing });\n    }(window.kendo));\n}, typeof define == 'function' && define.amd ? define : function (a1, a2, a3) {\n    (a3 || a2)();\n}));\n(function (f, define) {\n    define('editor/resizing/table-resize-handle', [\n        'editor/main',\n        'kendo.draganddrop',\n        'editor/resizing/resizing-utils'\n    ], f);\n}(function () {\n    (function (kendo, undefined) {\n        var $ = kendo.jQuery;\n        var extend = $.extend;\n        var noop = $.noop;\n        var proxy = $.proxy;\n        var Editor = kendo.ui.editor;\n        var Class = kendo.Class;\n        var Draggable = kendo.ui.Draggable;\n        var Observable = kendo.Observable;\n        var getScrollBarWidth = Editor.ResizingUtils.getScrollBarWidth;\n        var outerWidth = kendo._outerWidth;\n        var outerHeight = kendo._outerHeight;\n        var NS = '.kendoEditorTableResizeHandle';\n        var RESIZE_HANDLE_CLASS = 'k-table-resize-handle';\n        var DRAG_START = 'dragStart';\n        var DRAG = 'drag';\n        var DRAG_END = 'dragEnd';\n        var HALF_INSIDE = 'halfInside';\n        var MOUSE_OVER = 'mouseover';\n        var MOUSE_OUT = 'mouseout';\n        var BODY = 'body';\n        var TABLE = 'table';\n        var EAST = 'east';\n        var NORTH = 'north';\n        var NORTHEAST = 'northeast';\n        var NORTHWEST = 'northwest';\n        var SOUTH = 'south';\n        var SOUTHEAST = 'southeast';\n        var SOUTHWEST = 'southwest';\n        var WEST = 'west';\n        var DOT = '.';\n        var TableResizeHandle = Observable.extend({\n            init: function (options) {\n                var that = this;\n                Observable.fn.init.call(that);\n                that.options = extend({}, that.options, options);\n                that.element = $(that.options.template).appendTo(that.options.appendTo)[0];\n                that._attachEventHandlers();\n                that._addStyles();\n                that._initDraggable();\n                that._initPositioningStrategy();\n                that._initDraggingStrategy();\n                $(that.element).data(TABLE, that.options.resizableElement);\n            },\n            destroy: function () {\n                var that = this;\n                $(that.element).off(NS).remove();\n                that.element = null;\n                that._destroyDraggable();\n                that.unbind();\n            },\n            options: {\n                appendTo: null,\n                direction: SOUTHEAST,\n                resizableElement: null,\n                rtl: false,\n                template: '<div class=\\'k-table-resize-handle-wrapper\\' unselectable=\\'on\\' contenteditable=\\'false\\'>' + '<div class=\\'' + RESIZE_HANDLE_CLASS + '\\'></div>' + '</div>'\n            },\n            events: [\n                DRAG_START,\n                DRAG,\n                DRAG_END,\n                MOUSE_OVER,\n                MOUSE_OUT\n            ],\n            show: function () {\n                this._setPosition();\n            },\n            _setPosition: function () {\n                var that = this;\n                var position = that._positioningStrategy.getPosition();\n                $(that.element).css({\n                    top: position.top,\n                    left: position.left,\n                    position: 'absolute'\n                });\n            },\n            _attachEventHandlers: function () {\n                var that = this;\n                $(that.element).on(MOUSE_OVER + NS, proxy(that._onMouseOver, that)).on(MOUSE_OUT + NS, proxy(that._onMouseOut, that));\n            },\n            _onMouseOver: function () {\n                this.trigger(MOUSE_OVER);\n            },\n            _onMouseOut: function () {\n                this.trigger(MOUSE_OUT);\n            },\n            _addStyles: function () {\n                var that = this;\n                $(that.element).children(DOT + RESIZE_HANDLE_CLASS).addClass('k-resize-' + that.options.direction);\n            },\n            _initPositioningStrategy: function () {\n                var that = this;\n                var options = that.options;\n                that._positioningStrategy = HandlePositioningStrategy.create({\n                    name: options.direction,\n                    handle: that.element,\n                    resizableElement: options.resizableElement,\n                    rootElement: options.rootElement,\n                    rtl: options.rtl\n                });\n            },\n            _initDraggable: function () {\n                var that = this;\n                var element = that.element;\n                if (that._draggable || !element) {\n                    return;\n                }\n                that._draggable = new Draggable(element, {\n                    dragstart: proxy(that._onDragStart, that),\n                    drag: proxy(that._onDrag, that),\n                    dragend: proxy(that._onDragEnd, that)\n                });\n            },\n            _onDragStart: function () {\n                this.trigger(DRAG_START);\n            },\n            _onDrag: function (e) {\n                var that = this;\n                that.trigger(DRAG, that._draggingStrategy.adjustDragDelta({\n                    deltaX: e.x.delta,\n                    deltaY: e.y.delta,\n                    initialDeltaX: e.x.initialDelta,\n                    initialDeltaY: e.y.initialDelta\n                }));\n            },\n            _onDragEnd: function () {\n                this.trigger(DRAG_END);\n            },\n            _destroyDraggable: function () {\n                var that = this;\n                if (that._draggable) {\n                    that._draggable.destroy();\n                    that._draggable = null;\n                }\n            },\n            _initDraggingStrategy: function () {\n                var that = this;\n                that._draggingStrategy = HandleDraggingStrategy.create({ name: that.options.direction });\n            }\n        });\n        var StrategyFactory = Class.extend({\n            init: function () {\n                this._items = [];\n            },\n            register: function (name, type) {\n                this._items.push({\n                    name: name,\n                    type: type\n                });\n            },\n            create: function (options) {\n                var items = this._items;\n                var itemsLength = items.length;\n                var name = options.name ? options.name.toLowerCase() : '';\n                var match;\n                var item;\n                var i;\n                for (i = 0; i < itemsLength; i++) {\n                    item = items[i];\n                    if (item.name.toLowerCase() === name) {\n                        match = item;\n                        break;\n                    }\n                }\n                if (match) {\n                    return new match.type(options);\n                }\n            }\n        });\n        var PositioningStrategyFactory = StrategyFactory.extend({});\n        PositioningStrategyFactory.current = new PositioningStrategyFactory();\n        var HandlePositioningStrategy = Class.extend({\n            init: function (options) {\n                var that = this;\n                that.options = extend({}, that.options, options);\n            },\n            options: {\n                handle: null,\n                offset: HALF_INSIDE,\n                resizableElement: null,\n                rootElement: null,\n                rtl: false\n            },\n            getPosition: function () {\n                var that = this;\n                var position = that.calculatePosition();\n                var handleOffsetPosition = that.applyHandleOffset(position);\n                var scrollOffsetPosition = that.applyScrollOffset(handleOffsetPosition);\n                return scrollOffsetPosition;\n            },\n            calculatePosition: noop,\n            applyHandleOffset: function (position) {\n                var options = this.options;\n                var handle = $(options.handle);\n                if (options.offset === HALF_INSIDE) {\n                    return {\n                        top: position.top - outerHeight(handle) / 2,\n                        left: position.left - outerWidth(handle) / 2\n                    };\n                }\n                return position;\n            },\n            applyScrollOffset: function (position) {\n                var options = this.options;\n                var rootElement = $(options.rootElement);\n                var scrollBarWidth = options.rtl ? getScrollBarWidth(rootElement[0]) : 0;\n                if (!rootElement.is(BODY)) {\n                    return {\n                        top: position.top + (rootElement.scrollTop() || 0),\n                        left: position.left + (rootElement.scrollLeft() || 0) - scrollBarWidth\n                    };\n                }\n                return position;\n            }\n        });\n        HandlePositioningStrategy.create = function (options) {\n            return PositioningStrategyFactory.current.create(options);\n        };\n        var EastPositioningStrategy = HandlePositioningStrategy.extend({\n            calculatePosition: function () {\n                var resizableElement = $(this.options.resizableElement);\n                var offset = resizableElement.position();\n                return {\n                    top: offset.top + outerHeight(resizableElement) / 2,\n                    left: offset.left + outerWidth(resizableElement)\n                };\n            }\n        });\n        PositioningStrategyFactory.current.register(EAST, EastPositioningStrategy);\n        var NorthPositioningStrategy = HandlePositioningStrategy.extend({\n            calculatePosition: function () {\n                var resizableElement = $(this.options.resizableElement);\n                var offset = resizableElement.position();\n                return {\n                    top: offset.top,\n                    left: offset.left + outerWidth(resizableElement) / 2\n                };\n            }\n        });\n        PositioningStrategyFactory.current.register(NORTH, NorthPositioningStrategy);\n        var NortheastPositioningStrategy = HandlePositioningStrategy.extend({\n            calculatePosition: function () {\n                var resizableElement = $(this.options.resizableElement);\n                var offset = resizableElement.position();\n                return {\n                    top: offset.top,\n                    left: offset.left + outerWidth(resizableElement)\n                };\n            }\n        });\n        PositioningStrategyFactory.current.register(NORTHEAST, NortheastPositioningStrategy);\n        var NorthwestPositioningStrategy = HandlePositioningStrategy.extend({\n            calculatePosition: function () {\n                var resizableElement = $(this.options.resizableElement);\n                var offset = resizableElement.position();\n                return {\n                    top: offset.top,\n                    left: offset.left\n                };\n            }\n        });\n        PositioningStrategyFactory.current.register(NORTHWEST, NorthwestPositioningStrategy);\n        var SouthPositioningStrategy = HandlePositioningStrategy.extend({\n            calculatePosition: function () {\n                var resizableElement = $(this.options.resizableElement);\n                var offset = resizableElement.position();\n                return {\n                    top: offset.top + outerHeight(resizableElement),\n                    left: offset.left + outerWidth(resizableElement) / 2\n                };\n            }\n        });\n        PositioningStrategyFactory.current.register(SOUTH, SouthPositioningStrategy);\n        var SoutheastPositioningStrategy = HandlePositioningStrategy.extend({\n            calculatePosition: function () {\n                var resizableElement = $(this.options.resizableElement);\n                var offset = resizableElement.position();\n                return {\n                    top: offset.top + outerHeight(resizableElement),\n                    left: offset.left + outerWidth(resizableElement)\n                };\n            }\n        });\n        PositioningStrategyFactory.current.register(SOUTHEAST, SoutheastPositioningStrategy);\n        var SouthwestPositioningStrategy = HandlePositioningStrategy.extend({\n            calculatePosition: function () {\n                var resizableElement = $(this.options.resizableElement);\n                var offset = resizableElement.position();\n                return {\n                    top: offset.top + outerHeight(resizableElement),\n                    left: offset.left\n                };\n            }\n        });\n        PositioningStrategyFactory.current.register(SOUTHWEST, SouthwestPositioningStrategy);\n        var WestPositioningStrategy = HandlePositioningStrategy.extend({\n            calculatePosition: function () {\n                var resizableElement = $(this.options.resizableElement);\n                var offset = resizableElement.position();\n                return {\n                    top: offset.top + outerHeight(resizableElement) / 2,\n                    left: offset.left\n                };\n            }\n        });\n        PositioningStrategyFactory.current.register(WEST, WestPositioningStrategy);\n        var DraggingStrategyFactory = StrategyFactory.extend({});\n        DraggingStrategyFactory.current = new DraggingStrategyFactory();\n        var HandleDraggingStrategy = Class.extend({\n            init: function (options) {\n                var that = this;\n                that.options = extend({}, that.options, options);\n            },\n            options: {\n                deltaX: {\n                    adjustment: null,\n                    modifier: null\n                },\n                deltaY: {\n                    adjustment: null,\n                    modifier: null\n                }\n            },\n            adjustDragDelta: function (deltas) {\n                var options = this.options;\n                var xAxisAdjustment = options.deltaX.adjustment * options.deltaX.modifier;\n                var yAxisAdjustment = options.deltaY.adjustment * options.deltaY.modifier;\n                return {\n                    deltaX: deltas.deltaX * xAxisAdjustment,\n                    deltaY: deltas.deltaY * yAxisAdjustment,\n                    initialDeltaX: deltas.initialDeltaX * xAxisAdjustment,\n                    initialDeltaY: deltas.initialDeltaY * yAxisAdjustment\n                };\n            }\n        });\n        HandleDraggingStrategy.create = function (options) {\n            return DraggingStrategyFactory.current.create(options);\n        };\n        var HorizontalDraggingStrategy = HandleDraggingStrategy.extend({\n            options: {\n                deltaX: {\n                    adjustment: 1,\n                    modifier: 1\n                },\n                deltaY: {\n                    adjustment: 0,\n                    modifier: 0\n                }\n            }\n        });\n        var EastDraggingStrategy = HorizontalDraggingStrategy.extend({ options: { deltaX: { modifier: 1 } } });\n        DraggingStrategyFactory.current.register(EAST, EastDraggingStrategy);\n        var WestDraggingStrategy = HorizontalDraggingStrategy.extend({ options: { deltaX: { modifier: -1 } } });\n        DraggingStrategyFactory.current.register(WEST, WestDraggingStrategy);\n        var VerticalDraggingStrategy = HandleDraggingStrategy.extend({\n            options: {\n                deltaX: {\n                    adjustment: 0,\n                    modifier: 0\n                },\n                deltaY: {\n                    adjustment: 1,\n                    modifier: 1\n                }\n            }\n        });\n        var NorthDraggingStrategy = VerticalDraggingStrategy.extend({ options: { deltaY: { modifier: -1 } } });\n        DraggingStrategyFactory.current.register(NORTH, NorthDraggingStrategy);\n        var SouthDraggingStrategy = VerticalDraggingStrategy.extend({ options: { deltaY: { modifier: 1 } } });\n        DraggingStrategyFactory.current.register(SOUTH, SouthDraggingStrategy);\n        var HorizontalAndVerticalDraggingStrategy = HandleDraggingStrategy.extend({\n            options: {\n                deltaX: {\n                    adjustment: 1,\n                    modifier: 1\n                },\n                deltaY: {\n                    adjustment: 1,\n                    modifier: 1\n                }\n            }\n        });\n        var NorthEastDraggingStrategy = HorizontalAndVerticalDraggingStrategy.extend({\n            options: {\n                deltaX: { modifier: 1 },\n                deltaY: { modifier: -1 }\n            }\n        });\n        DraggingStrategyFactory.current.register(NORTHEAST, NorthEastDraggingStrategy);\n        var NorthWestDraggingStrategy = HorizontalAndVerticalDraggingStrategy.extend({\n            options: {\n                deltaX: { modifier: -1 },\n                deltaY: { modifier: -1 }\n            }\n        });\n        DraggingStrategyFactory.current.register(NORTHWEST, NorthWestDraggingStrategy);\n        var SouthEastDraggingStrategy = HorizontalAndVerticalDraggingStrategy.extend({\n            options: {\n                deltaX: { modifier: 1 },\n                deltaY: { modifier: 1 }\n            }\n        });\n        DraggingStrategyFactory.current.register(SOUTHEAST, SouthEastDraggingStrategy);\n        var SouthWestDraggingStrategy = HorizontalAndVerticalDraggingStrategy.extend({\n            options: {\n                deltaX: { modifier: -1 },\n                deltaY: { modifier: 1 }\n            }\n        });\n        DraggingStrategyFactory.current.register(SOUTHWEST, SouthWestDraggingStrategy);\n        extend(Editor, { TableResizeHandle: TableResizeHandle });\n    }(window.kendo));\n}, typeof define == 'function' && define.amd ? define : function (a1, a2, a3) {\n    (a3 || a2)();\n}));\n(function (f, define) {\n    define('editor/resizing/table-resizing', [\n        'editor/main',\n        'editor/resizing/table-resize-handle',\n        'editor/resizing/resizing-utils'\n    ], f);\n}(function () {\n    (function (kendo, undefined) {\n        var global = window;\n        var math = global.Math;\n        var min = math.min;\n        var max = math.max;\n        var $ = kendo.jQuery;\n        var contains = $.contains;\n        var extend = $.extend;\n        var proxy = $.proxy;\n        var browser = kendo.support.browser;\n        var Editor = kendo.ui.editor;\n        var Class = kendo.Class;\n        var TableResizeHandle = Editor.TableResizeHandle;\n        var ResizingUtils = Editor.ResizingUtils;\n        var calculatePercentageRatio = ResizingUtils.calculatePercentageRatio;\n        var constrain = ResizingUtils.constrain;\n        var inPercentages = ResizingUtils.inPercentages;\n        var inPixels = ResizingUtils.inPixels;\n        var toPercentages = ResizingUtils.toPercentages;\n        var toPixels = ResizingUtils.toPixels;\n        var outerWidth = kendo._outerWidth;\n        var outerHeight = kendo._outerHeight;\n        var NS = '.kendoEditorTableResizing';\n        var RESIZE_HANDLE_WRAPPER_CLASS = 'k-table-resize-handle-wrapper';\n        var TABLE_CLASS = 'k-table';\n        var TABLE_RESIZING_CLASS = 'k-table-resizing';\n        var DRAG_START = 'dragStart';\n        var DRAG = 'drag';\n        var DRAG_END = 'dragEnd';\n        var KEY_DOWN = 'keydown';\n        var MOUSE_DOWN = 'mousedown';\n        var MOUSE_OVER = 'mouseover';\n        var MOUSE_OUT = 'mouseout';\n        var COLUMN = 'td';\n        var ROW = 'tr';\n        var TBODY = 'tbody';\n        var TABLE = 'table';\n        var WIDTH = 'width';\n        var HEIGHT = 'height';\n        var EAST = 'east';\n        var NORTH = 'north';\n        var NORTHEAST = 'northeast';\n        var NORTHWEST = 'northwest';\n        var SOUTH = 'south';\n        var SOUTHEAST = 'southeast';\n        var SOUTHWEST = 'southwest';\n        var WEST = 'west';\n        var DOT = '.';\n        function isUndefined(value) {\n            return typeof value === 'undefined';\n        }\n        var TableResizing = Class.extend({\n            init: function (element, options) {\n                var that = this;\n                that.options = extend({}, that.options, options);\n                that.handles = [];\n                if ($(element).is(TABLE)) {\n                    that.element = element;\n                }\n            },\n            destroy: function () {\n                var that = this;\n                $(that.element).off(NS);\n                that.element = null;\n                $(that.options.rootElement).off(KEY_DOWN + NS);\n                that._destroyResizeHandles();\n            },\n            options: {\n                appendHandlesTo: null,\n                rtl: false,\n                rootElement: null,\n                minWidth: 10,\n                minHeight: 10,\n                handles: [\n                    { direction: NORTHWEST },\n                    { direction: NORTH },\n                    { direction: NORTHEAST },\n                    { direction: EAST },\n                    { direction: SOUTHEAST },\n                    { direction: SOUTH },\n                    { direction: SOUTHWEST },\n                    { direction: WEST }\n                ]\n            },\n            resize: function (args) {\n                var that = this;\n                var deltas = extend({}, {\n                    deltaX: 0,\n                    deltaY: 0,\n                    initialDeltaX: 0,\n                    initialDeltaY: 0\n                }, args);\n                that._resizeWidth(deltas.deltaX, deltas.initialDeltaX);\n                that._resizeHeight(deltas.deltaY, deltas.initialDeltaY);\n                that.showResizeHandles();\n            },\n            _resizeWidth: function (delta, initialDelta) {\n                var that = this;\n                var element = $(that.element);\n                var styleWidth = element[0].style[WIDTH];\n                var currentWidth = outerWidth(element);\n                var parentWidth = element.parent().width();\n                var maxWidth = that._getMaxDimensionValue(WIDTH);\n                var newWidth;\n                var ratioValue;\n                var ratioTotalValue;\n                var constrainedWidth;\n                if (delta === 0) {\n                    return;\n                }\n                if (isUndefined(that._initialElementWidth)) {\n                    that._initialElementWidth = currentWidth;\n                }\n                constrainedWidth = constrain({\n                    value: that._initialElementWidth + initialDelta,\n                    min: that.options.minWidth,\n                    max: maxWidth\n                });\n                if (inPercentages(styleWidth)) {\n                    if (currentWidth + delta > parentWidth) {\n                        ratioValue = max(constrainedWidth, parentWidth);\n                        ratioTotalValue = min(constrainedWidth, parentWidth);\n                    } else {\n                        ratioValue = min(constrainedWidth, parentWidth);\n                        ratioTotalValue = max(constrainedWidth, parentWidth);\n                    }\n                    newWidth = toPercentages(calculatePercentageRatio(ratioValue, ratioTotalValue));\n                } else {\n                    newWidth = toPixels(constrainedWidth);\n                }\n                that._setColumnsWidth();\n                element[0].style[WIDTH] = newWidth;\n            },\n            _resizeHeight: function (delta, initialDelta) {\n                var that = this;\n                var element = $(that.element);\n                var styleHeight = element[0].style[HEIGHT];\n                var currentHeight = outerHeight(element);\n                var parent = element.parent();\n                var parentHeight = parent.height();\n                var maxHeight = that._getMaxDimensionValue(HEIGHT);\n                var newHeight;\n                var ratioValue;\n                var ratioTotalValue;\n                var constrainedHeight;\n                var minHeight = that.options.minHeight;\n                var hasRowsInPixels = that._hasRowsInPixels();\n                if (delta === 0) {\n                    return;\n                }\n                if (isUndefined(that._initialElementHeight)) {\n                    that._initialElementHeight = currentHeight;\n                }\n                constrainedHeight = constrain({\n                    value: that._initialElementHeight + initialDelta,\n                    min: minHeight,\n                    max: maxHeight\n                });\n                if (hasRowsInPixels && delta < 0) {\n                    that._setRowsHeightInPercentages();\n                }\n                if (inPercentages(styleHeight)) {\n                    if (currentHeight + delta > parentHeight) {\n                        ratioValue = max(constrainedHeight, parentHeight);\n                        ratioTotalValue = min(constrainedHeight, parentHeight);\n                    } else {\n                        ratioValue = min(constrainedHeight, parentHeight);\n                        ratioTotalValue = max(constrainedHeight, parentHeight);\n                    }\n                    newHeight = toPercentages(calculatePercentageRatio(ratioValue, ratioTotalValue));\n                } else {\n                    newHeight = toPixels(constrainedHeight);\n                }\n                element[0].style[HEIGHT] = newHeight;\n                if (hasRowsInPixels && delta < 0) {\n                    that._setRowsHeightInPixels();\n                }\n            },\n            _getMaxDimensionValue: function (dimension) {\n                var that = this;\n                var element = $(that.element);\n                var dimensionLowercase = dimension.toLowerCase();\n                var rtlModifier = that.options.rtl ? -1 : 1;\n                var parent = $(that.element).parent();\n                var parentElement = parent[0];\n                var parentDimension = parent[dimensionLowercase]();\n                var parentScrollOffset = rtlModifier * (dimension === WIDTH ? parent.scrollLeft() : parent.scrollTop());\n                if (parentElement === element.closest(COLUMN)[0]) {\n                    if (parentElement.style[dimensionLowercase] === '' && !inPercentages(that.element.style[dimensionLowercase])) {\n                        return Infinity;\n                    } else {\n                        return parentDimension + parentScrollOffset;\n                    }\n                } else {\n                    return parentDimension + parentScrollOffset;\n                }\n            },\n            _setColumnsWidth: function () {\n                var that = this;\n                var element = $(that.element);\n                var parentElement = element.parent()[0];\n                var parentColumn = element.closest(COLUMN);\n                var columns = parentColumn.closest(ROW).children();\n                var columnsLength = columns.length;\n                var i;\n                function isWidthInPercentages(element) {\n                    var styleWidth = element.style.width;\n                    if (styleWidth !== '') {\n                        return inPercentages(styleWidth) ? true : false;\n                    } else {\n                        return $(element).hasClass(TABLE_CLASS) ? true : false;\n                    }\n                }\n                if (isWidthInPercentages(element[0]) && parentElement === parentColumn[0] && parentElement.style[WIDTH] === '') {\n                    for (i = 0; i < columnsLength; i++) {\n                        columns[i].style[WIDTH] = toPixels($(columns[i]).width());\n                    }\n                }\n            },\n            _hasRowsInPixels: function () {\n                var that = this;\n                var rows = $(that.element).children(TBODY).children(ROW);\n                for (var i = 0; i < rows.length; i++) {\n                    if (rows[i].style.height === '' || inPixels(rows[i].style.height)) {\n                        return true;\n                    }\n                }\n                return false;\n            },\n            _setRowsHeightInPercentages: function () {\n                var that = this;\n                var tableBody = $(that.element).children(TBODY);\n                var tableBodyHeight = tableBody.height();\n                var rows = tableBody.children(ROW);\n                var length = rows.length;\n                var currentRowsHeights = rows.map(function () {\n                    return outerHeight($(this));\n                });\n                var i;\n                for (i = 0; i < length; i++) {\n                    rows[i].style[HEIGHT] = toPercentages(calculatePercentageRatio(currentRowsHeights[i], tableBodyHeight));\n                }\n            },\n            _setRowsHeightInPixels: function () {\n                var that = this;\n                var rows = $(that.element).children(TBODY).children(ROW);\n                var length = rows.length;\n                var currentRowsHeights = rows.map(function () {\n                    return outerHeight($(this));\n                });\n                var i;\n                for (i = 0; i < length; i++) {\n                    rows[i].style[HEIGHT] = toPixels(currentRowsHeights[i]);\n                }\n            },\n            showResizeHandles: function () {\n                var that = this;\n                that._initResizeHandles();\n                that._showResizeHandles();\n            },\n            _initResizeHandles: function () {\n                var that = this;\n                var handles = that.handles;\n                var options = that.options;\n                var handleOptions = that.options.handles;\n                var length = handleOptions.length;\n                var i;\n                if (handles && handles.length > 0) {\n                    return;\n                }\n                for (i = 0; i < length; i++) {\n                    that.handles.push(new TableResizeHandle(extend({\n                        appendTo: options.appendHandlesTo,\n                        resizableElement: that.element,\n                        rootElement: options.rootElement,\n                        rtl: options.rtl\n                    }, handleOptions[i])));\n                }\n                that._bindToResizeHandlesEvents();\n            },\n            _destroyResizeHandles: function () {\n                var that = this;\n                var length = that.handles ? that.handles.length : 0;\n                for (var i = 0; i < length; i++) {\n                    that.handles[i].destroy();\n                }\n            },\n            _showResizeHandles: function () {\n                var that = this;\n                var handles = that.handles || [];\n                var length = handles.length;\n                var i;\n                for (i = 0; i < length; i++) {\n                    that.handles[i].show();\n                }\n            },\n            _bindToResizeHandlesEvents: function () {\n                var that = this;\n                var handles = that.handles || [];\n                var length = handles.length;\n                var i;\n                var handle;\n                for (i = 0; i < length; i++) {\n                    handle = handles[i];\n                    handle.bind(DRAG_START, proxy(that._onResizeHandleDragStart, that));\n                    handle.bind(DRAG, proxy(that._onResizeHandleDrag, that));\n                    handle.bind(DRAG_END, proxy(that._onResizeHandleDragEnd, that));\n                    handle.bind(MOUSE_OVER, proxy(that._onResizeHandleMouseOver, that));\n                    handle.bind(MOUSE_OUT, proxy(that._onResizeHandleMouseOut, that));\n                }\n            },\n            _onResizeHandleDragStart: function () {\n                var that = this;\n                var element = $(that.element);\n                element.addClass(TABLE_RESIZING_CLASS);\n                that._initialElementHeight = outerHeight(element);\n                that._initialElementWidth = outerWidth(element);\n                that._disableKeyboard();\n            },\n            _onResizeHandleDrag: function (e) {\n                this.resize(e);\n            },\n            _onResizeHandleDragEnd: function () {\n                var that = this;\n                $(that.element).removeClass(TABLE_RESIZING_CLASS);\n                that._enableKeyboard();\n            },\n            _enableKeyboard: function () {\n                $(this.options.rootElement).off(KEY_DOWN + NS);\n            },\n            _disableKeyboard: function () {\n                $(this.options.rootElement).on(KEY_DOWN + NS, function (e) {\n                    e.preventDefault();\n                });\n            }\n        });\n        var TableResizingFactory = Class.extend({\n            create: function (editor) {\n                var factory = this;\n                $(editor.body).on(MOUSE_DOWN + NS, TABLE, function (e) {\n                    var eventTarget = e.target;\n                    var eventCurrentTarget = e.currentTarget;\n                    var tableResizing = editor.tableResizing;\n                    var element = tableResizing ? tableResizing.element : null;\n                    if (tableResizing) {\n                        if (element && eventCurrentTarget !== element) {\n                            if (contains(eventCurrentTarget, element) && element !== eventTarget && contains(element, eventTarget)) {\n                                return;\n                            } else {\n                                if (element !== eventTarget) {\n                                    editor._destroyTableResizing();\n                                    factory._initResizing(editor, eventCurrentTarget);\n                                }\n                            }\n                        }\n                    } else {\n                        factory._initResizing(editor, eventCurrentTarget);\n                    }\n                    editor._showTableResizeHandles();\n                }).on(MOUSE_DOWN + NS, function (e) {\n                    var tableResizing = editor.tableResizing;\n                    var element = tableResizing ? tableResizing.element : null;\n                    var target = e.target;\n                    var isResizeHandleOrChild = $(target).hasClass(RESIZE_HANDLE_WRAPPER_CLASS) || $(target).parents(DOT + RESIZE_HANDLE_WRAPPER_CLASS).length > 0;\n                    if (tableResizing && element !== target && !contains(element, target) && !isResizeHandleOrChild) {\n                        editor._destroyTableResizing();\n                    }\n                });\n            },\n            dispose: function (editor) {\n                $(editor.body).off(NS);\n            },\n            _initResizing: function (editor, table) {\n                if (!browser.msie && !browser.mozilla) {\n                    editor.tableResizing = new TableResizing(table, {\n                        appendHandlesTo: editor.body,\n                        rtl: kendo.support.isRtl(editor.element),\n                        rootElement: editor.body\n                    });\n                }\n            }\n        });\n        TableResizingFactory.current = new TableResizingFactory();\n        TableResizing.create = function (editor) {\n            TableResizingFactory.current.create(editor);\n        };\n        TableResizing.dispose = function (editor) {\n            TableResizingFactory.current.dispose(editor);\n        };\n        extend(Editor, { TableResizing: TableResizing });\n    }(window.kendo));\n}, typeof define == 'function' && define.amd ? define : function (a1, a2, a3) {\n    (a3 || a2)();\n}));\n(function (f, define) {\n    define('editor/immutables', ['editor/tables'], f);\n}(function () {\n    (function ($, undefined) {\n        var kendo = window.kendo, Class = kendo.Class, Editor = kendo.ui.editor, dom = Editor.Dom, template = kendo.template, RangeUtils = Editor.RangeUtils, complexBlocks = [\n                'ul',\n                'ol',\n                'tbody',\n                'thead',\n                'table'\n            ], toolsToBeUpdated = [\n                'bold',\n                'italic',\n                'underline',\n                'strikethrough',\n                'superscript',\n                'subscript',\n                'forecolor',\n                'backcolor',\n                'fontname',\n                'fontsize',\n                'createlink',\n                'unlink',\n                'autolink',\n                'addcolumnleft',\n                'addcolumnright',\n                'addrowabove',\n                'addrowbelow',\n                'deleterow',\n                'deletecolumn',\n                'mergecells',\n                'formatting',\n                'cleanformatting'\n            ], IMMUTABALE = 'k-immutable', IMMUTABALE_MARKER_SELECTOR = '[' + IMMUTABALE + ']', IMMUTABLE_SELECTOR = '[contenteditable=\\'false\\']';\n        var rootCondition = function (node) {\n            return $(node).is('body,.k-editor');\n        };\n        var immutable = function (node) {\n            return node.getAttribute && node.getAttribute('contenteditable') == 'false';\n        };\n        var immutableParent = function (node) {\n            return dom.closestBy(node, immutable, rootCondition);\n        };\n        var expandImmutablesIn = function (range) {\n            var startImmutableParent = immutableParent(range.startContainer);\n            var endImmutableParent = immutableParent(range.endContainer);\n            if (startImmutableParent || endImmutableParent) {\n                if (startImmutableParent) {\n                    range.setStartBefore(startImmutableParent);\n                }\n                if (endImmutableParent) {\n                    range.setEndAfter(endImmutableParent);\n                }\n            }\n        };\n        var immutablesContext = function (range) {\n            if (immutableParent(range.commonAncestorContainer)) {\n                return true;\n            } else if (immutableParent(range.startContainer) || immutableParent(range.endContainer)) {\n                var editableNodes = RangeUtils.editableTextNodes(range);\n                if (editableNodes.length === 0) {\n                    return true;\n                }\n            }\n            return false;\n        };\n        var randomId = function (length) {\n            var result = '';\n            var chars = '0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ';\n            for (var i = length || 10; i > 0; --i) {\n                result += chars.charAt(Math.round(Math.random() * (chars.length - 1)));\n            }\n            return result;\n        };\n        var removeImmutables = function (root) {\n            var serializedImmutables = { empty: true }, nodeName, id, serialized;\n            $(root).find(IMMUTABLE_SELECTOR).each(function (i, node) {\n                nodeName = dom.name(node);\n                id = randomId();\n                serialized = '<' + nodeName + ' ' + IMMUTABALE + '=\\'' + id + '\\'></' + nodeName + '>';\n                serializedImmutables[id] = {\n                    node: node,\n                    style: $(node).attr('style')\n                };\n                serializedImmutables.empty = false;\n                $(node).replaceWith(serialized);\n            });\n            return serializedImmutables;\n        };\n        var restoreImmutables = function (root, serializedImmutables) {\n            var id, immutable;\n            $(root).find(IMMUTABALE_MARKER_SELECTOR).each(function (i, node) {\n                id = node.getAttribute(IMMUTABALE);\n                immutable = serializedImmutables[id];\n                $(node).replaceWith(immutable.node);\n                if (immutable.style != $(immutable.node).attr('style')) {\n                    $(immutable.node).removeAttr('style').attr('style', immutable.style);\n                }\n            });\n        };\n        var deletingKey = function (keyCode) {\n            var keys = kendo.keys;\n            return keyCode === keys.BACKSPACE || keyCode == keys.DELETE;\n        };\n        var updateToolOptions = function (tool) {\n            var options = tool ? tool.options : undefined;\n            if (options && options.finder) {\n                options.finder._initOptions({ immutables: true });\n            }\n        };\n        var Immutables = Class.extend({\n            init: function (editor) {\n                this.editor = editor;\n                this.serializedImmutables = {};\n                this.options = $.extend({}, editor && editor.options && editor.options.immutables);\n                var tools = editor.toolbar.tools;\n                updateToolOptions(tools.justifyLeft);\n                updateToolOptions(tools.justifyCenter);\n                updateToolOptions(tools.justifyRight);\n                updateToolOptions(tools.justifyFull);\n            },\n            serialize: function (node) {\n                var result = this._toHtml(node), id;\n                if (result.indexOf(IMMUTABALE) === -1) {\n                    id = this.randomId();\n                    result = result.replace(/>/, ' ' + IMMUTABALE + '=\"' + id + '\">');\n                } else {\n                    id = result.match(/k-immutable\\s*=\\s*['\"](.*)['\"]/)[1];\n                }\n                this.serializedImmutables[id] = node;\n                return result;\n            },\n            _toHtml: function (node) {\n                var serialization = this.options.serialization;\n                var serializationType = typeof serialization;\n                var nodeName;\n                switch (serializationType) {\n                case 'string':\n                    return template(serialization)(node);\n                case 'function':\n                    return serialization(node);\n                default:\n                    nodeName = dom.name(node);\n                    return '<' + nodeName + '></' + nodeName + '>';\n                }\n            },\n            deserialize: function (node) {\n                var that = this;\n                var deserialization = this.options.deserialization;\n                $(IMMUTABALE_MARKER_SELECTOR, node).each(function () {\n                    var id = this.getAttribute(IMMUTABALE);\n                    var immutable = that.serializedImmutables[id];\n                    if (kendo.isFunction(deserialization)) {\n                        deserialization(this, immutable);\n                    }\n                    $(this).replaceWith(immutable);\n                });\n                that.serializedImmutables = {};\n            },\n            randomId: function (length) {\n                return randomId(length);\n            },\n            keydown: function (e, range) {\n                var isDeleting = deletingKey(e.keyCode);\n                var shouldCancelEvent = isDeleting && this._cancelDeleting(e, range) || !isDeleting && this._cancelTyping(e, range);\n                if (shouldCancelEvent) {\n                    e.preventDefault();\n                    return true;\n                }\n            },\n            _cancelTyping: function (e, range) {\n                var editor = this.editor;\n                var keyboard = editor.keyboard;\n                return range.collapsed && !keyboard.typingInProgress && keyboard.isTypingKey(e) && immutablesContext(range);\n            },\n            _cancelDeleting: function (e, range) {\n                var keys = kendo.keys;\n                var backspace = e.keyCode === keys.BACKSPACE;\n                var del = e.keyCode == keys.DELETE;\n                if (!backspace && !del) {\n                    return false;\n                }\n                var cancelDeleting = false;\n                if (range.collapsed) {\n                    if (immutablesContext(range)) {\n                        return true;\n                    }\n                    var immutable = this.nextImmutable(range, del);\n                    if (immutable && backspace) {\n                        var closestSelectionLi = dom.closest(range.commonAncestorContainer, 'li');\n                        if (closestSelectionLi) {\n                            var closestImmutableLi = dom.closest(immutable, 'li');\n                            if (closestImmutableLi && closestImmutableLi !== closestSelectionLi) {\n                                return cancelDeleting;\n                            }\n                        }\n                    }\n                    if (immutable && !dom.tableCell(immutable)) {\n                        if (dom.parentOfType(immutable, complexBlocks) === dom.parentOfType(range.commonAncestorContainer, complexBlocks)) {\n                            while (immutable && immutable.parentNode.childNodes.length == 1) {\n                                immutable = immutable.parentNode;\n                            }\n                            if (dom.tableCell(immutable)) {\n                                return cancelDeleting;\n                            }\n                            this._removeImmutable(immutable, range);\n                        }\n                        cancelDeleting = true;\n                    }\n                }\n                return cancelDeleting;\n            },\n            nextImmutable: function (range, forwards) {\n                var commonContainer = range.commonAncestorContainer;\n                if (dom.isBom(commonContainer) || (forwards && RangeUtils.isEndOf(range, commonContainer) || !forwards && RangeUtils.isStartOf(range, commonContainer))) {\n                    var next = this._nextNode(commonContainer, forwards);\n                    if (next && dom.isBlock(next) && !immutableParent(next)) {\n                        while (next && next.children && next.children[forwards ? 0 : next.children.length - 1]) {\n                            next = next.children[forwards ? 0 : next.children.length - 1];\n                        }\n                    }\n                    return immutableParent(next);\n                }\n            },\n            _removeImmutable: function (immutable, range) {\n                var editor = this.editor;\n                var startRestorePoint = new Editor.RestorePoint(range, editor.body);\n                dom.remove(immutable);\n                Editor._finishUpdate(editor, startRestorePoint);\n            },\n            _nextNode: function (node, forwards) {\n                var sibling = forwards ? 'nextSibling' : 'previousSibling';\n                var current = node, next;\n                while (current && !next) {\n                    next = current[sibling];\n                    if (next && dom.isDataNode(next) && /^\\s|[\\ufeff]$/.test(next.nodeValue)) {\n                        current = next;\n                        next = current[sibling];\n                    }\n                    if (!next) {\n                        current = current.parentNode;\n                    }\n                }\n                return next;\n            }\n        });\n        Immutables.immutable = immutable;\n        Immutables.immutableParent = immutableParent;\n        Immutables.expandImmutablesIn = expandImmutablesIn;\n        Immutables.immutablesContext = immutablesContext;\n        Immutables.toolsToBeUpdated = toolsToBeUpdated;\n        Immutables.removeImmutables = removeImmutables;\n        Immutables.restoreImmutables = restoreImmutables;\n        Editor.Immutables = Immutables;\n    }(window.kendo.jQuery));\n}, typeof define == 'function' && define.amd ? define : function (a1, a2, a3) {\n    (a3 || a2)();\n}));\n(function (f, define) {\n    define('editor/table-wizard/table-wizard-command', ['editor/tables'], f);\n}(function () {\n    (function ($, undefined) {\n        var kendo = window.kendo, Editor = kendo.ui.editor, EditorUtils = Editor.EditorUtils, RangeUtils = Editor.RangeUtils, dom = Editor.Dom, registerTool = EditorUtils.registerTool, ToolTemplate = Editor.ToolTemplate, Command = Editor.Command;\n        var tableFormatFinder = new Editor.BlockFormatFinder([{ tags: ['table'] }]);\n        var cellsFormatFinder = new Editor.BlockFormatFinder([{\n                tags: [\n                    'td',\n                    'th'\n                ]\n            }]);\n        var reUnit = /([a-z]+|%)$/i;\n        var TableWizardCommand = Command.extend({\n            exec: function () {\n                var cmd = this;\n                var editor = cmd.editor;\n                var range = cmd.range = cmd.lockRange();\n                var selectedTable = cmd._sourceTable = !cmd.options.insertNewTable ? cmd._selectedTable(range) : undefined;\n                var selectedCells = cmd._selectedTableCells = selectedTable ? cmd._selectedCells(range) : undefined;\n                var options = {\n                    visible: false,\n                    messages: editor.options.messages,\n                    closeCallback: $.proxy(cmd.onDialogClose, cmd),\n                    table: cmd.parseTable(selectedTable, selectedCells),\n                    dialogOptions: editor.options.dialogOptions,\n                    isRtl: kendo.support.isRtl(editor.wrapper)\n                };\n                var dialog = new Editor.TableWizardDialog(options);\n                dialog.open();\n            },\n            onDialogClose: function (data) {\n                var cmd = this;\n                cmd.releaseRange(cmd.range);\n                if (data) {\n                    if (cmd.options.insertNewTable) {\n                        cmd.insertTable(cmd.createNewTable(data));\n                    } else {\n                        cmd.updateTable(data, cmd._sourceTable, cmd._selectedTableCells);\n                    }\n                }\n            },\n            releaseRange: function (range) {\n                var cmd = this;\n                var doc = cmd.editor.document;\n                dom.windowFromDocument(doc).focus();\n                Command.fn.releaseRange.call(cmd, range);\n            },\n            insertTable: function (table) {\n                var range = this.range;\n                range.insertNode(table);\n                range.collapse(true);\n                this.editor.selectRange(range);\n                this._ensureFocusableAfterTable(table);\n            },\n            _ensureFocusableAfterTable: function (table) {\n                var siblingNodes = $(table).parent().contents();\n                var lastSiblingIndex = siblingNodes.length - 1;\n                var lastSibling = siblingNodes.get(lastSiblingIndex);\n                while (lastSibling.nodeValue !== null && (lastSibling.nodeValue === ' ' || lastSibling.nodeValue === '')) {\n                    lastSiblingIndex -= 1;\n                    lastSibling = siblingNodes.get(lastSiblingIndex);\n                }\n                if (lastSibling === table) {\n                    dom.insertAfter(dom.createEmptyNode(this.editor.document, 'p'), table);\n                }\n            },\n            updateTable: function (data, table, selectedCells) {\n                var cmd = this;\n                var tableRows = $(table.rows).toArray();\n                var tableProp = data.tableProperties;\n                var rows = tableProp.rows;\n                var columns = tableProp.columns;\n                var last = function (collection) {\n                    return collection[collection.length - 1];\n                };\n                while (selectedCells.length > 1) {\n                    selectedCells.pop();\n                }\n                var lastSelectedRow = selectedCells.length ? last(selectedCells).parentNode : last(tableRows);\n                var row, parent;\n                cmd._deleteTableRows(tableRows, tableRows.length - rows);\n                if (tableRows.length < rows) {\n                    var rowIndex = $(lastSelectedRow).index();\n                    var cellsLength = lastSelectedRow.cells.length;\n                    var newRowsCount = rows - tableRows.length;\n                    parent = lastSelectedRow.parentNode;\n                    while (newRowsCount) {\n                        row = parent.insertRow(rowIndex + 1);\n                        cmd._insertCells(cellsLength - row.cells.length, row);\n                        newRowsCount--;\n                    }\n                }\n                if (tableRows[0].cells.length > columns) {\n                    $(tableRows).each(function (i, row) {\n                        while (row.cells.length > columns) {\n                            row.deleteCell(-1);\n                        }\n                    });\n                }\n                if (tableRows[0].cells.length < columns) {\n                    var cellIndex = $(last(selectedCells) || last(lastSelectedRow.cells)).index();\n                    $(tableRows).each(function (i, row) {\n                        cmd._insertCells(columns - row.cells.length, row, cellIndex + 1);\n                    });\n                }\n                cmd._updateTableProperties(table, tableProp);\n                var cellProp = data.cellProperties;\n                if (selectedCells[0]) {\n                    dom.attr(selectedCells[0], { id: cellProp.id || null });\n                }\n                (cellProp.selectAllCells ? $(tableRows).children() : $(selectedCells)).each(function (i, cell) {\n                    cmd._updateCellProperties(cell, cellProp);\n                });\n                cmd._updateCaption(table, tableProp);\n                tableProp.cellsWithHeaders = tableProp.cellsWithHeaders || false;\n                if (cmd.cellsWithHeadersAssociated(table) != tableProp.cellsWithHeaders) {\n                    cmd.associateCellsWithHeader(table, tableProp.cellsWithHeaders);\n                }\n            },\n            _isHeadingRow: function (row) {\n                return dom.is(row.parentNode, 'thead') || dom.is(row.cells[0], 'th');\n            },\n            associateCellsWithHeader: function (table, associate) {\n                var timestamp = new Date().getTime();\n                var ids = [];\n                var columns = table.rows[0].cells.length;\n                var index, nextRow, isDataRow;\n                var generateIds = function () {\n                    for (var i = 0; i < columns; i++) {\n                        ids[i] = 'table' + ++timestamp;\n                    }\n                };\n                var modifySellsIds = function (c, cell) {\n                    $(cell)[associate ? 'attr' : 'removeAttr']('id', ids[c]);\n                };\n                var modifyCellsHeadings = function (c, cell) {\n                    $(cell)[associate ? 'attr' : 'removeAttr']('headers', ids[c]);\n                };\n                var isHeadingRow = this._isHeadingRow;\n                $(table.rows).each(function (r, row) {\n                    if (isHeadingRow(row)) {\n                        index = r;\n                        nextRow = table.rows[++index];\n                        isDataRow = nextRow && !isHeadingRow(nextRow);\n                        if (isDataRow) {\n                            generateIds();\n                            $(row.cells).each(modifySellsIds);\n                        }\n                        while (isDataRow) {\n                            $(nextRow.cells).each(modifyCellsHeadings);\n                            nextRow = table.rows[++index];\n                            isDataRow = nextRow && !isHeadingRow(nextRow);\n                        }\n                    }\n                });\n            },\n            cellsWithHeadersAssociated: function (table) {\n                var cells = $(table.rows).children();\n                var isHeadingRow = this._isHeadingRow;\n                var headingIds = [];\n                cells.each(function (c, cell) {\n                    if (cell.id && isHeadingRow(cell.parentNode)) {\n                        headingIds.push(cell.id);\n                    }\n                });\n                var associatedCells = cells.filter(function (c, cell) {\n                    var headersAttr = cell.getAttribute('headers');\n                    return headersAttr && !isHeadingRow(cell.parentNode) && $.inArray(headersAttr, headingIds) > -1;\n                });\n                return !!associatedCells.length;\n            },\n            _insertCells: function (count, row, index) {\n                index = isNaN(index) ? -1 : index;\n                for (var i = 0, cell; i < count; i++) {\n                    cell = row.insertCell(index);\n                    cell.innerHTML = '&nbsp;';\n                }\n            },\n            _deleteTableRows: function (rows, count) {\n                for (var i = 0, row, rowParent; i < count; i++) {\n                    row = rows.pop();\n                    rowParent = row.parentNode;\n                    rowParent.removeChild(row);\n                    if (!rowParent.rows.length) {\n                        dom.remove(rowParent);\n                    }\n                }\n            },\n            createNewTable: function (data) {\n                var cmd = this;\n                var doc = cmd.editor.document;\n                var tableProp = data.tableProperties;\n                var cellProp = data.cellProperties;\n                var cellPropToAll = cellProp.selectAllCells;\n                var table = dom.create(doc, 'table');\n                cmd._updateTableProperties(table, tableProp);\n                cmd._updateCaption(table, tableProp);\n                var tbody = table.createTBody();\n                for (var r = 0, row; r < tableProp.rows; r++) {\n                    row = tbody.insertRow();\n                    for (var c = 0, cell; c < tableProp.columns; c++) {\n                        cell = row.insertCell();\n                        cell.innerHTML = '&nbsp;';\n                        if (r === 0 && c === 0 && cellProp.id) {\n                            cell.id = cellProp.id;\n                        }\n                        cmd._updateCellProperties(cell, cellPropToAll || r === 0 && c === 0 ? cellProp : {});\n                    }\n                }\n                if (tableProp.cellsWithHeaders) {\n                    cmd.associateCellsWithHeader(table, tableProp.cellsWithHeaders);\n                }\n                return table;\n            },\n            _updateTableProperties: function (table, data) {\n                var style = this._getStylesData(data);\n                dom.attr(table, {\n                    cellSpacing: data.cellSpacing || null,\n                    cellPadding: data.cellPadding || null,\n                    className: data.className || null,\n                    id: data.id || null,\n                    summary: data.summary || null,\n                    style: style || null\n                });\n                $(table).addClass('k-table');\n            },\n            _updateCellProperties: function (cell, data) {\n                var style = this._getStylesData(data);\n                style.padding = data.cellPadding || null;\n                style.margin = data.cellMargin || null;\n                dom.attr(cell, {\n                    style: style || null,\n                    className: data.className || null\n                });\n            },\n            _updateCaption: function (table, data) {\n                if (table.caption && !data.captionContent) {\n                    table.deleteCaption();\n                } else if (data.captionContent) {\n                    var caption = table.createCaption();\n                    caption.innerHTML = data.captionContent;\n                    var alignment = this._getAlignmentData(data.captionAlignment);\n                    dom.attr(caption, {\n                        style: {\n                            textAlign: alignment.textAlign,\n                            verticalAlign: alignment.verticalAlign\n                        }\n                    });\n                }\n            },\n            _getStylesData: function (data) {\n                var alignment = this._getAlignmentData(data.alignment);\n                var whiteSpace = 'wrapText' in data ? data.wrapText ? '' : 'nowrap' : null;\n                return {\n                    width: data.width ? data.width + data.widthUnit : null,\n                    height: data.height ? data.height + data.heightUnit : null,\n                    textAlign: alignment.textAlign,\n                    verticalAlign: alignment.verticalAlign,\n                    backgroundColor: data.bgColor || null,\n                    borderWidth: data.borderWidth,\n                    borderStyle: data.borderStyle,\n                    borderColor: data.borderColor,\n                    borderCollapse: data.collapseBorders ? 'collapse' : null,\n                    whiteSpace: whiteSpace\n                };\n            },\n            _getAlignmentData: function (alignment) {\n                var textAlign = '';\n                var verticalAlign = textAlign;\n                if (alignment) {\n                    if (alignment.indexOf(' ') != -1) {\n                        var align = alignment.split(' ');\n                        textAlign = align[0];\n                        verticalAlign = align[1];\n                    } else {\n                        textAlign = alignment;\n                    }\n                }\n                return {\n                    textAlign: textAlign,\n                    verticalAlign: verticalAlign\n                };\n            },\n            parseTable: function (table, selectedCells) {\n                if (!table) {\n                    return {\n                        tableProperties: {},\n                        selectedCells: []\n                    };\n                }\n                var cmd = this;\n                var tStyle = table.style;\n                var rows = table.rows;\n                var caption = table.caption;\n                var captionClone = $(caption ? caption.cloneNode(true) : undefined);\n                captionClone.find('.k-marker').remove();\n                var cssClass = table.className;\n                cssClass = cssClass.replace(/^k-table\\s|\\sk-table$/, '');\n                cssClass = cssClass.replace(/\\sk-table\\s/, ' ');\n                cssClass = cssClass.replace(/^k-table$/, '');\n                var tableAlignment = cmd._getAlignment(table, true);\n                var captionAlignment = caption ? cmd._getAlignment(caption) : undefined;\n                var cellsWithHeaders = cmd.cellsWithHeadersAssociated(table);\n                var tableJson = {\n                    tableProperties: {\n                        width: tStyle.width || table.width ? parseFloat(tStyle.width || table.width) : null,\n                        height: tStyle.height || table.height ? parseFloat(tStyle.height || table.height) : null,\n                        columns: rows[0] ? rows[0].children.length : 0,\n                        rows: rows.length,\n                        widthUnit: cmd._getUnit(tStyle.width),\n                        heightUnit: cmd._getUnit(tStyle.height),\n                        cellSpacing: table.cellSpacing,\n                        cellPadding: table.cellPadding,\n                        alignment: tableAlignment.textAlign,\n                        bgColor: tStyle.backgroundColor || table.bgColor,\n                        className: cssClass,\n                        id: table.id,\n                        borderWidth: tStyle.borderWidth || table.border,\n                        borderColor: tStyle.borderColor,\n                        borderStyle: tStyle.borderStyle || '',\n                        collapseBorders: !!tStyle.borderCollapse,\n                        summary: table.summary,\n                        captionContent: caption ? captionClone.html() : '',\n                        captionAlignment: caption && captionAlignment.textAlign ? captionAlignment.textAlign + ' ' + captionAlignment.verticalAlign : '',\n                        cellsWithHeaders: cellsWithHeaders\n                    },\n                    selectedCells: []\n                };\n                tableJson.rows = cmd.parseTableRows(rows, selectedCells, tableJson);\n                return tableJson;\n            },\n            parseTableRows: function (rows, selectedCells, tableJson) {\n                var cmd = this;\n                var data = [], row, rowData, cells, cell, cellData;\n                for (var i = 0; i < rows.length; i++) {\n                    row = rows[i];\n                    rowData = { cells: [] };\n                    cells = row.cells;\n                    data.push(rowData);\n                    for (var j = 0; j < cells.length; j++) {\n                        cell = cells[j];\n                        cellData = cmd.parseCell(cell);\n                        if ($.inArray(cell, selectedCells) != -1) {\n                            tableJson.selectedCells.push(cellData);\n                        }\n                        rowData.cells.push(cellData);\n                    }\n                }\n                return data;\n            },\n            parseCell: function (cell) {\n                var cmd = this;\n                var cStyle = cell.style;\n                var alignment = cmd._getAlignment(cell);\n                alignment = alignment.textAlign ? alignment.textAlign + ' ' + alignment.verticalAlign : '';\n                var data = {\n                    width: cStyle.width || cell.width ? parseFloat(cStyle.width || cell.width) : null,\n                    height: cStyle.height || cell.height ? parseFloat(cStyle.height || cell.height) : null,\n                    widthUnit: cmd._getUnit(cStyle.width),\n                    heightUnit: cmd._getUnit(cStyle.height),\n                    cellMargin: cStyle.margin,\n                    cellPadding: cStyle.padding,\n                    alignment: alignment,\n                    bgColor: cStyle.backgroundColor || cell.bgColor,\n                    className: cell.className,\n                    id: cell.id,\n                    borderWidth: cStyle.borderWidth || cell.border,\n                    borderColor: cStyle.borderColor,\n                    borderStyle: cStyle.borderStyle,\n                    wrapText: cStyle.whiteSpace != 'nowrap'\n                };\n                return data;\n            },\n            _getAlignment: function (element, horizontalOnly) {\n                var style = element.style;\n                var hAlign = style.textAlign || element.align || '';\n                if (horizontalOnly) {\n                    return { textAlign: hAlign };\n                }\n                var vAlign = style.verticalAlign || element.vAlign || '';\n                if (hAlign && vAlign) {\n                    return {\n                        textAlign: hAlign,\n                        verticalAlign: vAlign\n                    };\n                }\n                if (!hAlign && vAlign) {\n                    return {\n                        textAlign: 'left',\n                        verticalAlign: vAlign\n                    };\n                }\n                if (hAlign && !vAlign) {\n                    return {\n                        textAlign: hAlign,\n                        verticalAlign: 'top'\n                    };\n                }\n                return {\n                    textAlign: '',\n                    verticalAlign: ''\n                };\n            },\n            _getUnit: function (value) {\n                var unit = (value || '').match(reUnit);\n                return unit ? unit[0] : 'px';\n            },\n            _selectedTable: function (range) {\n                var nodes = dom.filterBy(RangeUtils.nodes(range), dom.htmlIndentSpace, true);\n                return tableFormatFinder.findSuitable(nodes)[0];\n            },\n            _selectedCells: function (range) {\n                var nodes = dom.filterBy(RangeUtils.nodes(range), dom.htmlIndentSpace, true);\n                return cellsFormatFinder.findSuitable(nodes);\n            }\n        });\n        var TableWizardTool = Editor.Tool.extend({\n            command: function (options) {\n                options.insertNewTable = this.options.insertNewTable;\n                return new TableWizardCommand(options);\n            }\n        });\n        var TableWizardEditTool = TableWizardTool.extend({\n            update: function (ui, nodes) {\n                var isFormatted = !tableFormatFinder.isFormatted(nodes);\n                ui.toggleClass('k-state-disabled', isFormatted);\n            }\n        });\n        kendo.ui.editor.TableWizardTool = TableWizardTool;\n        kendo.ui.editor.TableWizardCommand = TableWizardCommand;\n        registerTool('tableWizard', new TableWizardEditTool({\n            command: TableWizardCommand,\n            insertNewTable: false,\n            template: new ToolTemplate({\n                template: EditorUtils.buttonTemplate,\n                title: 'Table Wizard'\n            })\n        }));\n    }(window.kendo.jQuery));\n}, typeof define == 'function' && define.amd ? define : function (a1, a2, a3) {\n    (a3 || a2)();\n}));\n(function (f, define) {\n    define('editor/table-wizard/table-wizard-dialog', ['editor/table-wizard/table-wizard-command'], f);\n}(function () {\n    (function ($, undefined) {\n        var kendo = window.kendo, numericTextBoxSettings = {\n                format: '0',\n                min: 0\n            }, units = [\n                'px',\n                'em'\n            ], borderStyles = [\n                'solid',\n                'dotted',\n                'dashed',\n                'double',\n                'groove',\n                'ridge',\n                'inset',\n                'outset',\n                'initial',\n                'inherit',\n                'none',\n                'hidden'\n            ];\n        var tableAlignmentDropDownSettings = {\n            dataSource: [\n                {\n                    className: 'k-icon k-i-table-align-middle-left',\n                    value: 'left'\n                },\n                {\n                    className: 'k-icon k-i-table-align-middle-center',\n                    value: 'center'\n                },\n                {\n                    className: 'k-icon k-i-table-align-middle-right',\n                    value: 'right'\n                },\n                {\n                    className: 'k-icon k-i-align-remove',\n                    value: ''\n                }\n            ],\n            dataTextField: 'className',\n            dataValueField: 'value',\n            template: '<span class=\\'#: className #\\' title=\\'#: tooltip #\\'></span>',\n            valueTemplate: '<span class=\\'k-align-group #: className #\\' title=\\'#: tooltip #\\'></span>'\n        };\n        var cellAlignmentDropDownSettings = {\n            dataSource: [\n                {\n                    className: 'k-icon k-i-table-align-top-left',\n                    value: 'left top'\n                },\n                {\n                    className: 'k-icon k-i-table-align-top-center',\n                    value: 'center top'\n                },\n                {\n                    className: 'k-icon k-i-table-align-top-right',\n                    value: 'right top'\n                },\n                {\n                    className: 'k-icon k-i-table-align-middle-left',\n                    value: 'left middle'\n                },\n                {\n                    className: 'k-icon k-i-table-align-middle-center',\n                    value: 'center middle'\n                },\n                {\n                    className: 'k-icon k-i-table-align-middle-right',\n                    value: 'right middle'\n                },\n                {\n                    className: 'k-icon k-i-table-align-bottom-left',\n                    value: 'left bottom'\n                },\n                {\n                    className: 'k-icon k-i-table-align-bottom-center',\n                    value: 'center bottom'\n                },\n                {\n                    className: 'k-icon k-i-table-align-bottom-right',\n                    value: 'right bottom'\n                },\n                {\n                    className: 'k-icon k-i-align-remove',\n                    value: ''\n                }\n            ],\n            dataTextField: 'className',\n            dataValueField: 'value',\n            template: '<span class=\\'#: className #\\' title=\\'#: tooltip #\\'></span>',\n            valueTemplate: '<span class=\\'k-align-group #: className #\\' title=\\'#: tooltip #\\'></span>'\n        };\n        var accessibilityAlignmentDropDownSettings = {\n            dataSource: [\n                {\n                    className: 'k-icon k-i-table-align-top-left',\n                    value: 'left top'\n                },\n                {\n                    className: 'k-icon k-i-table-align-top-center',\n                    value: 'center top'\n                },\n                {\n                    className: 'k-icon k-i-table-align-top-right',\n                    value: 'right top'\n                },\n                {\n                    className: 'k-icon k-i-table-align-bottom-left',\n                    value: 'left bottom'\n                },\n                {\n                    className: 'k-icon k-i-table-align-bottom-center',\n                    value: 'center bottom'\n                },\n                {\n                    className: 'k-icon k-i-table-align-bottom-right',\n                    value: 'right bottom'\n                },\n                {\n                    className: 'k-icon k-i-align-remove',\n                    value: ''\n                }\n            ],\n            dataTextField: 'className',\n            dataValueField: 'value',\n            template: '<span class=\\'#: className #\\' title=\\'#: tooltip #\\'></span>',\n            valueTemplate: '<span class=\\'k-align-group #: className #\\' title=\\'#: tooltip #\\'></span>'\n        };\n        var dialogTemplate = '<div class=\"k-editor-dialog k-editor-table-wizard-dialog k-action-window k-popup-edit-form\">' + '<div class=\"k-edit-form-container\">' + '<div id=\"k-table-wizard-tabs\" class=\"k-root-tabs\">' + '<ul>' + '<li class=\"k-state-active\">#= messages.tableTab #</li>' + '<li>#= messages.cellTab #</li>' + '<li>#= messages.accessibilityTab #</li>' + '</ul>' + '<div id=\"k-table-properties\">' + '<div class=\"k-edit-label\">' + '<label for=\"k-editor-table-width\">#= messages.width #</label>' + '</div>' + '<div class=\"k-edit-field\">' + '<input type=\"numeric\" id=\"k-editor-table-width\" />' + '<input id=\"k-editor-table-width-type\" aria-label=\"#= messages.units #\" />' + '</div>' + '<div class=\"k-edit-label\">' + '<label for=\"k-editor-table-height\">#= messages.height #</label>' + '</div>' + '<div class=\"k-edit-field\">' + '<input type=\"numeric\" id=\"k-editor-table-height\" />' + '<input id=\"k-editor-table-height-type\" aria-label=\"#= messages.units #\" />' + '</div>' + '<div class=\"k-edit-label\">' + '<label for=\"k-editor-table-columns\">#= messages.columns #</label>' + '</div>' + '<div class=\"k-edit-field\">' + '<input type=\"numeric\" id=\"k-editor-table-columns\" />' + '</div>' + '<div class=\"k-edit-label\">' + '<label for=\"k-editor-table-rows\">#= messages.rows #</label>' + '</div>' + '<div class=\"k-edit-field\">' + '<input type=\"numeric\" id=\"k-editor-table-rows\" />' + '</div>' + '<div class=\"k-edit-label\">' + '<label for=\"k-editor-table-cell-spacing\">#= messages.cellSpacing #</label>' + '</div>' + '<div class=\"k-edit-field\">' + '<input type=\"numeric\" id=\"k-editor-table-cell-spacing\" />' + '</div>' + '<div class=\"k-edit-label\">' + '<label for=\"k-editor-table-cell-padding\">#= messages.cellPadding #</label>' + '</div>' + '<div class=\"k-edit-field\">' + '<input type=\"numeric\" id=\"k-editor-table-cell-padding\" />' + '</div>' + '<div class=\"k-edit-label\">' + '<label for=\"k-editor-table-alignment\">#= messages.alignment #</label>' + '</div>' + '<div class=\"k-edit-field\">' + '<input id=\"k-editor-table-alignment\" class=\"k-align\" />' + '</div>' + '<div class=\"k-edit-label\">' + '<label for=\"k-editor-table-bg\">#= messages.background #</label>' + '</div>' + '<div class=\"k-edit-field\">' + '<input id=\"k-editor-table-bg\" />' + '</div>' + '<div class=\"k-edit-label\">' + '<label for=\"k-editor-css-class\">#= messages.cssClass #</label>' + '</div>' + '<div class=\"k-edit-field\">' + '<input id=\"k-editor-css-class\" class=\"k-input k-textbox\" type=\"text\" />' + '</div>' + '<div class=\"k-edit-label\">' + '<label for=\"k-editor-id\">#= messages.id #</label>' + '</div>' + '<div class=\"k-edit-field\">' + '<input id=\"k-editor-id\" class=\"k-input k-textbox\" type=\"text\" />' + '</div>' + '<div class=\"k-edit-label\">' + '<label for=\"k-editor-border-width\">#= messages.border #</label>' + '</div>' + '<div class=\"k-edit-field\">' + '<input type=\"numeric\" id=\"k-editor-border-width\" />' + '<input id=\"k-editor-border-color\" />' + '</div>' + '<div class=\"k-edit-label\">' + '<label for=\"k-editor-border-style\">#= messages.borderStyle #</label>' + '</div>' + '<div class=\"k-edit-field\">' + '<input id=\"k-editor-border-style\" />' + '</div>' + '<div class=\"k-edit-label\">&nbsp;</div>' + '<div class=\"k-edit-field\">' + '<input id=\"k-editor-collapse-borders\" type=\"checkbox\" class=\"k-checkbox\" />' + '<label for=\"k-editor-collapse-borders\" class=\"k-checkbox-label\">#= messages.collapseBorders #</label>' + '</div>' + '</div>' + '<div id=\"k-cell-properties\">' + '<div class=\"k-edit-field\">' + '<input id=\"k-editor-selectAllCells\" type=\"checkbox\" class=\"k-checkbox\" />' + '<label for=\"k-editor-selectAllCells\" class=\"k-checkbox-label\">#= messages.selectAllCells #</label>' + '</div>' + '<div class=\"k-edit-label\">' + '<label for=\"k-editor-cell-width\">#= messages.width #</label>' + '</div>' + '<div class=\"k-edit-field\">' + '<input type=\"numeric\" id=\"k-editor-cell-width\" />' + '<input id=\"k-editor-cell-width-type\" aria-label=\"#= messages.units #\" />' + '</div>' + '<div class=\"k-edit-label\">' + '<label for=\"k-editor-cell-height\">#= messages.height #</label>' + '</div>' + '<div class=\"k-edit-field\">' + '<input type=\"numeric\" id=\"k-editor-cell-height\" />' + '<input id=\"k-editor-cell-height-type\" aria-label=\"#= messages.units #\" />' + '</div>' + '<div class=\"k-edit-label\">' + '<label for=\"k-editor-table-cell-margin\">#= messages.cellMargin #</label>' + '</div>' + '<div class=\"k-edit-field\">' + '<input type=\"numeric\" id=\"k-editor-table-cell-margin\" />' + '</div>' + '<div class=\"k-edit-label\">' + '<label for=\"k-editor-table-cells-padding\">#= messages.cellPadding #</label>' + '</div>' + '<div class=\"k-edit-field\">' + '<input type=\"numeric\" id=\"k-editor-table-cells-padding\" />' + '</div>' + '<div class=\"k-edit-label\">' + '<label for=\"k-editor-cell-alignment\">#= messages.alignment #</label>' + '</div>' + '<div class=\"k-edit-field\">' + '<input id=\"k-editor-cell-alignment\" class=\"k-align\" />' + '</div>' + '<div class=\"k-edit-label\">' + '<label for=\"k-editor-cell-bg\">#= messages.background #</label>' + '</div>' + '<div class=\"k-edit-field\">' + '<input id=\"k-editor-cell-bg\" />' + '</div>' + '<div class=\"k-edit-label\">' + '<label for=\"k-editor-cell-css-class\">#= messages.cssClass #</label>' + '</div>' + '<div class=\"k-edit-field\">' + '<input id=\"k-editor-cell-css-class\" class=\"k-input k-textbox\" type=\"text\" />' + '</div>' + '<div class=\"k-edit-label\">' + '<label for=\"k-editor-cell-id\">#= messages.id #</label>' + '</div>' + '<div class=\"k-edit-field\">' + '<input id=\"k-editor-cell-id\" class=\"k-input k-textbox\" type=\"text\" />' + '</div>' + '<div class=\"k-edit-label\">' + '<label for=\"k-editor-cell-border-width\">#= messages.border #</label>' + '</div>' + '<div class=\"k-edit-field\">' + '<input type=\"numeric\" id=\"k-editor-cell-border-width\" />' + '<input id=\"k-editor-cell-border-color\" />' + '</div>' + '<div class=\"k-edit-label\">' + '<label for=\"k-editor-cell-border-style\">#= messages.borderStyle #</label>' + '</div>' + '<div class=\"k-edit-field\">' + '<input id=\"k-editor-cell-border-style\" />' + '</div>' + '<div class=\"k-edit-label\">&nbsp;</div>' + '<div class=\"k-edit-field\">' + '<input id=\"k-editor-wrap-text\" type=\"checkbox\" class=\"k-checkbox\" />' + '<label for=\"k-editor-wrap-text\" class=\"k-checkbox-label\">#= messages.wrapText #</label>' + '</div>' + '</div>' + '<div id=\"k-accessibility-properties\">' + '<div class=\"k-edit-label\">' + '<label for=\"k-editor-table-caption\">#= messages.caption #</label>' + '</div>' + '<div class=\"k-edit-field\">' + '<input id=\"k-editor-table-caption\" class=\"k-input k-textbox\" type=\"text\" />' + '</div>' + '<div class=\"k-edit-label\">' + '<label for=\"k-editor-accessibility-alignment\">#= messages.alignment #</label>' + '</div>' + '<div class=\"k-edit-field\">' + '<input id=\"k-editor-accessibility-alignment\" class=\"k-align\" />' + '</div>' + '<div class=\"k-edit-label\">' + '<label for=\"k-editor-accessibility-summary\">#= messages.summary #</label>' + '</div>' + '<div class=\"k-edit-field\">' + '<textarea id=\"k-editor-accessibility-summary\" class=\"k-input k-textbox\"></textarea>' + '</div>' + '<div class=\"k-edit-label\">&nbsp;</div>' + '<div class=\"k-edit-field\">' + '<input id=\"k-editor-cells-headers\" type=\"checkbox\" class=\"k-checkbox\" />' + '<label for=\"k-editor-cells-headers\" class=\"k-checkbox-label\">#= messages.associateCellsWithHeaders #</label>' + '</div>' + '</div>' + '</div>' + '<div class=\"k-edit-buttons k-state-default\">' + '<button class=\"k-button k-primary k-dialog-ok\">#= messages.dialogOk #</button>' + '<button class=\"k-button k-dialog-close\">#= messages.dialogCancel #</button>' + '</div>' + '</div>' + '</div>';\n        var TableWizardDialog = kendo.Class.extend({\n            init: function (options) {\n                this.options = options;\n            },\n            open: function () {\n                var that = this, options = that.options, dialogOptions = options.dialogOptions, tableData = options.table, dialog, messages = options.messages, isIE = kendo.support.browser.msie;\n                function close(e) {\n                    e.preventDefault();\n                    that.destroy();\n                    dialog.destroy();\n                }\n                function okHandler(e) {\n                    that.collectDialogValues(tableData);\n                    close(e);\n                    if (that.change) {\n                        that.change();\n                    }\n                    options.closeCallback(tableData);\n                }\n                function closeHandler(e) {\n                    close(e);\n                    options.closeCallback();\n                }\n                dialogOptions.close = closeHandler;\n                dialogOptions.title = messages.tableWizard;\n                dialogOptions.visible = options.visible;\n                dialog = $(that._dialogTemplate(messages)).appendTo(document.body).kendoWindow(dialogOptions).closest('.k-window').toggleClass('k-rtl', options.isRtl).end().find('.k-dialog-ok').click(okHandler).end().find('.k-dialog-close').click(closeHandler).end().data('kendoWindow');\n                var element = dialog.element;\n                that._initTabStripComponent(element);\n                that._initTableViewComponents(element, tableData);\n                that._initCellViewComponents(element, tableData);\n                that._initAccessibilityViewComponents(element, tableData);\n                dialog.center();\n                dialog.open();\n                if (isIE) {\n                    var dialogHeight = element.closest('.k-window').height();\n                    element.css('max-height', dialogHeight);\n                }\n            },\n            _initTabStripComponent: function (element) {\n                var components = this.components = {};\n                components.tabStrip = element.find('#k-table-wizard-tabs').kendoTabStrip({ animation: false }).data('kendoTabStrip');\n            },\n            collectDialogValues: function () {\n                var that = this;\n                var data = that.options.table;\n                that._collectTableViewValues(data);\n                that._collectCellViewValues(data);\n                that._collectAccessibilityViewValues(data);\n            },\n            _collectTableViewValues: function (tableData) {\n                var tableView = this.components.tableView;\n                var tableProperties = tableData.tableProperties;\n                tableProperties.width = tableView.width.value();\n                tableProperties.widthUnit = tableView.widthUnit.value();\n                tableProperties.height = tableView.height.value();\n                tableProperties.columns = tableView.columns.value();\n                tableProperties.rows = tableView.rows.value();\n                tableProperties.heightUnit = tableView.heightUnit.value();\n                tableProperties.cellSpacing = tableView.cellSpacing.value();\n                tableProperties.cellPadding = tableView.cellPadding.value();\n                tableProperties.alignment = tableView.alignment.value();\n                tableProperties.bgColor = tableView.bgColor.value();\n                tableProperties.className = tableView.className.value;\n                tableProperties.id = tableView.id.value;\n                tableProperties.borderWidth = tableView.borderWidth.value();\n                tableProperties.borderColor = tableView.borderColor.value();\n                tableProperties.borderStyle = tableView.borderStyle.value();\n                tableProperties.collapseBorders = tableView.collapseBorders.checked;\n            },\n            _collectCellViewValues: function (table) {\n                var cellData = table.cellProperties = {};\n                var cellView = this.components.cellView;\n                cellData.selectAllCells = cellView.selectAllCells.checked;\n                cellData.width = cellView.width.value();\n                cellData.widthUnit = cellView.widthUnit.value();\n                cellData.height = cellView.height.value();\n                cellData.heightUnit = cellView.heightUnit.value();\n                cellData.cellMargin = cellView.cellMargin.value();\n                cellData.cellPadding = cellView.cellPadding.value();\n                cellData.alignment = cellView.alignment.value();\n                cellData.bgColor = cellView.bgColor.value();\n                cellData.className = cellView.className.value;\n                cellData.id = cellView.id.value;\n                cellData.borderWidth = cellView.borderWidth.value();\n                cellData.borderColor = cellView.borderColor.value();\n                cellData.borderStyle = cellView.borderStyle.value();\n                cellData.wrapText = cellView.wrapText.checked;\n                if (!cellData.width) {\n                    cellData.selectAllCells = true;\n                    cellData.width = 100 / table.tableProperties.columns;\n                    cellData.widthUnit = '%';\n                }\n            },\n            _collectAccessibilityViewValues: function (table) {\n                var tableProperties = table.tableProperties;\n                var accessibilityView = this.components.accessibilityView;\n                tableProperties.captionContent = accessibilityView.captionContent.value;\n                tableProperties.captionAlignment = accessibilityView.captionAlignment.value();\n                tableProperties.summary = accessibilityView.summary.value;\n                tableProperties.cellsWithHeaders = accessibilityView.cellsWithHeaders.checked;\n            },\n            _addUnit: function (units, value) {\n                if (value && $.inArray(value, units) == -1) {\n                    units.push(value);\n                }\n            },\n            _initTableViewComponents: function (element, table) {\n                var components = this.components;\n                var tableView = components.tableView = {};\n                var tableProperties = table.tableProperties = table.tableProperties || {};\n                tableProperties.borderStyle = tableProperties.borderStyle || '';\n                this._addUnit(units, tableProperties.widthUnit);\n                this._addUnit(units, tableProperties.heightUnit);\n                this._initNumericTextbox(element.find('#k-editor-table-width'), 'width', tableProperties, tableView);\n                this._initNumericTextbox(element.find('#k-editor-table-height'), 'height', tableProperties, tableView);\n                this._initNumericTextbox(element.find('#k-editor-table-columns'), 'columns', tableProperties, tableView, {\n                    min: 1,\n                    value: 4\n                });\n                this._initNumericTextbox(element.find('#k-editor-table-rows'), 'rows', tableProperties, tableView, {\n                    min: 1,\n                    value: 4\n                });\n                this._initDropDownList(element.find('#k-editor-table-width-type'), 'widthUnit', tableProperties, tableView, units);\n                this._initDropDownList(element.find('#k-editor-table-height-type'), 'heightUnit', tableProperties, tableView, units);\n                this._initNumericTextbox(element.find('#k-editor-table-cell-spacing'), 'cellSpacing', tableProperties, tableView);\n                this._initNumericTextbox(element.find('#k-editor-table-cell-padding'), 'cellPadding', tableProperties, tableView);\n                this._initTableAlignmentDropDown(element.find('#k-editor-table-alignment'), tableProperties);\n                this._initColorPicker(element.find('#k-editor-table-bg'), 'bgColor', tableProperties, tableView);\n                this._initInput(element.find('#k-editor-css-class'), 'className', tableProperties, tableView);\n                this._initInput(element.find('#k-editor-id'), 'id', tableProperties, tableView);\n                this._initNumericTextbox(element.find('#k-editor-border-width'), 'borderWidth', tableProperties, tableView);\n                this._initColorPicker(element.find('#k-editor-border-color'), 'borderColor', tableProperties, tableView);\n                this._initDropDownList(element.find('#k-editor-border-style'), 'borderStyle', tableProperties, tableView, borderStyles);\n                this._initCheckbox(element.find('#k-editor-collapse-borders'), 'collapseBorders', tableProperties, tableView);\n            },\n            _initCellViewComponents: function (element, table) {\n                var components = this.components;\n                var cellView = components.cellView = {};\n                table.selectedCells = table.selectedCells = table.selectedCells || [];\n                var cellProperties = table.selectedCells[0] || {\n                    borderStyle: '',\n                    wrapText: true\n                };\n                this._addUnit(units, cellProperties.widthUnit);\n                this._addUnit(units, cellProperties.heightUnit);\n                this._initCheckbox(element.find('#k-editor-selectAllCells'), 'selectAllCells', table.tableProperties, cellView);\n                this._initNumericTextbox(element.find('#k-editor-cell-width'), 'width', cellProperties, cellView);\n                this._initNumericTextbox(element.find('#k-editor-cell-height'), 'height', cellProperties, cellView);\n                this._initDropDownList(element.find('#k-editor-cell-width-type'), 'widthUnit', cellProperties, cellView, units);\n                this._initDropDownList(element.find('#k-editor-cell-height-type'), 'heightUnit', cellProperties, cellView, units);\n                this._initNumericTextbox(element.find('#k-editor-table-cell-margin'), 'cellMargin', cellProperties, cellView);\n                this._initNumericTextbox(element.find('#k-editor-table-cells-padding'), 'cellPadding', cellProperties, cellView);\n                this._initCellAlignmentDropDown(element.find('#k-editor-cell-alignment'), cellProperties);\n                this._initColorPicker(element.find('#k-editor-cell-bg'), 'bgColor', cellProperties, cellView);\n                this._initInput(element.find('#k-editor-cell-css-class'), 'className', cellProperties, cellView);\n                this._initInput(element.find('#k-editor-cell-id'), 'id', cellProperties, cellView);\n                this._initNumericTextbox(element.find('#k-editor-cell-border-width'), 'borderWidth', cellProperties, cellView);\n                this._initColorPicker(element.find('#k-editor-cell-border-color'), 'borderColor', cellProperties, cellView);\n                this._initDropDownList(element.find('#k-editor-cell-border-style'), 'borderStyle', cellProperties, cellView, borderStyles);\n                this._initCheckbox(element.find('#k-editor-wrap-text'), 'wrapText', cellProperties, cellView);\n            },\n            _initAccessibilityViewComponents: function (element, table) {\n                var components = this.components;\n                var accessibilityView = components.accessibilityView = {};\n                var tableProperties = table.tableProperties;\n                this._initInput(element.find('#k-editor-table-caption'), 'captionContent', tableProperties, accessibilityView);\n                this._initAccessibilityAlignmentDropDown(element.find('#k-editor-accessibility-alignment'), tableProperties);\n                this._initInput(element.find('#k-editor-accessibility-summary'), 'summary', tableProperties, accessibilityView);\n                this._initCheckbox(element.find('#k-editor-cells-headers'), 'cellsWithHeaders', tableProperties, accessibilityView);\n            },\n            _initNumericTextbox: function (element, property, data, storage, settings) {\n                var component = storage[property] = element.kendoNumericTextBox(settings ? $.extend({}, numericTextBoxSettings, settings) : numericTextBoxSettings).data('kendoNumericTextBox');\n                if (property in data) {\n                    component.value(parseInt(data[property], 10));\n                }\n            },\n            _initDropDownList: function (element, property, data, storage, dataSource) {\n                var component = storage[property] = element.kendoDropDownList({ dataSource: dataSource }).data('kendoDropDownList');\n                this._setComponentValue(component, data, property);\n            },\n            _initTableAlignmentDropDown: function (element, data) {\n                var messages = this.options.messages;\n                var tableView = this.components.tableView;\n                var dataSource = tableAlignmentDropDownSettings.dataSource;\n                dataSource[0].tooltip = messages.alignLeft;\n                dataSource[1].tooltip = messages.alignCenter;\n                dataSource[2].tooltip = messages.alignRight;\n                dataSource[3].tooltip = messages.alignRemove;\n                this._initAlignmentDropDown(element, tableAlignmentDropDownSettings, 'alignment', data, tableView);\n            },\n            _initCellAlignmentDropDown: function (element, data) {\n                var messages = this.options.messages;\n                var cellView = this.components.cellView;\n                var dataSource = cellAlignmentDropDownSettings.dataSource;\n                dataSource[0].tooltip = messages.alignLeftTop;\n                dataSource[1].tooltip = messages.alignCenterTop;\n                dataSource[2].tooltip = messages.alignRightTop;\n                dataSource[3].tooltip = messages.alignLeftMiddle;\n                dataSource[4].tooltip = messages.alignCenterMiddle;\n                dataSource[5].tooltip = messages.alignRightMiddle;\n                dataSource[6].tooltip = messages.alignLeftBottom;\n                dataSource[7].tooltip = messages.alignCenterBottom;\n                dataSource[8].tooltip = messages.alignRightBottom;\n                dataSource[9].tooltip = messages.alignRemove;\n                this._initAlignmentDropDown(element, cellAlignmentDropDownSettings, 'alignment', data, cellView);\n            },\n            _initAccessibilityAlignmentDropDown: function (element, data) {\n                var messages = this.options.messages;\n                var accessibilityView = this.components.accessibilityView;\n                var dataSource = accessibilityAlignmentDropDownSettings.dataSource;\n                dataSource[0].tooltip = messages.alignLeftTop;\n                dataSource[1].tooltip = messages.alignCenterTop;\n                dataSource[2].tooltip = messages.alignRightTop;\n                dataSource[3].tooltip = messages.alignLeftBottom;\n                dataSource[4].tooltip = messages.alignCenterBottom;\n                dataSource[5].tooltip = messages.alignRightBottom;\n                dataSource[6].tooltip = messages.alignRemove;\n                this._initAlignmentDropDown(element, accessibilityAlignmentDropDownSettings, 'captionAlignment', data, accessibilityView);\n            },\n            _initAlignmentDropDown: function (element, settings, name, data, storage) {\n                var component = storage[name] = element.kendoDropDownList(settings).data('kendoDropDownList');\n                component.list.addClass('k-align').css('width', '110px');\n                this._setComponentValue(component, data, name);\n            },\n            _setComponentValue: function (component, data, property) {\n                if (property in data) {\n                    component.value(data[property]);\n                }\n            },\n            _initColorPicker: function (element, property, data, storage) {\n                var component = storage[property] = element.kendoColorPicker({\n                    buttons: false,\n                    clearButton: true\n                }).data('kendoColorPicker');\n                if (data[property]) {\n                    component.value(data[property]);\n                }\n            },\n            _initInput: function (element, property, data, storage) {\n                var component = storage[property] = element.get(0);\n                if (property in data) {\n                    component.value = data[property];\n                }\n            },\n            _initCheckbox: function (element, property, data, storage) {\n                var component = storage[property] = element.get(0);\n                if (property in data) {\n                    component.checked = data[property];\n                }\n            },\n            destroy: function () {\n                this._destroyComponents(this.components.tableView);\n                this._destroyComponents(this.components.cellView);\n                this._destroyComponents(this.components.accessibilityView);\n                this._destroyComponents(this.components);\n                delete this.components;\n            },\n            _destroyComponents: function (components) {\n                for (var widget in components) {\n                    if (components[widget].destroy) {\n                        components[widget].destroy();\n                    }\n                    delete components[widget];\n                }\n            },\n            _dialogTemplate: function (messages) {\n                return kendo.template(dialogTemplate)({ messages: messages });\n            }\n        });\n        kendo.ui.editor.TableWizardDialog = TableWizardDialog;\n    }(window.kendo.jQuery));\n}, typeof define == 'function' && define.amd ? define : function (a1, a2, a3) {\n    (a3 || a2)();\n}));\n(function (f, define) {\n    define('kendo.editor', [\n        'kendo.combobox',\n        'kendo.dropdownlist',\n        'kendo.resizable',\n        'kendo.window',\n        'kendo.colorpicker',\n        'kendo.imagebrowser',\n        'kendo.tabstrip',\n        'kendo.numerictextbox',\n        'util/undoredostack',\n        'editor/main',\n        'editor/dom',\n        'editor/serializer',\n        'editor/range',\n        'editor/system',\n        'editor/inlineformat',\n        'editor/formatblock',\n        'editor/linebreak',\n        'editor/lists',\n        'editor/link',\n        'editor/file',\n        'editor/image',\n        'editor/components',\n        'editor/indent',\n        'editor/viewhtml',\n        'editor/formatting',\n        'editor/toolbar',\n        'editor/tables',\n        'editor/export',\n        'editor/import',\n        'editor/resizing/column-resizing',\n        'editor/resizing/row-resizing',\n        'editor/resizing/table-resizing',\n        'editor/resizing/table-resize-handle',\n        'editor/immutables',\n        'editor/table-wizard/table-wizard-command',\n        'editor/table-wizard/table-wizard-dialog'\n    ], f);\n}(function () {\n    var __meta__ = {\n        id: 'editor',\n        name: 'Editor',\n        category: 'web',\n        description: 'Rich text editor component',\n        depends: [\n            'combobox',\n            'dropdownlist',\n            'window',\n            'colorpicker'\n        ],\n        features: [\n            {\n                id: 'editor-imagebrowser',\n                name: 'Image Browser',\n                description: 'Support for uploading and inserting images',\n                depends: ['imagebrowser']\n            },\n            {\n                id: 'editor-resizable',\n                name: 'Resize handle',\n                description: 'Support for resizing the content area via a resize handle',\n                depends: ['resizable']\n            },\n            {\n                id: 'editor-tablewizard',\n                name: 'Table wizard dialog',\n                description: 'Support for table properties configuration',\n                depends: [\n                    'tabstrip',\n                    'button',\n                    'numerictextbox'\n                ]\n            },\n            {\n                id: 'editor-pdf-export',\n                name: 'PDF export',\n                description: 'Export Editor content as PDF',\n                depends: [\n                    'pdf',\n                    'drawing'\n                ]\n            }\n        ]\n    };\n    return window.kendo;\n}, typeof define == 'function' && define.amd ? define : function (a1, a2, a3) {\n    (a3 || a2)();\n}));"]}